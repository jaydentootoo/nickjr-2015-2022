var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

function entitlementLoaded(){TVEAuth.Providers.loadWhiteList(),TVEAuth.Auth.set(),TVEAuth.erase(["LOGOUT_COMPLETED","login_Started"])}function setToken(a,b){TVEAuth.Auth.setToken(a,b)}function tokenRequestFailed(a,b){TVEAuth.Auth.tokenRequestFailed(a,b)}function setAuthenticationStatus(a,b){TVEAuth.get("isSetANStatusSkip")?TVEAuth.erase("isSetANStatusSkip"):"checkLogout"===TVEAuth.get("onLoad")?TVEAuth.Auth.onLoad():TVEAuth.Auth.setANStatus(a,b),TVEAuth.Overlay.hide()}function createIFrame(a,b){TVEAuth.Overlay.createIFrame(a,b)}function destroyIFrame(){}function sendTrackingData(a,b){TVEAuth.Auth.dataTracker(a,b)}function setConfig(){}function displayProviderDialog(a){if(null!=a){var b=TVEAuth.Providers;switch(b.list=a,b.verifyWhiteList(a),TVEAuth.Helper){case"getAN":case"getAZ":TVEAuth.Overlay.show("selectProvider");break;case"getPL":TVEAuth.Callback.providersListReceived(b.list)}}else TVEAuth.Error.showMess("displayProviders")}function selectedProvider(a){var b;"true"==TVEAuth.get("ELVIS_ISLOGGEDIN")&&(a.MVPD=TVEAuth.get("CURRENT_ELVIS_MVPD_ID"),a.AE_State="User Authenticated"),b=TVEAuth.baseUrl+TVEAuth.rID.toLowerCase()+"/providerInfo/"+a.MVPD,TVEAuth.MVPD_ID=a.MVPD,a.MVPD?jQuery.ajax({url:b,data:{},dataType:"jsonp",jsonpCallback:"TVEAuth.Providers.getMvpdCompleted"}):TVEAuth.Providers.getMvpdCompleted(null)}function Swipe(a,b){function c(){p=t.children,s=p.length,p.length<2&&(b.continuous=!1),o.transitions&&b.continuous&&p.length<3&&(t.appendChild(p[0].cloneNode(!0)),t.appendChild(t.children[1].cloneNode(!0)),p=t.children),q=new Array(p.length),r=a.getBoundingClientRect().width||a.offsetWidth,t.style.width=p.length*r+"px";for(var c=p.length;c--;){var d=p[c];d.style.width=r+"px",d.setAttribute("data-index",c),o.transitions&&(d.style.left=c*-r+"px",h(c,u>c?-r:c>u?r:0,0))}b.continuous&&o.transitions&&(h(f(u-1),-r,0),h(f(u+1),r,0)),o.transitions||(t.style.left=u*-r+"px"),a.style.visibility="visible"}function d(){b.continuous?g(u-1):u&&g(u-1)}function e(){b.continuous?g(u+1):u<p.length-1&&g(u+1)}function f(a){return(p.length+a%p.length)%p.length}function g(a,c){if(u!=a){if(o.transitions){var d=Math.abs(u-a)/(u-a);if(b.continuous){var e=d;d=-q[f(a)]/r,d!==e&&(a=-d*p.length+a)}for(var g=Math.abs(u-a)-1;g--;)h(f((a>u?a:u)-g-1),r*d,0);a=f(a),h(u,r*d,c||v),h(a,0,c||v),b.continuous&&h(f(a-d),-(r*d),0)}else a=f(a),j(u*-r,a*-r,c||v);u=a,n(b.callback&&b.callback(u,p[u]))}}function h(a,b,c){i(a,b,c),q[a]=b}function i(a,b,c){var d=p[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(t.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(t.style.left=c+"px",y&&k(),b.transitionEnd&&b.transitionEnd.call(event,u,p[u]),void clearInterval(f)):void(t.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){w=setTimeout(e,y)}function l(){y=0,clearTimeout(w)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var p,q,r,s,t=a.children[0];b=b||{};var u=parseInt(b.startSlide,10)||0,v=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0;var w,x,y=b.auto||0,z={},A={},B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":n(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];z={x:b.pageX,y:b.pageY,time:+new Date},x=void 0,A={},t.addEventListener("touchmove",this,!1),t.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];A={x:c.pageX-z.x,y:c.pageY-z.y},"undefined"==typeof x&&(x=!!(x||Math.abs(A.x)<Math.abs(A.y))),x||(a.preventDefault(),l(),b.continuous?(i(f(u-1),A.x+q[f(u-1)],0),i(u,A.x+q[u],0),i(f(u+1),A.x+q[f(u+1)],0)):(A.x=A.x/(!u&&A.x>0||u==p.length-1&&A.x<0?Math.abs(A.x)/r+1:1),i(u-1,A.x+q[u-1],0),i(u,A.x+q[u],0),i(u+1,A.x+q[u+1],0)))}},end:function(a){var c=+new Date-z.time,d=Number(c)<250&&Math.abs(A.x)>20||Math.abs(A.x)>r/2,e=!u&&A.x>0||u==p.length-1&&A.x<0;b.continuous&&(e=!1);var g=A.x<0;x||(d&&!e?(g?(b.continuous?(h(f(u-1),-r,0),h(f(u+2),r,0)):h(u-1,-r,0),h(u,q[u]-r,v),h(f(u+1),q[f(u+1)]-r,v),u=f(u+1)):(b.continuous?(h(f(u+1),r,0),h(f(u-2),-r,0)):h(u+1,r,0),h(u,q[u]+r,v),h(f(u-1),q[f(u-1)]+r,v),u=f(u-1)),b.callback&&b.callback(u,p[u])):b.continuous?(h(f(u-1),-r,v),h(u,0,v),h(f(u+1),r,v)):(h(u-1,-r,v),h(u,0,v),h(u+1,r,v))),t.removeEventListener("touchmove",B,!1),t.removeEventListener("touchend",B,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==u&&(y&&k(),b.transitionEnd&&b.transitionEnd.call(a,u,p[u]))}};return c(),y&&k(),o.addEventListener?(o.touch&&t.addEventListener("touchstart",B,!1),o.transitions&&(t.addEventListener("webkitTransitionEnd",B,!1),t.addEventListener("msTransitionEnd",B,!1),t.addEventListener("oTransitionEnd",B,!1),t.addEventListener("otransitionend",B,!1),t.addEventListener("transitionend",B,!1)),window.addEventListener("resize",B,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return u},getNumSlides:function(){return s},kill:function(){l(),t.style.width="",t.style.left="";for(var a=p.length;a--;){var b=p[a];b.style.width="",b.style.left="",o.transitions&&i(a,0,0)}o.addEventListener?(t.removeEventListener("touchstart",B,!1),t.removeEventListener("webkitTransitionEnd",B,!1),t.removeEventListener("msTransitionEnd",B,!1),t.removeEventListener("oTransitionEnd",B,!1),t.removeEventListener("otransitionend",B,!1),t.removeEventListener("transitionend",B,!1),window.removeEventListener("resize",B,!1)):window.onresize=null}}}}requirejs.config({paths:{jquery:"vendor/jquery-1.10.1.min","jquery.ui":"vendor/jquery-ui-1.10.4.custom.min",Q:"vendor/q.min",_:"vendor/lodash.min",backbone:"vendor/backbone",handlebars:"vendor/handlebars",marionette:"vendor/backbone.marionette",dust:"vendor/dust-full.min","dust-helpers":"vendor/dust-helpers.min","underscore.string":"vendor/underscore.string.min","jquery.transit":"vendor/jquery.transit","jquery.touchSwipe":"vendor/jquery.touchSwipe.min","jquery.kinetic":"vendor/jquery.kinetic.min","jquery.mousewheel":"vendor/jquery.mousewheel","jquery.sidr":"vendor/jquery.sidr.min",waypoints:"vendor/jquery.waypoints.min","waypoints.sticky":"vendor/jquery.waypoints.sticky.min",isoroutes:"vendor/isoroutes",routes:"build/iso-routes",breakpoints:"build/breakpoints","app-templates":"build/frontend-templates","app-resource-base":"app/app-resource-base","player.gui":"vendor/player.gui","mtvn.util":"vendor/mtvn.util",TVEAuth:"vendor/tveauth",flambe:"vendor/flambe",dnt:"vendor/dnt",swfobject:"vendor/swfobject",jsembed:"vendor/jsembed",UnityObject:"vendor/UnityObject",adloader:"vendor/adloader",purl:"vendor/purl",jrumble:"vendor/jquery.jrumble.1.3.min",CanvasLoader:"vendor/heartcode-canvasloader",bootstrap:"vendor/bootstrap.min","jquery.sm4":"vendor/sm4","jquery.cookie":"vendor/jquery.cookie",yetiNode:"vendor/yeti-marionette","jquery.XDomainRequest":"vendor/jquery.XDomainRequest","nick.poll":"vendor/nick.poll",fullscreen:"vendor/fullscreen",iscroll:"vendor/iscroll-probe.min","iscroll-infinite":"vendor/iscroll-infinite",soundjs:"vendor/soundjs-0.5.2.min",fastclick:"vendor/fastclick"},map:{"*":{Marionette:"marionette"}},shim:{backbone:{deps:["jquery","_"],exports:"Backbone"},marionette:{deps:["jquery","_","backbone"],exports:"Marionette"},dust:{exports:"dust"},"dust-helpers":{deps:["dust"]},templates:{deps:["dust"],exports:"templates"},"jquery.transit":{deps:["jquery"],exports:"$"},waypoints:{deps:["jquery"],exports:"$"},"waypoints.sticky":{deps:["waypoints"]},"player.gui":{deps:["backbone","jquery","_","handlebars"],exports:"GUI"},"jquery.ui":{deps:["jquery"],exports:"$"},TVEAuth:{deps:["jquery"],exports:"TVEAuth"},swfobject:{exports:"swfobject"},jsembed:{exports:"jsembed"},UnityObject:{exports:"UnityObject"},adloader:{exports:"AdLoader"},purl:{exports:"purl"},bootstrap:{deps:["jquery"],exports:"bootstrap"},"jquery.sm4":{deps:["jquery"],exports:"$"},"jquery.cookie":{deps:["jquery"],exports:"$"},"jquery.XDomainRequest":{deps:["jquery"],exports:"$"},fullscreen:{deps:["backbone","_"],exports:"FullScreen"},iscroll:{exports:"IScroll"},"iscroll-infinite":{exports:"IScroll"},soundjs:{exports:"createjs"}}}),define("config",function(){}),define("app/config/audio",{options:{root:"/kids-assets/nickjr/nickjr-web/sound/"},files:[{id:"nav-click",path:"click.mp3"},{id:"friends",path:"friends.mp3"},{id:"page-vo-games",path:"games.mp3"},{id:"page-vo-video",path:"videos.mp3"},{id:"stream-tile-click",path:"tilePopSound.mp3"},{id:"page-error",path:"404.mp3"},{id:"alpha-tap",path:"alphaButtonTrigger.mp3"},{id:"alpha-change",path:"alphaButtonScaleUp.mp3"},{id:"grownups-message",path:"tve.mp3"}]}),define("app/config/index",["app/config/audio"],function(a){return{audio:a}}),function(a,b){function c(a){var b=a.length,c=ka.type(a);return ka.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=za[a]={};return ka.each(a.match(ma)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ka.acceptData(a)){var f,g,h=ka.expando,i=a.nodeType,j=i?ka.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=ba.pop()||ka.guid++:h),j[k]||(j[k]=i?{}:{toJSON:ka.noop}),("object"==typeof c||"function"==typeof c)&&(e?j[k]=ka.extend(j[k],c):j[k].data=ka.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[ka.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[ka.camelCase(c)])):f=g,f}}function f(a,b,c){if(ka.acceptData(a)){var d,e,f=a.nodeType,g=f?ka.cache:a,i=f?a[ka.expando]:ka.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){ka.isArray(b)?b=b.concat(ka.map(b,ka.camelCase)):b in d?b=[b]:(b=ka.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!h(d):!ka.isEmptyObject(d))return}(c||(delete g[i].data,h(g[i])))&&(f?ka.cleanData([a],!0):ka.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Ba,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Aa.test(d)?ka.parseJSON(d):d}catch(f){}ka.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ka.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return Y.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(ka.isFunction(b))return ka.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ka.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Qa.test(b))return ka.filter(b,a,c);b=ka.filter(b,a)}return ka.grep(a,function(a){return ka.inArray(a,b)>=0!==c})}function n(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){return ka.nodeName(a,"table")&&ka.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==ka.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)ka._data(c,"globalEval",!b||ka._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&ka.hasData(a)){var c,d,e,f=ka._data(a),g=ka._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ka.event.add(b,c,h[c][d])}g.data&&(g.data=ka.extend({},g.data))}}function t(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ka.support.noCloneEvent&&b[ka.expando]){e=ka._data(b);for(d in e.events)ka.removeEvent(b,d,e.handle);b.removeAttribute(ka.expando)}"script"===c&&b.text!==a.text?(p(b).text=a.text,q(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ka.support.html5Clone&&a.innerHTML&&!ka.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function u(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==W?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==W?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ka.nodeName(e,c)?g.push(e):ka.merge(g,u(e,c));return c===b||c&&ka.nodeName(a,c)?ka.merge([a],g):g}function v(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function w(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===ka.css(a,"display")||!ka.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ka._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&x(d)&&(f[g]=ka._data(d,"olddisplay",C(d.nodeName)))):f[g]||(e=x(d),(c&&"none"!==c||!e)&&ka._data(d,"olddisplay",e?c:ka.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function z(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ka.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ka.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ka.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ka.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ka.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lb(a,b,f),(0>e||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ka.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a){var b=Y,c=ub[a];return c||(c=D(a,b),"none"!==c&&c||(jb=(jb||ka("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=D(a,b),jb.detach()),ub[a]=c),c}function D(a,b){var c=ka(b.createElement(a)).appendTo(b.body),d=ka.css(c[0],"display");return c.remove(),d}function E(a,b,c,d){var e;if(ka.isArray(b))ka.each(b,function(b,e){c||Ab.test(a)?d(a,e):E(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ka.type(b))d(a,b);else for(e in b)E(a+"["+e+"]",b[e],c,d)}function F(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ma)||[];if(ka.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,c,d,e){function f(i){var j;return g[i]=!0,ka.each(a[i]||[],function(a,i){var k=i(c,d,e);return"string"!=typeof k||h||g[k]?h?!(j=k):b:(c.dataTypes.unshift(k),f(k),!1)}),j}var g={},h=a===Rb;return f(c.dataTypes[0])||!g["*"]&&f("*")}function H(a,c){var d,e,f=ka.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ka.extend(!0,a,d),a}function I(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):b}function J(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function K(){try{return new a.XMLHttpRequest}catch(b){}}function L(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function M(){return setTimeout(function(){$b=b}),$b=ka.now()}function N(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function O(a,b,c){var d,e,f=0,g=dc.length,h=ka.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ka.extend({},b),opts:ka.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ka.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(P(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return ka.map(k,N,j),ka.isFunction(j.opts.start)&&j.opts.start.call(a,j),ka.fx.timer(ka.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function P(a,b){var c,d,e,f,g;for(c in a)if(d=ka.camelCase(c),e=b[d],f=a[c],ka.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ka.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Q(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&x(a),n=ka._data(a,"fxshow");c.queue||(h=ka._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,ka.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===ka.css(a,"display")&&"none"===ka.css(a,"float")&&(ka.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",ka.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||ka.style(a,d)}if(!ka.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=ka._data(a,"fxshow",{}),f&&(n.hidden=!m),m?ka(a).show():j.done(function(){ka(a).hide()}),j.done(function(){var b;ka._removeData(a,"fxshow");for(b in k)ka.style(a,b,k[b])});for(d in k)g=N(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function S(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function T(a){return ka.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var U,V,W=typeof b,X=a.location,Y=a.document,Z=Y.documentElement,$=a.jQuery,_=a.$,aa={},ba=[],ca="1.10.1",da=ba.concat,ea=ba.push,fa=ba.slice,ga=ba.indexOf,ha=aa.toString,ia=aa.hasOwnProperty,ja=ca.trim,ka=function(a,b){return new ka.fn.init(a,b,V)},la=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,qa=/^[\],:{}\s]*$/,ra=/(?:^|:|,)(?:\s*\[)+/g,sa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ta=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ua=/^-ms-/,va=/-([\da-z])/gi,wa=function(a,b){return b.toUpperCase()},xa=function(a){(Y.addEventListener||"load"===a.type||"complete"===Y.readyState)&&(ya(),ka.ready())},ya=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",xa,!1),a.removeEventListener("load",xa,!1)):(Y.detachEvent("onreadystatechange",xa),a.detachEvent("onload",xa))};ka.fn=ka.prototype={jquery:ca,constructor:ka,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:oa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ka?c[0]:c,ka.merge(this,ka.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),pa.test(e[1])&&ka.isPlainObject(c))for(e in c)ka.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Y.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ka.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ka.makeArray(a,this))},selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ka.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ka.each(this,a,b)},ready:function(a){return ka.ready.promise().done(a),this},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ka.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ea,sort:[].sort,splice:[].splice},ka.fn.init.prototype=ka.fn,ka.extend=ka.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ka.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ka.isPlainObject(d)||(c=ka.isArray(d)))?(c?(c=!1,g=a&&ka.isArray(a)?a:[]):g=a&&ka.isPlainObject(a)?a:{},h[e]=ka.extend(k,g,d)):d!==b&&(h[e]=d));return h},ka.extend({expando:"jQuery"+(ca+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===ka&&(a.$=_),b&&a.jQuery===ka&&(a.jQuery=$),ka},isReady:!1,readyWait:1,holdReady:function(a){a?ka.readyWait++:ka.ready(!0)},ready:function(a){if(a===!0?!--ka.readyWait:!ka.isReady){if(!Y.body)return setTimeout(ka.ready);ka.isReady=!0,a!==!0&&--ka.readyWait>0||(U.resolveWith(Y,[ka]),ka.fn.trigger&&ka(Y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ka.type(a)},isArray:Array.isArray||function(a){return"array"===ka.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?aa[ha.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==ka.type(a)||a.nodeType||ka.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(ka.support.ownLast)for(c in a)return ia.call(a,c);for(c in a);return c===b||ia.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Y;var d=pa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ka.buildFragment([a],b,e),e&&ka(e).remove(),ka.merge([],d.childNodes))},parseJSON:function(c){return a.JSON&&a.JSON.parse?a.JSON.parse(c):null===c?c:"string"==typeof c&&(c=ka.trim(c),c&&qa.test(c.replace(sa,"@").replace(ta,"]").replace(ra,"")))?Function("return "+c)():(ka.error("Invalid JSON: "+c),b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ka.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ka.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ua,"ms-").replace(va,wa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ja&&!ja.call("\ufeffÂ ")?function(a){return null==a?"":ja.call(a)}:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ka.merge(d,"string"==typeof a?[a]:a):ea.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ga)return ga.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return da.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ka.isFunction(a)?(d=fa.call(arguments,2),e=function(){return a.apply(c||this,d.concat(fa.call(arguments)))},e.guid=a.guid=a.guid||ka.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ka.type(d)){f=!0;for(i in d)ka.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ka.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ka(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),ka.ready.promise=function(b){if(!U)if(U=ka.Deferred(),"complete"===Y.readyState)setTimeout(ka.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",xa,!1),a.addEventListener("load",xa,!1);else{Y.attachEvent("onreadystatechange",xa),a.attachEvent("onload",xa);var c=!1;try{c=null==a.frameElement&&Y.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!ka.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}ya(),ka.ready()}}()}return U.promise(b)},ka.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()}),V=ka(Y),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;if((b?b.ownerDocument||b:S)!==K&&J(b),b=b||K,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(M&&!d){if(e=xa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&Q(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ea.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&B.getElementsByClassName&&b.getElementsByClassName)return ea.apply(c,b.getElementsByClassName(g)),c}if(B.qsa&&(!N||!N.test(a))){if(l=k=R,m=b,n=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=p(a),(k=b.getAttribute("id"))?l=k.replace(Aa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+q(j[i]);m=ra.test(a)&&b.parentNode||b,n=j.join(",")}if(n)try{return ea.apply(c,m.querySelectorAll(n)),c}catch(o){}finally{k||b.removeAttribute("id")}}}return y(a.replace(oa,"$1"),b,c,d)}function d(a){return wa.test(a+"")}function e(){function a(c,d){return b.push(c+=" ")>D.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function f(a){return a[R]=!0,a}function g(a){var b=K.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function h(a,b,c){a=a.split("|");for(var d,e=a.length,f=c?null:b;e--;)(d=D.attrHandle[a[e]])&&d!==b||(D.attrHandle[a[e]]=f)}function i(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:a[b]===!0?b.toLowerCase():null}function j(a,b){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}function k(a){return"input"===a.nodeName.toLowerCase()?a.defaultValue:b}function l(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||_)-(~a.sourceIndex||_);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function m(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function n(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function o(a){return f(function(b){return b=+b,f(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function p(a,b){var d,e,f,g,h,i,j,k=W[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=D.preFilter;h;){(!d||(e=pa.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=qa.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(oa," ")}),h=h.slice(d.length));for(g in D.filter)!(e=va[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):W(a,i).slice(0)}function q(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function r(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=U++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=T+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[R]||(b[R]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===C)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||C,i[1]===!0)return!0}}function s(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function t(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function u(a,b,c,d,e,g){return d&&!d[R]&&(d=u(d)),e&&!e[R]&&(e=u(e,g)),f(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||x(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:t(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=t(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?ga.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=t(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):ea.apply(g,r)})}function v(a){for(var b,c,d,e=a.length,f=D.relative[a[0].type],g=f||D.relative[" "],h=f?1:0,i=r(function(a){
return a===b},g,!0),j=r(function(a){return ga.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==H)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=D.relative[a[h].type])k=[r(s(k),c)];else{if(c=D.filter[a[h].type].apply(null,a[h].matches),c[R]){for(d=++h;e>d&&!D.relative[a[d].type];d++);return u(h>1&&s(k),h>1&&q(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(oa,"$1"),c,d>h&&v(a.slice(h,d)),e>d&&v(a=a.slice(d)),e>d&&q(a))}k.push(c)}return s(k)}function w(a,b){var d=0,e=b.length>0,g=a.length>0,h=function(f,h,i,j,k){var l,m,n,o=[],p=0,q="0",r=f&&[],s=null!=k,u=H,v=f||g&&D.find.TAG("*",k&&h.parentNode||h),w=T+=null==u?1:Math.random()||.1;for(s&&(H=h!==K&&h,C=d);null!=(l=v[q]);q++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}s&&(T=w,C=++d)}e&&((l=!n&&l)&&p--,f&&r.push(l))}if(p+=q,e&&q!==p){for(m=0;n=b[m++];)n(r,o,h,i);if(f){if(p>0)for(;q--;)r[q]||o[q]||(o[q]=ca.call(j));o=t(o)}ea.apply(j,o),s&&!f&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return s&&(T=w,H=u),r};return e?f(h):h}function x(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function y(a,b,c,d){var e,f,g,h,i,j=p(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&B.getById&&9===b.nodeType&&M&&D.relative[f[1].type]){if(b=(D.find.ID(g.matches[0].replace(Ba,Ca),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=va.needsContext.test(a)?0:f.length;e--&&(g=f[e],!D.relative[h=g.type]);)if((i=D.find[h])&&(d=i(g.matches[0].replace(Ba,Ca),ra.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&q(f),!a)return ea.apply(c,d),c;break}}return G(a,j)(d,b,!M,c,ra.test(a)),c}function z(){}var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R="sizzle"+-new Date,S=a.document,T=0,U=0,V=e(),W=e(),X=e(),Y=!1,Z=function(){return 0},$=typeof b,_=1<<31,aa={}.hasOwnProperty,ba=[],ca=ba.pop,da=ba.push,ea=ba.push,fa=ba.slice,ga=ba.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ha="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ia="[\\x20\\t\\r\\n\\f]",ja="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",la=ja.replace("w","w#"),ma="\\["+ia+"*("+ja+")"+ia+"*(?:([*^$|!~]?=)"+ia+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+la+")|)|)"+ia+"*\\]",na=":("+ja+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ma.replace(3,8)+")*)|.*)\\)|)",oa=RegExp("^"+ia+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ia+"+$","g"),pa=RegExp("^"+ia+"*,"+ia+"*"),qa=RegExp("^"+ia+"*([>+~]|"+ia+")"+ia+"*"),ra=RegExp(ia+"*[+~]"),sa=RegExp("="+ia+"*([^\\]'\"]*)"+ia+"*\\]","g"),ta=RegExp(na),ua=RegExp("^"+la+"$"),va={ID:RegExp("^#("+ja+")"),CLASS:RegExp("^\\.("+ja+")"),TAG:RegExp("^("+ja.replace("w","w*")+")"),ATTR:RegExp("^"+ma),PSEUDO:RegExp("^"+na),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ia+"*(even|odd|(([+-]|)(\\d*)n|)"+ia+"*(?:([+-]|)"+ia+"*(\\d+)|))"+ia+"*\\)|)","i"),bool:RegExp("^(?:"+ha+")$","i"),needsContext:RegExp("^"+ia+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ia+"*((?:-\\d)?\\d*)"+ia+"*\\)|)(?=[^-]|$)","i")},wa=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ya=/^(?:input|select|textarea|button)$/i,za=/^h\d$/i,Aa=/'|\\/g,Ba=RegExp("\\\\([\\da-f]{1,6}"+ia+"?|("+ia+")|.)","ig"),Ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(55296|d>>10,56320|1023&d)};try{ea.apply(ba=fa.call(S.childNodes),S.childNodes),ba[S.childNodes.length].nodeType}catch(Da){ea={apply:ba.length?function(a,b){da.apply(a,fa.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}F=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},B=c.support={},J=c.setDocument=function(a){var c=a?a.ownerDocument||a:S,e=c.parentWindow;return c!==K&&9===c.nodeType&&c.documentElement?(K=c,L=c.documentElement,M=!F(c),e&&e.frameElement&&e.attachEvent("onbeforeunload",function(){J()}),B.attributes=g(function(a){return a.innerHTML="<a href='#'></a>",h("type|href|height|width",j,"#"===a.firstChild.getAttribute("href")),h(ha,i,null==a.getAttribute("disabled")),a.className="i",!a.getAttribute("className")}),B.input=g(function(a){return a.innerHTML="<input>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}),h("value",k,B.attributes&&B.input),B.getElementsByTagName=g(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),B.getElementsByClassName=g(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),B.getById=g(function(a){return L.appendChild(a).id=R,!c.getElementsByName||!c.getElementsByName(R).length}),B.getById?(D.find.ID=function(a,b){if(typeof b.getElementById!==$&&M){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},D.filter.ID=function(a){var b=a.replace(Ba,Ca);return function(a){return a.getAttribute("id")===b}}):(delete D.find.ID,D.filter.ID=function(a){var b=a.replace(Ba,Ca);return function(a){var c=typeof a.getAttributeNode!==$&&a.getAttributeNode("id");return c&&c.value===b}}),D.find.TAG=B.getElementsByTagName?function(a,c){return typeof c.getElementsByTagName!==$?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},D.find.CLASS=B.getElementsByClassName&&function(a,c){return typeof c.getElementsByClassName!==$&&M?c.getElementsByClassName(a):b},O=[],N=[],(B.qsa=d(c.querySelectorAll))&&(g(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||N.push("\\["+ia+"*(?:value|"+ha+")"),a.querySelectorAll(":checked").length||N.push(":checked")}),g(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&N.push("[*^$]="+ia+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),N.push(",.*:")})),(B.matchesSelector=d(P=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&g(function(a){B.disconnectedMatch=P.call(a,"div"),P.call(a,"[s!='']:x"),O.push("!=",na)}),N=N.length&&RegExp(N.join("|")),O=O.length&&RegExp(O.join("|")),Q=d(L.contains)||L.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B.sortDetached=g(function(a){return 1&a.compareDocumentPosition(c.createElement("div"))}),Z=L.compareDocumentPosition?function(a,b){if(a===b)return Y=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return d?1&d||!B.sortDetached&&b.compareDocumentPosition(a)===d?a===c||Q(S,a)?-1:b===c||Q(S,b)?1:I?ga.call(I,a)-ga.call(I,b):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(a===b)return Y=!0,0;if(!f||!g)return a===c?-1:b===c?1:f?-1:g?1:I?ga.call(I,a)-ga.call(I,b):0;if(f===g)return l(a,b);for(d=a;d=d.parentNode;)h.unshift(d);for(d=b;d=d.parentNode;)i.unshift(d);for(;h[e]===i[e];)e++;return e?l(h[e],i[e]):h[e]===S?-1:i[e]===S?1:0},c):K},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==K&&J(a),b=b.replace(sa,"='$1']"),!(!B.matchesSelector||!M||O&&O.test(b)||N&&N.test(b)))try{var d=P.call(a,b);if(d||B.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,K,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==K&&J(a),Q(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==K&&J(a);var d=D.attrHandle[c.toLowerCase()],e=d&&aa.call(D.attrHandle,c.toLowerCase())?d(a,c,!M):b;return e===b?B.attributes||!M?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(Y=!B.detectDuplicates,I=!B.sortStable&&a.slice(0),a.sort(Z),Y){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},E=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=E(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=E(b);return c},D=c.selectors={cacheLength:50,createPseudo:f,match:va,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(Ba,Ca),a[3]=(a[4]||a[5]||"").replace(Ba,Ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return va.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&ta.test(d)&&(c=p(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(Ba,Ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=V[a+" "];return b||(b=RegExp("(^|"+ia+")"+a+"("+ia+"|$)"))&&V(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==$&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[R]||(q[R]={}),j=k[a]||[],n=j[0]===T&&j[1],m=j[0]===T&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[T,n,m];break}}else if(s&&(j=(b[R]||(b[R]={}))[a])&&j[0]===T)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[R]||(l[R]={}))[a]=[T,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var d,e=D.pseudos[a]||D.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[R]?e(b):e.length>1?(d=[a,a,"",b],D.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=ga.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:f(function(a){var b=[],c=[],d=G(a.replace(oa,"$1"));return d[R]?f(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:f(function(a){return function(b){return c(a,b).length>0}}),contains:f(function(a){return function(b){return(b.textContent||b.innerText||E(b)).indexOf(a)>-1}}),lang:f(function(a){return ua.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(Ba,Ca).toLowerCase(),function(b){var c;do if(c=M?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===L},focus:function(a){return a===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!D.pseudos.empty(a)},header:function(a){return za.test(a.nodeName)},input:function(a){return ya.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:o(function(){return[0]}),last:o(function(a,b){return[b-1]}),eq:o(function(a,b,c){return[0>c?c+b:c]}),even:o(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:o(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:o(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:o(function(a,b,c){for(var d=0>c?c+b:c;b>++d;)a.push(d);return a})}};for(A in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[A]=m(A);for(A in{submit:!0,reset:!0})D.pseudos[A]=n(A);G=c.compile=function(a,b){var c,d=[],e=[],f=X[a+" "];if(!f){for(b||(b=p(a)),c=b.length;c--;)f=v(b[c]),f[R]?d.push(f):e.push(f);f=X(a,w(e,d))}return f},D.pseudos.nth=D.pseudos.eq,z.prototype=D.filters=D.pseudos,D.setFilters=new z,B.sortStable=R.split("").sort(Z).join("")===R,J(),[0,0].sort(Z),B.detectDuplicates=Y,ka.find=c,ka.expr=c.selectors,ka.expr[":"]=ka.expr.pseudos,ka.unique=c.uniqueSort,ka.text=c.getText,ka.isXMLDoc=c.isXML,ka.contains=c.contains}(a);var za={};ka.Callbacks=function(a){a="string"==typeof a?za[a]||d(a):ka.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ka.each(b,function(b,c){var e=ka.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ka.each(arguments,function(a,b){for(var d;(d=ka.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ka.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ka.extend({Deferred:function(a){var b=[["resolve","done",ka.Callbacks("once memory"),"resolved"],["reject","fail",ka.Callbacks("once memory"),"rejected"],["notify","progress",ka.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ka.Deferred(function(c){ka.each(b,function(b,f){var g=f[0],h=ka.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ka.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ka.extend(a,d):d}},e={};return d.pipe=d.then,ka.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=fa.call(arguments),g=f.length,h=1!==g||a&&ka.isFunction(a.promise)?g:0,i=1===h?a:ka.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?fa.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&ka.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ka.support=function(b){var c,d,e,f,g,h,i,j,k,l=Y.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Y.createElement("select"),h=f.appendChild(Y.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Y.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=Y.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Y.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in ka(b))break;return b.ownLast="0"!==k,ka(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Y.getElementsByTagName("body")[0];g&&(c=Y.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ka.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Y.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==W&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Aa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ba=/([A-Z])/g;ka.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ka.cache[a[ka.expando]]:a[ka.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ka.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ka.fn.extend({data:function(a,c){var d,e,f=null,h=0,i=this[0];if(a===b){if(this.length&&(f=ka.data(i),1===i.nodeType&&!ka._data(i,"parsedAttrs"))){for(d=i.attributes;d.length>h;h++)e=d[h].name,0===e.indexOf("data-")&&(e=ka.camelCase(e.slice(5)),g(i,e,f[e]));ka._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){ka.data(this,a)}):arguments.length>1?this.each(function(){ka.data(this,a,c)}):i?g(i,a,ka.data(i,a)):null},removeData:function(a){return this.each(function(){ka.removeData(this,a)})}}),ka.extend({queue:function(a,c,d){var e;return a?(c=(c||"fx")+"queue",e=ka._data(a,c),d&&(!e||ka.isArray(d)?e=ka._data(a,c,ka.makeArray(d)):e.push(d)),e||[]):b},dequeue:function(a,b){b=b||"fx";var c=ka.queue(a,b),d=c.length,e=c.shift(),f=ka._queueHooks(a,b),g=function(){ka.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ka._data(a,c)||ka._data(a,c,{empty:ka.Callbacks("once memory").add(function(){ka._removeData(a,b+"queue"),ka._removeData(a,c)})})}}),ka.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),d>arguments.length?ka.queue(this[0],a):c===b?this:this.each(function(){var b=ka.queue(this,a,c);ka._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ka.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ka.dequeue(this,a)})},delay:function(a,b){return a=ka.fx?ka.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ka.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ka._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ca,Da,Ea=/[\t\r\n\f]/g,Fa=/\r/g,Ga=/^(?:input|select|textarea|button|object)$/i,Ha=/^(?:a|area)$/i,Ia=/^(?:checked|selected)$/i,Ja=ka.support.getSetAttribute,Ka=ka.support.input;ka.fn.extend({attr:function(a,b){return ka.access(this,ka.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ka.removeAttr(this,a)})},prop:function(a,b){return ka.access(this,ka.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ka.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=ka.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ka.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ka.isFunction(a)?this.each(function(c){ka(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ka(this),h=b,i=a.match(ma)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===W||"boolean"===c)&&(this.className&&ka._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ka._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ea," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];return arguments.length?(e=ka.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,ka(this).val()):a,null==f?f="":"number"==typeof f?f+="":ka.isArray(f)&&(f=ka.map(f,function(a){return null==a?"":a+""})),d=ka.valHooks[this.type]||ka.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))})):f?(d=ka.valHooks[f.type]||ka.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Fa,""):null==c?"":c)):void 0}}),ka.extend({valHooks:{option:{get:function(a){var b=ka.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ka.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ka.nodeName(c.parentNode,"optgroup"))){if(b=ka(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ka.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ka.inArray(ka(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?typeof a.getAttribute===W?ka.prop(a,c,d):(1===g&&ka.isXMLDoc(a)||(c=c.toLowerCase(),e=ka.attrHooks[c]||(ka.expr.match.bool.test(c)?Da:Ca)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=ka.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):(ka.removeAttr(a,c),b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ma);if(f&&1===a.nodeType)for(;c=f[e++];)d=ka.propFix[c]||c,ka.expr.match.bool.test(c)?Ka&&Ja||!Ia.test(c)?a[d]=!1:a[ka.camelCase("default-"+c)]=a[d]=!1:ka.attr(a,c,""),a.removeAttribute(Ja?c:d)},attrHooks:{type:{set:function(a,b){if(!ka.support.radioValue&&"radio"===b&&ka.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?(g=1!==h||!ka.isXMLDoc(a),g&&(c=ka.propFix[c]||c,f=ka.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]):void 0},propHooks:{tabIndex:{get:function(a){var b=ka.find.attr(a,"tabindex");return b?parseInt(b,10):Ga.test(a.nodeName)||Ha.test(a.nodeName)&&a.href?0:-1}}}}),Da={set:function(a,b,c){return b===!1?ka.removeAttr(a,c):Ka&&Ja||!Ia.test(c)?a.setAttribute(!Ja&&ka.propFix[c]||c,c):a[ka.camelCase("default-"+c)]=a[c]=!0,c}},ka.each(ka.expr.match.bool.source.match(/\w+/g),function(a,c){var d=ka.expr.attrHandle[c]||ka.find.attr;ka.expr.attrHandle[c]=Ka&&Ja||!Ia.test(c)?function(a,c,e){var f=ka.expr.attrHandle[c],g=e?b:(ka.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return ka.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[ka.camelCase("default-"+c)]?c.toLowerCase():null}}),Ka&&Ja||(ka.attrHooks.value={set:function(a,c,d){return ka.nodeName(a,"input")?(a.defaultValue=c,b):Ca&&Ca.set(a,c,d)}}),Ja||(Ca={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ka.expr.attrHandle.id=ka.expr.attrHandle.name=ka.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},ka.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Ca.set},ka.attrHooks.contenteditable={set:function(a,b,c){Ca.set(a,""===b?!1:b,c)}},ka.each(["width","height"],function(a,c){ka.attrHooks[c]={set:function(a,d){return""===d?(a.setAttribute(c,"auto"),d):b}}})),ka.support.hrefNormalized||ka.each(["href","src"],function(a,b){ka.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ka.support.style||(ka.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ka.support.optSelected||(ka.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ka.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ka.propFix[this.toLowerCase()]=this}),ka.support.enctype||(ka.propFix.enctype="encoding"),ka.each(["radio","checkbox"],function(){ka.valHooks[this]={set:function(a,c){return ka.isArray(c)?a.checked=ka.inArray(ka(a).val(),c)>=0:b}},ka.support.checkOn||(ka.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var La=/^(?:input|select|textarea)$/i,Ma=/^key/,Na=/^(?:mouse|contextmenu)|click/,Oa=/^(?:focusinfocus|focusoutblur)$/,Pa=/^([^.]*)(?:\.(.+)|)$/;ka.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ka._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ka.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ka===W||a&&ka.event.triggered===a.type?b:ka.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ma)||[""],i=c.length;i--;)g=Pa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=ka.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ka.event.special[o]||{},m=ka.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ka.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ka.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ka.hasData(a)&&ka._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ma)||[""],j=b.length;j--;)if(h=Pa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ka.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ka.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ka.event.remove(a,n+b[j],c,d,!0);ka.isEmptyObject(k)&&(delete q.handle,ka._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Y],o=ia.call(c,"type")?c.type:c,p=ia.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Y,3!==e.nodeType&&8!==e.nodeType&&!Oa.test(o+ka.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=0>o.indexOf(":")&&"on"+o,c=c[ka.expando]?c:new ka.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ka.makeArray(d,[c]),k=ka.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ka.isWindow(e)){for(j=k.delegateType||o,Oa.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Y)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,
g=(ka._data(i,"events")||{})[c.type]&&ka._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ka.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&ka.acceptData(e)&&h&&e[o]&&!ka.isWindow(e)){l=e[h],l&&(e[h]=null),ka.event.triggered=o;try{e[o]()}catch(q){}ka.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ka.event.fix(a);var c,d,e,f,g,h=[],i=fa.call(arguments),j=(ka._data(this,"events")||{})[a.type]||[],k=ka.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ka.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ka.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ka(d,this).index(j)>=0:ka.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return c.length>i&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ka.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ka.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Y,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===k()&&this.blur?(this.blur(),!1):b},delegateType:"focusout"},click:{trigger:function(){return ka.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):b},_default:function(a){return ka.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ka.extend(new ka.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ka.event.trigger(e,null,b):ka.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ka.removeEvent=Y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===W&&(a[d]=null),a.detachEvent(d,c))},ka.Event=function(a,c){return this instanceof ka.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,c&&ka.extend(this,c),this.timeStamp=a&&a.timeStamp||ka.now(),this[ka.expando]=!0,b):new ka.Event(a,c)},ka.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ka.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ka.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ka.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ka.support.submitBubbles||(ka.event.special.submit={setup:function(){return ka.nodeName(this,"form")?!1:(ka.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ka.nodeName(c,"input")||ka.nodeName(c,"button")?c.form:b;d&&!ka._data(d,"submitBubbles")&&(ka.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ka._data(d,"submitBubbles",!0))}),b)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ka.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ka.nodeName(this,"form")?!1:(ka.event.remove(this,"._submit"),b)}}),ka.support.changeBubbles||(ka.event.special.change={setup:function(){return La.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ka.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ka.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ka.event.simulate("change",this,a,!0)})),!1):(ka.event.add(this,"beforeactivate._change",function(a){var b=a.target;La.test(b.nodeName)&&!ka._data(b,"changeBubbles")&&(ka.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ka.event.simulate("change",this.parentNode,a,!0)}),ka._data(b,"changeBubbles",!0))}),b)},handle:function(a){var c=a.target;return this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type?a.handleObj.handler.apply(this,arguments):b},teardown:function(){return ka.event.remove(this,"._change"),!La.test(this.nodeName)}}),ka.support.focusinBubbles||ka.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ka.event.simulate(b,a.target,ka.event.fix(a),!0)};ka.event.special[b]={setup:function(){0===c++&&Y.addEventListener(a,d,!0)},teardown:function(){0===--c&&Y.removeEventListener(a,d,!0)}}}),ka.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ka().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ka.guid++)),this.each(function(){ka.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ka(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ka.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){ka.event.trigger(a,b,this)})},triggerHandler:function(a,c){var d=this[0];return d?ka.event.trigger(a,c,d,!0):b}});var Qa=/^.[^:#\[\.,]*$/,Ra=/^(?:parents|prev(?:Until|All))/,Sa=ka.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ka.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ka(a).filter(function(){for(b=0;e>b;b++)if(ka.contains(d[b],this))return!0}));for(b=0;e>b;b++)ka.find(a,d[b],c);return c=this.pushStack(e>1?ka.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=ka(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ka.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&Sa.test(a)?ka(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ka(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?g.index(c)>-1:1===c.nodeType&&ka.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?ka.unique(f):f)},index:function(a){return a?"string"==typeof a?ka.inArray(this[0],ka(a)):ka.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ka(a,b):ka.makeArray(a&&a.nodeType?[a]:a),d=ka.merge(this.get(),c);return this.pushStack(ka.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ka.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ka.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ka.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return ka.dir(a,"nextSibling")},prevAll:function(a){return ka.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ka.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ka.dir(a,"previousSibling",c)},siblings:function(a){return ka.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ka.sibling(a.firstChild)},contents:function(a){return ka.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ka.merge([],a.childNodes)}},function(a,b){ka.fn[a]=function(c,d){var e=ka.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ka.filter(d,e)),this.length>1&&(Ta[a]||(e=ka.unique(e)),Ra.test(a)&&(e=e.reverse())),this.pushStack(e)}}),ka.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ka.find.matchesSelector(d,a)?[d]:[]:ka.find.matches(a,ka.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ka(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ka.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=n(Y),ib=hb.appendChild(Y.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ka.fn.extend({text:function(a){return ka.access(this,function(a){return a===b?ka.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ka.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ka.cleanData(u(c)),c.parentNode&&(b&&ka.contains(c.ownerDocument,c)&&r(u(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ka.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ka.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ka.clone(this,a,b)})},html:function(a){return ka.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if(!("string"!=typeof a||ab.test(a)||!ka.support.htmlSerialize&&Wa.test(a)||!ka.support.leadingWhitespace&&Xa.test(a)||gb[(Za.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ya,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ka.cleanData(u(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=ka.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),ka(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=da.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=ka.isFunction(n);if(o||!(1>=k||"string"!=typeof n||ka.support.checkClone)&&cb.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=ka.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=ka.map(u(i,"script"),p),f=g.length;k>j;j++)e=i,j!==m&&(e=ka.clone(e,!0,!0),f&&ka.merge(g,u(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,ka.map(g,q),j=0;f>j;j++)e=g[j],db.test(e.type||"")&&!ka._data(e,"globalEval")&&ka.contains(h,e)&&(e.src?ka._evalUrl(e.src):ka.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fb,"")));i=d=null}return this}}),ka.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ka.fn[a]=function(a){for(var c,d=0,e=[],f=ka(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ka(f[d])[b](c),ea.apply(e,c.get());return this.pushStack(e)}}),ka.extend({clone:function(a,b,c){var d,e,f,g,h,i=ka.contains(a.ownerDocument,a);if(ka.support.html5Clone||ka.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ka.support.noCloneEvent&&ka.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ka.isXMLDoc(a)))for(d=u(f),h=u(a),g=0;null!=(e=h[g]);++g)d[g]&&t(e,d[g]);if(b)if(c)for(h=h||u(a),d=d||u(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=u(f,"script"),d.length>0&&r(d,!i&&u(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=n(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ka.type(f))ka.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ka.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ka.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ka.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ka.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else o.push(b.createTextNode(f));for(h&&m.removeChild(h),ka.support.appendChecked||ka.grep(u(o,"input"),v),p=0;f=o[p++];)if((!d||-1===ka.inArray(f,d))&&(g=ka.contains(f.ownerDocument,f),h=u(m.appendChild(f),"script"),g&&r(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ka.expando,i=ka.cache,j=ka.support.deleteExpando,k=ka.event.special;null!=(c=a[g]);g++)if((b||ka.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ka.event.remove(c,d):ka.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==W?c.removeAttribute(h):c[h]=null,ba.push(e))}},_evalUrl:function(a){return ka.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ka.fn.extend({wrapAll:function(a){if(ka.isFunction(a))return this.each(function(b){ka(this).wrapAll(a.call(this,b))});if(this[0]){var b=ka(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ka.isFunction(a)?this.each(function(b){ka(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ka(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ka.isFunction(a);return this.each(function(c){ka(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ka.nodeName(this,"body")||ka(this).replaceWith(this.childNodes)}).end()}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=RegExp("^("+la+")(.*)$","i"),sb=RegExp("^("+la+")(?!px)[a-z%]+$","i"),tb=RegExp("^([+-])=("+la+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ka.fn.extend({css:function(a,c){return ka.access(this,function(a,c,d){var e,f,g={},h=0;if(ka.isArray(c)){for(f=kb(a),e=c.length;e>h;h++)g[c[h]]=ka.css(a,c[h],!1,f);return g}return d!==b?ka.style(a,c,d):ka.css(a,c)},a,c,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:x(this))?ka(this).show():ka(this).hide()})}}),ka.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ka.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ka.camelCase(c),j=a.style;if(c=ka.cssProps[i]||(ka.cssProps[i]=w(j,i)),h=ka.cssHooks[c]||ka.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ka.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ka.cssNumber[i]||(d+="px"),ka.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ka.camelCase(c);return c=ka.cssProps[i]||(ka.cssProps[i]=w(a.style,i)),h=ka.cssHooks[c]||ka.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ka.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ka.contains(a.ownerDocument,a)||(i=ka.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Y.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ka.each(["height","width"],function(a,c){ka.cssHooks[c]={get:function(a,d,e){return d?0===a.offsetWidth&&pb.test(ka.css(a,"display"))?ka.swap(a,vb,function(){return B(a,c,e)}):B(a,c,e):b},set:function(a,b,d){var e=d&&kb(a);return z(a,b,d?A(a,c,d,ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,e),e):0)}}}),ka.support.opacity||(ka.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ka.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ka.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ka(function(){ka.support.reliableMarginRight||(ka.cssHooks.marginRight={get:function(a,c){return c?ka.swap(a,{display:"inline-block"},lb,[a,"marginRight"]):b}}),!ka.support.pixelPosition&&ka.fn.position&&ka.each(["top","left"],function(a,c){ka.cssHooks[c]={get:function(a,d){return d?(d=lb(a,c),sb.test(d)?ka(a).position()[c]+"px":d):b}}})}),ka.expr&&ka.expr.filters&&(ka.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!ka.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka.css(a,"display"))},ka.expr.filters.visible=function(a){return!ka.expr.filters.hidden(a)}),ka.each({margin:"",padding:"",border:"Width"},function(a,b){ka.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ka.cssHooks[a+b].set=z)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ka.fn.extend({serialize:function(){return ka.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ka.prop(this,"elements");return a?ka.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ka(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ka(this).val();return null==c?null:ka.isArray(c)?ka.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ka.param=function(a,c){var d,e=[],f=function(a,b){b=ka.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ka.ajaxSettings&&ka.ajaxSettings.traditional),ka.isArray(a)||a.jquery&&!ka.isPlainObject(a))ka.each(a,function(){f(this.name,this.value)});else for(d in a)E(d,a[d],c,f);return e.join("&").replace(zb,"+")},ka.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ka.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ka.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb,Fb,Gb=ka.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ka.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=Y.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ka.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ka.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ka.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ka("<div>").append(ka.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ka.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ka.fn[b]=function(a){return this.on(b,a)}}),ka.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ka.parseJSON,"text xml":ka.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,ka.ajaxSettings),b):H(ka.ajaxSettings,a)},ajaxPrefilter:F(Qb),ajaxTransport:F(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&300>a||304===a,d&&(t=I(m,w,d)),t=J(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ka.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ka.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ka.active||ka.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ka.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ka(n):ka.event,p=ka.Deferred(),q=ka.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ka.trim(m.dataType||"*").toLowerCase().match(ma)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Eb[3]||("http:"===Eb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ka.param(m.data,m.traditional)),G(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ka.active++&&ka.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ka.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ka.lastModified[g]),ka.etag[g]&&w.setRequestHeader("If-None-Match",ka.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=G(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return ka.get(a,b,c,"json")},getScript:function(a,c){return ka.get(a,b,c,"script")}}),ka.each(["get","post"],function(a,c){ka[c]=function(a,d,e,f){return ka.isFunction(d)&&(f=f||e,e=d,d=b),ka.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ka.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ka.globalEval(a),a}}}),ka.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ka.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Y.head||ka("head")[0]||Y.documentElement;return{send:function(b,e){c=Y.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ka.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ka.expando+"_"+Gb++;return this[a]=!0,a}}),ka.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ka.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ka.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ka.isFunction(g)&&g(h[0]),h=g=b}),"script"):b});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ka.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&K()||L()}:K,Xb=ka.ajaxSettings.xhr(),ka.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ka.support.ajax=!!Xb,Xb&&ka.ajaxTransport(function(c){if(!c.crossDomain||ka.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ka.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ka(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=RegExp("^(?:([+-])=|)("+la+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[Q],ec={
"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(ka.cssNumber[a]?"":"px"),g=(ka.cssNumber[a]||"px"!==f&&+d)&&bc.exec(ka.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ka.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ka.Animation=ka.extend(O,{tweener:function(a,b){ka.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ka.Tween=R,R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ka.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.pos=b=this.options.duration?ka.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ka.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ka.fx.step[a.prop]?ka.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ka.cssProps[a.prop]]||ka.cssHooks[a.prop])?ka.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ka.each(["toggle","show","hide"],function(a,b){var c=ka.fn[b];ka.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(S(b,!0),a,d,e)}}),ka.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ka.isEmptyObject(a),f=ka.speed(b,c,d),g=function(){var b=O(this,ka.extend({},a),f);(e||ka._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ka.timers,g=ka._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ka.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ka._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ka.timers,g=d?d.length:0;for(c.finish=!0,ka.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ka.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ka.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ka.speed=function(a,b,c){var d=a&&"object"==typeof a?ka.extend({},a):{complete:c||!c&&b||ka.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ka.isFunction(b)&&b};return d.duration=ka.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ka.fx.speeds?ka.fx.speeds[d.duration]:ka.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ka.isFunction(d.old)&&d.old.call(this),d.queue&&ka.dequeue(this,d.queue)},d},ka.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ka.timers=[],ka.fx=R.prototype.init,ka.fx.tick=function(){var a,c=ka.timers,d=0;for($b=ka.now();c.length>d;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ka.fx.stop(),$b=b},ka.fx.timer=function(a){a()&&ka.timers.push(a)&&ka.fx.start()},ka.fx.interval=13,ka.fx.start=function(){_b||(_b=setInterval(ka.fx.tick,ka.fx.interval))},ka.fx.stop=function(){clearInterval(_b),_b=null},ka.fx.speeds={slow:600,fast:200,_default:400},ka.fx.step={},ka.expr&&ka.expr.filters&&(ka.expr.filters.animated=function(a){return ka.grep(ka.timers,function(b){return a===b.elem}).length}),ka.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ka.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;return g?(c=g.documentElement,ka.contains(c,f)?(typeof f.getBoundingClientRect!==W&&(e=f.getBoundingClientRect()),d=T(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e):void 0},ka.offset={setOffset:function(a,b,c){var d=ka.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ka(a),h=g.offset(),i=ka.css(a,"top"),j=ka.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ka.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ka.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ka.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ka.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ka.nodeName(a[0],"html")||(c=a.offset()),c.top+=ka.css(a[0],"borderTopWidth",!0),c.left+=ka.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ka.css(d,"marginTop",!0),left:b.left-c.left-ka.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Z;a&&!ka.nodeName(a,"html")&&"static"===ka.css(a,"position");)a=a.offsetParent;return a||Z})}}),ka.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ka.fn[a]=function(e){return ka.access(this,function(a,e,f){var g=T(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:(g?g.scrollTo(d?ka(g).scrollLeft():f,d?f:ka(g).scrollTop()):a[e]=f,b)},a,e,arguments.length,null)}}),ka.each({Height:"height",Width:"width"},function(a,c){ka.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ka.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ka.access(this,function(c,d,e){var f;return ka.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ka.css(c,d,h):ka.style(c,d,e,h)},c,g?e:b,g,null)}})}),ka.fn.size=function(){return this.length},ka.fn.andSelf=ka.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ka:(a.jQuery=a.$=ka,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ka}))}(window),function(){function a(a,b,c){c=(c||0)-1;for(var d=a?a.length:0;++c<d;)if(a[c]===b)return c;return-1}function b(b,c){var d=typeof c;if(b=b.l,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:r+c;return b=(b=b[d])&&b[e],"object"==d?b&&-1<a(b,c)?0:-1:b?0:-1}function c(a){var b=this.l,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:r+a,b=b[c]||(b[c]={});"object"==c?(b[d]||(b[d]=[])).push(a):b[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.m,d=b.m,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.n-b.n}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;for(e=i(),e["false"]=e["null"]=e["true"]=e.undefined=!1,f=i(),f.k=a,f.l=e,f.push=c;++b<d;)f.push(a[b]);return f}function g(a){return"\\"+U[a]}function h(){return o.pop()||[]}function i(){return p.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function j(a){a.length=0,o.length<t&&o.push(a)}function k(a){var b=a.l;b&&k(b),a.k=a.l=a.m=a.object=a.number=a.string=a.o=null,p.length<t&&p.push(a)}function l(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var e=Array(0>c?0:c);++d<c;)e[d]=a[b+d];return e}function m(c){function o(a,b,c){if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:ba(b,c,3);for(var d=-1,e=T[typeof a]&&Kb(a),f=e?e.length:0;++d<f&&(c=e[d],!1!==b(a[c],c,a)););return a}function p(a,b,c){var d;if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:ba(b,c,3);for(d in a)if(!1===b(a[d],d,a))break;return a}function t(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if((e=g[h])&&T[typeof e])for(var j=-1,k=T[typeof e]&&Kb(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f}function U(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=ba(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if((e=g[h])&&T[typeof e])for(var k=-1,l=T[typeof e]&&Kb(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f}function W(a){var b,c=[];if(!a||!T[typeof a])return c;for(b in a)rb.call(a,b)&&c.push(b);return c}function X(a){return a&&"object"==typeof a&&!Jb(a)&&rb.call(a,"__wrapped__")?a:new Y(a)}function Y(a,b){this.__chain__=!!b,this.__wrapped__=a}function Z(a){function b(){if(d){var a=l(d);sb.apply(a,arguments)}if(this instanceof b){var f=aa(c.prototype),a=c.apply(f,a||arguments);return va(a)?a:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Ib(b,a),b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}if(!va(a))return a;var g=kb.call(a);if(!Q[g])return a;var i=Gb[g];switch(g){case J:case K:return new i(+a);case M:case P:return new i(a);case O:return f=i(a.source,z.exec(a)),f.lastIndex=a.lastIndex,f}if(g=Jb(a),b){var k=!d;d||(d=h()),e||(e=h());for(var m=d.length;m--;)if(d[m]==a)return e[m];f=g?i(a.length):{}}else f=g?l(a):U({},a);return g&&(rb.call(a,"index")&&(f.index=a.index),rb.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(g?Da:o)(a,function(a,g){f[g]=_(a,b,c,d,e)}),k&&(j(d),j(e)),f):f}function aa(a){return va(a)?xb(a):{}}function ba(a,b,c){if("function"!=typeof a)return Ua;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Hb.funcNames&&(d=!a.name),d=d||!Hb.funcDecomp,!d)){var e=pb.call(a);Hb.funcNames||(d=!A.test(e)),d||(d=E.test(e),Ib(a,d))}if(!1===d||!0!==d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Sa(a,b)}function ca(a){function b(){var a=i?g:this;if(e){var o=l(e);sb.apply(o,arguments)}return(f||k)&&(o||(o=l(arguments)),f&&sb.apply(o,f),k&&o.length<h)?(d|=16,ca([c,m?d:-4&d,o,null,g,h])):(o||(o=arguments),j&&(c=a[n]),this instanceof b?(a=aa(c.prototype),o=c.apply(a,o),va(o)?o:a):c.apply(a,o))}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,m=8&d,n=c;return Ib(b,a),b}function da(c,d){var e=-1,g=ma(),h=c?c.length:0,i=h>=s&&g===a,j=[];if(i){var l=f(d);l?(g=b,d=l):i=!1}for(;++e<h;)l=c[e],0>g(d,l)&&j.push(l);return i&&k(d),j}function ea(a,b,c,d){d=(d||0)-1;for(var e=a?a.length:0,f=[];++d<e;){var g=a[d];if(g&&"object"==typeof g&&"number"==typeof g.length&&(Jb(g)||qa(g))){b||(g=ea(g,b,c));var h=-1,i=g.length,j=f.length;for(f.length+=i;++h<i;)f[j++]=g[h]}else c||f.push(g)}return f}function fa(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&T[typeof a]||b&&T[typeof b]))return!1;if(null==a||null==b)return a===b;var i=kb.call(a),k=kb.call(b);if(i==H&&(i=N),k==H&&(k=N),i!=k)return!1;switch(i){case J:case K:return+a==+b;case M:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case O:case P:return a==fb(b)}if(k=i==I,!k){var l=rb.call(a,"__wrapped__"),m=rb.call(b,"__wrapped__");if(l||m)return fa(l?a.__wrapped__:a,m?b.__wrapped__:b,c,d,e,f);if(i!=N)return!1;if(i=a.constructor,l=b.constructor,i!=l&&!(ua(i)&&i instanceof i&&ua(l)&&l instanceof l)&&"constructor"in a&&"constructor"in b)return!1}for(i=!e,e||(e=h()),f||(f=h()),l=e.length;l--;)if(e[l]==a)return f[l]==b;var n=0,g=!0;if(e.push(a),f.push(b),k){if(l=a.length,n=b.length,(g=n==l)||d)for(;n--;)if(k=l,m=b[n],d)for(;k--&&!(g=fa(a[k],m,c,d,e,f)););else if(!(g=fa(a[n],m,c,d,e,f)))break}else p(b,function(b,h,i){return rb.call(i,h)?(n++,g=rb.call(a,h)&&fa(a[h],b,c,d,e,f)):void 0}),g&&!d&&p(a,function(a,b,c){return rb.call(c,b)?g=-1<--n:void 0});return e.pop(),f.pop(),i&&(j(e),j(f)),g}function ga(a,b,c,d,e){(Jb(b)?Da:o)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Jb(b))||Pb(b))){for(i=d.length;i--;)if(g=d[i]==b){j=e[i];break}if(!g){var k;c&&(i=c(j,b),k="undefined"!=typeof i)&&(j=i),k||(j=h?Jb(j)?j:[]:Pb(j)?j:{}),d.push(b),e.push(j),k||ga(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function ha(a,b){return a+ob(Fb()*(b-a+1))}function ia(c,d,e){var g=-1,i=ma(),l=c?c.length:0,m=[],n=!d&&l>=s&&i===a,o=e||n?h():m;for(n&&(o=f(o),i=b);++g<l;){var p=c[g],q=e?e(p,g,c):p;(d?!g||o[o.length-1]!==q:0>i(o,q))&&((e||n)&&o.push(q),m.push(p))}return n?(j(o.k),k(o)):e&&j(o),m}function ja(a){return function(b,c,d){var e={};c=X.createCallback(c,d,3),d=-1;var f=b?b.length:0;if("number"==typeof f)for(;++d<f;){var g=b[d];a(e,g,c(g,d,b),b)}else o(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function ka(a,b,c,d,e,f){var g=1&b,h=4&b,i=16&b,j=32&b;if(!(2&b||ua(a)))throw new gb;i&&!c.length&&(b&=-17,i=c=!1),j&&!d.length&&(b&=-33,j=d=!1);var k=a&&a.__bindData__;return k&&!0!==k?(k=l(k),k[2]&&(k[2]=l(k[2])),k[3]&&(k[3]=l(k[3])),!g||1&k[1]||(k[4]=e),!g&&1&k[1]&&(b|=8),!h||4&k[1]||(k[5]=f),i&&sb.apply(k[2]||(k[2]=[]),c),j&&vb.apply(k[3]||(k[3]=[]),d),k[1]|=b,ka.apply(null,k)):(1==b||17===b?Z:ca)([a,b,c,d,e,f])}function la(a){return Lb[a]}function ma(){var b=(b=X.indexOf)===Ma?a:b;return b}function na(a){return"function"==typeof a&&lb.test(a)}function oa(a){var b,c;return a&&kb.call(a)==N&&(b=a.constructor,!ua(b)||b instanceof b)?(p(a,function(a,b){c=b}),"undefined"==typeof c||rb.call(a,c)):!1}function pa(a){return Mb[a]}function qa(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kb.call(a)==H||!1}function ra(a,b,c){var d=Kb(a),e=d.length;for(b=ba(b,c,3);e--&&(c=d[e],!1!==b(a[c],c,a)););return a}function sa(a){var b=[];return p(a,function(a,c){ua(a)&&b.push(c)}),b.sort()}function ta(a){for(var b=-1,c=Kb(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function ua(a){return"function"==typeof a}function va(a){return!(!a||!T[typeof a])}function wa(a){return"number"==typeof a||a&&"object"==typeof a&&kb.call(a)==M||!1}function xa(a){return"string"==typeof a||a&&"object"==typeof a&&kb.call(a)==P||!1}function ya(a){for(var b=-1,c=Kb(a),d=c.length,e=Za(d);++b<d;)e[b]=a[c[b]];return e}function za(a,b,c){var d=-1,e=ma(),f=a?a.length:0,g=!1;return c=(0>c?Cb(0,f+c):c)||0,Jb(a)?g=-1<e(a,b,c):"number"==typeof f?g=-1<(xa(a)?a.indexOf(b,c):e(a,b,c)):o(a,function(a){return++d<c?void 0:!(g=a===b)}),g}function Aa(a,b,c){var d=!0;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&(d=!!b(a[c],c,a)););else o(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Ba(a,b,c){var d=[];b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}else o(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Ca(a,b,c){b=X.createCallback(b,c,3),c=-1;var d=a?a.length:0;if("number"!=typeof d){var e;return o(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}for(;++c<d;){var f=a[c];if(b(f,c,a))return f}}function Da(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:ba(b,c,3),"number"==typeof e)for(;++d<e&&!1!==b(a[d],d,a););else o(a,b);return a}function Ea(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:ba(b,c,3),"number"==typeof d)for(;d--&&!1!==b(a[d],d,a););else{var e=Kb(a),d=e.length;o(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Fa(a,b,c){var d=-1,e=a?a.length:0;if(b=X.createCallback(b,c,3),"number"==typeof e)for(var f=Za(e);++d<e;)f[d]=b(a[d],d,a);else f=[],o(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Ga(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jb(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h>f&&(f=h)}}else b=null==b&&xa(a)?d:X.createCallback(b,c,3),Da(a,function(a,c,d){c=b(a,c,d),c>e&&(e=c,f=a)});return f}function Ha(a,b,c,d){if(!a)return c;var e=3>arguments.length;b=X.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else o(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Ia(a,b,c,d){var e=3>arguments.length;return b=X.createCallback(b,d,4),Ea(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function Ja(a){var b=-1,c=a?a.length:0,d=Za("number"==typeof c?c:0);return Da(a,function(a){var c=ha(0,++b);d[b]=d[c],d[c]=a}),d}function Ka(a,b,c){var d;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&!(d=b(a[c],c,a)););else o(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function La(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=X.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:n;return l(a,0,Db(Cb(0,d),e))}function Ma(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Cb(0,e+d):d||0}else if(d)return d=Oa(b,c),b[d]===c?d:-1;return a(b,c,d)}function Na(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=X.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Cb(0,b);return l(a,d)}function Oa(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?X.createCallback(c,d,1):Ua,b=c(b);f>e;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function Pa(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=X.createCallback(c,d,3)),ia(a,b,c)}function Qa(){for(var a=1<arguments.length?arguments:arguments[0],b=-1,c=a?Ga(Tb(a,"length")):0,d=Za(0>c?0:c);++b<c;)d[b]=Tb(a,b);return d}function Ra(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Jb(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Sa(a,b){return 2<arguments.length?ka(a,17,l(arguments,2),null,b):ka(a,1,null,null,b)}function Ta(a,b,c){function d(){k&&nb(k),g=k=l=n,(p||o!==b)&&(m=Ub(),h=a.apply(j,f),k||g||(f=j=null))}function e(){var c=b-(Ub()-i);c>0?k=tb(e,c):(g&&nb(g),c=l,g=k=l=n,c&&(m=Ub(),h=a.apply(j,f),k||g||(f=j=null)))}var f,g,h,i,j,k,l,m=0,o=!1,p=!0;if(!ua(a))throw new gb;if(b=Cb(0,b)||0,!0===c)var q=!0,p=!1;else va(c)&&(q=c.leading,o="maxWait"in c&&(Cb(b,c.maxWait)||0),p="trailing"in c?c.trailing:p);return function(){if(f=arguments,i=Ub(),j=this,l=p&&(k||!q),!1===o)var c=q&&!k;else{g||q||(m=i);var n=o-(i-m),r=0>=n;r?(g&&(g=nb(g)),m=i,h=a.apply(j,f)):g||(g=tb(d,n))}return r&&k?k=nb(k):k||b===o||(k=tb(e,b)),c&&(r=!0,h=a.apply(j,f)),!r||k||g||(f=j=null),h}}function Ua(a){return a}function Va(a,b,c){var d=!0,e=b&&sa(b);b&&(c||e.length)||(null==c&&(c=b),f=Y,b=a,a=X,e=sa(b)),!1===c?d=!1:va(c)&&"chain"in c&&(d=c.chain);var f=a,g=ua(f);Da(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];if(sb.apply(g,arguments),g=e.apply(a,g),d||b){if(c===g&&va(g))return this;g=new f(g),g.__chain__=b}return g})})}function Wa(){}function Xa(a){return function(b){return b[a]}}function Ya(){return this.__wrapped__}c=c?$.defaults(V.Object(),c,$.pick(V,G)):V;var Za=c.Array,$a=c.Boolean,_a=c.Date,ab=c.Function,bb=c.Math,cb=c.Number,db=c.Object,eb=c.RegExp,fb=c.String,gb=c.TypeError,hb=[],ib=db.prototype,jb=c._,kb=ib.toString,lb=eb("^"+fb(kb).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),mb=bb.ceil,nb=c.clearTimeout,ob=bb.floor,pb=ab.prototype.toString,qb=na(qb=db.getPrototypeOf)&&qb,rb=ib.hasOwnProperty,sb=hb.push,tb=c.setTimeout,ub=hb.splice,vb=hb.unshift,wb=function(){try{var a={},b=na(b=db.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),xb=na(xb=db.create)&&xb,yb=na(yb=Za.isArray)&&yb,zb=c.isFinite,Ab=c.isNaN,Bb=na(Bb=db.keys)&&Bb,Cb=bb.max,Db=bb.min,Eb=c.parseInt,Fb=bb.random,Gb={};Gb[I]=Za,Gb[J]=$a,Gb[K]=_a,Gb[L]=ab,Gb[N]=db,Gb[M]=cb,Gb[O]=eb,Gb[P]=fb,Y.prototype=X.prototype;var Hb=X.support={};Hb.funcDecomp=!na(c.a)&&E.test(m),Hb.funcNames="string"==typeof ab.name,X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:X}},xb||(aa=function(){function a(){}return function(b){if(va(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var Ib=wb?function(a,b){S.value=b,wb(a,"__bindData__",S)}:Wa,Jb=yb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kb.call(a)==I||!1},Kb=Bb?function(a){return va(a)?Bb(a):[]}:W,Lb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mb=ta(Lb),Nb=eb("("+Kb(Mb).join("|")+")","g"),Ob=eb("["+Kb(Lb).join("")+"]","g"),Pb=qb?function(a){if(!a||kb.call(a)!=N)return!1;var b=a.valueOf,c=na(b)&&(c=qb(b))&&qb(c);return c?a==c||qb(a)==c:oa(a)}:oa,Qb=ja(function(a,b,c){rb.call(a,c)?a[c]++:a[c]=1}),Rb=ja(function(a,b,c){(rb.call(a,c)?a[c]:a[c]=[]).push(b)}),Sb=ja(function(a,b,c){a[c]=b}),Tb=Fa,Ub=na(Ub=_a.now)&&Ub||function(){return(new _a).getTime()},Vb=8==Eb(u+"08")?Eb:function(a,b){return Eb(xa(a)?a.replace(C,""):a,b||0)};return X.after=function(a,b){if(!ua(b))throw new gb;return function(){return 1>--a?b.apply(this,arguments):void 0}},X.assign=U,X.at=function(a){for(var b=arguments,c=-1,d=ea(b,!0,!1,1),b=b[2]&&b[2][b[1]]===a?1:d.length,e=Za(b);++c<b;)e[c]=a[d[c]];return e},X.bind=Sa,X.bindAll=function(a){for(var b=1<arguments.length?ea(arguments,!0,!1,1):sa(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ka(a[e],1,null,null,a)}return a},X.bindKey=function(a,b){return 2<arguments.length?ka(b,19,l(arguments,2),null,a):ka(b,3,null,null,a)},X.chain=function(a){return a=new Y(a),a.__chain__=!0,a},X.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d},X.compose=function(){for(var a=arguments,b=a.length;b--;)if(!ua(a[b]))throw new gb;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},X.constant=function(a){return function(){return a}},X.countBy=Qb,X.create=function(a,b){var c=aa(a);return b?U(c,b):c},X.createCallback=function(a,b,c){var d=typeof a;if(null==a||"function"==d)return ba(a,b,c);if("object"!=d)return Xa(a);var e=Kb(a),f=e[0],g=a[f];return 1!=e.length||g!==g||va(g)?function(b){for(var c=e.length,d=!1;c--&&(d=fa(b[e[c]],a[e[c]],null,!0)););return d}:function(a){return a=a[f],g===a&&(0!==g||1/g==1/a)}},X.curry=function(a,b){return b="number"==typeof b?b:+b||a.length,ka(a,4,null,null,null,b)},X.debounce=Ta,X.defaults=t,X.defer=function(a){if(!ua(a))throw new gb;var b=l(arguments,1);return tb(function(){a.apply(n,b)},1)},X.delay=function(a,b){if(!ua(a))throw new gb;var c=l(arguments,2);return tb(function(){a.apply(n,c)},b)},X.difference=function(a){return da(a,ea(arguments,!0,!0,1))},X.filter=Ba,X.flatten=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=Fa(a,c,d)),ea(a,b)},X.forEach=Da,X.forEachRight=Ea,X.forIn=p,X.forInRight=function(a,b,c){var d=[];p(a,function(a,b){d.push(b,a)});var e=d.length;for(b=ba(b,c,3);e--&&!1!==b(d[e--],d[e],a););return a},X.forOwn=o,X.forOwnRight=ra,X.functions=sa,X.groupBy=Rb,X.indexBy=Sb,X.initial=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return l(a,0,Db(Cb(0,e-d),e))},X.intersection=function(){for(var c=[],d=-1,e=arguments.length,g=h(),i=ma(),l=i===a,m=h();++d<e;){var n=arguments[d];(Jb(n)||qa(n))&&(c.push(n),g.push(l&&n.length>=s&&f(d?c[d]:m)))}var l=c[0],o=-1,p=l?l.length:0,q=[];a:for(;++o<p;){var r=g[0],n=l[o];if(0>(r?b(r,n):i(m,n))){for(d=e,(r||m).push(n);--d;)if(r=g[d],0>(r?b(r,n):i(c[d],n)))continue a;q.push(n)}}for(;e--;)(r=g[e])&&k(r);return j(g),j(m),q},X.invert=ta,X.invoke=function(a,b){var c=l(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Za("number"==typeof f?f:0);return Da(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},X.keys=Kb,X.map=Fa,X.mapValues=function(a,b,c){var d={};return b=X.createCallback(b,c,3),o(a,function(a,c,e){d[c]=b(a,c,e)}),d},X.max=Ga,X.memoize=function(a,b){function c(){var d=c.cache,e=b?b.apply(this,arguments):r+arguments[0];return rb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}if(!ua(a))throw new gb;return c.cache={},c},X.merge=function(a){var b=arguments,c=2;if(!va(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=ba(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var b=l(arguments,1,c),e=-1,f=h(),g=h();++e<c;)ga(a,b[e],d,f,g);return j(f),j(g),a},X.min=function(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jb(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];f>h&&(f=h)}}else b=null==b&&xa(a)?d:X.createCallback(b,c,3),Da(a,function(a,c,d){c=b(a,c,d),e>c&&(e=c,f=a)});return f},X.omit=function(a,b,c){var d={};if("function"!=typeof b){var e=[];p(a,function(a,b){e.push(b)});for(var e=da(e,ea(arguments,!0,!1,1)),f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d},X.once=function(a){var b,c;if(!ua(a))throw new gb;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},X.pairs=function(a){for(var b=-1,c=Kb(a),d=c.length,e=Za(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e},X.partial=function(a){return ka(a,16,l(arguments,1))},X.partialRight=function(a){return ka(a,32,null,l(arguments,1))},X.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=ea(arguments,!0,!1,1),g=va(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d},X.pluck=Tb,X.property=Xa,X.pull=function(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(ub.call(a,f--,1),e--);return a},X.range=function(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);var d=-1;b=Cb(0,mb((b-a)/(c||1)));for(var e=Za(b);++d<b;)e[d]=a,a+=c;return e},X.reject=function(a,b,c){return b=X.createCallback(b,c,3),Ba(a,function(a,c,d){return!b(a,c,d)})},X.remove=function(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=X.createCallback(b,c,3);++d<e;)c=a[d],b(c,d,a)&&(f.push(c),ub.call(a,d--,1),e--);return f},X.rest=Na,X.shuffle=Ja,X.sortBy=function(a,b,c){var d=-1,f=Jb(b),g=a?a.length:0,l=Za("number"==typeof g?g:0);for(f||(b=X.createCallback(b,c,3)),Da(a,function(a,c,e){var g=l[++d]=i();f?g.m=Fa(b,function(b){return a[b]}):(g.m=h())[0]=b(a,c,e),g.n=d,g.o=a}),g=l.length,l.sort(e);g--;)a=l[g],l[g]=a.o,f||j(a.m),k(a);return l},X.tap=function(a,b){return b(a),a},X.throttle=function(a,b,c){var d=!0,e=!0;if(!ua(a))throw new gb;return!1===c?d=!1:va(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),R.leading=d,R.maxWait=b,R.trailing=e,Ta(a,b,R)},X.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,e=Za(a);for(b=ba(b,c,1);++d<a;)e[d]=b(d);return e},X.toArray=function(a){return a&&"number"==typeof a.length?l(a):ya(a)},X.transform=function(a,b,c,d){var e=Jb(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor;c=aa(f&&f.prototype)}return b&&(b=X.createCallback(b,d,4),(e?Da:o)(a,function(a,d,e){return b(c,a,d,e)})),c},X.union=function(){return ia(ea(arguments,!0,!0))},X.uniq=Pa,X.values=ya,X.where=Ba,X.without=function(a){return da(a,l(arguments,1))},X.wrap=function(a,b){return ka(b,16,[a])},X.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Jb(c)||qa(c))var d=d?ia(da(d,c).concat(da(c,d))):c}return d||[]},X.zip=Qa,X.zipObject=Ra,X.collect=Fa,X.drop=Na,X.each=Da,X.eachRight=Ea,X.extend=U,X.methods=sa,X.object=Ra,X.select=Ba,X.tail=Na,X.unique=Pa,X.unzip=Qa,Va(X),X.clone=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&ba(c,d,1))},X.cloneDeep=function(a,b,c){return _(a,!0,"function"==typeof b&&ba(b,c,1))},X.contains=za,X.escape=function(a){return null==a?"":fb(a).replace(Ob,la)},X.every=Aa,X.find=Ca,X.findIndex=function(a,b,c){var d=-1,e=a?a.length:0;for(b=X.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1},X.findKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),o(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.findLast=function(a,b,c){var d;return b=X.createCallback(b,c,3),Ea(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d},X.findLastIndex=function(a,b,c){var d=a?a.length:0;for(b=X.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1},X.findLastKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),ra(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.has=function(a,b){return a?rb.call(a,b):!1},X.identity=Ua,X.indexOf=Ma,X.isArguments=qa,X.isArray=Jb,X.isBoolean=function(a){return!0===a||!1===a||a&&"object"==typeof a&&kb.call(a)==J||!1},X.isDate=function(a){return a&&"object"==typeof a&&kb.call(a)==K||!1},X.isElement=function(a){return a&&1===a.nodeType||!1},X.isEmpty=function(a){var b=!0;if(!a)return b;var c=kb.call(a),d=a.length;return c==I||c==P||c==H||c==N&&"number"==typeof d&&ua(a.splice)?!d:(o(a,function(){return b=!1}),b)},X.isEqual=function(a,b,c,d){return fa(a,b,"function"==typeof c&&ba(c,d,2))},X.isFinite=function(a){return zb(a)&&!Ab(parseFloat(a))},X.isFunction=ua,X.isNaN=function(a){return wa(a)&&a!=+a},X.isNull=function(a){return null===a},X.isNumber=wa,X.isObject=va,X.isPlainObject=Pb,X.isRegExp=function(a){return a&&"object"==typeof a&&kb.call(a)==O||!1},X.isString=xa,X.isUndefined=function(a){return"undefined"==typeof a},X.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Cb(0,d+c):Db(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},X.mixin=Va,X.noConflict=function(){return c._=jb,this},X.noop=Wa,X.now=Ub,X.parseInt=Vb,X.random=function(a,b,c){var d=null==a,e=null==b;return null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=Fb(),Db(a+c*(b-a+parseFloat("1e-"+((c+"").length-1))),b)):ha(a,b)},X.reduce=Ha,X.reduceRight=Ia,X.result=function(a,b){if(a){var c=a[b];return ua(c)?a[b]():c}},X.runInContext=m,X.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Kb(a).length},X.some=Ka,X.sortedIndex=Oa,X.template=function(a,b,c){var d=X.templateSettings;a=fb(a||""),c=t({},c,d);var e,f=t({},c.imports,d.imports),d=Kb(f),f=ya(f),h=0,i=c.interpolate||D,j="__p+='",i=eb((c.escape||D).source+"|"+i.source+"|"+(i===B?y:D).source+"|"+(c.evaluate||D).source+"|$","g");a.replace(i,function(b,c,d,f,i,k){return d||(d=f),j+=a.slice(h,k).replace(F,g),c&&(j+="'+__e("+c+")+'"),i&&(e=!0,j+="';"+i+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),h=k+b.length,b}),j+="';",i=c=c.variable,i||(c="obj",j="with("+c+"){"+j+"}"),j=(e?j.replace(v,""):j).replace(w,"$1").replace(x,"$1;"),j="function("+c+"){"+(i?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}";try{var k=ab(d,"return "+j).apply(n,f)}catch(l){throw l.source=j,l}return b?k(b):(k.source=j,k)},X.unescape=function(a){return null==a?"":fb(a).replace(Nb,pa)},X.uniqueId=function(a){var b=++q;return fb(null==a?"":a)+b},X.all=Aa,X.any=Ka,X.detect=Ca,X.findWhere=Ca,X.foldl=Ha,X.foldr=Ia,X.include=za,X.inject=Ha,Va(function(){var a={};return o(X,function(b,c){
X.prototype[c]||(a[c]=b)}),a}(),!1),X.first=La,X.last=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:n;return l(a,Cb(0,e-d))},X.sample=function(a,b,c){return a&&"number"!=typeof a.length&&(a=ya(a)),null==b||c?a?a[ha(0,a.length-1)]:n:(a=Ja(a),a.length=Db(Cb(0,b),a.length),a)},X.take=La,X.head=La,o(X,function(a,b){var c="sample"!==b;X.prototype[b]||(X.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Y(f,e):f})}),X.VERSION="2.4.1",X.prototype.chain=function(){return this.__chain__=!0,this},X.prototype.toString=function(){return fb(this.__wrapped__)},X.prototype.value=Ya,X.prototype.valueOf=Ya,Da(["join","pop","shift"],function(a){var b=hb[a];X.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new Y(c,a):c}}),Da(["push","reverse","sort","unshift"],function(a){var b=hb[a];X.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Da(["concat","slice","splice"],function(a){var b=hb[a];X.prototype[a]=function(){return new Y(b.apply(this.__wrapped__,arguments),this.__chain__)}}),X}var n,o=[],p=[],q=0,r=+new Date+"",s=75,t=40,u=" 	\fÂ \ufeff\n\r\u2028\u2029áá ââ?ââ?âââââ?âââ¯â?ã",v=/\b__p\+='';/g,w=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,C=RegExp("^["+u+"]*0+(?=.$)"),D=/($^)/,E=/\bthis\b/,F=/['\n\r\t\u2028\u2029\\]/g,G="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),H="[object Arguments]",I="[object Array]",J="[object Boolean]",K="[object Date]",L="[object Function]",M="[object Number]",N="[object Object]",O="[object RegExp]",P="[object String]",Q={};Q[L]=!1,Q[H]=Q[I]=Q[J]=Q[K]=Q[M]=Q[N]=Q[O]=Q[P]=!0;var R={leading:!1,maxWait:0,trailing:!1},S={configurable:!1,enumerable:!1,value:null,writable:!1},T={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=T[typeof window]&&window||this,W=T[typeof exports]&&exports&&!exports.nodeType&&exports,X=T[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===W&&W,Z=T[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(V=Z);var $=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=$,define("_",[],function(){return $})):W&&X?Y?(X.exports=$)._=$:W._=$:V._=$}.call(this),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),define("backbone",["jquery","_"],function(a){return function(){var b;return b||a.Backbone}}(this)),Backbone.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength()},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(Backbone,_),Backbone.Wreqr=function(a,b,c){var d={};return d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw new Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,c),d.CommandStorage=function(){var b=function(a){this.options=a,this._commands={},c.isFunction(this.initialize)&&this.initialize(a)};return c.extend(b.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),b}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,d){var e=this.storage.getCommands(a);c.each(e.instances,function(a){b.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var b,d=a.storageType||this.storageType;b=c.isFunction(d)?new d:d,this.storage=b}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.getHandler(a).apply(this,b)}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,c),d}(Backbone,Backbone.Marionette,_);var Marionette=function(a,b,c){function d(a){return g.call(a)}function e(a,b){var c=new Error(a);throw c.name=b||"Error",c}var f={};b.Marionette=f,f.$=b.$;var g=Array.prototype.slice;return f.extend=b.Model.extend,f.getOption=function(a,b){if(a&&b){var c;return c=a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]}},f.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi,d=function(d){var e="on"+d.replace(b,a),f=this[e];return c.isFunction(this.trigger)&&this.trigger.apply(this,arguments),c.isFunction(f)?f.apply(this,c.tail(arguments)):void 0};return d}(),f.MonitorDOMRefresh=function(){function a(a){a._isShown=!0,d(a)}function b(a){a._isRendered=!0,d(a)}function d(a){a._isShown&&a._isRendered&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(c){c.listenTo(c,"show",function(){a(c)}),c.listenTo(c,"render",function(){b(c)})}}(),function(a){function b(a,b,d,f){var g=f.split(/\s+/);c.each(g,function(c){var f=a[c];f||e("Method '"+c+"' was configured as an event handler, but does not exist."),a.listenTo(b,d,f,a)})}function d(a,b,c,d){a.listenTo(b,c,d,a)}function f(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e,a)})}function g(a,b,c,d){a.stopListening(b,c,d,a)}function h(a,b,d,e,f){b&&d&&(c.isFunction(d)&&(d=d.call(a)),c.each(d,function(d,g){c.isFunction(d)?e(a,b,g,d):f(a,b,g,d)}))}a.bindEntityEvents=function(a,c,e){h(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){h(a,b,c,g,f)}}(f),f.Callbacks=function(){this._deferred=f.$.Deferred(),this._callbacks=[]},c.extend(f.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b}),this._deferred.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=f.$.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),f.Controller=function(a){this.triggerMethod=f.triggerMethod,this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},f.Controller.extend=f.extend,c.extend(f.Controller.prototype,b.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),f.Region=function(a){if(this.options=a||{},this.el=f.getOption(this,"el"),!this.el){var b=new Error("An 'el' must be specified for a region.");throw b.name="NoElError",b}if(this.initialize){var c=Array.prototype.slice.apply(arguments);this.initialize.apply(this,c)}},c.extend(f.Region,{buildRegion:function(a,b){var d="string"==typeof a,e="string"==typeof a.selector,f="undefined"==typeof a.regionType,g="function"==typeof a;if(!g&&!d&&!e)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;d&&(h=a),a.selector&&(h=a.selector),g&&(i=a),!g&&f&&(i=b),a.regionType&&(i=a.regionType);var j=new i({el:h});return a.parentEl&&(j.getEl=function(b){var d=a.parentEl;return c.isFunction(d)&&(d=d()),d.find(b)}),j}}),c.extend(f.Region.prototype,b.Events,{show:function(a){this.ensureEl();var b=a.isClosed||c.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),(d||b)&&this.open(a),this.currentView=a,f.triggerMethod.call(this,"show",a),f.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return f.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),f.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close(),delete this.$el}}),f.Region.extend=f.extend,f.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={},a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return c.each(a,function(a,e){"string"==typeof a&&(a={selector:a}),a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(e,a);d[e]=f},this),d},addRegion:function(b,d){var e,f=c.isObject(d),g=c.isString(d),h=!!d.selector;return e=g||f&&h?a.Region.buildRegion(d,a.Region):c.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){var b=this._regions[a];this._remove(a,b)},removeRegions:function(){c.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){c.each(this._regions,function(a,b){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){b.close(),delete this._regions[a],this._setLength(),this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=c.size(this._regions)}}),d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return c.each(d,function(a){b.prototype[a]=function(){var b=c.values(this._regions),d=[b].concat(c.toArray(arguments));return c[a].apply(c,d)}}),b}(f),f.TemplateCache=function(a){this.templateId=a},c.extend(f.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new f.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=d(arguments),c=b.length;if(c>0)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(f.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var b=f.$(a).html();return b&&0!==b.length||e("Could not find template: '"+a+"'","NoTemplateError"),b},compileTemplate:function(a){return c.template(a)}}),f.Renderer={render:function(a,b){if(!a){var c=new Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c}var d;return(d="function"==typeof a?a:f.TemplateCache.get(a))(b)}},f.View=b.View.extend({constructor:function(){c.bindAll(this,"render");var a=Array.prototype.slice.apply(arguments);b.View.prototype.constructor.apply(this,a),f.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:f.triggerMethod,getTemplate:function(){return f.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var b=f.getOption(this,"templateHelpers");return c.isFunction(b)&&(b=b.call(this)),c.extend(a,b)},configureTriggers:function(){if(this.triggers){var a={},b=c.result(this,"triggers");return c.each(b,function(b,c){
a[c]=function(a){a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation();var c={view:this,model:this.model,collection:this.collection};this.triggerMethod(b,c)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),f.bindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.bindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,c.isFunction(a)&&(a=a.call(this));var d={},e=this.configureTriggers();c.extend(d,a,e),b.View.prototype.delegateEvents.call(this,d)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);b.View.prototype.undelegateEvents.apply(this,a),f.unbindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.unbindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=this.triggerMethod("before:close");a!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={},c.each(c.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),f.ItemView=f.View.extend({constructor:function(){f.View.prototype.constructor.apply(this,d(arguments))},serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=f.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),f.View.prototype.close.apply(this,d(arguments)),this.triggerMethod("item:closed"))}}),f.CollectionView=f.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage(),f.View.prototype.constructor.apply(this,d(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a,b,c){this.closeEmptyView();var d=this.getItemView(a),e=this.collection.indexOf(a);this.addItemView(a,d,e)},onShowCalled:function(){this.children.each(function(a){f.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b),this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=f.getOption(this,"emptyView");if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new b.Model;this.addItemView(c,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(a){var b=f.getOption(this,"itemView");return b||e("An `itemView` must be specified","NoItemViewError"),b},addItemView:function(a,b,d){var e=f.getOption(this,"itemViewOptions");c.isFunction(e)&&(e=e.call(this,a,d));var g=this.buildItemView(a,b,e);this.addChildViewEventForwarding(g),this.triggerMethod("before:item:added",g),this.children.add(g),this.renderItemView(g,d),this._isShown&&f.triggerMethod.call(g,"show"),this.triggerMethod("after:item:added",g)},addChildViewEventForwarding:function(a){var b=f.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=d(arguments);c[0]=b+":"+c[0],c.splice(1,0,a),f.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render(),this.appendHtml(this,a,b)},buildItemView:function(a,b,d){var e=c.extend({model:a},d);return new b(e)},removeItemView:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a)),this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(a,b,c){a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),f.View.prototype.close.apply(this,d(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this),this.checkEmpty()}}),f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.prototype.constructor.apply(this,d(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(a){var b=f.getOption(this,"itemView")||this.constructor;return b||e("An `itemView` must be specified","NoItemViewError"),b},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(f.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a);var b=this.getTemplate();return f.Renderer.render(b,a)},appendHtml:function(a,b,c){var d=this.getItemViewContainer(a);d.append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b,d=f.getOption(a,"itemViewContainer");if(d){var g=c.isFunction(d)?d():d;b=a.$(g),b.length<=0&&e("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")}else b=a.$el;return a.$itemViewContainer=b,b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),f.Layout=f.ItemView.extend({regionType:f.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),f.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments),b=f.ItemView.prototype.render.apply(this,a);return b},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);f.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,c={regionType:f.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager(),b=c.isFunction(this.regions)?this.regions(a):this.regions||{},this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new f.RegionManager,this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b,this.trigger("region:add",a,b)}),this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a],this.trigger("region:remove",a,b)})}}),f.AppRouter=b.Router.extend({constructor:function(a){b.Router.prototype.constructor.apply(this,d(arguments)),this.options=a||{};var c=f.getOption(this,"appRoutes"),e=this._getController();this.processAppRoutes(e,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return f.getOption(this,"controller")},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new Error("Method '"+d+"' was not found on the controller");this.route(b,d,c.bind(e,a))}}),f.Application=function(a){this._initRegionManager(),this._initCallbacks=new f.Callbacks,this.vent=new b.Wreqr.EventAggregator,this.commands=new b.Wreqr.Commands,this.reqres=new b.Wreqr.RequestResponse,this.submodules={},c.extend(this,a),this.triggerMethod=f.triggerMethod},c.extend(f.Application.prototype,b.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a),this._initCallbacks.run(a,this),this.triggerMethod("initialize:after",a),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var c=d(arguments);return c.unshift(this),f.Module.create.apply(f.Module,c)},_initRegionManager:function(){this._regionManager=new f.RegionManager,this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b}),this.listenTo(this._regionManager,"region:remove",function(a,b){delete this[a]})}}),f.Application.extend=f.extend,f.Module=function(a,b){this.moduleName=a,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,this.startWithParent=!0,this.triggerMethod=f.triggerMethod},c.extend(f.Module.prototype,b.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,f.triggerMethod.call(this,"before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),f.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var e=c.flatten([this,this.app,b,f,f.$,c,d]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks,this._finalizerCallbacks=new f.Callbacks}}),c.extend(f.Module,{create:function(a,b,e){var f=a,g=d(arguments);g.splice(0,3),b=b.split(".");var h=b.length,i=[];return i[h-1]=e,c.each(b,function(b,c){var d=f;f=this._getModule(d,b,a),this._addModuleDefinition(d,f,i[c],g)},this),f},_getModule:function(a,b,c,d,e){var g=a[b];return g||(g=new f.Module(b,c),a[b]=g,a.submodules[b]=g),g},_addModuleDefinition:function(a,b,d,e){var f,g;c.isFunction(d)?(f=d,g=!0):c.isObject(d)?(f=d.define,g=d.startWithParent):g=!0,f&&b.addDefinition(f,e),b.startWithParent=b.startWithParent&&g,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),f}(this,Backbone,_);define("marionette",["jquery","_","backbone"],function(a){return function(){var b;return b||a.Marionette}}(this)),!function(a){if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define("Q",[],a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else Q=a()}(function(){function a(a){return function(){return X.apply(a,arguments)}}function b(a){return a===Object(a)}function c(a){return"[object StopIteration]"===da(a)||a instanceof T}function d(a,b){if(Q&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(fa)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var f=c.join("\n"+fa+"\n");a.stack=e(f)}}function e(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];h(e)||f(e)||!e||c.push(e)}return c.join("\n")}function f(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function g(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function h(a){var b=g(a);if(!b)return!1;var c=b[0],d=b[1];return c===S&&d>=U&&ka>=d}function i(){if(Q)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=g(c);if(!d)return;return S=d[0],d[1]}}function j(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&void 0,a.apply(a,arguments)}}function k(a){return r(a)?a:s(a)?D(a):C(a)}function l(){function a(a){b=a,f.source=a,Z(c,function(b,c){W(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=aa(l.prototype),f=aa(o.prototype);if(f.promiseDispatch=function(a,e,f){var g=Y(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):W(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=j(function(){if(c)return f;var a=q(b);return r(a)&&(b=a),a},"valueOf","inspect"),f.inspect=function(){return b?b.inspect():{state:"pending"}},k.longStackSupport&&Q)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(k(c))},e.fulfill=function(c){b||a(C(c))},e.reject=function(c){b||a(B(c))},e.notify=function(a){b||Z(d,function(b,c){W(function(){c(a)})},void 0)},e}function m(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=l();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function n(a){return m(function(b,c){for(var d=0,e=a.length;e>d;d++)k(a[d]).then(b,c)})}function o(a,b,c){void 0===b&&(b=function(a){return B(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=aa(o.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=B(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=j(function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value})}return d}function p(a,b,c,d){return k(a).then(b,c,d)}function q(a){if(r(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function r(a){return b(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function s(a){return b(a)&&"function"==typeof a.then}function t(a){return r(a)&&"pending"===a.inspect().state}function u(a){return!r(a)||"fulfilled"===a.inspect().state}function v(a){return r(a)&&"rejected"===a.inspect().state}function w(){ia||"undefined"==typeof window||window.Touch||!window.console||void 0,ia=!0}function x(){for(var a=0;a<ga.length;a++){ga[a]}}function y(){ga.length=0,ha.length=0,ia=!1,ja||(ja=!0,"undefined"!=typeof process&&process.on&&process.on("exit",x))}function z(a,b){ja&&(ha.push(a),b&&"undefined"!=typeof b.stack?ga.push(b.stack):ga.push("(no stack) "+b),w())}function A(a){if(ja){var b=$(ha,a);-1!==b&&(ha.splice(b,1),ga.splice(b,1))}}function B(a){var b=o({when:function(b){return b&&A(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return z(b,a),b}function C(a){return o({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return ca(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function D(a){var b=l();return W(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function E(a){return o({isDef:function(){}},function(b,c){return K(a,b,c)},function(){return k(a).inspect()})}function F(a,b,c){return k(a).spread(b,c)}function G(a){return function(){function b(a,b){var g;if(ea){try{g=d[a](b)}catch(h){return B(h)}return g.done?g.value:p(g.value,e,f)}try{g=d[a](b)}catch(h){return c(h)?h.value:B(h)}return p(g,e,f)}var d=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function H(a){k.done(k.async(a)())}function I(a){throw new T(a)}function J(a){return function(){return F([this,L(arguments)],function(b,c){return a.apply(b,c)})}}function K(a,b,c){return k(a).dispatch(b,c)}function L(a){return p(a,function(a){var b=0,c=l();return Z(a,function(d,e,f){var g;r(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,p(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function M(a){return p(a,function(a){return a=_(a,k),p(L(_(a,function(a){return p(a,V,V)})),function(){return a})})}function N(a){return k(a).allSettled()}function O(a,b){return k(a).then(void 0,void 0,b)}function P(a,b){return k(a).nodeify(b)}var Q=!1;try{throw new Error}catch(R){Q=!!R.stack}var S,T,U=i(),V=function(){},W=function(){function a(){for(;b.next;){b=b.next;var c=b.task;b.task=void 0;var e=b.domain;e&&(b.domain=void 0,e.enter());try{c()}catch(g){if(f)throw e&&e.exit(),setTimeout(a,0),e&&e.enter(),g;setTimeout(function(){throw g},0)}e&&e.exit()}d=!1}var b={task:void 0,next:null},c=b,d=!1,e=void 0,f=!1;if(W=function(a){c=c.next={task:a,domain:f&&process.domain,next:null},d||(d=!0,e())},"undefined"!=typeof process&&process.nextTick)f=!0,e=function(){process.nextTick(a)};else if("function"==typeof setImmediate)e="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var g=new MessageChannel;g.port1.onmessage=function(){e=h,g.port1.onmessage=a,a()};var h=function(){g.port2.postMessage(0)};e=function(){setTimeout(a,0),h()}}else e=function(){setTimeout(a,0)};return W}(),X=Function.call,Y=a(Array.prototype.slice),Z=a(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),$=a(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),_=a(Array.prototype.map||function(a,b){var c=this,d=[];return Z(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),aa=Object.create||function(a){function b(){}return b.prototype=a,new b},ba=a(Object.prototype.hasOwnProperty),ca=Object.keys||function(a){var b=[];for(var c in a)ba(a,c)&&b.push(c);return b},da=a(Object.prototype.toString);T="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var ea;try{new Function("(function* (){ yield 1; })"),ea=!0}catch(R){ea=!1}var fa="From previous event:";k.resolve=k,k.nextTick=W,k.longStackSupport=!1,k.defer=l,l.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(Y(arguments,1)):a.resolve(c)}},k.promise=m,k.passByCopy=function(a){return a},o.prototype.passByCopy=function(){return this},k.join=function(a,b){return k(a).join(b)},o.prototype.join=function(a){return k([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},k.race=n,o.prototype.race=function(){return this.then(k.race)},k.makePromise=o,o.prototype.toString=function(){return"[object Promise]"},o.prototype.then=function(a,b,c){function e(b){try{return"function"==typeof a?a(b):b}catch(c){return B(c)}}function f(a){if("function"==typeof b){d(a,h);try{return b(a)}catch(c){return B(c)}}return B(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=l(),j=!1;return W(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(e(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!k.onerror)throw d;k.onerror(d)}c||i.notify(b)}]),i.promise},k.when=p,o.prototype.thenResolve=function(a){return this.then(function(){return a})},k.thenResolve=function(a,b){return k(a).thenResolve(b)},o.prototype.thenReject=function(a){return this.then(function(){throw a})},k.thenReject=function(a,b){return k(a).thenReject(b)},k.nearer=q,k.isPromise=r,k.isPromiseAlike=s,k.isPending=t,o.prototype.isPending=function(){return"pending"===this.inspect().state},k.isFulfilled=u,o.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},k.isRejected=v,o.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ga=[],ha=[],ia=!1,ja=!0;k.resetUnhandledRejections=y,k.getUnhandledReasons=function(){return ga.slice()},k.stopUnhandledRejectionTracking=function(){y(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",x),ja=!1},y(),k.reject=B,k.fulfill=C,k.master=E,k.spread=F,o.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},k.async=G,k.spawn=H,k["return"]=I,k.promised=J,k.dispatch=K,o.prototype.dispatch=function(a,b){var c=this,d=l();return W(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},k.get=function(a,b){return k(a).dispatch("get",[b])},o.prototype.get=function(a){return this.dispatch("get",[a])},k.set=function(a,b,c){return k(a).dispatch("set",[b,c])},o.prototype.set=function(a,b){return this.dispatch("set",[a,b])},k.del=k["delete"]=function(a,b){return k(a).dispatch("delete",[b])},o.prototype.del=o.prototype["delete"]=function(a){return this.dispatch("delete",[a])},k.mapply=k.post=function(a,b,c){return k(a).dispatch("post",[b,c])},o.prototype.mapply=o.prototype.post=function(a,b){return this.dispatch("post",[a,b])},k.send=k.mcall=k.invoke=function(a,b){return k(a).dispatch("post",[b,Y(arguments,2)])},o.prototype.send=o.prototype.mcall=o.prototype.invoke=function(a){return this.dispatch("post",[a,Y(arguments,1)])},k.fapply=function(a,b){return k(a).dispatch("apply",[void 0,b])},o.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},k["try"]=k.fcall=function(a){return k(a).dispatch("apply",[void 0,Y(arguments,1)])},o.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},k.fbind=function(a){var b=k(a),c=Y(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(Y(arguments))])}},o.prototype.fbind=function(){var a=this,b=Y(arguments);return function(){return a.dispatch("apply",[this,b.concat(Y(arguments))])}},k.keys=function(a){return k(a).dispatch("keys",[])},o.prototype.keys=function(){return this.dispatch("keys",[])},k.all=L,o.prototype.all=function(){return L(this)},k.allResolved=j(M,"allResolved","allSettled"),o.prototype.allResolved=function(){return M(this)},k.allSettled=N,o.prototype.allSettled=function(){return this.then(function(a){return L(_(a,function(a){function b(){return a.inspect()}return a=k(a),a.then(b,b)}))})},k.fail=k["catch"]=function(a,b){return k(a).then(void 0,b)},o.prototype.fail=o.prototype["catch"]=function(a){return this.then(void 0,a)},k.progress=O,o.prototype.progress=function(a){return this.then(void 0,void 0,a)},k.fin=k["finally"]=function(a,b){return k(a)["finally"](b)},o.prototype.fin=o.prototype["finally"]=function(a){return a=k(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},k.done=function(a,b,c,d){return k(a).done(b,c,d)},o.prototype.done=function(a,b,c){var e=function(a){W(function(){if(d(a,f),!k.onerror)throw a;k.onerror(a)})},f=a||b||c?this.then(a,b,c):this;"object"==typeof process&&process&&process.domain&&(e=process.domain.bind(e)),f.then(void 0,e)},k.timeout=function(a,b,c){return k(a).timeout(b,c)},o.prototype.timeout=function(a,b){var c=l(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},k.delay=function(a,b){return void 0===b&&(b=a,a=void 0),k(a).delay(b)},o.prototype.delay=function(a){return this.then(function(b){var c=l();return setTimeout(function(){c.resolve(b)},a),c.promise})},k.nfapply=function(a,b){return k(a).nfapply(b)},o.prototype.nfapply=function(a){var b=l(),c=Y(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},k.nfcall=function(a){var b=Y(arguments,1);return k(a).nfapply(b)},o.prototype.nfcall=function(){var a=Y(arguments),b=l();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},k.nfbind=k.denodeify=function(a){var b=Y(arguments,1);return function(){var c=b.concat(Y(arguments)),d=l();return c.push(d.makeNodeResolver()),k(a).fapply(c).fail(d.reject),d.promise}},o.prototype.nfbind=o.prototype.denodeify=function(){var a=Y(arguments);return a.unshift(this),k.denodeify.apply(void 0,a)},k.nbind=function(a,b){var c=Y(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(Y(arguments)),f=l();return e.push(f.makeNodeResolver()),k(d).fapply(e).fail(f.reject),f.promise}},o.prototype.nbind=function(){var a=Y(arguments,0);return a.unshift(this),k.nbind.apply(void 0,a)},k.nmapply=k.npost=function(a,b,c){return k(a).npost(b,c)},o.prototype.nmapply=o.prototype.npost=function(a,b){var c=Y(b||[]),d=l();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},k.nsend=k.nmcall=k.ninvoke=function(a,b){var c=Y(arguments,2),d=l();return c.push(d.makeNodeResolver()),k(a).dispatch("post",[b,c]).fail(d.reject),d.promise},o.prototype.nsend=o.prototype.nmcall=o.prototype.ninvoke=function(a){var b=Y(arguments,1),c=l();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},k.nodeify=P,o.prototype.nodeify=function(a){return a?void this.then(function(b){W(function(){a(null,b)})},function(b){W(function(){a(b)})}):this};var ka=i();return k}),!function(root){function Context(a,b,c,d){this.stack=a,this.global=b,this.blocks=c,this.templateName=d}function Stack(a,b,c,d){this.tail=b,this.isObject=a&&"object"==typeof a,this.head=a,this.index=c,this.of=d}function Stub(a){this.head=new Chunk(this),this.callback=a,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(a,b,c){this.root=a,this.next=b,this.data=[],this.flushable=!1,this.taps=c}function Tap(a,b){this.head=a,this.tail=b}var dust={},NONE="NONE",ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",loggingLevels=[DEBUG,INFO,WARN,ERROR,NONE],EMPTY_FUNC=function(){},logger={},originalLog,loggerContext;dust.debugLevel=NONE,dust.config={whitespace:!1},dust._aliases={write:"w",end:"e",map:"m",render:"r",reference:"f",section:"s",exists:"x",notexists:"nx",block:"b",partial:"p",helper:"h"},root&&root.console&&root.console.log&&(loggerContext=root.console,originalLog=root.console.log),logger.log=loggerContext?function(){logger.log="function"==typeof originalLog?function(){originalLog.apply(loggerContext,arguments)}:function(){var a=Array.prototype.slice.apply(arguments).join(" ");originalLog(a)},logger.log.apply(this,arguments)}:function(){},dust.log=function(a,b){b=b||INFO,dust.debugLevel!==NONE&&dust.indexInArray(loggingLevels,b)>=dust.indexInArray(loggingLevels,dust.debugLevel)&&(dust.logQueue||(dust.logQueue=[]),dust.logQueue.push({message:a,type:b}),logger.log("[DUST "+b+"]: "+a))},dust.helpers={},dust.cache={},dust.register=function(a,b){a&&(dust.cache[a]=b)},dust.render=function(a,b,c){var d=new Stub(c).head;try{dust.load(a,d,Context.wrap(b,a)).end()}catch(e){d.setError(e)}},dust.stream=function(a,b){var c=new Stream,d=c.head;return dust.nextTick(function(){try{dust.load(a,c.head,Context.wrap(b,a)).end()}catch(e){d.setError(e)}}),c},dust.renderSource=function(a,b,c){return dust.compileFn(a)(b,c)},dust.compileFn=function(a,b){b=b||null;var c=dust.loadSource(dust.compile(a,b));return function(a,d){var e=d?new Stub(d):new Stream;return dust.nextTick(function(){"function"==typeof c?c(e.head,Context.wrap(a,b)).end():dust.log(new Error("Template ["+b+"] cannot be resolved to a Dust function"),ERROR)}),e}},dust.load=function(a,b,c){var d=dust.cache[a];return d?d(b,c):dust.onLoad?b.map(function(b){dust.onLoad(a,function(d,e){return d?b.setError(d):(dust.cache[a]||dust.loadSource(dust.compile(e,a)),void dust.cache[a](b,c).end())})}):b.setError(new Error("Template Not Found: "+a))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},dust.indexInArray=function(a,b,c){if(c=+c||0,Array.prototype.indexOf)return a.indexOf(b,c);if(void 0===a||null===a)throw new TypeError('cannot call method "indexOf" of null');var d=a.length;for(1/0===Math.abs(c)&&(c=0),0>c&&(c+=d,0>c&&(c=0));d>c;c++)if(a[c]===b)return c;return-1},dust.nextTick=function(){return function(a){setTimeout(a,0)}}(),dust.isEmpty=function(a){return dust.isArray(a)&&!a.length?!0:0===a?!1:!a},dust.filter=function(a,b,c){if(c)for(var d=0,e=c.length;e>d;d++){var f=c[d];"s"===f?b=null:"function"==typeof dust.filters[f]?a=dust.filters[f](a):dust.log("Invalid filter ["+f+"]",WARN)}return b&&(a=dust.filters[b](a)),a},dust.filters={h:function(a){return dust.escapeHtml(a)},j:function(a){return dust.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return JSON?JSON.stringify(a):(dust.log("JSON is undefined.  JSON stringify has not been used on ["+a+"]",WARN),a)},jp:function(a){return JSON?JSON.parse(a):(dust.log("JSON is undefined.  JSON parse has not been used on ["+a+"]",WARN),a)}},dust.makeBase=function(a){return new Context(new Stack,a)},Context.wrap=function(a,b){return a instanceof Context?a:new Context(new Stack(a),{},null,b)},Context.prototype.get=function(a,b){return"string"==typeof a&&("."===a[0]&&(b=!0,a=a.substr(1)),a=a.split(".")),this._get(b,a)},Context.prototype._get=function(a,b){var c,d,e,f,g,h=this.stack,i=1;if(d=b[0],e=b.length,a&&0===e)f=h,h=h.head;else{if(a)h&&(h=h.head?h.head[d]:void 0);else{for(;h&&(!h.isObject||(f=h.head,c=h.head[d],void 0===c));)h=h.tail;h=void 0!==c?c:this.global?this.global[d]:void 0}for(;h&&e>i;)f=h,h=h[b[i]],i++}return"function"==typeof h?(g=function(){try{return h.apply(f,arguments)}catch(a){throw dust.log(a,ERROR),a}},g.__dustBody=!!h.__dustBody,g):(void 0===h&&dust.log("Cannot find the value for reference [{"+b.join(".")+"}] in template ["+this.getTemplateName()+"]"),h)},Context.prototype.getPath=function(a,b){return this._get(a,b)},Context.prototype.push=function(a,b,c){return new Context(new Stack(a,this.stack,b,c),this.global,this.blocks,this.getTemplateName())},Context.prototype.rebase=function(a){return new Context(new Stack(a),this.global,this.blocks,this.getTemplateName())},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(a){if("function"==typeof a){var b=new Chunk;a=a(b,this).data.join("")}var c=this.blocks;if(!c)return void dust.log("No blocks for context[{"+a+"}] in template ["+this.getTemplateName()+"]",DEBUG);
for(var d,e=c.length;e--;)if(d=c[e][a])return d},Context.prototype.shiftBlocks=function(a){var b,c=this.blocks;return a?(b=c?c.concat([a]):[a],new Context(this.stack,this.global,b,this.getTemplateName())):this},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.callback(a.error),dust.log("Chunk error ["+a.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.out+=a.data.join(""),a=a.next,this.head=a}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.emit("error",a.error),dust.log("Chunk error ["+a.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.emit("data",a.data.join("")),a=a.next,this.head=a}this.emit("end")},Stream.prototype.emit=function(a,b){if(!this.events)return dust.log("No events to emit",INFO),!1;var c=this.events[a];if(!c)return dust.log("Event type ["+a+"] does not exist",WARN),!1;if("function"==typeof c)c(b);else if(dust.isArray(c))for(var d=c.slice(0),e=0,f=d.length;f>e;e++)d[e](b);else dust.log("Event Handler ["+c+"] is not of a type that is handled by emit",WARN)},Stream.prototype.on=function(a,b){return this.events||(this.events={}),this.events[a]?"function"==typeof this.events[a]?this.events[a]=[this.events[a],b]:this.events[a].push(b):b?this.events[a]=b:dust.log("Callback for type ["+a+"] does not exist. Listener not registered.",WARN),this},Stream.prototype.pipe=function(a){return this.on("data",function(b){try{a.write(b,"utf8")}catch(c){dust.log(c,ERROR)}}).on("end",function(){try{return a.end()}catch(b){dust.log(b,ERROR)}}).on("error",function(b){a.error(b)}),this},Chunk.prototype.write=function(a){var b=this.taps;return b&&(a=b.go(a)),this.data.push(a),this},Chunk.prototype.end=function(a){return a&&this.write(a),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(a){var b=new Chunk(this.root,this.next,this.taps),c=new Chunk(this.root,b,this.taps);this.next=c,this.flushable=!0;try{a(c)}catch(d){dust.log(d,ERROR),c.setError(d)}return b},Chunk.prototype.tap=function(a){var b=this.taps;return this.taps=b?b.push(a):new Tap(a),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(a,b){return a(this,b)},Chunk.prototype.reference=function(a,b,c,d){return"function"==typeof a&&(a=a.apply(b.current(),[this,b,null,{auto:c,filters:d}]),a instanceof Chunk)?a:dust.isEmpty(a)?this:this.write(dust.filter(a,c,d))},Chunk.prototype.section=function(a,b,c,d){if("function"==typeof a&&!a.__dustBody){try{a=a.apply(b.current(),[this,b,c,d])}catch(e){return dust.log(e,ERROR),this.setError(e)}if(a instanceof Chunk)return a}var f=c.block,g=c["else"];if(d&&(b=b.push(d)),dust.isArray(a)){if(f){var h=a.length,i=this;if(h>0){b.stack.head&&(b.stack.head.$len=h);for(var j=0;h>j;j++)b.stack.head&&(b.stack.head.$idx=j),i=f(i,b.push(a[j],j,h));return b.stack.head&&(b.stack.head.$idx=void 0,b.stack.head.$len=void 0),i}if(g)return g(this,b)}}else if(a===!0){if(f)return f(this,b)}else if(a||0===a){if(f)return f(this,b.push(a))}else if(g)return g(this,b);return dust.log("Not rendering section (#) block in template ["+b.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.exists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(e)return e(this,b)}else if(d)return d(this,b);return dust.log("Not rendering exists (?) block in template ["+b.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.notexists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(d)return d(this,b)}else if(e)return e(this,b);return dust.log("Not rendering not exists (^) block check in template ["+b.getTemplateName()+"], because above key was found",DEBUG),this},Chunk.prototype.block=function(a,b,c){var d=c.block;return a&&(d=a),d?d(this,b):this},Chunk.prototype.partial=function(a,b,c){var d;d=dust.makeBase(b.global),d.blocks=b.blocks,b.stack&&b.stack.tail&&(d.stack=b.stack.tail),c&&(d=d.push(c)),"string"==typeof a&&(d.templateName=a),d=d.push(b.stack.head);var e;return e="function"==typeof a?this.capture(a,d,function(a,b){d.templateName=d.templateName||a,dust.load(a,b,d).end()}):dust.load(a,this,d)},Chunk.prototype.helper=function(a,b,c,d){var e=this;if(!dust.helpers[a])return dust.log("Invalid helper ["+a+"]",WARN),e;try{return dust.helpers[a](e,b,c,d)}catch(f){return dust.log("Error in "+a+" helper: "+f,ERROR),e.setError(f)}},Chunk.prototype.capture=function(a,b,c){return this.map(function(d){var e=new Stub(function(a,b){a?d.setError(a):c(b,d)});a(e.head,b).end()})},Chunk.prototype.setError=function(a){return this.error=a,this.root.flush(),this};for(var f in Chunk.prototype)dust._aliases[f]&&(Chunk.prototype[dust._aliases[f]]=Chunk.prototype[f]);Tap.prototype.push=function(a){return new Tap(a,this)},Tap.prototype.go=function(a){for(var b=this;b;)a=b.head(a),b=b.tail;return a};var HCHARS=/[&<>"']/,AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(a){return"string"==typeof a&&HCHARS.test(a)?a.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):a};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(a){return"string"==typeof a?a.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):a},"object"==typeof exports?module.exports=dust:root.dust=dust}(function(){return this}()),function(a,b){"object"==typeof exports?module.exports=b(require("./dust")):b(a.dust)}(this,function(a){var b=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return f(nc).line}function d(){return f(nc).column}function e(a){throw h(a,null,nc)}function f(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return oc!==b&&(oc>b&&(oc=0,pc={line:1,column:1,seenCR:!1}),c(pc,oc,b),oc=b),pc}function g(a){qc>mc||(mc>qc&&(qc=mc,rc=[]),rc.push(a))}function h(c,d,e){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=f(e),j=e<a.length?a.charAt(e):null;return null!==d&&g(d),new b(null!==c?c:h(d,j),d,j,e,i.line,i.column)}function i(){var a;return a=j()}function j(){var a,b,c;for(a=mc,b=[],c=k();c!==T;)b.push(c),c=k();return b!==T&&(nc=a,b=W(b)),a=b}function k(){var a;return a=I(),a===T&&(a=J(),a===T&&(a=l(),a===T&&(a=s(),a===T&&(a=u(),a===T&&(a=r(),a===T&&(a=F())))))),a}function l(){var b,c,d,e,f,h,i,k;if(sc++,b=mc,c=m(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(e=M(),e!==T?(f=j(),f!==T?(h=q(),h!==T?(i=n(),i===T&&(i=Z),i!==T?(nc=mc,k=$(c,f,h,i),k=k?_:Y,k!==T?(nc=b,c=aa(c,f,h,i),b=c):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;if(b===T)if(b=mc,c=m(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(47===a.charCodeAt(mc)?(e=ba,mc++):(e=T,0===sc&&g(ca)),e!==T?(f=M(),f!==T?(nc=b,c=da(c),b=c):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(X)),b}function m(){var b,c,d,e,f,h,i;if(b=mc,c=L(),c!==T)if(ea.test(a.charAt(mc))?(d=a.charAt(mc),mc++):(d=T,0===sc&&g(fa)),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();e!==T?(f=v(),f!==T?(h=o(),h!==T?(i=p(),i!==T?(nc=b,c=ga(d,f,h,i),b=c):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;else mc=b,b=Y;return b}function n(){var b,c,d,e,f,h,i;if(sc++,b=mc,c=L(),c!==T)if(47===a.charCodeAt(mc)?(d=ba,mc++):(d=T,0===sc&&g(ca)),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();if(e!==T)if(f=v(),f!==T){for(h=[],i=Q();i!==T;)h.push(i),i=Q();h!==T?(i=M(),i!==T?(nc=b,c=ia(f),b=c):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;else mc=b,b=Y}else mc=b,b=Y;else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(ha)),b}function o(){var b,c,d,e;return b=mc,c=mc,58===a.charCodeAt(mc)?(d=ja,mc++):(d=T,0===sc&&g(ka)),d!==T?(e=v(),e!==T?(nc=c,d=la(e),c=d):(mc=c,c=Y)):(mc=c,c=Y),c===T&&(c=Z),c!==T&&(nc=b,c=ma(c)),b=c}function p(){var b,c,d,e,f,h,i;if(sc++,b=mc,c=[],d=mc,e=[],f=Q(),f!==T)for(;f!==T;)e.push(f),f=Q();else e=Y;for(e!==T?(f=A(),f!==T?(61===a.charCodeAt(mc)?(h=oa,mc++):(h=T,0===sc&&g(pa)),h!==T?(i=w(),i===T&&(i=v(),i===T&&(i=D())),i!==T?(nc=d,e=qa(f,i),d=e):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y);d!==T;){if(c.push(d),d=mc,e=[],f=Q(),f!==T)for(;f!==T;)e.push(f),f=Q();else e=Y;e!==T?(f=A(),f!==T?(61===a.charCodeAt(mc)?(h=oa,mc++):(h=T,0===sc&&g(pa)),h!==T?(i=w(),i===T&&(i=v(),i===T&&(i=D())),i!==T?(nc=d,e=qa(f,i),d=e):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)}return c!==T&&(nc=b,c=ra(c)),b=c,sc--,b===T&&(c=T,0===sc&&g(na)),b}function q(){var b,c,d,e,f,h,i,k;for(sc++,b=mc,c=[],d=mc,e=L(),e!==T?(58===a.charCodeAt(mc)?(f=ja,mc++):(f=T,0===sc&&g(ka)),f!==T?(h=A(),h!==T?(i=M(),i!==T?(k=j(),k!==T?(nc=d,e=qa(h,k),d=e):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y);d!==T;)c.push(d),d=mc,e=L(),e!==T?(58===a.charCodeAt(mc)?(f=ja,mc++):(f=T,0===sc&&g(ka)),f!==T?(h=A(),h!==T?(i=M(),i!==T?(k=j(),k!==T?(nc=d,e=qa(h,k),d=e):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y);return c!==T&&(nc=b,c=ta(c)),b=c,sc--,b===T&&(c=T,0===sc&&g(sa)),b}function r(){var a,b,c,d,e;return sc++,a=mc,b=L(),b!==T?(c=v(),c!==T?(d=t(),d!==T?(e=M(),e!==T?(nc=a,b=va(c,d),a=b):(mc=a,a=Y)):(mc=a,a=Y)):(mc=a,a=Y)):(mc=a,a=Y),sc--,a===T&&(b=T,0===sc&&g(ua)),a}function s(){var b,c,d,e,f,h,i,j,k,l;if(sc++,b=mc,c=L(),c!==T)if(62===a.charCodeAt(mc)?(d=xa,mc++):(d=T,0===sc&&g(ya)),d===T&&(43===a.charCodeAt(mc)?(d=za,mc++):(d=T,0===sc&&g(Aa))),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();if(e!==T)if(f=mc,h=A(),h!==T&&(nc=f,h=Ba(h)),f=h,f===T&&(f=D()),f!==T)if(h=o(),h!==T)if(i=p(),i!==T){for(j=[],k=Q();k!==T;)j.push(k),k=Q();j!==T?(47===a.charCodeAt(mc)?(k=ba,mc++):(k=T,0===sc&&g(ca)),k!==T?(l=M(),l!==T?(nc=b,c=Ca(d,f,h,i),b=c):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;else mc=b,b=Y;else mc=b,b=Y;else mc=b,b=Y}else mc=b,b=Y;else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(wa)),b}function t(){var b,c,d,e,f;for(sc++,b=mc,c=[],d=mc,124===a.charCodeAt(mc)?(e=Ea,mc++):(e=T,0===sc&&g(Fa)),e!==T?(f=A(),f!==T?(nc=d,e=la(f),d=e):(mc=d,d=Y)):(mc=d,d=Y);d!==T;)c.push(d),d=mc,124===a.charCodeAt(mc)?(e=Ea,mc++):(e=T,0===sc&&g(Fa)),e!==T?(f=A(),f!==T?(nc=d,e=la(f),d=e):(mc=d,d=Y)):(mc=d,d=Y);return c!==T&&(nc=b,c=Ga(c)),b=c,sc--,b===T&&(c=T,0===sc&&g(Da)),b}function u(){var b,c,d,e,f;return sc++,b=mc,c=L(),c!==T?(126===a.charCodeAt(mc)?(d=Ia,mc++):(d=T,0===sc&&g(Ja)),d!==T?(e=A(),e!==T?(f=M(),f!==T?(nc=b,c=Ka(e),b=c):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y),sc--,b===T&&(c=T,0===sc&&g(Ha)),b}function v(){var a,b;return sc++,a=mc,b=z(),b!==T&&(nc=a,b=Ma(b)),a=b,a===T&&(a=mc,b=A(),b!==T&&(nc=a,b=Na(b)),a=b),sc--,a===T&&(b=T,0===sc&&g(La)),a}function w(){var a,b;return sc++,a=mc,b=x(),b===T&&(b=y()),b!==T&&(nc=a,b=Pa(b)),a=b,sc--,a===T&&(b=T,0===sc&&g(Oa)),a}function x(){var b,c,d,e,f;if(sc++,b=mc,c=y(),c!==T)if(46===a.charCodeAt(mc)?(d=Ra,mc++):(d=T,0===sc&&g(Sa)),d!==T){if(e=[],f=y(),f!==T)for(;f!==T;)e.push(f),f=y();else e=Y;e!==T?(nc=b,c=Ta(c,e),b=c):(mc=b,b=Y)}else mc=b,b=Y;else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(Qa)),b}function y(){var b,c,d;if(sc++,b=mc,c=[],Va.test(a.charAt(mc))?(d=a.charAt(mc),mc++):(d=T,0===sc&&g(Wa)),d!==T)for(;d!==T;)c.push(d),Va.test(a.charAt(mc))?(d=a.charAt(mc),mc++):(d=T,0===sc&&g(Wa));else c=Y;return c!==T&&(nc=b,c=Xa(c)),b=c,sc--,b===T&&(c=T,0===sc&&g(Ua)),b}function z(){var b,c,d,e;if(sc++,b=mc,c=A(),c===T&&(c=Z),c!==T){if(d=[],e=C(),e===T&&(e=B()),e!==T)for(;e!==T;)d.push(e),e=C(),e===T&&(e=B());else d=Y;d!==T?(nc=b,c=Za(c,d),b=c):(mc=b,b=Y)}else mc=b,b=Y;if(b===T)if(b=mc,46===a.charCodeAt(mc)?(c=Ra,mc++):(c=T,0===sc&&g(Sa)),c!==T){for(d=[],e=C(),e===T&&(e=B());e!==T;)d.push(e),e=C(),e===T&&(e=B());d!==T?(nc=b,c=$a(d),b=c):(mc=b,b=Y)}else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(Ya)),b}function A(){var b,c,d,e;if(sc++,b=mc,ab.test(a.charAt(mc))?(c=a.charAt(mc),mc++):(c=T,0===sc&&g(bb)),c!==T){for(d=[],cb.test(a.charAt(mc))?(e=a.charAt(mc),mc++):(e=T,0===sc&&g(db));e!==T;)d.push(e),cb.test(a.charAt(mc))?(e=a.charAt(mc),mc++):(e=T,0===sc&&g(db));d!==T?(nc=b,c=eb(c,d),b=c):(mc=b,b=Y)}else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(_a)),b}function B(){var b,c,d,e,f,h;if(sc++,b=mc,c=mc,d=N(),d!==T){if(e=mc,f=[],Va.test(a.charAt(mc))?(h=a.charAt(mc),mc++):(h=T,0===sc&&g(Wa)),h!==T)for(;h!==T;)f.push(h),Va.test(a.charAt(mc))?(h=a.charAt(mc),mc++):(h=T,0===sc&&g(Wa));else f=Y;f!==T&&(nc=e,f=gb(f)),e=f,e===T&&(e=v()),e!==T?(f=O(),f!==T?(nc=c,d=hb(e),c=d):(mc=c,c=Y)):(mc=c,c=Y)}else mc=c,c=Y;return c!==T?(d=C(),d===T&&(d=Z),d!==T?(nc=b,c=ib(c,d),b=c):(mc=b,b=Y)):(mc=b,b=Y),sc--,b===T&&(c=T,0===sc&&g(fb)),b}function C(){var b,c,d,e,f;if(sc++,b=mc,c=[],d=mc,46===a.charCodeAt(mc)?(e=Ra,mc++):(e=T,0===sc&&g(Sa)),e!==T?(f=A(),f!==T?(nc=d,e=kb(f),d=e):(mc=d,d=Y)):(mc=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=mc,46===a.charCodeAt(mc)?(e=Ra,mc++):(e=T,0===sc&&g(Sa)),e!==T?(f=A(),f!==T?(nc=d,e=kb(f),d=e):(mc=d,d=Y)):(mc=d,d=Y);else c=Y;return c!==T?(d=B(),d===T&&(d=Z),d!==T?(nc=b,c=lb(c,d),b=c):(mc=b,b=Y)):(mc=b,b=Y),sc--,b===T&&(c=T,0===sc&&g(jb)),b}function D(){var b,c,d,e;if(sc++,b=mc,34===a.charCodeAt(mc)?(c=nb,mc++):(c=T,0===sc&&g(ob)),c!==T?(34===a.charCodeAt(mc)?(d=nb,mc++):(d=T,0===sc&&g(ob)),d!==T?(nc=b,c=pb(),b=c):(mc=b,b=Y)):(mc=b,b=Y),b===T&&(b=mc,34===a.charCodeAt(mc)?(c=nb,mc++):(c=T,0===sc&&g(ob)),c!==T?(d=G(),d!==T?(34===a.charCodeAt(mc)?(e=nb,mc++):(e=T,0===sc&&g(ob)),e!==T?(nc=b,c=qb(d),b=c):(mc=b,b=Y)):(mc=b,b=Y)):(mc=b,b=Y),b===T))if(b=mc,34===a.charCodeAt(mc)?(c=nb,mc++):(c=T,0===sc&&g(ob)),c!==T){if(d=[],e=E(),e!==T)for(;e!==T;)d.push(e),e=E();else d=Y;d!==T?(34===a.charCodeAt(mc)?(e=nb,mc++):(e=T,0===sc&&g(ob)),e!==T?(nc=b,c=rb(d),b=c):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(mb)),b}function E(){var a,b;return a=u(),a===T&&(a=r(),a===T&&(a=mc,b=G(),b!==T&&(nc=a,b=sb(b)),a=b)),a}function F(){var b,c,d,e,f,h,i,j;if(sc++,b=mc,c=P(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(nc=b,c=ub(c,d),b=c):(mc=b,b=Y)}else mc=b,b=Y;if(b===T){if(b=mc,c=[],d=mc,e=mc,sc++,f=K(),sc--,f===T?e=_:(mc=e,e=Y),e!==T?(f=mc,sc++,h=I(),sc--,h===T?f=_:(mc=f,f=Y),f!==T?(h=mc,sc++,i=J(),sc--,i===T?h=_:(mc=h,h=Y),h!==T?(i=mc,sc++,j=P(),sc--,j===T?i=_:(mc=i,i=Y),i!==T?(a.length>mc?(j=a.charAt(mc),mc++):(j=T,0===sc&&g(vb)),j!==T?(nc=d,e=wb(j),d=e):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=mc,e=mc,sc++,f=K(),sc--,f===T?e=_:(mc=e,e=Y),e!==T?(f=mc,sc++,h=I(),sc--,h===T?f=_:(mc=f,f=Y),f!==T?(h=mc,sc++,i=J(),sc--,i===T?h=_:(mc=h,h=Y),h!==T?(i=mc,sc++,j=P(),sc--,j===T?i=_:(mc=i,i=Y),i!==T?(a.length>mc?(j=a.charAt(mc),mc++):(j=T,0===sc&&g(vb)),j!==T?(nc=d,e=wb(j),d=e):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y)):(mc=d,d=Y);else c=Y;c!==T&&(nc=b,c=xb(c)),b=c}return sc--,b===T&&(c=T,0===sc&&g(tb)),b}function G(){var b,c,d,e,f;if(sc++,b=mc,c=[],d=mc,e=mc,sc++,f=K(),sc--,f===T?e=_:(mc=e,e=Y),e!==T?(f=H(),f===T&&(zb.test(a.charAt(mc))?(f=a.charAt(mc),mc++):(f=T,0===sc&&g(Ab))),f!==T?(nc=d,e=wb(f),d=e):(mc=d,d=Y)):(mc=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=mc,e=mc,sc++,f=K(),sc--,f===T?e=_:(mc=e,e=Y),e!==T?(f=H(),f===T&&(zb.test(a.charAt(mc))?(f=a.charAt(mc),mc++):(f=T,0===sc&&g(Ab))),f!==T?(nc=d,e=wb(f),d=e):(mc=d,d=Y)):(mc=d,d=Y);else c=Y;return c!==T&&(nc=b,c=Bb(c)),b=c,sc--,b===T&&(c=T,0===sc&&g(yb)),b}function H(){var b,c;return b=mc,a.substr(mc,2)===Cb?(c=Cb,mc+=2):(c=T,0===sc&&g(Db)),c!==T&&(nc=b,c=Eb()),b=c}function I(){var b,c,d,e,f,h;if(sc++,b=mc,a.substr(mc,2)===Gb?(c=Gb,mc+=2):(c=T,0===sc&&g(Hb)),c!==T){for(d=[],e=mc,f=mc,sc++,a.substr(mc,2)===Ib?(h=Ib,mc+=2):(h=T,0===sc&&g(Jb)),sc--,h===T?f=_:(mc=f,f=Y),f!==T?(a.length>mc?(h=a.charAt(mc),mc++):(h=T,0===sc&&g(vb)),h!==T?(nc=e,f=Kb(h),e=f):(mc=e,e=Y)):(mc=e,e=Y);e!==T;)d.push(e),e=mc,f=mc,sc++,a.substr(mc,2)===Ib?(h=Ib,mc+=2):(h=T,0===sc&&g(Jb)),sc--,h===T?f=_:(mc=f,f=Y),f!==T?(a.length>mc?(h=a.charAt(mc),mc++):(h=T,0===sc&&g(vb)),h!==T?(nc=e,f=Kb(h),e=f):(mc=e,e=Y)):(mc=e,e=Y);d!==T?(a.substr(mc,2)===Ib?(e=Ib,mc+=2):(e=T,0===sc&&g(Jb)),e!==T?(nc=b,c=Lb(d),b=c):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(Fb)),b}function J(){var b,c,d,e,f,h;if(sc++,b=mc,a.substr(mc,2)===Nb?(c=Nb,mc+=2):(c=T,0===sc&&g(Ob)),c!==T){for(d=[],e=mc,f=mc,sc++,a.substr(mc,2)===Pb?(h=Pb,mc+=2):(h=T,0===sc&&g(Qb)),sc--,h===T?f=_:(mc=f,f=Y),f!==T?(a.length>mc?(h=a.charAt(mc),mc++):(h=T,0===sc&&g(vb)),h!==T?(nc=e,f=wb(h),e=f):(mc=e,e=Y)):(mc=e,e=Y);e!==T;)d.push(e),e=mc,f=mc,sc++,a.substr(mc,2)===Pb?(h=Pb,mc+=2):(h=T,0===sc&&g(Qb)),sc--,h===T?f=_:(mc=f,f=Y),f!==T?(a.length>mc?(h=a.charAt(mc),mc++):(h=T,0===sc&&g(vb)),h!==T?(nc=e,f=wb(h),e=f):(mc=e,e=Y)):(mc=e,e=Y);d!==T?(a.substr(mc,2)===Pb?(e=Pb,mc+=2):(e=T,0===sc&&g(Qb)),e!==T?(nc=b,c=Rb(d),b=c):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y;return sc--,b===T&&(c=T,0===sc&&g(Mb)),b}function K(){var b,c,d,e,f,h,i,j,k,l;if(b=mc,c=L(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();if(d!==T)if(Sb.test(a.charAt(mc))?(e=a.charAt(mc),mc++):(e=T,0===sc&&g(Tb)),e!==T){for(f=[],h=Q();h!==T;)f.push(h),h=Q();if(f!==T){if(h=[],i=mc,j=mc,sc++,k=M(),sc--,k===T?j=_:(mc=j,j=Y),j!==T?(k=mc,sc++,l=P(),sc--,l===T?k=_:(mc=k,k=Y),k!==T?(a.length>mc?(l=a.charAt(mc),mc++):(l=T,0===sc&&g(vb)),l!==T?(j=[j,k,l],i=j):(mc=i,i=Y)):(mc=i,i=Y)):(mc=i,i=Y),i!==T)for(;i!==T;)h.push(i),i=mc,j=mc,sc++,k=M(),sc--,k===T?j=_:(mc=j,j=Y),j!==T?(k=mc,sc++,l=P(),sc--,l===T?k=_:(mc=k,k=Y),k!==T?(a.length>mc?(l=a.charAt(mc),mc++):(l=T,0===sc&&g(vb)),l!==T?(j=[j,k,l],i=j):(mc=i,i=Y)):(mc=i,i=Y)):(mc=i,i=Y);else h=Y;if(h!==T){for(i=[],j=Q();j!==T;)i.push(j),j=Q();i!==T?(j=M(),j!==T?(c=[c,d,e,f,h,i,j],b=c):(mc=b,b=Y)):(mc=b,b=Y)}else mc=b,b=Y}else mc=b,b=Y}else mc=b,b=Y;else mc=b,b=Y}else mc=b,b=Y;return b===T&&(b=r()),b}function L(){var b;return 123===a.charCodeAt(mc)?(b=Ub,mc++):(b=T,0===sc&&g(Vb)),b}function M(){var b;return 125===a.charCodeAt(mc)?(b=Wb,mc++):(b=T,0===sc&&g(Xb)),b}function N(){var b;return 91===a.charCodeAt(mc)?(b=Yb,mc++):(b=T,0===sc&&g(Zb)),b}function O(){var b;return 93===a.charCodeAt(mc)?(b=$b,mc++):(b=T,0===sc&&g(_b)),b}function P(){var b;return 10===a.charCodeAt(mc)?(b=ac,mc++):(b=T,0===sc&&g(bc)),b===T&&(a.substr(mc,2)===cc?(b=cc,mc+=2):(b=T,0===sc&&g(dc)),b===T&&(13===a.charCodeAt(mc)?(b=ec,mc++):(b=T,0===sc&&g(fc)),b===T&&(8232===a.charCodeAt(mc)?(b=gc,mc++):(b=T,0===sc&&g(hc)),b===T&&(8233===a.charCodeAt(mc)?(b=ic,mc++):(b=T,0===sc&&g(jc)))))),b}function Q(){var b;return kc.test(a.charAt(mc))?(b=a.charAt(mc),mc++):(b=T,0===sc&&g(lc)),b===T&&(b=P()),b}var R,S=arguments.length>1?arguments[1]:{},T={},U={start:i},V=i,W=function(a){return["body"].concat(a).concat([["line",c()],["col",d()]])},X={type:"other",description:"section"},Y=T,Z=null,$=function(a,b,c,d){return d&&a[1].text===d.text||e("Expected end tag for "+a[1].text+" but it was not found."),!0},_=void 0,aa=function(a,b,e){return e.push(["param",["literal","block"],b]),a.push(e),a.concat([["line",c()],["col",d()]])},ba="/",ca={type:"literal",value:"/",description:'"/"'},da=function(a){return a.push(["bodies"]),a.concat([["line",c()],["col",d()]])},ea=/^[#?\^<+@%]/,fa={type:"class",value:"[#?\\^<+@%]",description:"[#?\\^<+@%]"},ga=function(a,b,c,d){return[a,b,c,d]},ha={type:"other",description:"end tag"},ia=function(a){return a},ja=":",ka={type:"literal",value:":",description:'":"'},la=function(a){return a},ma=function(a){return a?["context",a]:["context"]},na={type:"other",description:"params"},oa="=",pa={type:"literal",value:"=",description:'"="'},qa=function(a,b){return["param",["literal",a],b]},ra=function(a){return["params"].concat(a)},sa={type:"other",description:"bodies"},ta=function(a){return["bodies"].concat(a)},ua={type:"other",description:"reference"},va=function(a,b){return["reference",a,b].concat([["line",c()],["col",d()]])},wa={type:"other",description:"partial"},xa=">",ya={type:"literal",value:">",description:'">"'},za="+",Aa={type:"literal",value:"+",description:'"+"'},Ba=function(a){return["literal",a]},Ca=function(a,b,e,f){var g=">"===a?"partial":a;return[g,b,e,f].concat([["line",c()],["col",d()]])},Da={type:"other",description:"filters"},Ea="|",Fa={type:"literal",value:"|",description:'"|"'},Ga=function(a){return["filters"].concat(a)},Ha={type:"other",description:"special"},Ia="~",Ja={type:"literal",value:"~",description:'"~"'},Ka=function(a){return["special",a].concat([["line",c()],["col",d()]])},La={type:"other",description:"identifier"},Ma=function(a){var b=["path"].concat(a);return b.text=a[1].join(".").replace(/,line,\d+,col,\d+/g,""),b},Na=function(a){var b=["key",a];return b.text=a,b},Oa={type:"other",description:"number"},Pa=function(a){return["literal",a]},Qa={type:"other",description:"float"},Ra=".",Sa={type:"literal",value:".",description:'"."'},Ta=function(a,b){return parseFloat(a+"."+b.join(""))},Ua={type:"other",description:"integer"},Va=/^[0-9]/,Wa={type:"class",value:"[0-9]",description:"[0-9]"},Xa=function(a){return parseInt(a.join(""),10)},Ya={type:"other",description:"path"},Za=function(a,b){return b=b[0],a&&b?(b.unshift(a),[!1,b].concat([["line",c()],["col",d()]])):[!0,b].concat([["line",c()],["col",d()]])},$a=function(a){return a.length>0?[!0,a[0]].concat([["line",c()],["col",d()]]):[!0,[]].concat([["line",c()],["col",d()]])},_a={type:"other",description:"key"},ab=/^[a-zA-Z_$]/,bb={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},cb=/^[0-9a-zA-Z_$\-]/,db={type:"class",value:"[0-9a-zA-Z_$\\-]",description:"[0-9a-zA-Z_$\\-]"},eb=function(a,b){return a+b.join("")},fb={type:"other",description:"array"},gb=function(a){return a.join("")},hb=function(a){return a},ib=function(a,b){return b?b.unshift(a):b=[a],b},jb={type:"other",description:"array_part"},kb=function(a){return a},lb=function(a,b){return b?a.concat(b):a},mb={type:"other",description:"inline"},nb='"',ob={type:"literal",value:'"',description:'"\\""'},pb=function(){return["literal",""].concat([["line",c()],["col",d()]])},qb=function(a){return["literal",a].concat([["line",c()],["col",d()]])},rb=function(a){return["body"].concat(a).concat([["line",c()],["col",d()]])},sb=function(a){return["buffer",a]},tb={type:"other",description:"buffer"},ub=function(a,b){return["format",a,b.join("")].concat([["line",c()],["col",d()]])},vb={type:"any",description:"any character"},wb=function(a){return a},xb=function(a){return["buffer",a.join("")].concat([["line",c()],["col",d()]])},yb={type:"other",description:"literal"},zb=/^[^"]/,Ab={type:"class",value:'[^"]',description:'[^"]'},Bb=function(a){return a.join("")},Cb='\\"',Db={type:"literal",value:'\\"',description:'"\\\\\\""'},Eb=function(){return'"'},Fb={type:"other",description:"raw"},Gb="{`",Hb={type:"literal",value:"{`",description:'"{`"'},Ib="`}",Jb={type:"literal",value:"`}",description:'"`}"'},Kb=function(a){return a},Lb=function(a){return["raw",a.join("")].concat([["line",c()],["col",d()]])},Mb={type:"other",description:"comment"},Nb="{!",Ob={type:"literal",value:"{!",description:'"{!"'},Pb="!}",Qb={type:"literal",value:"!}",description:'"!}"'},Rb=function(a){return["comment",a.join("")].concat([["line",c()],["col",d()]])},Sb=/^[#?\^><+%:@\/~%]/,Tb={type:"class",value:"[#?\\^><+%:@\\/~%]",description:"[#?\\^><+%:@\\/~%]"},Ub="{",Vb={type:"literal",value:"{",description:'"{"'},Wb="}",Xb={type:"literal",value:"}",description:'"}"'},Yb="[",Zb={type:"literal",value:"[",description:'"["'},$b="]",_b={type:"literal",value:"]",description:'"]"'},ac="\n",bc={type:"literal",value:"\n",description:'"\\n"'},cc="\r\n",dc={type:"literal",value:"\r\n",description:'"\\r\\n"'},ec="\r",fc={type:"literal",value:"\r",description:'"\\r"'},gc="\u2028",hc={type:"literal",value:"\u2028",description:'"\\u2028"'},ic="\u2029",jc={type:"literal",value:"\u2029",description:'"\\u2029"'},kc=/^[\t\x0B\f \xA0\uFEFF]/,lc={type:"class",value:"[\\t\\x0B\\f \\xA0\\uFEFF]",description:"[\\t\\x0B\\f \\xA0\\uFEFF]"},mc=0,nc=0,oc=0,pc={line:1,column:1,seenCR:!1},qc=0,rc=[],sc=0;if("startRule"in S){if(!(S.startRule in U))throw new Error("Can't start parsing from rule \""+S.startRule+'".');V=U[S.startRule]}if(R=V(),R!==T&&mc===a.length)return R;throw R!==T&&mc<a.length&&g({type:"end",description:"end of input"}),h(null,rc,qc)}return a(b,Error),{SyntaxError:b,parse:c}}();return a.parse=b.parse,b}),function(a,b){"object"==typeof exports?module.exports=b(require("./parser").parse,require("./dust")):b(a.dust.parse,a.dust)}(this,function(a,b){function c(a){var b={};return p.filterNode(b,a)}function d(a,b){var c,d,e,f=[b[0]];for(c=1,d=b.length;d>c;c++)e=p.filterNode(a,b[c]),e&&f.push(e);return f}function e(a,b){var c,d,e,f,g=[b[0]];for(d=1,e=b.length;e>d;d++)f=p.filterNode(a,b[d]),f&&("buffer"===f[0]||"format"===f[0]?c?(c[0]="buffer"===f[0]?"buffer":c[0],c[1]+=f.slice(1,-2).join("")):(c=f,g.push(f)):(c=null,g.push(f)));return g}function f(a,b){return["buffer",r[b[1]],b[2],b[3]]}function g(a,b){return b}function h(){}function i(a,c){return b.config.whitespace?c:null}function j(a,b){var c={name:b,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(b?'"'+b+'"':"null")+","+p.compileNode(c,a)+");"+k(c)+l(c)+"return body_0;})();"}function k(a){var b,c=[],d=a.blocks;for(b in d)c.push('"'+b+'":'+d[b]);return c.length?(a.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+c.join(",")+"};"):a.blocks=""}function l(a){var b,c,d=[],e=a.bodies,f=a.blocks;for(b=0,c=e.length;c>b;b++)d[b]="function body_"+b+"(chk,ctx){"+f+"return chk"+e[b]+";}body_"+b+".__dustBody=!0;";return d.join("")}function m(a,b){var c,d,e="";for(c=1,d=b.length;d>c;c++)e+=p.compileNode(a,b[c]);return e}function n(a,c,d){return"."+(b._aliases[d]||d)+"("+p.compileNode(a,c[1])+","+p.compileNode(a,c[2])+","+p.compileNode(a,c[4])+","+p.compileNode(a,c[3])+")"}function o(a){return a.replace(s,"\\\\").replace(t,'\\"').replace(u,"\\f").replace(v,"\\n").replace(w,"\\r").replace(x,"\\t")}var p={},q=b.isArray;p.compile=function(b,d){if(!d&&null!==d)throw new Error("Template name parameter cannot be undefined when calling dust.compile");try{var e=c(a(b));return j(e,d)}catch(f){if(!f.line||!f.column)throw f;throw new SyntaxError(f.message+" At line : "+f.line+", column : "+f.column)}},p.filterNode=function(a,b){return p.optimizers[b[0]](a,b)},p.optimizers={body:e,buffer:g,special:f,format:i,reference:d,"#":d,"?":d,"^":d,"<":d,"+":d,"@":d,"%":d,partial:d,context:d,params:d,bodies:d,param:d,filters:g,key:g,path:g,literal:g,raw:g,comment:h,line:h,col:h},p.pragmas={esc:function(a,b,c){var d,e=a.auto;return b||(b="h"),a.auto="s"===b?"":b,d=m(a,c.block),a.auto=e,d}};var r={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};p.compileNode=function(a,b){return p.nodes[b[0]](a,b)},p.nodes={body:function(a,b){var c=a.index++,d="body_"+c;return a.bodies[c]=m(a,b),d},buffer:function(a,b){return".w("+y(b[1])+")"},format:function(a,b){return".w("+y(b[1]+b[2])+")"},reference:function(a,b){return".f("+p.compileNode(a,b[1])+",ctx,"+p.compileNode(a,b[2])+")"},"#":function(a,b){return n(a,b,"section")},"?":function(a,b){return n(a,b,"exists")},"^":function(a,b){return n(a,b,"notexists")},"<":function(a,b){for(var c=b[4],d=1,e=c.length;e>d;d++){var f=c[d],g=f[1][1];if("block"===g)return a.blocks[b[1].text]=p.compileNode(a,f[2]),""}return""},"+":function(a,b){return"undefined"==typeof b[1].text&&"undefined"==typeof b[4]?".block(ctx.getBlock("+p.compileNode(a,b[1])+",chk, ctx),"+p.compileNode(a,b[2])+", {},"+p.compileNode(a,b[3])+")":".block(ctx.getBlock("+y(b[1].text)+"),"+p.compileNode(a,b[2])+","+p.compileNode(a,b[4])+","+p.compileNode(a,b[3])+")"},"@":function(a,b){return".h("+y(b[1].text)+","+p.compileNode(a,b[2])+","+p.compileNode(a,b[4])+","+p.compileNode(a,b[3])+")"},"%":function(a,b){var c,d,e,f,g,h,i,j,k,l=b[1][1];if(!p.pragmas[l])return"";for(c=b[4],d={},j=1,k=c.length;k>j;j++)h=c[j],d[h[1][1]]=h[2];for(e=b[3],f={},j=1,k=e.length;k>j;j++)i=e[j],f[i[1][1]]=i[2][1];return g=b[2][1]?b[2][1].text:null,p.pragmas[l](a,g,d,f)},partial:function(a,b){return".p("+p.compileNode(a,b[1])+","+p.compileNode(a,b[2])+","+p.compileNode(a,b[3])+")"},context:function(a,b){return b[1]?"ctx.rebase("+p.compileNode(a,b[1])+")":"ctx"},params:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++)c.push(p.compileNode(a,b[d]));return c.length?"{"+c.join(",")+"}":"{}"},bodies:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++)c.push(p.compileNode(a,b[d]));return"{"+c.join(",")+"}"},param:function(a,b){return p.compileNode(a,b[1])+":"+p.compileNode(a,b[2])},filters:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++){var f=b[d];c.push('"'+f+'"')}return'"'+a.auto+'"'+(c.length?",["+c.join(",")+"]":"")},key:function(a,b){return'ctx.get(["'+b[1]+'"], false)'},path:function(a,b){for(var c=b[1],d=b[2],e=[],f=0,g=d.length;g>f;f++)e.push(q(d[f])?p.compileNode(a,d[f]):'"'+d[f]+'"');return"ctx.getPath("+c+", ["+e.join(",")+"])"},literal:function(a,b){return y(b[1])},raw:function(a,b){return".w("+y(b[1])+")"}};var s=/\\/g,t=/"/g,u=/\f/g,v=/\n/g,w=/\r/g,x=/\t/g,y="undefined"==typeof JSON?function(a){return'"'+o(a)+'"'}:JSON.stringify;return b.compile=p.compile,b.filterNode=p.filterNode,b.optimizers=p.optimizers,b.pragmas=p.pragmas,b.compileNode=p.compileNode,b.nodes=p.nodes,p}),define("dust",function(a){return function(){var b;return b||a.dust}}(this)),!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define("yetiNode",[],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Yeti=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){a.TemplateManager.render=function(b,c,d){d=d||{};var e,f,g,h={};for(e in d)f=d[e],g=a.TemplateManager.getTemplate(f,!1),h[e]=g;return b.render(c||{},h)},a.Sync.url=function(a,b){var c=f.templateSettings.interpolate;f.templateSettings.interpolate=/{{([\s\S]+?)}}/g;var d=f.template(a),e=d(b||{});return f.templateSettings.interpolate=c,e},a.Sync.connect=function(a,b){return g(e.ajax({json:!0,url:a,data:b}))},a.Request.prototype.getUrl=function(a){var b=window.location;return b.pathname+b.search},a.Request.prototype.getHost=function(a){var b=window.location;return b.host},a.Request.prototype.getPath=function(a){var b=window.location;return b.pathname}}var e=a("../../common/jquery"),f=a("../../common/lodash"),g=a("../../common/q"),h=a("../../yeti"),i=function(a,b){h.call(this,a,d),
"function"==typeof b&&b.call(this,this)};i.prototype=f.create(h.prototype,{constructor:i}),b.exports=i},{"../../common/jquery":13,"../../common/lodash":14,"../../common/q":16,"../../yeti":27}],2:[function(a,b,c){function d(a,b){this.core=new k(a,b),this.YetiModules=f,this.YetiLayout=g,this.YetiSection=h,this.YetiZone=i,this.Page=this.core.Page}var e=a("../../common/jquery");a("../../common/q"),a("../../common/lodash");a("./setup-marionette");var f=a("./yeti-modules"),g=a("./yeti-layout"),h=a("./yeti-section"),i=a("./yeti-zone"),j=a("./models/zone-collection"),k=a("../bare-bones/core");d.prototype.bindToSection=function(a){var b=new j,c=new h({collection:b,silent:!0});a.setView(c)},d.prototype.injectSection=function(a,b,c){var d=c.getSectionById(b),f=new j,g=new h({collection:f,silent:!0});a.close(),a.ensureEl();var i=e('<div class="zones"/>');return i.html(d.html),a.$el.append(i),a.setView(g),d},b.exports=d},{"../../common/jquery":13,"../../common/lodash":14,"../../common/q":16,"../bare-bones/core":1,"./models/zone-collection":5,"./setup-marionette":7,"./yeti-layout":8,"./yeti-modules":9,"./yeti-section":10,"./yeti-zone":11}],3:[function(a,b,c){var d=a("../../../common/backbone"),e=a("./module"),f=d.Collection.extend({model:e});b.exports=f},{"../../../common/backbone":12,"./module":4}],4:[function(a,b,c){var d=a("../../../common/backbone"),e=d.Model.extend({defaults:{id:-1,version:"1.0.0",type:"module",view:"",error:!1,silent:!1,feed:{type:"json",url:""},viewFeed:{},request:{},partials:{}},initialize:function(){var a=(this.get("view"),this.get("controller")||this.get("view")),b=this.get("version");this.set("controllerConstructor",a),a&&b&&this.set("controllerConstructorVersioned",a+"-"+b)}});b.exports=e},{"../../../common/backbone":12}],5:[function(a,b,c){var d=a("../../../common/backbone"),e=a("./module"),f=d.Collection.extend({model:e});b.exports=f},{"../../../common/backbone":12,"./module":4}],6:[function(a,b,c){var d=a("../../../common/backbone"),e=a("./module"),f=d.Model.extend({defaults:{id:-1,version:"1.0.0",type:"zone",view:"",silent:!1,modules:null},initialize:function(){var a=this.get("modules");a instanceof d.Collection||this.set("modules",new e(a))}});b.exports=f},{"../../../common/backbone":12,"./module":4}],7:[function(a,b,c){var d=a("../../common/jquery"),e=a("../../common/lodash"),f=a("../../common/marionette");f.Region.prototype.setView=function(a,b,c){b=b||a.options.silent||!1,b?this.attach(a,c):this.show(a)},f.Region.prototype.attach=function(a,b){a.isClosed||e.isUndefined(a.$el),a!==this.currentView;this.ensureEl(),b=b||this.$el.children(":first"),b.length||(b=d('<div class="zones"/>'),b.appendTo(this.$el)),a.setElement(b),a.bindUIElements(),this.currentView=a,f.triggerMethod.call(this,"show",a),f.triggerMethod.call(a,"show")}},{"../../common/jquery":13,"../../common/lodash":14,"../../common/marionette":15}],8:[function(a,b,c){var d=a("../../common/jquery"),e=a("../../common/lodash"),f=a("../../common/marionette"),g=a("../../common/backbone"),h=a("./yeti-modules"),i=f.CompositeView.extend({getItemView:function(a){var b,c=a.get("controllerConstructorVersioned"),d=a.get("controllerConstructor");if((c||d)&&(b=i.getChildClass(d,c)),b=b||f.getOption(this,"itemView")||h.ModuleItemView,!b)throw new Error("An `itemView` must be specified","NoItemViewError");return b},attachChildView:function(a,b,c){this.closeEmptyView();var d=this.getItemView(a),e=this.collection.indexOf(a);this.attachItemView(a,d,e,c)},attachItemView:function(a,b,c,d){var g=f.getOption(this,"itemViewOptions");e.isFunction(g)&&(g=g.call(this,a,c));var h=e.extend({el:d},g),i=this.buildItemView(a,b,h);this.addChildViewEventForwarding(i),this.triggerMethod("before:item:added",i),this.children.add(i),i.bindUIElements(),this._isShown&&f.triggerMethod.call(i,"show"),this.triggerMethod("after:item:added",i)},attachChildViews:function(a){this.$el.find(a).each(this.attachChild.bind(this))},attachChild:function(a,b){var c=d(b),e=this.getChildData(c);this.collection.add(e,{silent:!0}),this.attachChildView(e,this.collection,c)},getChildData:function(a){return new g.Model}});i.getChildClass=function(a,b){},b.exports=i},{"../../common/backbone":12,"../../common/jquery":13,"../../common/lodash":14,"../../common/marionette":15,"./yeti-modules":9}],9:[function(a,b,c){var d=a("../../common/marionette"),e={getTemplate:function(){try{var a=d.getOption(this,"template")||this.model.get("template");return a||"model"}catch(b){}},attributes:function(){try{var a=this.model.get("id");this.model.get("version");return{"class":"l-module module-"+a,"data-module-id":this.model.get("id"),"data-module-version":this.model.get("version"),"data-module-view":this.model.get("view")}}catch(b){}}};c.ModuleItemView=d.ItemView.extend(e),c.ModuleView=c.ModuleItemView,c.ModuleCompositeView=d.CompositeView.extend(e),c.ModuleLayout=d.Layout.extend(e)},{"../../common/marionette":15}],10:[function(a,b,c){var d=(a("./yeti-modules"),a("./yeti-layout")),e=a("./yeti-zone"),f=a("./models/zone"),g=d.extend({itemView:e,template:"frontend/section-wrapper",collection:null,attributes:{"class":"zones"},initialize:function(){null===this.collection&&(this.collection=new d.ZoneCollection)},onShow:function(){this.collection.length||this.attachChildViews(".l-zone")},appendHtml:function(a,b){a.$el.append(b.el)},getChildData:function(a){var b=new f({id:a.data("zone-id"),version:a.data("zone-version")});return b}});b.exports=g},{"./models/zone":6,"./yeti-layout":8,"./yeti-modules":9,"./yeti-zone":11}],11:[function(a,b,c){var d=a("./yeti-layout"),e=a("./yeti-modules"),f=a("./models/module"),g=a("./models/module-collection"),h=d.extend({itemView:e.ModuleView,template:"frontend/zone-wrapper",attributes:function(){return{"class":"l-zone","data-zone-id":this.model.get("id"),"data-zone-version":this.model.get("version")}},initialize:function(){this.model.get("slient")?this.collection=this.model.get("modules"):(this.collection=new g,this.attachChildViews(".l-module"))},appendHtml:function(a,b){var c=b instanceof e.ModuleItemView||b instanceof e.ModuleCompositeView||b instanceof e.ModuleLayout;!c&&console&&console.warn,a.$el.append(b.el)},getChildData:function(a){var b=new f({id:a.data("module-id"),version:a.data("module-version"),view:a.data("module-view"),template:a.data("module-template"),controller:a.data("module-controller"),error:a.data("module-error")});return b}});b.exports=h},{"./models/module":4,"./models/module-collection":3,"./yeti-layout":8,"./yeti-modules":9}],12:[function(a,b,c){var d=a("./shim");b.exports=d.require("backbone","Backbone")},{"./shim":17}],13:[function(a,b,c){var d=a("./shim");b.exports=d.require("jquery","$")},{"./shim":17}],14:[function(a,b,c){var d=a("./shim");b.exports=d.require("lodash","_")},{"./shim":17}],15:[function(a,b,c){var d=a("./shim");b.exports=d.require("marionette","Marionette")},{"./shim":17}],16:[function(a,b,c){var d=a("./shim");b.exports=d.require("q","Q")},{"./shim":17}],17:[function(a,b,c){function d(){return"undefined"!=typeof window}c.isBrowser=d(),c.require=function(b,c){return d()?window[c]||requirejs(c):a(b)}},{}],18:[function(a,b,c){var d=(a("../../common/lodash"),a("../../common/q"),a("./sync")),e=function(a){a=a||{},"string"==typeof a&&(this.url=a),this.url=this.url||a.url||"",this.data=null,this.dataJSON=null};e.prototype.update=function(a){return this.data=a,this.dataJSON=JSON.stringify(a),a},e.prototype.fetch=function(a){return d.request(this.url,a).then(this.update.bind(this))},b.exports=e},{"../../common/lodash":14,"../../common/q":16,"./sync":22}],19:[function(a,b,c){c.Request=a("./request"),c.Feed=a("./feed"),c.Sync=a("./sync"),c.TemplateManager=a("./template-manager"),c.View=a("./view"),c.ViewCollection=a("./view-collection"),c.values=a("./values")},{"./feed":18,"./request":21,"./sync":22,"./template-manager":23,"./values":24,"./view":26,"./view-collection":25}],20:[function(a,b,c){function d(){this.inspectableProperties=[]}a("../../common/lodash");d.prototype.inspectCollection=function(a){var b,c,d,e=[],f=a.length;for(b=0;f>b;b++)c=a[b],d=c,d=this.inspectObject(d),e.push(d);return e},d.prototype.inspectObject=function(a,b){b=b||{};var c=a;try{"function"==typeof a?c=a.call(b):a instanceof Array?c=this.inspectCollection(a):a instanceof Error?c=a:a instanceof d&&(c=a.getInfo())}catch(e){c=e}return c},d.prototype.inspectProperties=function(a,b){b=b||a.inspectableProperties||Object.keys(a);for(var c,d,e=b.length,f={},g=0;e>g;g++)c=b[g],d=a[c],f[c]=this.inspectObject(d,a);return f},d.prototype.getInfo=function(){return this.inspectProperties(this,this.inspectableProperties)},b.exports=d},{"../../common/lodash":14}],21:[function(a,b,c){function d(a){a=a||{},this.urlParams=this.normalizeParams(a),this.query=a.query||{},this.params=e.merge({},this.urlParams,this.query),this.url=this.getUrl(a),this.host=this.getHost(a),this.path=this.getPath(a)}var e=a("../../common/lodash");d.prototype.normalizeParams=function(a){var b=a.params||a;return b&&0===b.length&&(b=e.pick(b,Object.keys(b))),b},d.prototype.getUrl=function(a){return a.url},d.prototype.getHost=function(a){return a.host},d.prototype.getPath=function(a){return a.path},b.exports=d},{"../../common/lodash":14}],22:[function(a,b,c){var d=a("../../common/q"),e=a("../../common/lodash");c.url=function(a,b){return a},c.connect=function(a){return d({})},c.request=function(a,b){var f,g=c.url(a,b);try{f=c.connect(g,b)}catch(h){var i=d.defer();return i.reject(h),i.promise}return d(f).then(function(a){return a}).fail(function(a){throw e.extend(a,{name:"Sync.request:"+a.name,connectUrl:g}),a})}},{"../../common/lodash":14,"../../common/q":16}],23:[function(a,b,c){function d(){}d.prototype.render=function(a,b,c){return JSON.stringify(b)},d.prototype.getTemplate=function(a){return null},b.exports=new d},{}],24:[function(a,b,c){function d(a){return f[a]}function e(a,b){return f[a]=b,f[a]}var f={};c.getValue=d,c.setValue=e,c.values=f},{}],25:[function(a,b,c){function d(a){return e.chain(a).where({state:"fulfilled"}).pluck("value").value()}var e=a("../../common/lodash"),f=a("../../common/q"),g=a("../publisher").logger,h=a("./view"),i=function(a,b){h.call(this,a),b=b||{},this.children=[],this.viewClass=b.viewClass||h,this.getChildrenSource=b.getChildrenSource||null,this.viewType="ViewCollection"};i.prototype=e.create(h.prototype,{constructor:i}),i.prototype.buildChild=function(a,b){var c=new b(a);return c.build(this.request)},i.prototype.buildChildren=function(){var a,b,c=[],e=this.getChildrenSource(this.source);for(b=e.length,a=0;b>a;a++)c.push(this.buildChild(e[a],this.viewClass));return f.allSettled(c).then(d).then(this.setFulfilledChildren.bind(this))},i.prototype.setFulfilledChildren=function(a){return this.children=a,this.children},i.prototype.build=function(a){return this.request=a||this.request,g.info("%s.build - id: %s, view: %s",this.viewType,this.id,this.view),this.buildChildren().then(this.render.bind(this)).then(this.self.bind(this)).fail(this.handleViewFail.bind(this))},i.prototype.destroy=function(){for(var a=this.children.length-1;a>=0;a--)this.children[a].destroy();h.prototype.destroy.call(this)},b.exports=i},{"../../common/lodash":14,"../../common/q":16,"../publisher":33,"./view":26}],26:[function(a,b,c){var d=a("../../common/lodash"),e=a("../../common/q"),f=(a("./sync"),a("../utils")),g=a("./inspectable"),h=a("./request"),i=a("./feed"),j=a("./template-manager"),k=a("../publisher").logger,l=function(a){g.call(this),this.source=a,this.id=a.id,this.version=f.getValue(a.version,"1.0.0"),this.tag=a.tag||!1,this.type=f.getValue(a.type,""),this.feed=new i(a.url),this.templateId="",this.html="",this.request={},this.viewType="View",this.errors=[],this.meta=f.getValue(a.meta,{}),this.fetchError=null,this.inspectableProperties=["id","version","tag","feed","html","viewType","errors","fetchError"]};l.prototype=d.create(g.prototype,{constructor:l}),l.prototype.getTemplateId=function(){return d.result(this,"templateId")},l.prototype.renderTemplate=function(a,b,c){var e="";try{e=j.getTemplate(a)}catch(f){throw k.error("%s.renderTemplate - id: %s, view: %s",this.viewType,this.id,this.view,f.toString()),d.extend(f,{name:"View.renderTemplate:"+f.name,templateId:a}),this.errors.push(f),f}var g="";try{g=j.render(e,b,c)}catch(f){g="",this.errors.push(f),k.error("%s.renderTemplate - id: %s, view: %s",this.viewType,this.id,this.view,f.toString())}return g},l.prototype.render=function(){try{var a=this.getTemplateId();this.html=this.renderTemplate(a,this)}catch(b){throw k.error("%s.render - id: %s, view: %s",this.viewType,this.id,this.view,b.toString()),d.extend(b,{name:"View.render:"+b.name,viewType:this.viewType,viewId:this.id,view:this.view}),this.errors.push(b),b}return this.html},l.prototype.getData=function(){return this},l.prototype.fetch=function(a){if(!this.feed.url)return e(null);var b;try{b=this.getData()}catch(c){throw k.error("%s.fetch - id: %s, view: %s, url: %s",this.viewType,this.id,this.view||"N/A",this.url,c.toString()),d.extend(c,{name:"View.fetch:"+c.name}),c}return a&&(b.request=this.normalizeRequest(a)),k.info("%s.fetch - id: %s, view: %s, url: %s",this.viewType,this.id,this.view||"N/A",this.url),this.feed.fetch(b).fail(this.handleViewFeedFail.bind(this))},l.prototype.self=function(){return this},l.prototype.handleViewFail=function(a){throw k.error("$s.build - ",this.viewType,a.toString()),d.extend(a,{viewType:this.viewType,viewId:this.id,view:this.view}),this.errors.push(a),a},l.prototype.handleViewFeedFail=function(a){var b=a;throw a.statusText&&(b=new Error,b.name="error building view module",b.message=a.status+"-"+a.statusText),k.error("%s.fetch - id: %s, view: %s, url: %s",this.viewType,this.id,this.view||"N/A",this.url,b.toString()),d.extend(b,{name:"View.handleViewFeedFail:"+b.name,viewUrl:this.url}),this.errors.push(b),a},l.prototype.build=function(a){return this.request=this.normalizeRequest(a),k.info("%s.build - id: %s, view: %s",this.viewType,this.id,this.view),e(this.fetch()).then(this.render.bind(this)).then(this.self.bind(this)).fail(this.handleViewFail.bind(this))},l.prototype.normalizeRequest=function(a){return a instanceof h?a:new h(a)},l.prototype.destroy=function(){for(var a=Object.keys(this),b=a.length-1;b>=0;b--)this[a[b]]=null},b.exports=l},{"../../common/lodash":14,"../../common/q":16,"../publisher":33,"../utils":34,"./feed":18,"./inspectable":20,"./request":21,"./sync":22,"./template-manager":23}],27:[function(a,b,c){function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}var e=(a("../common/lodash"),a("./publisher")),f=a("./core"),g=a("./models"),h=function(a,b){this.events=e.publisher,this.logger=e.logger,this.Sync=f.Sync,this.TemplateManager=f.TemplateManager,this.Request=f.Request,this.View=f.View,this.ViewCollection=f.ViewCollection,this.Module=g.Module,this.Zone=g.Zone,this.Section=g.Section,this.Page=g.Page,this.getValue=f.values.getValue,this.setValue=f.values.setValue,a=a||{},a.templates&&this.setTemplates(a.templates),"function"==typeof b&&b.call(this,this)};h.prototype.setTemplates=function(a){var b,c,e;for(b in a)c=d(b),e=this[c],e&&e.hasOwnProperty("templateId")&&(e.templateId=a[b])},b.exports=h},{"../common/lodash":14,"./core":19,"./models":28,"./publisher":33}],28:[function(a,b,c){c.Module=a("./module"),c.Zone=a("./zone"),c.Section=a("./section"),c.Page=a("./page")},{"./module":29,"./page":30,"./section":31,"./zone":32}],29:[function(a,b,c){var d=a("../../common/lodash"),e=(a("../../common/q"),a("../publisher").logger),f=a("../utils"),g=a("../core"),h=g.Feed,i=g.View,j=(g.Request,function(a,b,c){i.call(this,a),this.pageFeed=b||{},this.exposedData=c||{},this.feed=new h(d.clone(a.feed||null)),this.controller=a.controller||null,this.templateId="module",this.view=a.view,this.template=this.view=a.template||this.view,this.controller||(this.controller=this.template),this.contentHtml="",this.viewType="Module",this.partials=a.partials||{},this.inspectableProperties=["id","version","tag","feed","html","viewType","errors","fetchError","template","controller","contentHtml","partials"]});j.templateId=null,j.prototype=d.create(i.prototype,{constructor:j}),j.prototype.renderContent=function(){var a;try{var b=this.getContentTemplateId()||this.view;a=b?this.renderTemplate(b,this.getData(),this.partials):""}catch(c){this.errors.push(c);var d=e.error("%s.render - id: %s, view: %s",this.viewType,this.id,this.view,c.toString());a=f.htmlComment(d)}return a},j.prototype.renderModule=function(){var a;try{var b=this.getTemplateId(),c=this.getData();a=this.renderTemplate(b,c)}catch(g){d.extend(g,{name:"Module.renderModule:"+g.name,moduleId:this.id}),this.errors.push(g);var h=e.error("%s.render - id: %s, view: %s",this.viewType,this.id,this.view,g.toString());a=f.htmlComment(h)}return a},j.prototype.render=function(){return this.contentHtml=this.renderContent(),this.html=this.renderModule(),this.html},j.prototype.getTemplateId=function(){return j.templateId||d.result(this,"templateId")},j.prototype.getContentTemplateId=function(){return d.result(this,"template")},j.prototype.getData=function(){var a=this.normalizeRequest(this.request),b={id:this.id,version:this.version,type:this.type,tag:this.tag,url:this.feed.url,view:this.view,request:a,exposedData:this.exposedData,meta:this.meta,requestJSON:JSON.stringify(a),feed:this.feed,feedJSON:this.feed.dataJSON,viewFeed:this.pageFeed.data,viewFeedJSON:this.pageFeed.dataJSON,contentHtml:this.contentHtml,controller:this.controller,template:this.template,errors:this.errors,fetchError:this.fetchError,values:g.values.values};return b},b.exports=j},{"../../common/lodash":14,"../../common/q":16,"../core":19,"../publisher":33,"../utils":34}],30:[function(a,b,c){var d=a("../../common/lodash"),e=(a("../../common/q"),a("../utils")),f=a("../publisher").logger,g=a("../core"),h=g.Sync,i=(g.View,g.ViewCollection),j=(g.Request,g.Feed),k=a("./section"),l=function(a){i.call(this,{},{viewClass:k,getChildrenSource:function(a){return this.sections}}),this.setPageOptions(a)};l.prototype=d.create(i.prototype,{constructor:l}),l.templateId=null,l.prototype.setPageOptions=function(a){this.options=a,this.layoutPath=a.path,a.request&&(this.request=a.request=this.normalizeRequest(a.request)),this.exposedData=e.getValue(a.exposedData,{}),this.layoutOverride=e.getValue(a.layout||a.layoutOverride,{}),this.sections=[],this.viewType="Page",this.preProcessMainFeedHandler=e.getValue(a.preProcessMainFeed||a.onMainFeedSuccess,null),this.inspectableProperties=["options","request","exposedData","viewType","layoutPath","layoutOverride","feed","errors","fetchError","children"]},l.prototype.getTemplateId=function(){return l.templateId||d.result(this,"templateId")},l.prototype.fetchLayout=function(){return h.request(this.layoutPath)},l.prototype.checkLayoutIntegrity=function(a){if(!a||d.isEmpty(a)){var b=new TypeError("invalid layout source");throw b.code="INVALIDLAYOUT",b}return a},l.prototype.filterSections=function(a,b){b=b||[];var c,e=[];for(c in a){var f=a[c];(0===b.length||-1!==b.indexOf(c))&&(d.extend(f,{id:c}),e.push(f))}return e},l.prototype.processLayout=function(a){a=d.merge({},a,this.layoutOverride||{}),this.source=a,this.id=a.id,this.type=a.type,this.feed=new j(a.viewFeed),this.meta=e.getValue(a.meta,{});var b=a.document;return this.sections=this.filterSections(b),this},l.prototype.handlePageFail=function(a){var b=a;throw a.statusText&&(b=e.Error("error building page",a.status+"-"+a.statusText)),f.error("%s.fetch - id: %s, view: %s, url: %s",this.viewType,this.id,this.view,this.feed.url,b.toString()),this.errors.push(b),a},l.prototype.preProcessMainFeedResponse=function(a){return"function"==typeof this.preProcessMainFeedHandler&&(this.preProcessMainFeedHandler.call(this,a),this.feed.update(a)),a},l.prototype.buildChild=function(a,b){var c=new b(a,this.feed,this.exposedData);return c.build(this.request)},l.prototype.build=function(a){return this.request=this.normalizeRequest(a||this.request),this.fetchLayout().then(this.checkLayoutIntegrity.bind(this)).then(this.processLayout.bind(this)).then(this.fetch.bind(this,this.request)).then(this.preProcessMainFeedResponse.bind(this)).then(i.prototype.build.bind(this,this.request)).fail(this.handlePageFail.bind(this))},l.prototype.setFilteredSections=function(a,b){return this.sections=d.filter(this.sections,function(b){return-1!==a.indexOf(b.id)}),this},l.prototype.getSectionById=function(a){return d.find(this.children,{id:a})},l.prototype.buildSections=function(a,b){this.request=this.normalizeRequest(b||this.request);var c="string"==typeof a?[a]:a;return this.fetchLayout().then(this.processLayout.bind(this)).then(this.fetch.bind(this,this.request)).then(this.preProcessMainFeedResponse.bind(this)).then(this.setFilteredSections.bind(this,c)).then(this.buildChildren.bind(this)).then(this.self.bind(this)).fail(this.handlePageFail.bind(this))},b.exports=l},{"../../common/lodash":14,"../../common/q":16,"../core":19,"../publisher":33,"../utils":34,"./section":31}],31:[function(a,b,c){var d=a("../../common/lodash"),e=(a("../../common/q"),a("../core")),f=(e.ViewCollection,a("./zone")),g=function(a,b,c,d){f.call(this,a,b,c,d||{viewClass:f,getChildrenSource:function(a){return a.zones}}),this.viewType="Section"};g.prototype=d.create(f.prototype,{constructor:g}),g.templateId=null,g.prototype.getTemplateId=function(){return g.templateId||d.result(this,"templateId")},b.exports=g},{"../../common/lodash":14,"../../common/q":16,"../core":19,"./zone":32}],32:[function(a,b,c){var d=a("../../common/lodash"),e=(a("../../common/q"),a("../core")),f=e.ViewCollection,g=a("./module"),h=function(a,b,c,d){f.call(this,a,d||{viewClass:g,getChildrenSource:function(a){return a.modules}}),this.pageFeed=b||{},this.serverData=c||{},this.viewType="Zone",this.inspectableProperties=["id","tag","html","viewType","errors","children"]};h.prototype=d.create(f.prototype,{constructor:h}),h.templateId=null,h.prototype.getTemplateId=function(){return h.templateId||d.result(this,"templateId")},h.prototype.buildChild=function(a,b){var c=new b(a,this.pageFeed,this.serverData);return c.build(this.request)},b.exports=h},{"../../common/lodash":14,"../../common/q":16,"../core":19,"./module":29}],33:[function(a,b,c){var d=a("publish-js"),e=new d.Publisher("yeti");c.publisher=e,c.logger=e.reporters.logger},{"publish-js":!1}],34:[function(a,b,c){function d(a,b){return"undefined"==typeof a||null===a?b:a}a("../../common/lodash");c.Error=function(a,b){var c=new Error;return c.name=a,c.message=b,c},c.htmlComment=function(a){return"\n<!-- "+a.toString()+" -->\n"},c.getValue=d},{"../../common/lodash":14}]},{},[2])(2)}),!function(dust){function _deprecated(a){_deprecatedCache[a]||(_log("Deprecation warning: "+a+" is deprecated and will be removed in a future version of dustjs-helpers","WARN"),_log("For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#"+a.replace(/\W+/g,""),"WARN"),_deprecatedCache[a]=!0)}function isSelect(a){var b=a.current();return"object"==typeof b&&b.isSelect===!0}function jsonFilter(a,b){return"function"==typeof b?b.toString().replace(/(^\s+|\s+$)/gm,"").replace(/\n/gm,"").replace(/,\s*/gm,", ").replace(/\)\{/gm,") {"):b}function filter(a,b,c,d,e){d=d||{};var f,g,h=c.block,i=d.filterOpType||"";if(d.hasOwnProperty("key"))f=dust.helpers.tap(d.key,a,b);else{if(!isSelect(b))return _log("No key specified for filter in:"+i+" helper "),a;f=b.current().selectKey,b.current().isResolved&&(e=function(){return!1})}return g=dust.helpers.tap(d.value,a,b),e(coerce(g,d.type,b),coerce(f,d.type,b))?(isSelect(b)&&(b.current().isResolved=!0),h?a.render(h,b):(_log("No body specified for "+i+" helper "),a)):c["else"]?a.render(c["else"],b):a}function coerce(a,b,c){if("undefined"!=typeof a)switch(b||typeof a){case"number":return+a;case"string":return String(a);case"boolean":return a="false"===a?!1:a,Boolean(a);case"date":return new Date(a);case"context":return c.get(a)}return a}var _log=dust.log?function(a,b){b=b||"INFO",dust.log(a,b)}:function(){},_deprecatedCache={},helpers={tap:function(a,b,c){if("function"!=typeof a)return a;var d,e="";return d=b.tap(function(a){return e+=a,""}).render(a,c),b.untap(),d.constructor!==b.constructor?d:""===e?!1:e},sep:function(a,b,c){var d=c.block;return b.stack.index===b.stack.of-1?a:d?d(a,b):a},idx:function(a,b,c){var d=c.block;return _deprecated("{@idx}"),d?d(a,b.push(b.stack.index)):a},contextDump:function(a,b,c,d){var e,f=d||{},g=f.to||"output",h=f.key||"current";return g=dust.helpers.tap(g,a,b),h=dust.helpers.tap(h,a,b),e="full"===h?JSON.stringify(b.stack,jsonFilter,2):JSON.stringify(b.stack.head,jsonFilter,2),"console"===g?(_log(e),a):(e=e.replace(/</g,"\\u003c"),a.write(e))},"if":function(chunk,context,bodies,params){var body=bodies.block,skip=bodies["else"],cond;if(params&&params.cond){if(_deprecated("{@if}"),cond=dust.helpers.tap(params.cond,chunk,context),eval(cond))return body?chunk.render(bodies.block,context):(_log("Missing body block in the if helper!"),chunk);if(skip)return chunk.render(bodies["else"],context)}else _log("No condition given in the if helper!");return chunk},math:function(a,b,c,d){if(d&&"undefined"!=typeof d.key&&d.method){var e=d.key,f=d.method,g=d.operand,h=d.round,i=null;switch(e=dust.helpers.tap(e,a,b),g=dust.helpers.tap(g,a,b),f){case"mod":(0===g||g===-0)&&_log("operand for divide operation is 0/-0: expect Nan!"),i=parseFloat(e)%parseFloat(g);break;case"add":i=parseFloat(e)+parseFloat(g);break;case"subtract":i=parseFloat(e)-parseFloat(g);break;case"multiply":i=parseFloat(e)*parseFloat(g);break;case"divide":(0===g||g===-0)&&_log("operand for divide operation is 0/-0: expect Nan/Infinity!"),i=parseFloat(e)/parseFloat(g);break;case"ceil":i=Math.ceil(parseFloat(e));break;case"floor":i=Math.floor(parseFloat(e));break;case"round":i=Math.round(parseFloat(e));break;case"abs":i=Math.abs(parseFloat(e));break;default:_log("method passed is not supported")}return null!==i?(h&&(i=Math.round(i)),c&&c.block?a.render(c.block,b.push({isSelect:!0,isResolved:!1,selectKey:i})):a.write(i)):a}return _log("Key is a required parameter for math helper along with method/operand!"),a},select:function(a,b,c,d){var e=c.block;if(d&&"undefined"!=typeof d.key){var f=dust.helpers.tap(d.key,a,b);return e?a.render(c.block,b.push({isSelect:!0,isResolved:!1,selectKey:f})):(_log("Missing body block in the select helper "),a)}return _log("No key given in the select helper!"),a},eq:function(a,b,c,d){return d?(d.filterOpType="eq",filter(a,b,c,d,function(a,b){return b===a})):a},ne:function(a,b,c,d){return d?(d.filterOpType="ne",filter(a,b,c,d,function(a,b){return b!==a})):a},lt:function(a,b,c,d){return d?(d.filterOpType="lt",filter(a,b,c,d,function(a,b){return a>b})):a},lte:function(a,b,c,d){return d?(d.filterOpType="lte",filter(a,b,c,d,function(a,b){return a>=b})):a},gt:function(a,b,c,d){return d?(d.filterOpType="gt",filter(a,b,c,d,function(a,b){return b>a})):a},gte:function(a,b,c,d){return d?(d.filterOpType="gte",filter(a,b,c,d,function(a,b){return b>=a})):a},"default":function(a,b,c,d){return d&&(d.filterOpType="default"),filter(a,b,c,d,function(){return!0})},size:function(a,b,c,d){var e,f,g,h=0;if(d=d||{},e=d.key,e&&e!==!0)if(dust.isArray(e))h=e.length;else if(!isNaN(parseFloat(e))&&isFinite(e))h=e;else if("object"==typeof e){f=0;for(g in e)Object.hasOwnProperty.call(e,g)&&f++;h=f}else h=(e+"").length;else h=0;return a.write(h)}};for(var key in helpers)dust.helpers[key]=helpers[key];"undefined"!=typeof exports&&(module.exports=dust)}("undefined"!=typeof exports?require("dustjs-linkedin"):dust),define("dust-helpers",["dust"],function(){}),function(a){"function"==typeof define&&define.amd?define("app-templates",["dust"],a):"undefined"!=typeof module&&module.exports?module.exports=a(require("dustjs-linkedin")):a()}(function(a){!function(){function b(a,b){return a.w('<div class="end-level-about about-games clearfix" >').p("modules/about/tiles/about-tile-games",b,{}).w("</div>")}return a.register("modules/about/about-games",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="end-level-about about-videos about-playlist clearfix" >').p("modules/about/tiles/about-tile-playlist",b,{}).w("</div>")}return a.register("modules/about/about-playlist",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="end-level-about about-videos clearfix" >').p("modules/about/tiles/about-tile-videos",b,{}).w("</div>")}return a.register("modules/about/about-videos",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["viewFeed"],!1),b,{block:c},{})}function c(a,b){return a.w('<span class="module-about-icon closed"></span><div class="module-about-wrapper"><h1 class="module-about-title">').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w("</h1>").block(b.getBlock("subTitle"),b,{block:d},{}).w('<p class="module-about-property">Watch ').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w(' on Nick Jr.</p><div class="module-about-more">').x(b.getPath(!1,["viewFeed","season"]),b,{block:e},{}).x(b.getPath(!1,["viewFeed","age"]),b,{block:g},{}).w('<p class="module-about-description">').f(b.getPath(!1,["viewFeed","description"]),b,"h").w("</p></div></div>")}function d(a,b){return a}function e(a,b){return a.w('<p class="module-about-description">Season ').f(b.getPath(!1,["viewFeed","season"]),b,"h").w(",").x(b.getPath(!1,["viewFeed","episode"]),b,{block:f},{}).w("</p>")}function f(a,b){return a.w("Episode ").f(b.getPath(!1,["viewFeed","episode"]),b,"h")}function g(a,b){return a.w('<p class="module-about-age">Ages ').f(b.getPath(!1,["viewFeed","age"]),b,"h").w("</p>")}return a.register("modules/about/tiles/about-tile-base",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="about-tile about-tile-games">').p("modules/about/tiles/about-tile-base",b,{}).w('<div class="module-about-more module-about-more-no-border">').x(b.getPath(!1,["viewFeed","badges"]),b,{block:c},{}).s(b.getPath(!1,["viewFeed","badges"]),b,{block:d},{}).x(b.getPath(!1,["viewFeed","skills"]),b,{block:e},{}).s(b.getPath(!1,["viewFeed","skills"]),b,{block:f},{}).w("</div></div>")}function c(a,b){return a.w('<p class="module-about-badges-header">Gameplay Features</p>')}function d(a,b){return a.w('<div class="module-about-badge"><img class="module-about-badge-img" src="').f(b.getPath(!1,["images","0","assets","0","path"]),b,"h").w('" /><div class="module-about-badge-description"><p class="module-about-badge-title">').f(b.get(["title"],!1),b,"h").w('</p><p class="module-about-badge-detail">').f(b.get(["description"],!1),b,"h").w("</p></div></div>")}function e(a,b){return a.w('<p class="module-about-skills-header">Developmental Skills Features</p>')}function f(a,b){return a.w('<div class="module-about-skill"><img class="module-about-skill-img" src="').f(b.getPath(!1,["images","0","assets","0","path"]),b,"h").w('" /><div class="module-about-skill-description"><p class="module-about-skill-title">').f(b.get(["title"],!1),b,"h").w('</p><p class="module-about-skill-detail">').f(b.get(["description"],!1),b,"h").w("</p></div></div>")}return a.register("modules/about/tiles/about-tile-games",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.w('<div class="about-tile about-tile-videos">').p("modules/about/tiles/about-tile-base",b,{}).w("</div>")}function c(a,b){return b=b.shiftBlocks(d),a.w('<p class="module-about-sub-title"></p>')}a.register("modules/about/tiles/about-tile-playlist",b);var d={subTitle:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="about-tile about-tile-videos">').p("modules/about/tiles/about-tile-base",b,{}).w("</div>")}return a.register("modules/about/tiles/about-tile-videos",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<!-- DNT START--><div id="do-not-touch-background" class="do-not-touch-background hidden"></div><div id="do-not-touch-container" class="do-not-touch-container hidden"><div id="do-not-touch-screen" class="do-not-touch-screen hidden"></div></div><!-- DNT END -->');
}return a.register("modules/alpha-button/alpha-button",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.p("modules/alpha-button/alpha-button",b,{})}return a.register("modules/alpha-button/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="back-button button video-player-fade-out hidden"></div>')}return a.register("modules/body/back-button",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="comments-widget" class="comments-wrapper" ').s(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,{block:c},{}).w('><div class="accent-font">Comments</div><div class="sm4 comments-widget" data-widget="comments" data-contenturi="').f(b.getPath(!1,["viewFeed","contentUri"]),b,"h").w('">Loading comments...</div></div>')}function c(a,b){return a.w(' style="background-color: ').f(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,"h").w('" ')}return a.register("modules/body/comments",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","content"]),b,{block:c},{})}function c(a,b){return a.w('<div class="slider clearfix"><div class="slider-scroller clearfix"><div class="slider-content item-shadows clearfix">').s(b.get(["blocks"],!1),b,{block:d},{}).w('</div></div><div class="slider-controls"><a class="slider-arrow slider-arrow-previous" href="#?page=1" data-direction="previous" style="display:none;"></a><a class="slider-arrow slider-arrow-next" href="#?page=2" data-direction="next"></a></div></div>')}function d(a,b){return a.w('<div class="slider-block pull-left">').s(b.get(["items"],!1),b,{block:e},{}).w("</div>")}function e(a,b){return a.w('<div class="slider-block-item pull-left"><img src="').f(b.get(["image-url"],!1),b,"h",["s"]).w('"><div class="slider-block-item-overlay"><h3>').f(b.get(["title"],!1),b,"h",["s"]).w("</h2><p>").f(b.get(["subtitle"],!1),b,"h",["s"]).w("</p></div></div>")}return a.register("modules/body/content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<article class="error-page-copy"><h1 class="accent-font">Sorry!</h1><h4 class="accent-font">The Page You\'re Looking For Has Either Moved Or No Longer Exists.</h4><p class="accent-font-medium">Visit Our Homepage For The Latest Videos, Games, And More!</p><p class="error-page-link accent-font"><a href="/" class="accent-font">go To Homepage</a><a href="/" class="chevron-right-sm"></a></p></article><span class="error-page-logo" data-picture data-alt="Page Not Found"><span data-src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/error/404-sb-web.png?width=250&quality=0.6" data-media="(max-width: 767px)"></span><span data-src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/error/404-sb-web.png?width=500&quality=0.6" data-media="(min-width: 768px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/error/404-sb-web.png?width=250&quality=0.6" alt="Error: Page Not Found"></noscript></span>')}return a.register("modules/body/error/page-not-found",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<li class="event-poll-block-ad event-poll-block" data-type="ad" data-adindex="').f(b.get(["adIndex"],!1),b,"h").w('" id="ad-300x250-').f(b.get(["adIndex"],!1),b,"h").w('Div" data-ad-sizes="300x250"></li>')}return a.register("modules/body/event/event-poll-stream-ad",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<li class="event-poll-stream-logo" data-type="show-logo"></li>')}return a.register("modules/body/event/event-poll-stream-logo",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","content"]),b,{block:c},{})}function c(a,b){return a.w('<button class="previous-button poll-stream-arrow invisible">Previous</button><button class="next-button poll-stream-arrow invisible">Next</button><div class="event-poll-stream" data-ad-frequency="3"><ul class="event-poll-stream-content" data-poll-id="').f(b.get(["collection"],!1),b,"h").w('">').s(b.get(["questions"],!1),b,{block:d},{}).w("</div></div>")}function d(a,b){return a.p("modules/body/property/stream/poll",b,{})}return a.register("modules/body/event/event-poll-stream",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.nx(b.getPath(!1,["state","winner"]),b,{block:c},{}).s(b.getPath(!1,["state","winner"]),b,{block:j},{})}function c(a,b){return a.w('<li class="event-poll-block event-poll-block-item" data-question-id="').f(b.get(["urlKey"],!1),b,"h").w('" data-type="question">').s(b.getPath(!1,["state","preVoting"]),b,{block:d},{}).s(b.getPath(!1,["state","voting"]),b,{block:g},{}).w("</li>")}function d(a,b){return a.w('<span class="event-poll-block-background"><img src="').f(b.getPath(!1,["images","0","url"]),b,"h",["s"]).w('" /></span><div class="event-poll-block-content" data-state="preVoting"><div class="event-poll-block-title">').f(b.get(["displayText"],!1),b,"h").w('</div><ul class="event-poll-block-question" >').s(b.get(["answers"],!1),b,{block:e},{}).w("</ul></div>")}function e(a,b){return a.w('<li class="event-poll-block-answer"><a class="event-poll-block-answer-link route" href="').f(b.get(["link"],!1),b,"h").w('"><div class="event-poll-block-answer-content">').s(b.getPath(!1,["images","poll"]),b,{block:f},{}).w('<div class="event-poll-answer-title">').f(b.get(["title"],!1),b,"h").w("</div></div></a></li>")}function f(a,b){return a.w('<img class="event-poll-block-answer-image" src="').f(b.get(["url"],!1),b,"h",["s"]).w('&height=95&width=168" alt="').f(b.get(["title"],!1),b,"h").w('">')}function g(a,b){return a.w('<span class="event-poll-block-background"><img src="').f(b.getPath(!1,["images","0","url"]),b,"h",["s"]).w('" /></span><div class="event-poll-block-content" data-state="voting"><div class="event-poll-block-title">').f(b.get(["displayText"],!1),b,"h").w('</div><ul class="event-poll-block-question" >').s(b.get(["answers"],!1),b,{block:h},{}).w("</ul></div>")}function h(a,b){return a.w('<li class="event-poll-block-answer vote-btn-animate-wrap"><a class="event-poll-block-answer-link route" href="').f(b.get(["link"],!1),b,"h").w('"><div class="event-poll-block-answer-content">').s(b.getPath(!1,["images","poll"]),b,{block:i},{}).w('<div class="event-poll-answer-title">').f(b.get(["title"],!1),b,"h").w('</div></div></a><button class="event-poll-block-answer-vote vote-btn-animate" data-answer-id="').f(b.get(["index"],!1),b,"h").w('">Vote</button></li>')}function i(a,b){return a.w('<img class="event-poll-block-answer-image" src="').f(b.get(["url"],!1),b,"h",["s"]).w('&height=95&width=168" alt="').f(b.get(["title"],!1),b,"h").w('">')}function j(a,b){return a.w('<li class="event-poll-block event-poll-block-item event-poll-block-winner" data-question-id="').f(b.get(["urlKey"],!1),b,"h").w('" data-type="winner"><div class="event-poll-block-content"><div class="event-poll-block-title">').f(b.get(["displayText"],!1),b,"h").w("</div>").s(b.get(["winner"],!1),b,{block:k},{}).w("</div></li>")}function k(a,b){return a.s(b.getPath(!1,["images","thumbnail"]),b,{block:l},{})}function l(a,b){return a.w('<a class="event-poll-winner-link route" href="').f(b.get(["link"],!1),b,"h").w('"><div class="event-poll-block-winner-image"><img src="').f(b.get(["url"],!1),b,"h",["s"]).w('&height=394&width=394" alt="').f(b.get(["title"],!1),b,"h").w('"><span>').f(b.get(["displayText"],!1),b,"h").w("</span></div></a>")}return a.register("modules/body/event/event-poll",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,l.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="end-level-vote video-player-fade-out">').s(b.getPath(!1,["viewFeed","eventPoll"]),b,{block:c},{}).w("</div>")}function c(a,b){return a.w('<div class="vote-btn-wrap vote-btn-animate-wrap"><div class="best-ever-el-logo"></div>').s(b.getPath(!1,["state","voting"]),b,{block:d},{}).w('</div><span class="metadata funnel-collection" data-funnel-collection="').f(b.get(["funnelCollection"],!1),b,"h").w('"></span><span class="metadata funnel-question" data-question-key="').f(b.get(["questionKey"],!1),b,"h").w('"></span><span class="metadata funnel-nominee" data-nominee="').f(b.get(["nominee"],!1),b,"h").w('"></span><span class="metadata funnel-nominee-key" data-nominee-key="').f(b.get(["nomineeKey"],!1),b,"h").w('"></span>')}function d(a,b){return a.w('<a class="event-vote-btn vote-btn-animate" href="/nicks-best-games-and-videos-2014/">VOTE</a>')}return a.register("modules/body/events/event-end-level",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["viewFeed"],!1),b,{block:c},{})}function c(a,b){return a.w('<div class="flipbook-container"><div class="flipbook-breadcrumb"><div class="button module-back-button hidden"></div><div class="flipbook-back-info">').s(b.get(["seriesUrlKey"],!1),b,{block:d},{}).w("<h1>").f(b.get(["shortTitle"],!1),b,"h").w('</h1></div></div><div class="flipbook-carousel-wrapper"><div class="flipbook-carousel-navigation flipbook-carousel-navigation-previous"><span class="flipbook-carousel-arrow flipbook-carousel-arrow-previous"></span></div><div class="flipbook-carousel-navigation flipbook-carousel-navigation-next"><span class="flipbook-carousel-arrow flipbook-carousel-arrow-next"></span></div><div id=\'flipbook\' class=\'swipe\'><div class=\'swipe-wrap\'>').s(b.get(["photos"],!1),b,{block:e},{}).w('</div></div></div><div class="flipbook-info">').s(b.get(["seriesUrlKey"],!1),b,{block:f},{}).w('<h3 class="title"></h3><p class="caption"></p></div></div>')}function d(a,b){return a.w('<h2><a href="/').f(b.get(["seriesUrlKey"],!1),b,"h").w('">').f(b.get(["seriesTitle"],!1),b,"h").w("</a></h2>")}function e(a,b){return a.w('<div class="flipbook-carousel-list-item" data-caption="').f(b.get(["caption"],!1),b,"h").w('" data-title="').f(b.get(["shortTitle"],!1),b,"h").w('"><img src="').f(b.get(["image"],!1),b,"h").w('" alt="').f(b.get(["shortTitle"],!1),b,"h").w('"/></div>')}function f(a,b){return a.w('<a href="/').f(b.get(["seriesUrlKey"],!1),b,"h").w('"><img src="').f(b.get(["thumbnail"],!1),b,"h").w('" alt="').f(b.get(["seriesTitle"],!1),b,"h").w('"/></a>')}return a.register("modules/body/flipbook/flipbook-content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div><span>some message</span><img src="/img/games/countdown/1.png" style="display:none"/><img src="/img/games/countdown/2.png" style="display:none"/><img src="/img/games/countdown/3.png" style="display:none"/><img src="/img/games/countdown/4.png" style="display:none"/></div>')}return a.register("modules/body/games/game-countdown",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script id="game-data" type="application/json">').f(b.get(["viewFeedJSON"],!1),b,"h",["s"]).w('</script><div id="embedtarget" class="embedtarget"></div>')}return a.register("modules/body/games/game-end-level-frame",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script id="game-play-data" type="application/json">').f(b.get(["viewFeedJSON"],!1),b,"h",["s"]).w("</script>").s(b.get(["viewFeed"],!1),b,{block:c},{})}function c(a,b){return a.w('<div id="game-play-promo" class="game-play-promo">').s(b.get(["images"],!1),b,{block:d},{}).w('</div><div class="game-play-dimmer"></div><div id="game-play-turnmessage" class="game-play-turnmessage"></div><div id="game-play-expand" class="game-play-expand"></div><div id="game-play-error" class="game-play-error"></div><!-- ADs --><div id="game-play-adblock" class="game-play-adblock"><div class="MTVNPlayer"></div></div><!-- Game --><div id="game-play-wrapper" class="game-play-wrapper"><div class="game-play-cell"><div class="game-exit-wrapper"><div class="game-exit-shadow"><div id="game-exit" class="game-exit button">Exit</div></div></div><div class="game-available-area"><div id="game-play-container" class="game-play-container"></div><iframe class="game-container-iframe" src="" width="100%" height="100%" frameborder="0" scrolling="no"></iframe></div></div></div><!-- End Slate --><div id="end-slate-wrapper" class="end-slate-wrapper"><div class="end-slate"><div class="end-slate-content"><div class="promo-image"><div class="image-wrapper">').s(b.get(["images"],!1),b,{block:e},{}).w('<div class="end-slate-dimmer"></div><div class="play-button-wrapper"><div class="play-button-shadow"><div class="play-button button">Continue Game</div></div></div></div><div class="more-games"><div class="games"><!-- MORE GAMES --></div></div></div></div></div></div><!-- META --><div class="game-meta-wrapper video-player-fade-out"><div class="game-play-meta">').s(b.get(["seriesTitle"],!1),b,{block:f},{}).w('<div class="game-play-info game-play-section ').s(b.get(["seriesTitle"],!1),b,{block:g},{}).w('"><h1 class="series-titles">').s(b.get(["seriesTitle"],!1),b,{block:h},{}).s(b.get(["shortTitle"],!1),b,{block:i},{}).w("</h1>").s(b.get(["shortDescription"],!1),b,{block:j},{}).w("</div>").s(b.get(["instruction"],!1),b,{block:k},{}).w('<div class="game-play-sponsor game-play-section"></div></div></div><div class="turn-device"><div class="turn-icon centered-on-top"></div></div>')}function d(a,b){return a.w('<span class="game-promo-images" data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('"><span data-src="').f(b.get(["r16-9"],!1),b,"h",["s"]).w('&format=jpg" data-media="(orientation: portrait)" data-ratio="16-9"></span><span data-src="').f(b.get(["r4-3"],!1),b,"h",["s"]).w('&format=jpg" data-media="(orientation: landscape)" data-ratio="4-3"></span><noscript><img src="').f(b.get(["r4-3"],!1),b,"h",["s"]).w('&format=jpg" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span>')}function e(a,b){return a.w('<img src="" />')}function f(a,b){return a.w('<div class="property-img game-play-section"><a id="thumb-link" class="thumb-link" href="/').f(b.get(["seriesUrlKey"],!1),b,"h").w('"><img class="game-play-thumb" src="').f(b.getPath(!1,["seriesData","showThumbImage16x9"]),b,"h").w('" alt="').f(b.get(["title"],!1),b,"h").w('" /></a></div>')}function g(a,b){return a.w("has-series")}function h(a,b){return a.w('<p class="series-title"><a href="/').f(b.get(["seriesUrlKey"],!1),b,"h").w('">').f(b.get(["seriesTitle"],!1),b,"h").w("</a></p>")}function i(a,b){return a.w('<p class="short-title">').f(b.get(["shortTitle"],!1),b,"h").w("</p>")}function j(a,b){return a.w('<p class="short-description">').f(b.get(["shortDescription"],!1),b,"h").w("</p>")}function k(a,b){return a.w('<div class="game-play-controls game-play-section"><img src="').f(b.get(["instruction"],!1),b,"h").w('" width="285" /></div>')}return a.register("modules/body/games/game-end-level",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/stretch-animation.gif" class="game-stretch-animation" /><a class="game-stretch-play">Play Anyway</a>')}return a.register("modules/body/games/game-expandmessage",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="game-info-tab" ').s(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,{block:c},{}).w('><article class="watch-again"><span class="watch-again-button game-return"><button class="button"><span class="icon"><!-- icon holder --></span>Resume</button></span><div class="watch-again-info"><span class="now-watching">Now Playing:</span><span class="series">').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w('</span><span class="title">').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w('</span></div></article><div class="game-info-scroller"><article class="game-category info-section"><h2>Game Categories</h2><ul class="info-list">').s(b.getPath(!1,["viewFeed","gameTypes"]),b,{block:d},{}).w('</ul></article><article class="game-screenshots info-section"><h2>Game Art</h2><ul class="clearfix">').s(b.getPath(!1,["viewFeed","screenshots"]),b,{block:e},{}).w('</ul></article><article class="game-description info-section"><h2>Game Description</h2>').s(b.getPath(!1,["viewFeed","description"]),b,{block:g},{}).w("</article></div></div>")}function c(a,b){return a.w(' style="background-color: ').f(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,"h").w('" ')}function d(a,b){return a.w('<li><a href="').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></li>")}function e(a,b){return a.w('<li><a href="').f(b.get(["path"],!1),b,"h").w('" target="_blank"><img src="').f(b.get(["path"],!1),b,"h").w('&amp;height=140" alt="').s(b.getPath(!1,["viewFeed","seriesTitle"]),b,{block:f},{}).f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w(" ").f(b.get(["type"],!1),b,"h").w(" ").f(b.get(["category"],!1),b,"h").w('" /></a></li>')}function f(a,b){return a.f(b.get(["seriesTitle"],!1),b,"h")}function g(a,b){return a.w("<p>").f(b.getPath(!0,[]),b,"h").w("</p>")}return a.register("modules/body/games/game-info-content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<!-- Nothing -->")}return a.register("modules/body/games/game-player",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","related"]),b,{block:c},{})}function c(a,b){return a.w('<div class="relatedContainer" ').s(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,{block:d},{}).w(' data-urlkey="').f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w('"><article class="watch-again"><span class="watch-again-button game-return"><button class="button"><span class="icon"><!-- icon holder --></span>Resume</button></span><div class="watch-again-info"><span class="now-watching">Now Playing:</span><span class="series">').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w('</span><span class="title">').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w('</span></div></article><article class="up-next">').s(b.getPath(!1,["viewFeed","related","results","0"]),b,{block:e},{}).w("</article>").s(b.getPath(!1,["viewFeed","seriesTitle"]),b,{block:g},{}).w('<article class="related-videos"><h2>RELATED GAMES</h2><div class="related-videos-wrapper"><div class="carousel-wrapper"><a class="carousel-arrow carousel-arrow-previous" data-direction="previous">&lt;</a><a class="carousel-arrow carousel-arrow-next" data-direction="next">&gt;</a><div class="carousel-mask"><ul class="carousel-list">').s(b.getPath(!1,["viewFeed","related","results"]),b,{block:h},{}).w("</ul></div></div></div></article></div>")}function d(a,b){return a.w(' style="background-color: ').f(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,"h").w('" ')}function e(a,b){return a.w('<a href="').f(b.get(["url"],!1),b,"h").w('" class="route"><div class="video-info">').s(b.get(["seriesTitle"],!1),b,{block:f},{}).w("<h3>").f(b.get(["shortTitle"],!1),b,"h").w('</h3></div><span data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('"><span data-src="').f(b.getPath(!1,["images","2","url"]),b,"h").w('&width=700" data-media="(max-height: 768px)"></span><span data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=826" data-media="(min-height: 769px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=526" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span></a>')}function f(a,b){return a.w("<h4>").f(b.get(["seriesTitle"],!1),b,"h").w("</h4>")}function g(a,b){return a.w('<article class="see-more" style="color:#').f(b.getPath(!1,["viewFeed","seriesData","menuTextColor"]),b,"h").w('">SEE MORE:<br/><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('" class="route"><img src="').f(b.getPath(!1,["viewFeed","seriesData","showThumbImage16x9"]),b,"h").w('" /></a><ul><li class="games-link"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('/games/" class="route">Games <span class="count">').f(b.getPath(!1,["viewFeed","related","totalCount"]),b,"h").w('</span></a></li><li class="videos-link"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('/videos/" class="route">Videos</a></li><li class="about-link"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('#about" class="route">About the show</a></li></ul></article>')}function h(a,b){return a.w('<li class="related-video carousel-list-item" data-urlKey="').f(b.get(["urlKey"],!1),b,"h").w('"><a href="').f(b.get(["url"],!1),b,"h").w('" class="route" data-related="').f(b.get(["index"],!1),b,"h").w('"><!-- <img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com').f(b.getPath(!1,["assets","0","path"]),b,"h").w('?height=140&width=250&quality=1" /> --><span class="image-span" data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('" data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('" data-sixteen-by-nine="').f(b.getPath(!1,["images","0","url"]),b,"h").w('" data-four-by-three="').f(b.getPath(!1,["images","1","url"]),b,"h").w('" data-one-by-one="').f(b.getPath(!1,["images","2","url"]),b,"h").w('"><span data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&height=140&width=250"></span><span data-src="').f(b.getPath(!1,["images","1","url"]),b,"h").w('&height=400" data-media="(max-height: 599px) and (orientation: landscape)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&height=140&width=250" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span>').s(b.get(["duration"],!1),b,{block:i},{}).w('<div class="related-video-info"><h3 class="game-title">').f(b.get(["shortTitle"],!1),b,"h").w("</h3>").s(b.get(["seriesTitle"],!1),b,{block:j},{}).w("</div></a></li>")}function i(a,b){return a.w('<div class="duration">').f(b.get(["duration"],!1),b,"h").w("</div>")}function j(a,b){return a.w('<h4 class="series-title">').f(b.get(["seriesTitle"],!1),b,"h").w("</h4>")}return a.register("modules/body/games/game-related",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="game-play-turnicon"></div><div id="game-play-turntext"></div>')}return a.register("modules/body/games/game-turnmessage",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="error-header"><span class="error-message rumbler">We messed up! This game is only playable on computer for now.</span></div><div class="game-countdown"><span class="launch-message rumbler">Launching Next Game In:</span><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/countdown/5.png" class="waiting" height="75%" /><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/countdown/4.png" class="waiting" height="75%" /><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/countdown/3.png" class="waiting" height="75%" /><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/countdown/2.png" class="waiting" height="75%" /><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/countdown/1.png" class="waiting" height="75%" /><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/games/countdown/robot.gif" class="waiting" height="75%" /></div>')}return a.register("modules/body/games/game-unsupported-fancy",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<div><span>We Messed Up!</span>This game is only playable on computers with Flash installed.</div>")}return a.register("modules/body/games/game-unsupported-static",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<a href="').f(b.get(["url"],!1),b,"h").w('" class="route"><div class="video-info"><h4>').f(b.get(["seriesTitle"],!1),b,"h").w("</h4><h3>").f(b.get(["videoTitle"],!1),b,"h").w('</h3></div><span data-picture data-alt="').f(b.get(["videoTitle"],!1),b,"h").w('"><span class="one-by-one" data-src="').f(b.get(["oneByOne"],!1),b,"h").w('&width=700" data-media="(max-height: 768px)"></span><span class="sixteen-by-nine" data-src="').f(b.get(["sixteenByNine"],!1),b,"h").w('&width=826" data-media="(min-height: 769px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img class="sixteen-by-nine" src="').f(b.get(["sixteenByNine"],!1),b,"h").w('&width=526" alt="').f(b.get(["videoTitle"],!1),b,"h").w('"></noscript></span></a>')}return a.register("modules/body/games/up-next",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="ad-').f(b.get(["adSize"],!1),b,"h").w("-").f(b.get(["adIndex"],!1),b,"h").w('Div" data-ad-sizes="').f(b.get(["adSize"],!1),b,"h").w('"></div>')}return a.register("modules/body/kcs/ad",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<a href="/kids-choice-sports/vote/').f(b.get(["urlKey"],!1),b,"h").w('" data-category="').f(b.get(["title"],!1),b,"h").w('">').f(b.get(["displayText"],!1),b,"h").w("</a>")}return a.register("modules/body/kcs/categories",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="title">Kids\' Choice Sports voting is brought to you by:</div><div class="ad-container"><div class="block-item-ad event-sponsor" id="ad-').f(b.get(["adSize"],!1),b,"h").w("-").f(b.get(["adIndex"],!1),b,"h").w('Div" data-ad-sizes="').f(b.get(["adSize"],!1),b,"h").w('"></div></div><div class="contdown">Voting will be right back!<span></span></div>')}return a.register("modules/body/kcs/interstitial-ad",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="intro"><div class="title"></div><div class="skip-button intro-skip"></div><div class="intro-video-block"><div class="video-embed" data-contenturi="').f(b.get(["contenturi"],!1),b,"h").w('"></div></div><div class="overtime"></div></div>')}return a.register("modules/body/kcs/intro-video",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="category-nominee-container ad-').f(b.get(["adSize"],!1),b,"h").w('"><div id="ad-').f(b.get(["adSize"],!1),b,"h").w("-").f(b.get(["adIndex"],!1),b,"h").w('Div" data-ad-sizes="').f(b.get(["adSize"],!1),b,"h").w('"></div></div>')}return a.register("modules/body/kcs/nominees-ad",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="slider nominees-slider clearfix"><div class="slider-scroller clearfix"><div class="slider-content scroll-with-content-stream-landscape ').f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w(' clearfix">').s(b.getPath(!1,["viewFeed","categories"]),b,{block:c},{}).w('</div></div><div class="slider-controls"><div class="slider-arrow-container slider-arrow-container-previous" data-direction="previous" style="display:none;"><a class="slider-arrow slider-arrow-previous" data-direction="previous"></a></div><div class="slider-arrow-container slider-arrow-container-next" data-direction="next"><a class="slider-arrow slider-arrow-next" data-direction="next"></a></div></div></div>')}function c(a,b){return a.w('<div class="category-nominee-container"><div class="category-nominee-block"><h2 class="category-title">').f(b.get(["displayText"],!1),b,"h").w('</h2><ul class="category-nominee-list">').p("modules/body/kcs/nominees",b,{}).w("</ul></div></div>")}return a.register("modules/body/kcs/nominees-content",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["nominees"],!1),b,{block:c},{})}function c(a,b){return a.w('<li class="category-nominee-list-item').s(b.get(["winner"],!1),b,{block:d},{}).w('" data-nominee="').f(b.get(["title"],!1),b,"h").w('"><div class="nominee-info"><div class="info-left"><div class="name">').f(b.get(["displayText"],!1),b,"h").w('</div><div class="description">').f(b.get(["description"],!1),b,"h").w('</div><div class="shortTitle">').f(b.get(["shortTitle"],!1),b,"h").w('</div></div><div class="info-right"><div class="image"><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=77"/></div><div class="vote">Vote</div><div class="check"></div><div class="winner">Winner</div></div></div></li>')}function d(a,b){return a.w(" selected")}return a.register("modules/body/kcs/nominees",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="thanks-page"><div class="kcs-thanks-large accent-font-medium">Nailed It!<br />Thanks For Voting!</div><div class="kcs-sponsor-text">Kids\' Choice Sports Voting is brought to you by:</div><div class="kcs-thanks-ad-container"></div><div class="kcs-thanks-message accent-font-medium">You\'ve unlocked the Kids\' Choice Sports Slime Multiplier! <br />Play this bonus game for a chance to increase your votes.</div><a class="kcs-play-game-button"></a></div>')}return a.register("modules/body/kcs/thanks-page",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="voting-game"><div id="embedtarget" class="embed-target" base="').f(b.get(["baseHref"],!1),b,"h").w('"></div></div>')}return a.register("modules/body/kcs/voting-game",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="logo"></div><div class="funnel-data" data-domain="').f(b.getPath(!1,["viewFeed","submissionDomain"]),b,"h").w('" data-collection="').f(b.getPath(!1,["viewFeed","collection"]),b,"h").w('" data-type="').f(b.getPath(!1,["viewFeed","pollType"]),b,"h").w('"></div><div id="category" class="category-region"><div class="category-container" data-current="').f(b.getPath(!1,["request","params","category"]),b,"h").w('"><div class="cat-nav category-up"></div><div class="container-mask"><ul class="category-list">').s(b.getPath(!1,["viewFeed","categories"]),b,{block:c},{}).w('</ul></div><div class="cat-nav category-down"></div></div></div><div class="nominees-region"><div class="interstitial-ad"></div><div id="thanks-container" class="thanks-container" data-base-href="').f(b.getPath(!1,["viewFeed","parameters","base-href"]),b,"h").w('"></div><div id="intro-container" class="intro-container" data-contenturi="mgid:arc:video:nick.com:').f(b.getPath(!1,["viewFeed","introVideo"]),b,"h").w('"></div><div class="nominees-mask invisible"><ul class="nominees-list">').s(b.getPath(!1,["viewFeed","categories"]),b,{block:d},{}).w("</ul></div></div>").s(b.getPath(!1,["viewFeed","printableCategories"]),b,{block:e},{})}function c(a,b){return a.w('<li class="category-list-item" data-category="').f(b.get(["title"],!1),b,"h").w('"><span class="check"></span>').p("modules/body/kcs/categories",b,{}).w("</li>")}function d(a,b){return a.w('<li class="category-nominee-container" data-category="').f(b.get(["title"],!1),b,"h").w('"><div class="category-info-wrapper"><div class="category-info"><div class="category-title">').f(b.get(["displayText"],!1),b,"h").w('</div><div class="category-subtitle">').f(b.get(["shortTitle"],!1),b,"h").w('</div></div></div><div class="category-video-block"><div class="video-embed" data-contenturi="mgid:arc:video:nick.com:').f(b.get(["video"],!1),b,"h").w('"><div class="video-player-endslate"><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick-assets/kcs-2014/slates/kcs-2014-voting-package-video-end-slate-1024x576.jpg"/></div></div></div><div class="category-nominee-block"><ul class="category-nominee-list">').p("modules/body/kcs/nominees",b,{}).w('</ul></div><div class="category-vote-header"></div><div class="skip-button category-skip"></div></li>')}function e(a,b){return a.w('<script id="categoryData" type="application/json">').f(b.getPath(!1,["viewFeed","printableCategories"]),b,"h",["s"]).w("</script>")}return a.register("modules/body/kcs/voting",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="loading-animation-container"><div id="loader" class="loading-animation"></div></div>');
}return a.register("modules/body/loading",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,{block:c},{}).s(b.getPath(!1,["viewFeed","contentType"]),b,{block:d},{}).s(b.getPath(!1,["viewFeed","mediaType"]),b,{block:e},{}).s(b.getPath(!1,["viewFeed","categoryTags"]),b,{block:f},{}).s(b.getPath(!1,["viewFeed","categoryTitles"]),b,{block:g},{}).w('<span class="metadata" data-auth-required="').f(b.getPath(!1,["viewFeed","authRequired"]),b,"h").w('"></span>')}function c(a,b){return a.w('<span class="metadata" data-series-url-key="').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('"></span>')}function d(a,b){return a.w('<span class="metadata" data-content-type="').f(b.getPath(!1,["viewFeed","contentType"]),b,"h").w('"></span>')}function e(a,b){return a.w('<span class="metadata" data-content-type="').f(b.getPath(!1,["viewFeed","mediaType"]),b,"h").w('"></span>')}function f(a,b){return a.w('<span class="metadata" data-category-tag="').f(b.getPath(!1,["viewFeed","categoryTags","join"]),b,"h").w('"></span>')}function g(a,b){return a.w('<span class="metadata" data-category-titles="').f(b.getPath(!1,["viewFeed","categoryTitles","join"]),b,"h").w('"></span>')}return a.register("modules/body/metadata",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="slider-block-item promo aspect-ratio-ignore" data-type="ad" data-adindex="').f(b.get(["adIndex"],!1),b,"h").w('"><div class="slider-block-item-content"><div class="block-item-ad" id="ad-300x250-').f(b.get(["adIndex"],!1),b,"h").w('Div" data-ad-sizes="300x250" data-key-values=""><a href="javascript:;"><img alt="" src="https://web.archive.org/web/20150728212158/http://images.nick.com/nick-assets/nick-web/content-stream/temp-fake-ad.jpg"/></a></div></div></div>')}return a.register("modules/body/property/ad-box",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="').f(b.get(["extraClass"],!1),b,"h").w("\"><h5><div class='title-text'>").f(b.get(["title"],!1),b,"h").w("</div></h5></div>")}return a.register("modules/body/property/ad-container",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="block-item-ad event-sponsor" id="ad-').f(b.get(["adSize"],!1),b,"h").w("-").f(b.get(["adIndex"],!1),b,"h").w('Div" data-ad-sizes="').f(b.get(["adSize"],!1),b,"h").w('"></div>')}return a.register("modules/body/property/ad",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="property-branding"><div class="property-show-background"></div><div class="property-show-art"><div class="show-art"></div></div><div class="property-logo-image"></div></div>')}return a.register("modules/body/property/branding",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["viewFeed"],!1),b,{block:c},{})}function c(a,b){return a.w('<div class="property-drop-shadow"></div><div class="character-page"><div class="character-back-button module-back-button hidden"><div class="back-button button"></div></div><div class="character-container">').s(b.get(["images"],!1),b,{block:d},{}).w('<div class="character-description-block"><div class="character-description">').f(b.get(["bio"],!1),b,"h",["s"]).w("</div></div></div></div>")}function d(a,b){return a.s(b.get(["CharacterFeatured"],!1),b,{block:e},{})}function e(a,b){return a.w('<div class="character-image" data-image-desktop="').f(b.getPath(!1,["desktop","path"]),b,"h",["s"]).w('" data-image-mobile="').f(b.getPath(!1,["mobile","path"]),b,"h",["s"]).w('"></div>')}return a.register("modules/body/property/character",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","content"]),b,{block:c},{})}function c(a,b){return a.s(b.getPath(!1,["stream","doNotTouch"]),b,{block:d},{}).w('<div class="slider clearfix" data-stream-feed-id="').f(b.getPath(!1,["stream","feedId"]),b,"h").w('" data-has-pagination="').f(b.getPath(!1,["stream","pagination","moreItems"]),b,"h").w('"><div class="slider-scroller clearfix"><div class="slider-content scroll-with-content-stream-landscape ').f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w(' clearfix" data-template-type="').f(b.getPath(!1,["viewFeed","templateType"]),b,"h",["s"]).w('" data-dnt-frequency="9" data-ad-frequency="7">').s(b.getPath(!1,["stream","promos"]),b,{block:e},{}).s(b.get(["characters"],!1),b,{block:h},{}).s(b.get(["about"],!1),b,{block:i},{}).s(b.get(["about"],!1),b,{block:j},{}).s(b.get(["episodes-button"],!1),b,{block:k},{}).s(b.getPath(!1,["stream","hubByShowCarousel"]),b,{block:l},{}).w('</div></div><div class="slider-controls"><div class="slider-arrow-container slider-arrow-container-previous" data-direction="previous" style="display:none;"><a class="slider-arrow slider-arrow-previous" data-direction="previous" ignore-adfree').s(b.getPath(!1,["stream","pagination","page"]),b,{block:o},{}).w('></a></div><div class="slider-arrow-container slider-arrow-container-next" data-direction="next"><a class="slider-arrow slider-arrow-next" data-direction="next" ignore-adfree').s(b.getPath(!1,["stream","pagination","page"]),b,{block:r},{}).w("></a></div></div></div>")}function d(a,b){return a.w('<script type="application/json" id="do-not-touch-animations">').f(b.getPath(!1,["stream","doNotTouch","printable"]),b,"h",["s"]).w("</script>")}function e(a,b){return a.s(b.get(["pollTemplate"],!1),b,{block:f},{}).nx(b.get(["pollTemplate"],!1),b,{block:g},{})}function f(a,b){return a.p("modules/body/property/stream/poll",b,{})}function g(a,b){return a.p("modules/body/property/stream/promo",b,{})}function h(a,b){return a.w('<div class="slider-block-item aspect-ratio-ignore" data-type="characters"><div class="block-item-characters"><h3 class="characters-heading">Characters</h3><ul class="characters-list list-unstyled"><li>1</li><li>2</li><li>3</li><li>4</li><ul></div></div>')}function i(a,b){return a.p("modules/body/property/stream/about",b,{})}function j(a,b){return a.p("modules/body/property/stream/characters",b,{})}function k(a,b){return a.w('<div class="slider-block-item" data-type="episodes-button"><div class="slider-block-item-content">').f(b.get(["button-text"],!1),b,"h",["s"]).w("</div></div>")}function l(a,b){return a.s(b.getPath(!1,["promos","length"]),b,{block:m},{})}function m(a,b){return a.w('<div class="slider-by-show-carousel"><h3 class="slider-by-show-carousel-title">').f(b.get(["title"],!1),b,"h").w('</h3><div class="carousel-wrapper"><a class="carousel-arrow carousel-arrow-previous" data-direction="previous">&lt;</a><a class="carousel-arrow carousel-arrow-next" data-direction="next">&gt;</a><div class="carousel-mask"><ul class="carousel-list">').s(b.get(["promos"],!1),b,{block:n},{}).w("</ul></div></div></div>")}function n(a,b){return a.w('<li class="carousel-list-item"><a href="').f(b.getPath(!1,["items","url"]),b,"h").w('" class="route" data-cr="').f(b.get(["clickTrackingTitle"],!1),b,"h").f(b.get(["index"],!1),b,"h").w('"><img src="').f(b.getPath(!1,["images","r1-1"]),b,"h",["s"]).w('" alt="').f(b.getPath(!1,["items","description"]),b,"h").w('" title="').f(b.getPath(!1,["items","description"]),b,"h").w('"></a></li>')}function o(a,b){return a.s(b.get(["previous"],!1),b,{block:p},{})}function p(a,b){return a.w(' href="https://web.archive.org/web/20150728212158/http://www.nick.com').f(b.getPath(!1,["request","path"]),b,"h").nx(b.get(["isSecondPage"],!1),b,{block:q},{}).w('" ')}function q(a,b){return a.w("?page=").f(b.get(["previous"],!1),b,"h")}function r(a,b){return a.s(b.get(["next"],!1),b,{block:s},{})}function s(a,b){return a.w(' href="https://web.archive.org/web/20150728212158/http://www.nick.com').f(b.getPath(!1,["request","path"]),b,"h").w("?page=").f(b.get(["next"],!1),b,"h").w('"')}return a.register("modules/body/property/content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,l.__dustBody=!0,m.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,p.__dustBody=!0,q.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="slider-block-item aspect-ratio-1-1" data-type="dnt"><div class="block-item-dnt dntButton"><img class="dnt-preloader" src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/dnt_on.png?width=250" /><img class="dnt-preloader" src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/dnt_hover.png?width=250" /></div></div>')}return a.register("modules/body/property/do-not-touch",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="property-filters-overlay"></div><nav class="property-filters" data-current-filter=""><div class="filters-dropdown clearfix"><span class="filters-dropdown-ellipsis">â¢â¢â¢</span><div class="filters-indicator filters-submenu-tail"></div></div><ul class="filters-menu" itemscope itemtype="https://web.archive.org/web/20150728212158/http://www.schema.org/SiteNavigationElement">').s(b.getPath(!1,["viewFeed","filters"]),b,{block:c},{}).w('</ul></nav><div style="clear:both;"></div>')}function c(a,b){return a.w('<li class="filter-item filter-').f(b.get(["id"],!1),b,"h").w(" ").s(b.get(["active"],!1),b,{block:d},{}).w('"><a class="filter-link ').nx(b.get(["newWindow"],!1),b,{block:e},{}).w(' accent-font" ').s(b.get(["newWindow"],!1),b,{block:f},{}).w(' title="').f(b.get(["title"],!1),b,"h",["s"]).w('" href="').f(b.get(["url"],!1),b,"h",["s"]).w('" data-filter-id="filter-').f(b.get(["id"],!1),b,"h").w('" itemprop="url"><div class="filters-label" itemprop="name">').f(b.get(["title"],!1),b,"h",["s"]).s(b.getPath(!1,["children","length"]),b,{block:g},{}).w('</div><div class="filters-indicator filters-active-indicator"></div><div class="filters-indicator filters-submenu-tail"></div></a>').s(b.getPath(!1,["children","length"]),b,{block:h},{}).w("</li>")}function d(a,b){return a.w("is-active")}function e(a,b){return a.w("route")}function f(a,b){return a.w('target="_blank"')}function g(a,b){return a.w('<span class="filters-dropdown-icon"></span>')}function h(a,b){return a.w('<div class="filter-submenu" data-parent-id="filter-').f(b.get(["id"],!1),b,"h").w('"><ul class="filter-submenu-column">').s(b.get(["children"],!1),b,{block:i},{}).w('</ul><ul class="filter-submenu-column"></ul></div>')}function i(a,b){return a.w('<li class="filter-submenu-item filter-').f(b.get(["urlKey"],!1),b,"h").w(" ").s(b.get(["default"],!1),b,{block:j},{}).w('" itemprop="name"><a class="filter-submenu-link ').nx(b.get(["newWindow"],!1),b,{block:k},{}).w('" ').s(b.get(["newWindow"],!1),b,{block:l},{}).w(' title="').f(b.get(["title"],!1),b,"h",["s"]).w('" href="').f(b.get(["url"],!1),b,"h",["s"]).w('" itemprop="url" itemprop="url">').f(b.get(["title"],!1),b,"h",["s"]).w("</a></li>")}function j(a,b){return a.w("is-active")}function k(a,b){return a.w("route")}function l(a,b){return a.w('target="_blank"')}return a.register("modules/body/property/filters",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,l.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="property-about" class="slider-block-item aspect-ratio-ignore slider-block-item-about span-full-height" data-type="about"><div class="slider-block-item-content"><div class="block-item-about-text">').f(b.get(["description"],!1),b,"h",["s"]).w("</div></div></div>")}return a.register("modules/body/property/stream/about",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="poll-answer" data-answer="').f(b.get(["collectionAlias"],!1),b,"h").w('"><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&bust=true" class="answer-image"/><div class="nick-check answer-selector"><input type="checkbox" /><label for="nick-check"></label></div><div class="answer-results"></div></div>')}return a.register("modules/body/property/stream/answer",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["characters"],!1),b,{block:c},{})}function c(a,b){return a.w('<div class="slider-block-item aspect-ratio-ignore slider-block-item-character" data-type="character" data-width="').f(b.getPath(!1,["image","width"]),b,"h").w('" data-height="').f(b.getPath(!1,["image","height"]),b,"h").w('"><div class="slider-block-item-content"><a href="/').f(b.get(["seriesUrlKey"],!1),b,"h").w("/").f(b.get(["urlKey"],!1),b,"h").w('" class="route"><img class="promo-image full-width" src="').f(b.getPath(!1,["image","CharacterAbout","desktop","path"]),b,"h",["s"]).w('" alt="').f(b.get(["title"],!1),b,"h").w('" /><div class="slider-block-item-overlay full-width"><h4>').f(b.get(["title"],!1),b,"h").w("</h4></div></a></div></div>")}return a.register("modules/body/property/stream/characters",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["promos"],!1),b,{block:c},{})}function c(a,b){return a.p("modules/body/property/stream/promo",b,{})}return a.register("modules/body/property/stream/page",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="slider-block-item poll aspect-ratio-4-3 aspect-ratio-ignore" data-type="').f(b.get(["mediaType"],!1),b,"h").w('" data-is-editorial="').f(b.get(["isEditorial"],!1),b,"h").w('" data-pollID="').f(b.get(["urlKey"],!1),b,"h").w('" data-id="').f(b.get(["id"],!1),b,"h").w('" ><div class="slider-block-item-content"><div class="question">').s(b.get(["images"],!1),b,{block:c},{}).w('<div class="answers"></div></div><div class="thank-you">').s(b.get(["additionalImages"],!1),b,{block:d},{}).w('<div class="vote-again button">Vote Again</div></div></div></div>')}function c(a,b){return a.w('<img src="').f(b.get(["r4-3"],!1),b,"h",["s"]).w('&width=750" alt="').f(b.get(["title"],!1),b,"h").w('">')}function d(a,b){return a.w('<img src="').f(b.get(["r4-3"],!1),b,"h",["s"]).w('&width=750" alt="').f(b.get(["title"],!1),b,"h").w('">')}return a.register("modules/body/property/stream/poll",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="slider-block-item promo ').s(b.get(["kidsHero"],!1),b,{block:c},{}).w('" data-type="').f(b.get(["mediaType"],!1),b,"h").w('" data-is-editorial="').f(b.get(["isEditorial"],!1),b,"h").w('" data-id="').f(b.get(["id"],!1),b,"h").w('" itemscope ').s(b.get(["duration"],!1),b,{block:d},{}).w(" >").s(b.get(["url"],!1),b,{block:e},{}).w('<meta content="').f(b.get(["title"],!1),b,"h").w('" itemprop="name">').s(b.get(["duration"],!1),b,{block:f},{}).w('<div class="slider-block-item-content">').s(b.get(["url"],!1),b,{block:g},{}).s(b.get(["images"],!1),b,{block:j},{}).nx(b.get(["images"],!1),b,{block:n},{}).s(b.get(["kidsHero"],!1),b,{block:p},{}).nx(b.get(["kidsHero"],!1),b,{block:w},{}).s(b.get(["url"],!1),b,{block:z},{}).w("</div></div>")}function c(a,b){return a.w("is-hero")}function d(a,b){return a.w('itemtype="https://web.archive.org/web/20150728212158/http://schema.org/VideoObject"')}function e(a,b){return a.w('<meta content="').f(b.get(["url"],!1),b,"h",["s"]).w('" itemprop="url">')}function f(a,b){return a.w('<meta content="T').f(b.get(["duration"],!1),b,"h").w('" itemprop="duration">')}function g(a,b){return a.w('<a href="').f(b.get(["url"],!1),b,"h",["s"]).w('" ').s(b.get(["newWindow"],!1),b,{block:h},{}).w(" ").nx(b.get(["absoluteUrl"],!1),b,{block:i},{}).w(' data-authRequired="').f(b.get(["authRequired"],!1),b,"h").w('" data-cr="').f(b.get(["__index__"],!1),b,"h").w('">')}function h(a,b){return a.w('target="_blank"')}function i(a,b){return a.w('class="route"')}function j(a,b){return a.w("<span data-picture-aspect-ratio><span ").s(b.get(["r1-1"],!1),b,{block:k},{}).w(' data-ratio="1-1"></span><span ').s(b.get(["r16-9"],!1),b,{block:l},{}).w(' data-ratio="16-9"></span><span ').s(b.get(["r4-3"],!1),b,{block:m},{}).w(' data-ratio="4-3"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="').f(b.get(["r4-3"],!1),b,"h",["s"]).w('" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span>')}function k(a,b){return a.w('data-alt="').f(b.get(["title"],!1),b,"h").w('" data-src="').f(b.get(["r1-1"],!1),b,"h",["s"]).w('"')}function l(a,b){return a.w('data-alt="').f(b.get(["title"],!1),b,"h").w('" data-src="').f(b.get(["r16-9"],!1),b,"h",["s"]).w('"')}function m(a,b){return a.w('data-alt="').f(b.get(["title"],!1),b,"h").w('" data-src="').f(b.get(["r4-3"],!1),b,"h",["s"]).w('"')}function n(a,b){return a.s(b.get(["image-url"],!1),b,{block:o},{})}function o(a,b){return a.w('<img class="promo-image" src="').f(b.get(["image-url"],!1),b,"h",["s"]).w('" alt="').f(b.get(["title"],!1),b,"h").w('">')}function p(a,b){return a.w('<div class="desktop"><div class="slider-block-item-hero" ').s(b.get(["promoTextColor"],!1),b,{block:q},{}).w(">").s(b.get(["hasCopy"],!1),b,{block:r},{}).nx(b.get(["hasCopy"],!1),b,{block:s},{}).w('</div></div><div class="mobile"><div class="block-item-').f(b.get(["mediaType"],!1),b,"h").w('"><div class="slider-block-item-overlay"><span class="promo-type-icon" data-icon="').f(b.get(["mediaType"],!1),b,"h").w('" data-authRequired="').f(b.get(["authRequired"],!1),b,"h").w('"></span>').s(b.get(["seriesTitle"],!1),b,{block:t},{}).s(b.get(["shortTitle"],!1),b,{block:u},{}).nx(b.get(["shortTitle"],!1),b,{block:v},{}).w("</div></div></div>")}function q(a,b){return a.w('style="color: ').f(b.get(["promoTextColor"],!1),b,"h").w(';"')}function r(a,b){return a.w('<div class="vertical-align"><h3>').f(b.get(["headerText"],!1),b,"h",["s"]).w("</h3><h4>").f(b.get(["copy"],!1),b,"h",["s"]).w("</h4></div>")}function s(a,b){return a.w('<div class="vertical-align"><h3>&nbsp;</h3><h4>&nbsp;</h4></div>')}function t(a,b){return a.w("<h3>").f(b.get(["seriesTitle"],!1),b,"h").w("</h3>")}function u(a,b){return a.w("<h4>").f(b.get(["shortTitle"],!1),b,"h").w("</h4>")}function v(a,b){return a.w("<h4>").f(b.get(["title"],!1),b,"h").w("</h4>")}function w(a,b){return a.w('<div class="block-item-').f(b.get(["mediaType"],!1),b,"h").w('"><div class="slider-block-item-overlay"><span class="promo-type-icon" data-icon="').f(b.get(["mediaType"],!1),b,"h").w('" data-authRequired="').f(b.get(["authRequired"],!1),b,"h").w('"></span>').s(b.get(["seriesTitle"],!1),b,{block:x},{}).w("<h4>").f(b.get(["shortTitle"],!1),b,"h",["s"]).w("</h4></div>").s(b.get(["duration"],!1),b,{block:y},{}).w('<div class="block-item-video-episode-badge"></div><div class="block-item-video-playlist-badge"></div></div>')}function x(a,b){return a.w("<h3>").f(b.get(["seriesTitle"],!1),b,"h",["s"]).w("</h3>")}function y(a,b){return a.w('<div class="block-item-video-duration"><span>').f(b.get(["duration"],!1),b,"h").w("</span></div>")}function z(a,b){return a.w("</a>")}return a.register("modules/body/property/stream/promo",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,l.__dustBody=!0,m.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,p.__dustBody=!0,q.__dustBody=!0,r.__dustBody=!0,s.__dustBody=!0,t.__dustBody=!0,u.__dustBody=!0,v.__dustBody=!0,w.__dustBody=!0,x.__dustBody=!0,y.__dustBody=!0,z.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","meta"]),b,{block:c},{})}function c(a,b){return a.w('<div class="property-title"><div class="property-title-wrapper">').s(b.getPath(!1,["viewFeed","activeFilterTitle"]),b,{block:d},{}).nx(b.getPath(!1,["viewFeed","activeFilterTitle"]),b,{block:e},{}).w("</div></div>")}function d(a,b){return a.w('<h1 class="title-table-cell"><span class="property-title-filtered">').f(b.getPath(!1,["viewFeed","title"]),b,"h",["s"]).w("</span>").f(b.getPath(!1,["viewFeed","activeFilterTitle"]),b,"h",["s"]).w("</h1>")}function e(a,b){return a.w('<div class="title-table-cell">').s(b.getPath(!1,["viewFeed","seriesTitle"]),b,{block:f},{}).w("<h1>").f(b.get(["pageTitle"],!1),b,"h",["s"]).w("</h1></div>")}function f(a,b){return a.w('<h2><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('/">').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w("</a></h2>")}return a.register("modules/body/property/title",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<h1>").f(b.getPath(!1,["viewFeed","title"]),b,"h").w('</h1><div><object type="application/x-shockwave-flash" id="NickelodeonPlayer" name="NickelodeonPlayer" align="middle" data="https://web.archive.org/web/20150728212158/https://securestatic.iheart.com/CC_WidgetTool/NickelodeonPlayer.swf" width="100%" height="100%"><param name="quality" value="high"><param name="bgcolor" value="#000000"><param name="allowscriptaccess" value="always"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="flashvars" value="streamId=6395&amp;autoPlay=0"></object></div>')}return a.register("modules/body/radio/nick-radio",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["rating"],!1),b,{block:c},{})}function c(a,b){return a.w('<div class="property-rating video-player-fade-out hidden" data-type="').f(b.get(["rating"],!1),b,"h").w('" ').s(b.get(["mediaType"],!1),b,{block:d},{}).w("></div>")}function d(a,b){return a.w('data-video-type="').f(b.get(["mediaType"],!1),b,"h").w('"')}return a.register("modules/body/rating",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<!--This partial is shared by Games End Level and Video End LevelIf Games ever adds another tab we\'ll need to make a new version of this file in /video/	for just video tabs.--><div class="side-panel-tab info" data-tab-id="info"><span>Info</span></div>')}return a.register("modules/body/shared/end-level-tabs",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="side-panel-tabs video-player-fade-out" ').s(b.getPath(!1,["viewFeed","eventPoll"]),b,{block:c},{}).w(">").nx(b.getPath(!1,["viewFeed","eventPoll"]),b,{block:d},{}).w("</div>")}function c(a,b){return a.w('data-event-poll="true"')}function d(a,b){return a.w('<div class="side-panel-tab related" data-tab-id="related"><span>Related<span></div>').nx(b.getPath(!1,["viewFeed","isEventShow"]),b,{block:e},{}).p("modules/body/shared/end-level-tabs",b,{})}function e(a,b){return a.w('<div class="side-panel-tab comments" data-tab-id="comments"><span>Comments</span></div>')}return a.register("modules/body/side-panel-tabs",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="sticky-header"><div class="sticky-content">').s(b.get(["viewFeed"],!1),b,{block:c},{}).w("</div></div>")}function c(a,b){return a.p("modules/body/property/title",b,{}).p("modules/body/property/filters",b,{})}return a.register("modules/body/sticky-header",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('	<h1 class="styleguide-head">').f(b.getPath(!1,["viewFeed","title"]),b,"h",["s"]).w('</h1><h2 class="styleguide-subhead">Fonts</h2><div class="styleguide-section"><p class="styleguide-section-head">Homepage Featured</p><div class="feature"><h1 class="feature-title">H1 Title: Lorem Ipsum Dolor</h1><h2 class="feature-subtitle">H2 Subtitle: Lorem Ipsum Dolor</h2></div></div><div class="styleguide-section"><p class="styleguide-section-head">Promos</p><div class="promo"><h3 class="promo-property">Property Name: Lorem Ipsum Dolor</h3><h4 class="promo-title">Promo Short Title: Lorem Ipsum Dolor</h4></div></div><div class="styleguide-section"><p class="styleguide-section-head">Thumbnails</p><div class="thumbs"><h3 class="thumbs-property">Property Name: Lorem Ipsum Dolor</h3><h4 class="thumbs-title">Thumbnail Title: Lorem Ipsum Dolor</h4></div></div><div class="styleguide-section"><p class="styleguide-section-head">Navigation</p><div class="nav"><a class="nav-link" href="#">Nav Links: Lorem Ipsum Dolor</a><p>need web safe replacement</p></div></div><div class="styleguide-section"><p class="styleguide-section-head">Misc</p><div><p>Body Copy: Lorem ipsum dolor</p><p><a href="#">Text links are orange</a></p><p>Block of body copy with a link: Lorem ipsum dolor <a href="#">an inline link</a> (is mixed font face desired?) sit amet, consectetur adipisicing elit, sed do eiusmodtempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodoconsequat. Duis aute irure dolor in reprehenderit in voluptate velit essecillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat nonproident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div></div><h2 class="styleguide-subhead">Colors</h2><div class="styleguide-section"><ul class="styleguide-colors list-unstyled clearfix"><li class="orange">#FF6700</li><li class="green">#21E500</li><li class="blue">#00B1F0</li><li class="magenta">#FF008C</li><li class="yellow">#F5F000</li><li class="purple">#D662FC</li><li class="black">#000000</li><li class="dark-orange">#C34B24</li><li class="dark-green">#19AE00</li><li class="dark-blue">#147199</li><li class="dark-magenta">#BC2076</li><li class="dark-yellow">#DDD926</li><li class="dark-purple">#592F93</li><li class="white">#FFFFFF</li></ul></div><h2 class="styleguide-subhead">Buttons</h2><div class="styleguide-section"><p><button type="button" class="button">Back</button><button type="button" class="button">Back</button>(button elements)</p><p><a href="" class="button">Back</a><a href="" class="button">Back</a>(anchor elements)</p><p><button type="button" class="button-small">Favorite</button><button type="button" class="button-small">Favorite</button>(button elements)</p><p><a href="" class="button-small">Favorite</a><a href="" class="button-small">Favorite</a>(anchor elements)</p></div><h2 class="styleguide-subhead">Promos</h2><div class="styleguide-section"><p>(resize window to see responsive sizes and multiple aspect ratios)</p><div class="slider"><div class="slider-block-item" data-type="game"><a href="/games/teenage-mutant-ninja-turtles-the-final-slice" class="route"><span data-picture="" data-alt="Teenage Mutant Ninja Turtles: The Final Slice"><span data-src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/games/images/teenage-mutant-ninja-turtles/tmnt_finalSlice_featured16x9.jpg?quality=0.51&amp;format=jpg"></span><span data-src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/games/images/teenage-mutant-ninja-turtles/tmnt_finalSlice_featured1x1.jpg?quality=0.51&amp;format=jpg" data-media="(orientation: landscape)" data-ratio="1-1"></span><span data-src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/games/images/teenage-mutant-ninja-turtles/tmnt_finalSlice_featured16x9.jpg?quality=0.51&amp;format=jpg" data-media="(min-width: 640px) and (orientation: portrait)"></span><span data-src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/games/images/teenage-mutant-ninja-turtles/tmnt_finalSlice_featured4x3.jpg?quality=0.51&amp;format=jpg" data-media="(min-width: 768px)"><img alt="Teenage Mutant Ninja Turtles: The Final Slice" src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/games/images/teenage-mutant-ninja-turtles/tmnt_finalSlice_featured4x3.jpg?quality=0.51&amp;format=jpg"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript>&lt;img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/games/images/teenage-mutant-ninja-turtles/tmnt_finalSlice_featured4x3.jpg?quality=0.51&amp;format=jpg" alt="Teenage Mutant Ninja Turtles: The Final Slice"&gt;</noscript></span></a><a href="/games/teenage-mutant-ninja-turtles-the-final-slice" class="route"><div class="block-item-video"><div class="slider-block-item-overlay full-width"><span class="promo-type-icon" data-icon="game"></span><h3>Teenage Mutant Ninja Turtles: The Final Slice</h3></div></div></a><div class="block-item-ad"></div><div class="block-item-game"><div class="slider-block-item-overlay full-width"><span class="promo-type-icon" data-icon="game"></span><h3>Teenage Mutant Ninja Turtles: The Final Slice</h3></div></div><div class="block-item-text"><h3>Teenage Mutant Ninja Turtles: The Final Slice</h3><p>Battle it out for that tasty final slice!</p></div></div></div></div><h2 class="styleguide-subhead">Default element styles</h2><div class="styleguide-section"><p>Most of these are based on bootstrap.css</p><h1>Heading 1</h1><h2>Heading 2</h2><h3>Heading 3</h3><h4>Heading 4</h4><h5>Heading 5</h5><h6>Heading 6</h6><p>Paragraph Text</p><p class="lead">Lead in paragraph. Text can be <strong>strong</strong> and <em>italics.</em></p><p class="text-muted">Paragraph text muted.</p><p class="text-primary">Paragraph text primary.</p><p class="text-success">Paragraph text success.</p><p class="text-info">Paragraph text info.</p><p class="text-warning">Paragraph text warning.</p><p class="text-danger">Paragraph text danger.</p><div><button type="button" class="btn btn-default">Button</button><button type="button" class="btn btn-primary">Button</button><button type="button" class="btn btn-success">Button</button><button type="button" class="btn btn-info">Button</button><button type="button" class="btn btn-warning">Button</button><button type="button" class="btn btn-danger">Button</button><button type="button" class="btn btn-link">Button</button></div><div><button type="button" class="btn btn-lg btn-default">Button</button><button type="button" class="btn btn-sm btn-default">Button</button><button type="button" class="btn btn-xs btn-default">Button</button></div><ul><li>unordered list item</li><li>unordered list item</li><li>unordered list item</li><li>Nesting<ul><li>unordered list item</li><li>unordered list item</li></ul></li><li>unordered list item</li><li>unordered list item</li></ul><ol><li>ordered list item</li><li>ordered list item</li><li>ordered list item</li><li>ordered list item</li><li>Nesting<ol><li>ordered list item</li><li>ordered list item</li></ol></li><li>ordered list item</li></ol></div>')}return a.register("modules/body/style-guide/style-guide",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<h1>").f(b.getPath(!1,["viewFeed","title"]),b,"h").w("</h1><p>").f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w('</p><h2>Testing links:</h2><ul><li><a href="/videos/clip/legend-of-korra-120-full-episode">legend-of-korra-120-full-episode</a></li><li><a href="/videos">videos</a></li><li><a href="/games">games</a></li><li><a href="/shows/ninja-turtles">ninja-turtles</a></li></ul>')}return a.register("modules/body/title",b),b.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/body/video/video-content",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('	<div class="video-player" data-contenturi="mgid:arc:').f(b.getPath(!1,["viewFeed","related","results","0","mediaType"]),b,"h").w(":nickjr.com:").f(b.getPath(!1,["viewFeed","related","results","0","id"]),b,"h").w('" data-video-type="').f(b.getPath(!1,["viewFeed","related","results","0","mediaType"]),b,"h").w('" data-item-type="').f(b.getPath(!1,["viewFeed","related","results","0","type"]),b,"h").w('" data-id="').f(b.getPath(!1,["viewFeed","related","results","0","id"]),b,"h").w('" data-auth-required="').f(b.getPath(!1,["viewFeed","related","results","0","authRequired"]),b,"h").w('" data-auto-create><div class="video-player-volume-adjust-container is-hidden"><div class="video-player-volume-adjust-bar"><div class="video-player-volume-adjust-bar-off"></div><div class="video-player-volume-adjust-bar-on"></div><div class="video-player-volume-adjust-thumb-container"></div></div></div></div>')}a.register("modules/body/video/playlist-content",b);var d={videoPlayer:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<section class="side-panel" ').s(b.getPath(!1,["viewFeed","seriesData","menuBGColor"]),b,{block:c},{}).w('><div class="side-panel-tabs video-player-fade-out"><div class="side-panel-tab related"><span>Related<span></div><div class="side-panel-tab comments"><span>Comments</span></div></div><div id="related-content"><article id="watch-again"><a href="/videos/clip/').f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w('" class="watch-again-button"><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/video/end-slate/watch-again-button.png" />Watch Again</a><div class="resume-button"><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/video/end-slate/paused-button.png" />Paused</div><div class="watch-again-info"><span class="just-watched">Just Watched:</span><span class="now-watching">Now Watching:</span><span class="series">').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w('</span><span class="title">').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w('</span></div></article><article id="up-next"><div class="count-down"><div class="count-down-text arrow">up next:</div><div class="count-down-number arrow">In <span class="seconds">10</span> <span class="orange-close">X</span></div></div><div class="duration">').f(b.getPath(!1,["viewFeed","related","results","0","duration"]),b,"h").w("</div>").s(b.getPath(!1,["viewFeed","related","results","0"]),b,{
block:d},{}).w('</article><article id="see-more" style="color:#').f(b.getPath(!1,["viewFeed","seriesData","menuTextColor"]),b,"h").w('">SEE MORE:<br/><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('"><img src="').f(b.getPath(!1,["viewFeed","seriesData","showThumbImage"]),b,"h").w('" /></a><ul><li><a href="/games/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('">Videos <span class="count">').f(b.getPath(!1,["viewFeed","related","totalCount"]),b,"h").w('</span></a></li><li><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('#about">About the show</a></li></ul></article><article id="related-videos"><h2>Related</h2><div class="related-videos-wrapper"><div class="carousel-wrapper"><a class="carousel-arrow carousel-arrow-previous" data-direction="previous">&lt;</a><a class="carousel-arrow carousel-arrow-next" data-direction="next">&gt;</a><div class="carousel-mask"><ul class="carousel-list">').s(b.getPath(!1,["viewFeed","related","results"]),b,{block:e},{}).w('</ul></div></div></div></article></div><div id="comments-content" data-contentUri="').f(b.getPath(!1,["viewFeed","contentUri"]),b,"h").w('"><!-- Comments load here --></div><ul class="legal-tabs"><li>Privacy</li><li>Legal</li></ul></section><div class="video-dimmer" />')}function c(a,b){return a.w(' style="background-color: #').f(b.getPath(!1,["viewFeed","seriesData","menuBGColor"]),b,"h").w('" ')}function d(a,b){return a.w('<a href="').f(b.get(["url"],!1),b,"h").w('"><div class="video-info"><h4>').f(b.get(["seriesTitle"],!1),b,"h").w("</h4><h3>").f(b.get(["shortTitle"],!1),b,"h").w('</h3></div><span data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('"><span data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=526"></span><span data-src="').f(b.getPath(!1,["images","2","url"]),b,"h").w('&width=700" data-media="(min-width: 999px)"></span><span data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=826" data-media="(min-width: 1200px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=526" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span></a>')}function e(a,b){return a.w('<li class="related-video carousel-list-item"><a href="').f(b.get(["url"],!1),b,"h").w('"><!-- <img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com').f(b.getPath(!1,["assets","0","path"]),b,"h").w('?height=140&width=250&quality=1" /> --><span data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('"><span data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&height=140&width=250"></span><span data-src="').f(b.getPath(!1,["images","1","url"]),b,"h").w('&height=400" data-media="(max-height: 549px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&height=140&width=250" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span><div class="duration">').f(b.get(["duration"],!1),b,"h").w('</div><div class="related-video-info"><h3>').f(b.get(["shortTitle"],!1),b,"h").w("</h3><h4>").f(b.get(["seriesTitle"],!1),b,"h").w("</h4></div></a></li>")}return a.register("modules/body/video/side-panel",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w('	<div class="count-down"><div class="count-down-text arrow">up next:</div><!-- <div class="count-down-number arrow">In <span class="seconds">10</span> <span class="orange-close">X</span></div> Temp removal for https://jira.mtvi.com/browse/NW-1517 --></div><div class="duration">').f(b.get(["duration"],!1),b,"h").w('</div><a href="').f(b.get(["url"],!1),b,"h").w('" class="route"><div class="video-info"><h4 class="series-title">').f(b.get(["seriesTitle"],!1),b,"h").w('</h4><h3 class="video-title">').f(b.get(["videoTitle"],!1),b,"h").w('</h3></div><span data-picture data-alt="').f(b.get(["videoTitle"],!1),b,"h").w('"><span class="one-by-one" data-src="').f(b.get(["oneByOne"],!1),b,"h").w('&width=700" data-media="(max-height: 768px)"></span><span class="sixteen-by-nine" data-src="').f(b.get(["sixteenByNine"],!1),b,"h").w('&width=826" data-media="(min-height: 769px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img class="sixteen-by-nine" src="').f(b.get(["sixteenByNine"],!1),b,"h").w('&width=526" alt="').f(b.get(["videoTitle"],!1),b,"h").w('"></noscript></span></a>')}return a.register("modules/body/video/up-next",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div itemtype="https://web.archive.org/web/20150728212158/http://schema.org/VideoObject" itemscope itemprop="video" class="video-player-container slide-when-sidebar-expanded"><meta content="https://web.archive.org/web/20150728212158/http://www.nickjr.com/').f(b.getPath(!1,["viewFeed","propertyKey"]),b,"h").w("/videos/").f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w('" itemprop="url"><meta content="').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w('" itemprop="name"><meta content="').f(b.getPath(!1,["viewFeed","description"]),b,"h").w('" itemprop="description"><meta content="T').f(b.getPath(!1,["viewFeed","duration"]),b,"h").w('" itemprop="duration"><meta content="').f(b.getPath(!1,["viewFeed","datePosted"]),b,"h").w('" itemprop="uploadDate"><meta content="').f(b.getPath(!1,["viewFeed","images","0","url"]),b,"h").w('" itemprop="thumbnailUrl">').x(b.getPath(!1,["viewFeed","transcript"]),b,{block:c},{}).s(b.get(["viewFeed"],!1),b,{block:d},{}).w('<div class="video-player-info-button"></div><div class="video-player-info-back-button"></div><div class="mtvn-controls-slider-total-time ad-hide"></div><div class="ad-label">AD: Your video will play shortly</div><div itemscope itemtype="https://web.archive.org/web/20150728212158/http://schema.org/TVSeries"><meta itemprop="name" content="').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w('"><div itemprop="season" itemscope itemtype="https://web.archive.org/web/20150728212158/http://schema.org/TVSeason">').s(b.getPath(!1,["viewFeed","season"]),b,{block:e},{}).s(b.getPath(!1,["viewFeed","episode"]),b,{block:f},{}).w('<meta itemprop="name" content="').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w('">').s(b.getPath(!1,["viewFeed","seriesData","showThumbImage16x9"]),b,{block:g},{}).w('<meta itemprop="description" content="').f(b.getPath(!1,["viewFeed","seriesData","description"]),b,"h").w('"><meta itemprop="datePublished" content="').f(b.getPath(!1,["viewFeed","datePosted"]),b,"h").w('"></div></div>').block(b.getBlock("videoPlayer"),b,{block:h},{}).w("</div>")}function c(a,b){return a.w('<meta content="').f(b.getPath(!1,["viewFeed","transcript"]),b,"h").w('" itemprop="transcript">')}function d(a,b){return a.p("modules/body/rating",b,{})}function e(a,b){return a.w('<meta itemprop="name" content="').f(b.getPath(!1,["viewFeed","season"]),b,"h").w('">')}function f(a,b){return a.w('<meta itemprop="number" content="').f(b.getPath(!1,["viewFeed","episode"]),b,"h").w('">')}function g(a,b){return a.w('<meta itemprop="image" content="').f(b.getPath(!1,["viewFeed","seriesData","showThumbImage16x9"]),b,"h").w('">')}function h(a,b){return a.w('<div class="video-player" data-contenturi="mgid:arc:').f(b.getPath(!1,["viewFeed","mediaType"]),b,"h").w(":nickjr.com:").f(b.getPath(!1,["viewFeed","id"]),b,"h").w('" data-video-type="').f(b.getPath(!1,["viewFeed","mediaType"]),b,"h").w('" data-item-type="').f(b.getPath(!1,["viewFeed","type"]),b,"h").w('" data-id="').f(b.getPath(!1,["viewFeed","id"]),b,"h").w('" data-auth-required="').f(b.getPath(!1,["viewFeed","authRequired"]),b,"h").w('" data-auto-create><div class="video-player-volume-adjust-container is-hidden"><div class="video-player-volume-adjust-bar"><div class="video-player-volume-adjust-bar-off"></div><div class="video-player-volume-adjust-bar-on"></div><div class="video-player-volume-adjust-thumb-container"></div></div></div></div>')}return a.register("modules/body/video/video-content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="video-info-tab" ').s(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,{block:c},{}).w('><div class="video-info-scroller">').s(b.getPath(!1,["viewFeed","seriesData","showThumbImage16x9"]),b,{block:d},{}).s(b.getPath(!1,["viewFeed","seriesData"]),b,{block:e},{}).w('<h2 class="video-info-title">').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w("</h2></div></div>")}function c(a,b){return a.w(' style="background-color: ').f(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,"h").w('" ')}function d(a,b){return a.w('<div class="video-info-property-icon"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h",["s"]).w('"><img src="').f(b.getPath(!1,["viewFeed","seriesData","showThumbImage16x9"]),b,"h").w('" alt="').f(b.getPath(!1,["viewFeed","title"]),b,"h").w('"/></a></div>')}function e(a,b){return a.w('<h3 class="video-info-property-title"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h",["s"]).w('">').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w("</a></h3>")}return a.register("modules/body/video/video-info-content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a}return a.register("modules/body/video/video-locked",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a}return a.register("modules/body/video/video-player",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","related"]),b,{block:c},{})}function c(a,b){return a.w('<div class="relatedContainer" ').s(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,{block:d},{}).w(' data-urlkey="').f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w('"><article class="watch-again"><div class="watch-again-button"><button class="button" title="Watch Again"><span class="icon"><!-- icon holder --></span>Watch Again</button></div><div class="resume-button"><button class="button" title="Paused"><span class="icon"><!-- icon holder --></span>Paused</button></div><div class="watch-again-info"><span class="just-watched">Just Watched:</span><span class="now-watching">Now Watching:</span><span class="series">').f(b.getPath(!1,["viewFeed","seriesTitle"]),b,"h").w('</span><span class="title">').f(b.getPath(!1,["viewFeed","shortTitle"]),b,"h").w('</span></div></article><article class="up-next"><div class="count-down"><div class="count-down-text arrow">up next:</div><!-- <div class="count-down-number arrow">In <span class="seconds">10</span> <span class="orange-close">X</span></div> Temp removal for https://jira.mtvi.com/browse/NW-1517 --></div><div class="duration">').f(b.getPath(!1,["viewFeed","related","results","0","duration"]),b,"h").w("</div>").s(b.getPath(!1,["viewFeed","related","results","0"]),b,{block:e},{}).w('</article><article class="see-more" style="color:#').f(b.getPath(!1,["viewFeed","seriesData","menuTextColor"]),b,"h").w('">SEE MORE:<br/><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('" class="route"><img src="').f(b.getPath(!1,["viewFeed","seriesData","showThumbImage16x9"]),b,"h").w('" /></a><ul><li class="games-link"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('/games/" class="route">Games</a></li><li class="videos-link"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('/videos/" class="route">Videos <span class="count">').f(b.getPath(!1,["viewFeed","related","totalCount"]),b,"h").w('</span></a></li><li class="about-link"><a href="/').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('#about" class="route">About the show</a></li></ul></article><article class="related-videos"><h2>RELATED VIDEOS</h2><div class="related-videos-wrapper"><div class="carousel-wrapper"><a class="carousel-arrow carousel-arrow-previous" data-direction="previous">&lt;</a><a class="carousel-arrow carousel-arrow-next" data-direction="next">&gt;</a><div class="carousel-mask"><ul class="carousel-list">').s(b.getPath(!1,["viewFeed","related","results"]),b,{block:f},{}).w("</ul></div></div></div></article></div>")}function d(a,b){return a.w(' style="background-color: ').f(b.getPath(!1,["viewFeed","themeColors","page-background-color"]),b,"h").w('" ')}function e(a,b){return a.w('<a href="').f(b.get(["url"],!1),b,"h").w('" class="route"><div class="video-info"><h4 class="series-title">').f(b.get(["seriesTitle"],!1),b,"h").w('</h4><h3 class="video-title">').f(b.get(["shortTitle"],!1),b,"h").w('</h3></div><span data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('"><span class="one-by-one" data-src="').f(b.getPath(!1,["images","2","url"]),b,"h").w('&width=700" data-media="(max-height: 768px)"></span><span class="sixteen-by-nine" data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=826" data-media="(min-height: 769px)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img class="sixteen-by-nine" src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&width=526" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span></a>')}function f(a,b){return a.w('<li class="related-video carousel-list-item" data-urlKey="').f(b.get(["urlKey"],!1),b,"h").w('" itemtype="https://web.archive.org/web/20150728212158/http://schema.org/VideoObject" itemscope><meta content="').f(b.get(["url"],!1),b,"h").w('" itemprop="url"><meta content="').f(b.get(["shortTitle"],!1),b,"h").w('" itemprop="name"><meta content="').f(b.get(["description"],!1),b,"h").w('" itemprop="description"><meta content="T').f(b.get(["duration"],!1),b,"h").w('" itemprop="duration"><meta content="').f(b.getPath(!1,["images","0","url"]),b,"h").w('" itemprop="thumbnailUrl"><a href="').f(b.get(["url"],!1),b,"h").w('" class="route" data-related="').f(b.get(["index"],!1),b,"h").w('"><!-- <img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com').f(b.getPath(!1,["assets","0","path"]),b,"h").w('?height=140&width=250&quality=1" /> --><span class="image-span" data-picture data-alt="').f(b.get(["title"],!1),b,"h").w('" data-sixteen-by-nine="').f(b.getPath(!1,["images","0","url"]),b,"h").w('" data-four-by-three="').f(b.getPath(!1,["images","1","url"]),b,"h").w('" data-one-by-one="').f(b.getPath(!1,["images","2","url"]),b,"h").w('"><span data-src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&height=140&width=250"></span><span data-src="').f(b.getPath(!1,["images","1","url"]),b,"h").w('&height=400" data-media="(max-height: 599px) and (orientation: landscape)"></span><!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. --><noscript><img src="').f(b.getPath(!1,["images","0","url"]),b,"h").w('&height=140&width=250" alt="').f(b.get(["title"],!1),b,"h").w('"></noscript></span><div class="duration">').f(b.get(["duration"],!1),b,"h").w('</div><div class="related-video-info"><h3 class="video-title">').f(b.get(["shortTitle"],!1),b,"h").w('</h3><h4 class="series-title">').f(b.get(["seriesTitle"],!1),b,"h").w("</h4></div></a></li>")}return a.register("modules/body/video/video-related",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script src="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('js/vendor/yeti-vendor.min.js" type="text/javascript" charset="utf-8"></script><script id="main-app" data-resources-path="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('" data-main="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('js/build/nick-app.min" src="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('js/vendor/require.min.js"></script>')}return a.register("modules/bottom/app",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script src="https://web.archive.org/web/20150728212158/http://btg.mtvnservices.com/aria/projectX/projectX.html" type="text/javascript" charset="utf-8"></script><script src="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('js/vendor/nickjr-coda-pre.min.js" type="text/javascript" charset="utf-8"></script><script src="https://web.archive.org/web/20150728212158/http://btg.mtvnservices.com/aria/coda.html?site=').f(b.getPath(!1,["exposedData","adsSiteTarget"]),b,"h",["s"]).w('" type="text/javascript" charset="utf-8"></script><script src="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('js/vendor/nickjr-coda-post.min.js" type="text/javascript" charset="utf-8"></script><script src="https://web.archive.org/web/20150728212158/http://www.nick.com/AdSettings/DFPPadSnippet.jhtml" type="text/javascript" charset="utf-8"></script>')}return a.register("modules/common/ad-specific",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script id="').f(b.get(["id"],!1),b,"h").w('" data-version="').f(b.get(["version"],!1),b,"h").w('" type="application/json">').f(b.get(["feedJSON"],!1),b,"h",["s"]).w("</script>")}return a.register("modules/common/json-script",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title accent-font" id="modal-title">Modal title</h4></div><div class="modal-body accent-font"><div class="current-step"></div></div></div></div>')}return a.register("modules/common/modal-dialog",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="bumper-content"><div class="bumper-cancel"><button class="bumper-cancel-button button"></button><span class="bumper-cancel-text">BACK</span></div><p class="bumper-header">HEADS UP!</p><p class="bumper-copy">You\'re about to go to a page on nick.com that may include paid advertisements and/or commercial links.</p><p class="bumper-small-header">What does that mean?</p><p class="bumper-copy">That the page might have ads or links to sites that have stuff for sale.</p><button class="bumper-continue-button button">CONTINUE</button></div>')}return a.register("modules/common/page-bumper",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title accent-font" id="modal-title">Grab an adult to unlock more full episodes!</h4></div><div class="modal-body"><h5>Adults: To get these full episodes, follow these steps below.</h5><article><header>1. Select TV Provider</header>There\'s no extra charge! It\'s all included in your TV subscription.</article><article><header>2. Type in your username and password</header>Forgot your username or password? Contact your TV provider.</article><article><header>3. Start watching full episodes</header></article>						</div><button class="button get-started">Get Started</button><div class="floating-bob"><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/tve/sb-tve-1.png" /></div></div></div>')}return a.register("modules/common/tve-how-this-works",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body"><h4 class="modal-title accent-font" id="modal-title">Sorry!</h4><article>Nickelodeon is not part of your TV subscription package.<br/> Contact your provider and add Nickelodeon to your package today.</article>			<button class="button ok">OK</button></div><div class="floating-bob"><img src="https://web.archive.org/web/20150728212158/http://nick.mtvnimages.com/nick/nick-web/tve/sb-tve-sorry.png" /></div></div></div>')}return a.register("modules/common/tve-provider-error",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<h5 class="error-title">Uh-oh!</h5><p class="error-message">What you\'re looking for isn\'t here anymore. Let\'s go somewhere else!</p><div class="error-dora"><div class="error-dora-herself"></div><div class="error-dora-eyes"></div></div><div class="error-moshe"></div><div class="error-bubbleboy"><div class="error-bubbleboy-himself"><div class="error-bubbleboy-himself-bubble error-bubbleboy-himself-bubble1"></div><div class="error-bubbleboy-himself-bubble error-bubbleboy-himself-bubble2"></div><div class="error-bubbleboy-himself-bubble error-bubbleboy-himself-bubble3"></div></div><div class="error-bubbleboy-shadow"></div></div>')}return a.register("modules/errors/404",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script src="/nick-v8/EXT/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script><link rel="stylesheet" href="/nick-v8/EXT/css/build/nick-app-external-footer.css" />').p("content",b,{}).w('<script src="/nick-v8/EXT/js/build/app-resource-global.js"></script><script src="/nick-v8/EXT/js/app/main-external-footer.js"></script>')}return a.register("modules/footer/legal-external",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data"]),b,{block:c},{})}function c(a,b){return a.w('<div class="footer-legal"><ul class="footer-legal-items"><li class="footer-item footer-item-mama"><div class="footer-mama footer-text"></div><div class="status-arrow"></div><div class="bubble-container"><div class="bubble bubble-mama"><div class="bubble-content">').s(b.getPath(!1,["footer","mamabar","links"]),b,{block:d},{}).w('</div><div class="bubble-arrow"></div></div></div></li><li class="footer-item footer-item-privacy"><div class="footer-text">PRIVACY</div><div class="status-arrow"></div><div class="bubble-container"><div class="bubble bubble-privacy"><div class="bubble-content">').s(b.getPath(!1,["footer","privacy","links"]),b,{block:e},{}).w('</div><div class="bubble-arrow"></div></div></div></li><li class="footer-item footer-item-more"><div class="footer-text">MORE</div><div class="status-arrow"></div><div class="bubble-container"><div class="bubble bubble-more"><div class="bubble-content"><ul class="more-items-left">').s(b.getPath(!1,["footer","more","links"]),b,{block:f},{}).w('</ul><ul class="more-items-right"></ul><div class="icon-nick-kid-and-teens"></div><div class="copyright-info">&copy; ').f(b.getPath(!1,["feed","data","footer","more","year"]),b,"h").w(' Viacom International Inc. All Rights Reserved. Nick and all related titles, logos and characters are trademarks of Viacom International Inc.</div></div><div class="bubble-arrow"></div></div></div></li></ul></div>')}function d(a,b){return a.w('<div class="item"><a class="item-link" target="_blank" href="').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></div>")}function e(a,b){return a.w('<div class="item"><a class="item-link" target="_blank" href="').f(b.get(["url"],!1),b,"h").w('" id="').f(b.get(["title"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></div>")}function f(a,b){return a.w('<li class="bubble-more-item"><div class="item" data-index="').f(b.get(["index"],!1),b,"h").w('"><a class="item-link" target="_blank" href="').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></div></li>")}return a.register("modules/footer/legal",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="footer-tve"><ul><li class="footer-item"><div class="footer-text"><span class="footer-tve-provider" data-is-elvis="false"><img src="" class="provider-logo"/></span></div><div class="bubble-container"><div class="bubble bubble-tve"><div class="bubble-content"><div class="link-column"><div class="item"><a href="#" class="tve-logout">Log Out</a></div></div></div><div class="bubble-arrow"></div></div></div></li></ul></div>')}return a.register("modules/footer/tve-footer",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="embedtarget"></div>')}return a.register("modules/game-player/html5-player/body",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<style>html,body { margin: 0; padding: 0;  overflow: hidden; }</style><script src="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w("js/vendor/jsembed.js\" type=\"text/javascript\" charset=\"utf-8\"></script><script type=\"text/javascript\">var basePath = window.location.toString().split('base=');if (basePath.length === 2) {jsembed.embed('flambe.js', 'embedtarget', '960', '560', {api: 'flambe',base: window.location.origin + basePath[1],allowtouchmove: 'true',scaletype: 'fit'});}</script>")}return a.register("modules/game-player/html5-player/head",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="game-player" data-variants="').f(b.getPath(!1,["viewFeed","gameVariants"]),b,"h",["js","j"]).w('"></div>')}return a.register("modules/game-player/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<iframe width="100%" height="100%" class="game-player-iframe" src="/games/html5/?base=').f(b.get(["base"],!1),b,"h").w('" frameborder="0"></iframe>')}return a.register("modules/game-player/types/game-player-canvas",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="game-play-container"></div>')}return a.register("modules/game-player/types/game-player-flash",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<h5 class="game-player-unavailable-header">A Big Game Needs a Big Screen!</h5><h6 class="game-player-unavailable-subheading">Play it on your computer or try one of these games.</h6><div class="game-player-unavailable-asset"></div><audio src="/kids-assets/nickjr/nickjr-web/sound/404.mp3" autoplay></audio>')}return a.register("modules/game-player/types/game-player-unavailable",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<ul class="footer-list"><!--tve link-->').p("modules/grownups/tve-signin",b,{}).w("<!--grownups links-->").s(b.getPath(!1,["feed","data","grownup","global","items"]),b,{block:c},{}).w("<!--privacy tablet/desktop link-->").p("modules/grownups/legal-desktop",b,{}).w("<!--privacy mobile link-->").p("modules/grownups/legal",b,{}).w('<li class="footer-list-item footer-list-item-more"><span class="footer-item-text footer-item-text-more">MORE</span><div id="item-arrow" class="footer-sprite footer-sprite-item-arrow-left"></div></li><li class="footer-list-item-mamabar"><ul class="footer-list footer-mamabar">').s(b.getPath(!1,["feed","data","footer","mobileMore","links"]),b,{block:d},{}).w('</ul></li><li class="footer-list-item-copyright"><span>&copy; ').f(b.getPath(!1,["feed","data","footer","more","year"]),b,"h").w(' Viacom International Inc.</span></li><li class="footer-list-item-copyright"><span>All Rights Reserved. Nick and all related titles, logos and charactersare trademarks of Viacom International Inc.</span></li><li class="footer-list-item-copyright"><div class="footer-sprite footer-sprite-kids-and-teens-logo"></div></li></ul>')}function c(a,b){return a.w('<li class="footer-list-item footer-list-item-global"><span class="footer-item-text"><a class="footer-item-text-link" style="color:').f(b.getPath(!1,["feed","data","grownup","global","color"]),b,"h",["s"]).w(';" href="').f(b.get(["url"],!1),b,"h",["s"]).w('" target="_blank">').f(b.get(["title"],!1),b,"h",["s"]).w("</a></span></li>")}function d(a,b){return a.w('<li class="footer-list-item footer-mamabar-item"><span class="footer-item-text"><a class="footer-item-text-link" target="_blank" href="').f(b.get(["url"],!1),b,"h",["s"]).w('">').f(b.get(["title"],!1),b,"h",["s"]).w("</a></span></li>")}return a.register("modules/grownups/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","grownup","legal","items"]),b,{block:c},{})}function c(a,b){return a.w('<li class="footer-list-item footer-list-item-legal footer-list-item-legal-desktop"><div class="item" data-index="').f(b.get(["index"],!1),b,"h").w('"><a target="_blank" style="color:').f(b.getPath(!1,["feed","data","grownup","legal","color"]),b,"h",["s"]).w(';" href="').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></div></li>")}return a.register("modules/grownups/legal-desktop",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","grownup","legal","items"]),b,{block:c},{}).s(b.getPath(!1,["feed","data","footer","mobileLegal","links"]),b,{block:d},{})}function c(a,b){return a.w('<li class="footer-list-item footer-list-item-legal"><div class="item" data-index="').f(b.get(["index"],!1),b,"h").w('"><a target="_blank" style="color:').f(b.getPath(!1,["feed","data","grownup","legal","color"]),b,"h",["s"]).w(';" href="').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></div></li>")}function d(a,b){return a.w('<li class="footer-list-item footer-list-item-legal"><div class="item" data-index="').f(b.get(["index"],!1),b,"h").w('"><a target="_blank" style="color:').f(b.getPath(!1,["feed","data","grownup","legal","color"]),b,"h",["s"]).w(';" href="').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a></div></li>")}return a.register("modules/grownups/legal",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<!-- if not logedin--><li class="footer-list-item footer-list-item-global"><span class="footer-item-text"><a class="footer-item-text-link tve-login-button" style="color:').f(b.getPath(!1,["feed","data","grownup","global","color"]),b,"h",["s"]).w(';">Unlock more free episodes</a><a class="footer-item-text-link tve-logout-button hidden" style="color:').f(b.getPath(!1,["feed","data","grownup","global","color"]),b,"h",["s"]).w(';">You are signed in <span class="footer-tve-provider" data-is-elvis="false">with: <img src="" class="provider-logo" /></span><br />Log Out</a></span></li>')}return a.register("modules/grownups/tve-signin",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","pagination"]),b,{block:c},{})}function c(a,b){return a.x(b.get(["previous"],!1),b,{block:d},{}).x(b.get(["next"],!1),b,{block:f},{})}function d(a,b){return a.w('<link rel="prev" href="https://web.archive.org/web/20150728212158/http://www.nickjr.com').f(b.getPath(!1,["request","path"]),b,"h").nx(b.get(["isSecondPage"],!1),b,{block:e},{}).w('">')}function e(a,b){return a.w("?page=").f(b.get(["previous"],!1),b,"h")}function f(a,b){return a.w('<link rel="next" href="https://web.archive.org/web/20150728212158/http://www.nickjr.com').f(b.getPath(!1,["request","path"]),b,"h").w("?page=").f(b.get(["next"],!1),b,"h").w('">')}return a.register("modules/head-seo-pagination/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<script type="text/javascript" src="//web.archive.org/web/20150728212158/http://media.mtvnservices.com/pmt/e1/pjs/?v=0.7.2"></script><script src="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('js/build/polyfills.min.js"></script>')}return a.register("modules/head/app-scripts",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w(' <link rel="stylesheet" href="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('css/vendor/jquery-ui-1.10.4.custom.css"><link rel="stylesheet" href="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('css/build/nick-app.min.css">')}return a.register("modules/head/app-styles",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<title>Page Not Found</title><meta name="description" content="Page Not Found"/>')}return a.register("modules/head/meta-page-not-found",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<title></title><meta content="" name="description"/><meta content="" name="keywords"/><link href="https://web.archive.org/web/20150728212158/http://www.nick.com/sitemap/" rel="canonical"/>')}return a.register("modules/head/meta-sitemap",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","meta"]),b,{block:c},{}).nx(b.getPath(!1,["viewFeed","meta"]),b,{block:f},{}).s(b.getPath(!1,["viewFeed","meta"]),b,{block:i},{}).s(b.getPath(!1,["viewFeed","meta"]),b,{block:j},{}).s(b.getPath(!1,["viewFeed","meta","canonicalURL"]),b,{block:q},{})}function c(a,b){return a.w("<title>").f(b.getPath(!1,["viewFeed","meta","title"]),b,"h").s(b.getPath(!1,["viewFeed","content","stream","pagination","page"]),b,{
block:d},{}).w("</title>")}function d(a,b){return a.s(b.get(["previous"],!1),b,{block:e},{})}function e(a,b){return a.w(" - Page ").f(b.get(["current"],!1),b,"h")}function f(a,b){return a.w("<title>").s(b.getPath(!1,["viewFeed","content","stream","pagination","page"]),b,{block:g},{}).w("</title>")}function g(a,b){return a.s(b.get(["previous"],!1),b,{block:h},{})}function h(a,b){return a.w("Page ").f(b.get(["current"],!1),b,"h")}function i(a,b){return a.w('<meta name="description" content="').f(b.get(["description"],!1),b,"h").w('"/>')}function j(a,b){return a.s(b.get(["adfree"],!1),b,{block:k},{}).nx(b.get(["adfree"],!1),b,{block:l},{}).w('<meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@nickjr" /><meta name="twitter:title" content="').f(b.get(["title"],!1),b,"h").w('" /><meta name="twitter:description" content="').f(b.get(["description"],!1),b,"h").w('" /><meta name="twitter:image" content="').f(b.get(["image"],!1),b,"h").w('" /><meta property="og:title" content="').f(b.get(["title"],!1),b,"h").w('"/><meta property="og:description" content="').f(b.get(["description"],!1),b,"h").w('"/><meta property="og:image" content="').f(b.get(["image"],!1),b,"h").w('" /><meta property="og:type" content="').f(b.get(["ogType"],!1),b,"h").w('" /><meta property="og:site_name" content="').f(b.get(["domain"],!1),b,"h").w('" />').s(b.getPath(!1,["viewFeed","meta","sm4Type"]),b,{block:m},{}).nx(b.getPath(!1,["viewFeed","meta","sm4Type"]),b,{block:n},{}).s(b.getPath(!1,["viewFeed","meta","sm4Alias"]),b,{block:o},{}).nx(b.getPath(!1,["viewFeed","meta","sm4Alias"]),b,{block:p},{}).w('<meta property="og:url" content="').f(b.get(["domain"],!1),b,"h").f(b.getPath(!1,["request","url"]),b,"h").w('" />')}function k(a,b){return a.w('<meta name="adfree" content="true"/>')}function l(a,b){return a.w('<meta name="adfree" content="false"/>')}function m(a,b){return a.w('<meta property="sm4:type" content="').f(b.get(["sm4Type"],!1),b,"h").w('" />')}function n(a,b){return a.w('<meta property="sm4:type" content="Post"/>')}function o(a,b){return a.w('<meta property="sm4:alias" content="').f(b.get(["sm4Alias"],!1),b,"h").w('"/>')}function p(a,b){return a.w('<meta property="sm4:alias" content="Show"/>')}function q(a,b){return a.w('<link rel="canonical" href="').f(b.getPath(!1,["viewFeed","meta","canonicalURL"]),b,"h").w('" />')}return a.register("modules/head/meta",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,l.__dustBody=!0,m.__dustBody=!0,n.__dustBody=!0,o.__dustBody=!0,p.__dustBody=!0,q.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","printable"]),b,{block:c},{})}function c(a,b){return a.w('<script id="propertyList" type="application/json">').f(b.getPath(!1,["feed","data","printable"]),b,"h",["s"]).w("</script>")}return a.register("modules/head/property-list",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<!-- typekit --><script type="text/javascript" src="//web.archive.org/web/20150728212158/http://use.typekit.net/ccs8anf.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script>')}return a.register("modules/head/script-fonts",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<meta content="').f(b.getPath(!1,["viewFeed","description"]),b,"h").w('" name="description"/><meta content="kids games,kids tv,kids tv show,..." name="keywords"/><meta content="').f(b.getPath(!1,["request","csrf"]),b,"h").w('" name="csrf" >')}return a.register("modules/head/seo",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<script>window.nickapp = window.nickapp || {};window.nickapp.viewFeed = ").f(b.get(["viewFeedJSON"],!1),b,"h",["s"]).w(";</script>")}return a.register("modules/head/view-feed",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="register-form login-dialog"><span data-title class="hide accent-font">CONGRATULATIONS!</span><div class="welcome-message accent-font">You now have a Nick.com Username and Password!  Don\'t forget to remember your info.</div><div class="register-data"><div class="register-data-item"><div class="register-data-name">USERNAME</div><div id="user-name" class="register-data-value text-clear">').f(b.get(["username"],!1),b,"h").w('</div></div><div class="register-data-item"><div class="register-data-name">PASSWORD</div><div id="password" class="register-data-value text-clear">').f(b.get(["password"],!1),b,"h").w('</div></div><div class="register-data-item"><div class="register-data-name">PASSWORD HINT</div><div class="register-data-value">Q: <span class="recover-q text-clear">').f(b.get(["recoverQ"],!1),b,"h").w('</span><br />A: <span class="recover-a text-clear">').f(b.get(["recoverA"],!1),b,"h").w('</span></div></div></div><button id="sign-in" type="button" class="button btn btn-image sign-in accent-font" title="sign-in">FINISH</button></div>')}return a.register("modules/header/create-account/complete",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="register login-dialog"><span data-title class="hide">CREATE AN ACCOUNT</span><form id="new-acct" class="sign-in-form register"><div class="form-group"><label for="gender" class="text-clear">I am a:</label><span class="gender-check accent-font"><i id="boy" class="check active" data-gender="M" data-error-hint="#gender-error-hint"></i>BOY</span><span class="gender-check accent-font"><i id="girl" class="check" data-gender="F" data-error-hint="#gender-error-hint"></i>GIRL</span><div class="dialog-error gender-error hidden" id="gender-error-hint" >Oops!  You didn\'t pick Boy or Girl</div></div><div class="form-group"><label for="username" class="accent-font"> CHOOSE A USERNAME</label><input type="text" class="form-control" id="user-name" data-error-hint="#uname-error-hint" maxlength="10"><div class="dialog-error uname-error-hint hidden" id="uname-error-hint">Oops!  Looks like you need to make up a Username.</div></div></form><button id="next" type="button" class="button btn btn-image next create-acct accent-font" title="next">NEXT</button></div><div id="valid-error-hint" class="validate-error validate-hint hidden"><div class="validate-content">Your User Name should have 3 to 10 characters with <strong>NO SPACES.  DON\'T</strong> use your real name or any personal info.</div><div class="validate-arrow"></div></div>')}return a.register("modules/header/create-account/create-account",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="register-form login-dialog"><span data-title class="hide accent-font">CREATE A NEW ACCOUNT</span><form id="sign-in" class="sign-in-form register"><div class="form-group accent-font"><label for="user-name">CHOOSE A USERNAME</label><input type="text" class="form-control small" id="user-name" value="').f(b.get(["username"],!1),b,"h").w('" data-error-hint="#user-name-error-hint" data-valid-check="#user-name-check" data-gender="').f(b.get(["gender"],!1),b,"h").w('" maxlength="10"><div id="user-name-check" class="confirm-check hidden"></div><div class="dialog-error invalid-input hidden" id="user-name-error-hint" data-error-short="Sorry!  That username is too short.  It should be at least 3 characters long." data-error-char="Sorry!  You can\'t use spaces or symbols." data-error-taken="Sorry!  That username is already taken.  Think up a new one and try it out." data-error-empty="Oops!  You forgot to enter a username." data-error-long="Sorry!  That username is too long.  It should be no more than 10 characters long." data-error-invalid="Sorry!  That username is invalid.  Think up a new one and try it out."></div><div id="check-uname" class="anchor check-available accent-font">CHECK AVAILABILITY</div></div><div class="form-group"><label for="password">PASSWORD</label><input type="password" class="form-control small" id="password" data-error-hint="#password-error-hint" data-valid-check="#password-check" maxlength="10"><div id="password-check" class="confirm-check hidden"></div><div class="dialog-error invalid-input hidden password-error" id="password-error-hint" data-error-empty="Oops!  Your password is missing!" data-error-short="Sorry!  That password is too short.  It should be at least 3 characters long." data-error-invalid="Oops!  The password you\'ve chosen is invalid. Please choose another made up of letters and no more than five numbers.">Oops!  Your password is missing.</div></div><div class="form-group"><label for="pass-confirm">RETYPE PASSWORD</label><input type="password" class="form-control small" id="pass-confirm" data-error-hint="#pass-confirm-error-hint" data-valid-check="#pass-confirm-check" maxlength="10"><div id="pass-confirm-check" class="confirm-check hidden"></div><div class="dialog-error invalid-input confirm-error hidden" id="pass-confirm-error-hint" data-error-empty="Oops!  Your password is missing!" data-error-match="Oops!  Your passwords don\'t match!">Oops!  Your passwords don\'t match!</div></div><div class="form-group"><label for="recover-q-select">PASSWORD HINT QUESTION</label><div id="recover-q" class="recover-q"><select id="recover-q-select" class="form-control recover-q-select">').s(b.get(["questions"],!1),b,{block:c},{}).w('</select><span class="recover-q-arrow"></span></div><div id="question-hint" class="validate-error validate-hint password hidden"><div class="validate-content">We\'ll ask you this question if you forget your password.</div><div class="validate-arrow"></div></div></div><div class="form-group"><label for="user-name">ANSWER</label><input type="text" class="form-control large" id="recover-a" data-error-hint="#answer-error-hint" maxlength="25"><div class="dialog-error answer-empty hidden" id="answer-error-hint" data-error-invalid="Oops!  Your password recovery answer is too short!" data-error-empty="Oops!  You forgot to type an answer!">Oops!  You forgot to type an answer!</div></div><span class="tos-check accent-font text-clear"><i id="confirm-tos" class="check"></i>I have read the <a id="privacy-link" target="_blank" href="#">Privacy Policy</a> and <a id="tos-link" target="_blank" href="#">Terms of Use</a>.</span></form><button id="register-submit" type="button" class="button btn btn-image register-submit" title="login">SUBMIT</button></div>')}function c(a,b){return a.w("<option value='").f(b.get(["id"],!1),b,"h").w("'>").f(b.get(["text"],!1),b,"h").w("</option>")}return a.register("modules/header/create-account/create-new",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data"]),b,{block:c},{})}function c(a,b){return a.w('<nav class="nickjr-external-header-nav"><ul class="nickjr-external-header-nav-top-menu"><li class="nickjr-external-header-nav-top-menu-item" data-section="Home"><a href="https://web.archive.org/web/20150728212158/http://www.nickjr.com/">Nick Jr.</a></li>').s(b.getPath(!1,["mainNav","sprites"]),b,{block:d},{}).w('<li class="nickjr-external-header-nav-top-menu-item nickjr-external-header-nav-submenu-button" data-section="Shows"><span class="nickjr-external-header-nav-submenu-label">Shows</span></li></ul><ul class="nickjr-external-header-nav-submenu">').s(b.getPath(!1,["propertyCarousel","sprites"]),b,{block:e},{}).w("</ul></nav>")}function d(a,b){return a.w('<li class="nickjr-external-header-nav-top-menu-item" data-section="').f(b.get(["title"],!1),b,"h").w('"><a href="https://web.archive.org/web/20150728212158/http://www.nickjr.com').f(b.get(["url"],!1),b,"h").w('">').f(b.get(["title"],!1),b,"h").w("</a>")}function e(a,b){return a.w('<li class="nickjr-external-header-nav-submenu-item"><a href="https://web.archive.org/web/20150728212158/http://www.nickjr.com').f(b.get(["url"],!1),b,"h").w('" class="nickjr-external-header-nav-submenu-item-link">').f(b.get(["title"],!1),b,"h").w("</a></li>")}return a.register("modules/header/external-header",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="sign-in login-dialog modal-form"><span data-title class="hide accent-font">PLEASE SIGN IN</span><form id="sign-in" class="sign-in-form"><div class="form-group"><label for="user-name">USERNAME</label><input type="text" class="form-control" id="user-name" data-error-hint="#user-name-error-hint"><div class="dialog-error hidden" id="user-name-error-hint" >Oops!  Your username is missing!</div><div id="auth-error" class="dialog-error auth-error hidden">Sorry!  Your username or password isn\'t right.  Try again!</div></div><div class="form-group"><label for="password">PASSWORD</label><input type="password" class="form-control" id="password" data-error-hint="#password-error-hint"><div class="dialog-error hidden" id="password-error-hint" >Oops!  Your password is missing!</div><div id="forgot-password" class="btn anchor">FORGOT YOUR PASSWORD?</div></div><button id="login" type="button" class="button btn btn-image sign-in accent-font" title="sign in" >SIGN IN</button><div class="form-group"><label for="signup">DON\'T HAVE AN ACCOUNT?</label><br/><button id="signup" type="button" class="btn btn-link signup">SIGN UP</button><div class="arrow-right"></div></div></form></div></div><div class="current-img"></div>')}return a.register("modules/header/login/sign-in",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<!-- <div class="hdr-drop-shadow" style="position: absolute;height: 100px;background: transparent;width: 100%;display: block;background-image: url(http://nick.mtvnimages.com/nick/nick-web/property-top-drop-shadow.png);background-repeat: repeat-x;"></div> --><div class="nav-switcher-container" data-series="').f(b.getPath(!1,["viewFeed","seriesUrlKey"]),b,"h").w('"><div id="slim-header">').p("modules/header/slim-nav",b,{}).w('</div><div id="top-navigation">').p("modules/header/top-navigation",b,{}).w("</div></div>")}return a.register("modules/header/nav-switcher",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-form forgot-password"><span data-title class="hide">PASSWORD RECOVERY</span><form id="recover" class="recover-form"><div class="form-group"><label for="password">YOUR PASSWORD IS</label><div id="password"data-uname="').f(b.get(["username"],!1),b,"h").w('">').f(b.get(["password"],!1),b,"h").w('</div><br/></div></form><button id="login" type="button" class="button btn btn-image sign-in accent-font" title="finish">SIGN IN</button></div><div class="current-img complete-img"></div></div>')}return a.register("modules/header/recover-password/complete",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="forgot-password question"><span data-title class="hide accent-font">PASSWORD RECOVERY</span><form id="sign-in" class="modal-form recover-form "><div class="form-group"><label for="answer">PASSWORD HINT QUESTION</label><div class="hint-question">').f(b.get(["hintQuestion"],!1),b,"h").w('</div><br/><input type="text" class="form-control" id="answer" data-error-hint="#answer-error-hint" data-uname="').f(b.get(["username"],!1),b,"h").w('"><div class="dialog-error hidden answer-error-hint" data-for="answer" id="answer-error-hint">Oops!  You didn\'t answer the question!</div><div id="recover-error" class="dialog-error recover-error hidden">Sorry! Your answer isn\'t right. Try again!</div></div><div class="form-group"><button id="back" type="button" class="btn btn-link back back-uname">BACK</button><button id="submit" type="button" class="button btn btn-image submit accent-font" title="submit">SUBMIT</button></div></form></div><div class="current-img question-img"></div>')}return a.register("modules/header/recover-password/question",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="forgot-password"><span data-title class="hide accent-font">PASSWORD RECOVERY</span><form id="sign-in" class="modal-form recover-form"><div class="form-group"><label for="user-name">ENTER YOUR USERNAME</label><input type="text" class="form-control" id="user-name" data-error-hint="#user-name-error-hint" placeholder="Enter Your Username"><div class="dialog-error hidden" id="user-name-error-hint" >Oops!  Your username is missing!</div><div id="uname-error" class="dialog-error uname-error hidden">Sorry!  Your username isn\'t right.  Try again!</div></div><div class="form-group"><button id="back" type="button" class="btn btn-link back" title="back">BACK</button><button id="next" type="button" class="button btn btn-image next accent-font" title="next">NEXT</button></div></form></div><div class="current-img recover-img"></div>')}return a.register("modules/header/recover-password/username",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["css"],!1),b,{block:c},{}).w('<div class="slim-nav video-player-fade-out slide-when-sidebar-expanded hidden"><a href="/" class="route main-nav-brand-link"><span class="seo">nick</span></a><a href="/halo-awards/" class="route bread-crumb"><span>HALO Awards 2014</span></a>').s(b.get(["ad-marked"],!1),b,{block:d},{}).w("</div>")}function c(a,b){return a.w('<link rel="stylesheet" href="').f(b.getPath(!1,["exposedData","resourcePath"]),b,"h",["s"]).w('css/build/nick-app-external.css" />')}function d(a,b){return a.w('<span class="adMarked">ADVERTISEMENT</span>')}return a.register("modules/header/slim-nav",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="time-travel-overlay"><div class="time-travel-settings"><label for="time-travel-date">Date:</label><input type="text" id="time-travel-date"><label>Time:</label><select class="time-travel-dropdown" id="time-travel-hour"><option value="00">00 (12AM)</option><option value="01">01 (01AM)</option><option value="02">02 (02AM)</option><option value="03">03 (03AM)</option><option value="04">04 (04AM)</option><option value="05">05 (05AM)</option><option value="06">06 (06AM)</option><option value="07">07 (07AM)</option><option value="08">08 (08AM)</option><option value="09">09 (09AM)</option><option value="10">10 (10AM)</option><option value="11">11 (11AM)</option><option value="12">12 (12PM)</option><option value="13">13 (1PM)</option><option value="14">14 (2PM)</option><option value="15">15 (3PM)</option><option value="16">16 (4PM)</option><option value="17">17 (5PM)</option><option value="18">18 (6PM)</option><option value="19">19 (7PM)</option><option value="20">20 (8PM)</option><option value="21">21 (9PM)</option><option value="22">22 (10PM)</option><option value="23">23 (11PM)</option></select><select class="time-travel-dropdown" id="time-travel-minute"><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option></select><select class="time-travel-dropdown" id="time-travel-second"><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option></select><button class="time-travel-go">To the Future!</button><button class="time-travel-update">Update!</button><button class="time-travel-end">To the Present!</button></div><button class="time-travel-toggle"><img src="https://web.archive.org/web/20150728212158/http://images3.nick.com/nick-assets/common/datepicker/cal.gif?" alt="Time Travelin\'" /></button><div class="time-travel-status"></div></div>')}return a.register("modules/header/time-travel",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="inline-sound" class="hidden" data-sound-id="').f(b.getPath(!1,["viewFeed","sound","id"]),b,"h").w('"></div>')}return a.register("modules/inline-sound/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<a class="module-logo-link route is-animated-zoom" href="/" data-cr="TopNav1"><div class="module-logo-link-icon module-back-to-stream-item"></div><div class="module-logo-link-img module-back-to-stream-item"></div></a>')}return a.register("modules/logo/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-box"><div class="modal-content current-step"><div class="modal-x" id="close"></div></div></div>')}return a.register("modules/modals/modal-base",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-tve-grownups-prompt"><div class="modal-x" id="close"></div><h1 class="modal-tve-grownups-prompt-title">This page is for grownups!</h1><p class="modal-tve-grownups-prompt-description">Nick Jr. subscribers, to unlock even more full episodes, simply log in with your TV provider\'s info.<br />Just tap the button to get started</p><div class="modal-tve-grownups-prompt-image"></div><div class="modal-tve-grownups-prompt-login-button">Log In</div></div>')}return a.register("modules/modals/tve/grownups-prompt-step",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-tve-login-fail"><div class="modal-x" id="close"></div><h1 class="modal-tve-login-fail-title">Sorry!</h1><div class="modal-tve-login-fail-image-bubble-boy"></div><p class="modal-tve-login-fail-description">Sorry! Nick Jr. is not part of your TV subscription packages.<br />Contact your provider and add Nick Jr. to your package today.</p></div>')}return a.register("modules/modals/tve/login-fail-step",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="modal-tve-providers"><div class="modal-x" id="close"></div><h1 class="modal-tve-providers-title">Whoah! That\'s weird!</h1><div class="modal-tve-providers-image-wally"></div><p class="modal-tve-providers-description">Your TV Provider is not available yet<br />But we\'re adding new ones all the time.</p><div class="modal-tve-providers-provider-close-button">OK</div></div>')}return a.register("modules/modals/tve/provider-not-listed",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","main","mainNav"]),b,{block:c},{})}function c(a,b){return a.w('<nav class="module-navigation" itemscope itemtype="https://web.archive.org/web/20150728212158/http://www.schema.org/SiteNavigationElement"><ul class="module-navigation-list">').s(b.get(["sprites"],!1),b,{block:d},{}).w("</ul></nav>")}function d(a,b){return a.w('<li class="module-navigation-list-item" itemprop="name"><a href="').f(b.get(["url"],!1),b,"h",["s"]).w('" class="route module-navigation-list-item-link" data-section="').f(b.get(["title"],!1),b,"h",["s"]).w('" data-cr="TopNav').f(b.get(["index"],!1),b,"h").w('" itemprop="url">').f(b.get(["title"],!1),b,"h",["s"]).w("</a></li>")}return a.register("modules/navigation/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="module-nickjr-header-container"><div id="module-logo" class="module-logo module-back-to-stream">').p("modules/logo/index",b,{}).w('</div><div id="module-back-button" class="module-back-button module-back-to-stream"></div><div id="module-simple-footer" class="module-simple-footer">').p("modules/simple-footer/index",b,{}).w('</div><div id="module-property-carousel" class="module-property-carousel">').p("modules/property-carousel/index",b,{}).w("</div></div>")}return a.register("modules/nickjr-header/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<audio src="/kids-assets/nickjr/nickjr-web/sound/404.mp3" autoplay></audio>')}return a.register("modules/page-error-sound/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.get(["viewFeed"],!1),b,{block:c},{})}function c(a,b){return a.x(b.get(["description"],!1),b,{block:d},{})}function d(a,b){return a.w('<div class="page-summary"><h2 class="page-summary-header-text page-summary-header').x(b.get(["propertyIcon"],!1),b,{block:e},{}).w('">').x(b.get(["propertyIcon"],!1),b,{block:f},{}).x(b.get(["pageTitle"],!1),b,{block:g},{}).nx(b.get(["pageTitle"],!1),b,{block:h},{}).w("</h2>").x(b.getPath(!1,["parameters","subheading"]),b,{block:i},{}).w('<p class="page-summary-description">').f(b.get(["description"],!1),b,"h").w("</p></div>")}function e(a,b){return a.w(" with-icon")}function f(a,b){return a.w('<img class="page-summary-header-icon" src="https://web.archive.org/web/20150728212158/http://images.nickjr.com').f(b.get(["propertyIcon"],!1),b,"h").w('" />')}function g(a,b){return a.f(b.get(["pageTitle"],!1),b,"h")}function h(a,b){return a.f(b.getPath(!1,["meta","pageTitle"]),b,"h")}function i(a,b){return a.w('<h3 class="page-summary-subheader">').f(b.getPath(!1,["parameters","subheading"]),b,"h").w("</h3>")}return a.register("modules/page-summary/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<ul class="footer-list">').p("modules/privacy/items",b,{}).w("</ul>")}return a.register("modules/privacy/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","footer","privacy","links"]),b,{block:c},{})}function c(a,b){return a.w('<li class="footer-list-item footer-list-item-legal"><span class="footer-item-text"><a class="footer-item-text-link" style="color:').f(b.getPath(!1,["feed","data","grownup","legal","color"]),b,"h",["s"]).w(';" href="').f(b.get(["url"],!1),b,"h",["s"]).w('" target="_blank">').f(b.get(["title"],!1),b,"h",["s"]).w("</a></span></li>")}return a.register("modules/privacy/items",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","main","propertyCarousel"]),b,{block:c},{})}function c(a,b){return a.w('<div class="module-pc is-first-load"><ul class="module-pc-list" itemscope itemtype="https://web.archive.org/web/20150728212158/http://www.schema.org/SiteNavigationElement">').s(b.get(["sprites"],!1),b,{block:d},{}).w('</ul><div class="module-pc-arrow module-pc-arrow-left"></div><div class="module-pc-arrow module-pc-arrow-right"></div></div><div class="module-pc-expandable"><div class="module-pc-expandable-circle"><div class="module-pc-expandable-circle-front"></div><div class="module-pc-expandable-circle-back"></div></div></div>')}function d(a,b){return a.w('<li class="module-pc-list-item" ').s(b.get(["externalContentType"],!1),b,{block:e},{}).w(' style="-webkit-transform: translate(').f(b.get(["xTransform"],!1),b,"h").w("px, 0px) translateZ(0px); transform: translate(").f(b.get(["xTransform"],!1),b,"h").w('px, 0px) translateZ(0px);"><a href="').f(b.get(["url"],!1),b,"h",["s"]).w('" ').f(b.get(["target"],!1),b,"h",["s"]).w(' class="route module-pc-list-item-icon" data-cr="CharNav').f(b.get(["index"],!1),b,"h").w('" data-xcoord="').f(b.get(["xCoordinate"],!1),b,"h").w('" itemprop="url" style="background-position: -').f(b.get(["x"],!1),b,"h").w('px 0px;"><div class="module-pc-list-item-tooltip" itemprop="name">').f(b.get(["title"],!1),b,"h").w("</div></a></li>")}function e(a,b){return a.w('data-sponsor="').f(b.get(["externalContentType"],!1),b,"h").w('"')}return a.register("modules/property-carousel/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["feed","data","propertyCarousel"]),b,{block:c},{})}function c(a,b){return a.x(b.get(["spritePath"],!1),b,{block:d},{})}function d(a,b){return a.w('<style type="text/css">.module-pc-list-item-icon {background-image: url(\'http://images.nickjr.com').f(b.get(["spritePath"],!1),b,"h").w("?height=180');}@media (min-height: 600px) and (orientation: landscape), (min-width: 760px) and (orientation: portrait) {.module-pc-list-item-icon {background-image: url('https://web.archive.org/web/20150728212158/http://images.nickjr.com").f(b.get(["spritePath"],!1),b,"h").w("?height=280');}}</style>")}return a.register("modules/property-carousel/sprite",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<li class="property-filters-list-item property-filters-list-all"><a class="property-filters-list-item-link route" href="/').f(b.getPath(!1,["viewFeed","rootKey"]),b,"h").w('/" data-cr="PropFilter3">').x(b.getPath(!1,["viewFeed","propertyIcon"]),b,{block:c},{}).w('<p class="property-filters-all-text">All</p></a></li>')}function c(a,b){return a.w('<img class="property-filters-property-icon" src="').f(b.getPath(!1,["viewFeed","propertyIcon"]),b,"h").w('" />')}return a.register("modules/property-filters/buttons/all-button",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<li class="property-filters-list-item property-filters-list-games"><a class="property-filters-list-item-link route property-filters-link-games" href="/').f(b.getPath(!1,["viewFeed","rootKey"]),b,"h").w('/games/" data-cr="PropFilter1">Games</a></li>')}return a.register("modules/property-filters/buttons/games-button",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<li class="property-filters-list-item property-filters-list-videos"><a class="property-filters-list-item-link route property-filters-link-videos" href="/').f(b.getPath(!1,["viewFeed","rootKey"]),b,"h").w('/videos/" data-cr="PropFilter2">Videos</a></li>');
}return a.register("modules/property-filters/buttons/videos-button",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.p("modules/property-filters/header/index",b,{}).x(b.getPath(!1,["viewFeed","parameters","showFilters"]),b,{block:c},{})}function c(a,b){return a.x(b.getPath(!1,["viewFeed","hasGames"]),b,{block:d},{})}function d(a,b){return a.w('<ul class="property-filters-list property-filters-section-games" data-key="').f(b.getPath(!1,["viewFeed","rootKey"]),b,"h").w('">').p("modules/property-filters/buttons/all-button",b,{}).p("modules/property-filters/buttons/videos-button",b,{}).w("</ul>")}return a.register("modules/property-filters/games",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<h1 class="property-filters-header').x(b.getPath(!1,["viewFeed","parameters","showFilters"]),b,{block:c},{}).w('">').f(b.getPath(!1,["viewFeed","meta","pageTitle"]),b,"h").w("</h1>")}function c(a,b){return a.x(b.getPath(!1,["viewFeed","hasGames"]),b,{block:d},{})}function d(a,b){return a.w(" show-filters")}return a.register("modules/property-filters/header/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.p("modules/property-filters/header/index",b,{}).x(b.getPath(!1,["viewFeed","parameters","showFilters"]),b,{block:c},{})}function c(a,b){return a.x(b.getPath(!1,["viewFeed","hasGames"]),b,{block:d},{})}function d(a,b){return a.w('<ul class="property-filters-list property-filters-section-all" data-key="').f(b.getPath(!1,["viewFeed","rootKey"]),b,"h").w('">').p("modules/property-filters/buttons/games-button",b,{}).p("modules/property-filters/buttons/videos-button",b,{}).w("</ul>")}return a.register("modules/property-filters/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.p("modules/property-filters/header/index",b,{}).x(b.getPath(!1,["viewFeed","parameters","showFilters"]),b,{block:c},{})}function c(a,b){return a.x(b.getPath(!1,["viewFeed","hasGames"]),b,{block:d},{})}function d(a,b){return a.w('<ul class="property-filters-list property-filters-section-videos" data-key="').f(b.getPath(!1,["viewFeed","rootKey"]),b,"h").w('">').p("modules/property-filters/buttons/all-button",b,{}).p("modules/property-filters/buttons/games-button",b,{}).w("</ul>")}return a.register("modules/property-filters/videos",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(e),a.p("modules/related-content/related-content",b,{})}function c(a,b){return b=b.shiftBlocks(e),a.s(b.getPath(!1,["viewFeed","related","results"]),b,{block:d},{})}function d(a,b){return b=b.shiftBlocks(e),a.p("modules/related-content/tiles/related-content-tile-playlist",b,{})}a.register("modules/related-content/related-content-playlist",b);var e={itemRenderer:c};return b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(f),a.p("modules/related-content/related-content",b,{})}function c(a,b){return b=b.shiftBlocks(f),a.s(b.get(["viewFeed"],!1),b,{block:d},{}).w(" ")}function d(a,b){return b=b.shiftBlocks(f),a.p(e,b,{})}function e(a,b){return b=b.shiftBlocks(f),a.w("modules/related-content/tiles/related-content-tile-").f(b.get(["mediaType"],!1),b,"h")}a.register("modules/related-content/related-content-videos",b);var f={firstItem:c};return b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="related-content-container"><div class="related-content-list related-content-list-').f(b.getPath(!1,["viewFeed","mediaType"]),b,"h").w(' clearfix" >').block(b.getBlock("firstItem"),b,{block:c},{}).block(b.getBlock("itemRenderer"),b,{block:d},{}).w('</div></div><div class="related-controls"><div class="related-arrow-container related-arrow-container-prev" data-direction="-1"><div class="related-arrow related-arrow-prev"></div></div><div class="related-arrow-container related-arrow-container-next" data-direction="1"><div class="related-arrow related-arrow-next"></div></div></div>')}function c(a,b){return a}function d(a,b){return a.s(b.getPath(!1,["viewFeed","related","results"]),b,{block:e},{})}function e(a,b){return a.p(f,b,{})}function f(a,b){return a.w("modules/related-content/tiles/related-content-tile-").f(b.get(["mediaType"],!1),b,"h")}return a.register("modules/related-content/related-content",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="related-content-list-tile-icon related-content-list-tile-icon-locked"></div>')}return a.register("modules/related-content/tiles/icon-locked",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="related-content-list-tile-icon related-content-list-tile-icon-video"></div>')}return a.register("modules/related-content/tiles/icon-video",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.block(b.getBlock("meta"),b,{block:c},{}).block(b.getBlock("content"),b,{block:d},{}).block(b.getBlock("icon"),b,{block:e},{})}function c(a,b){return a.w('<meta content="').f(b.get(["url"],!1),b,"h").w('" itemprop="url"><meta content="').f(b.get(["shortTitle"],!1),b,"h").w('" itemprop="name"><meta content="').f(b.get(["description"],!1),b,"h").w('" itemprop="description"><meta content="T').f(b.get(["duration"],!1),b,"h").w('" itemprop="duration"><meta content="').f(b.getPath(!1,["images","0","url"]),b,"h").w('" itemprop="thumbnailUrl">')}function d(a,b){return a.w('<a href="').f(b.get(["url"],!1),b,"h").w('" class="route" data-related="').f(b.get(["index"],!1),b,"h").w('" data-auth-required="').f(b.get(["authRequired"],!1),b,"h").w('"><picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["images","r1-1"]),b,"h",["s"]).w('&maxdimension=210" media="(min-height: 400px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["images","r1-1"]),b,"h",["s"]).w('&maxdimension=210" media="(min-width: 760px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["images","r1-1"]),b,"h",["s"]).w('&maxdimension=350" media="(min-width: 480px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["images","r1-1"]),b,"h",["s"]).w('&maxdimension=210" media="(min-width: 400px) and (orientation: portrait)"><!--[if IE 9]></video><![endif]--><img class="related-content-list-tile-image" srcset="').f(b.getPath(!1,["images","r1-1"]),b,"h",["s"]).w('&maxdimension=170" alt="').f(b.get(["title"],!1),b,"h").w('"></picture></a>')}function e(a,b){return a.w('<div class="related-content-list-tile-icon"></div>')}return a.register("modules/related-content/tiles/related-content-tile-base",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(f),a.w('<div class="content-tile related-content-list-tile related-content-list-videos-tile" data-id="').f(b.get(["id"],!1),b,"h").w('" data-islocked="').f(b.get(["authRequired"],!1),b,"h").w('" data-auth-required="').f(b.get(["authRequired"],!1),b,"h").w('">').p("modules/related-content/tiles/related-content-tile-base",b,{}).w('<div class="stream-tile-flag tile-episode-flag"></div>').w("</div>")}function c(a,b){return b=b.shiftBlocks(f),a.x(b.get(["authRequired"],!1),b,{"else":d,block:e},{})}function d(a,b){return b=b.shiftBlocks(f),a.p("modules/related-content/tiles/icon-video",b,{})}function e(a,b){return b=b.shiftBlocks(f),a.p("modules/related-content/tiles/icon-locked",b,{})}a.register("modules/related-content/tiles/related-content-tile-episode",b);var f={icon:c};return b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.w('<div class="content-tile related-content-list-tile related-content-list-tile-game">').p("modules/related-content/tiles/related-content-tile-base",b,{}).w("</div>")}function c(a,b){return b=b.shiftBlocks(d),a.w('<div class="related-content-list-tile-icon game-icon"></div>')}a.register("modules/related-content/tiles/related-content-tile-game",b);var d={icon:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(e),a.w('<div class="content-tile related-content-list-tile related-content-list-videos-tile" data-id="').f(b.get(["id"],!1),b,"h").w('" data-title="').f(b.get(["shortTitle"],!1),b,"h").w('" data-islocked="').f(b.get(["authRequired"],!1),b,"h").w('">').p("modules/related-content/tiles/related-content-tile-base",b,{}).w("	").w("</div>")}function c(a,b){return b=b.shiftBlocks(e),a.w('<a href="').f(b.get(["url"],!1),b,"h").w('" data-shorttitle="').f(b.get(["shortTitle"],!1),b,"h").w('" data-related="').f(b.get(["index"],!1),b,"h").w('" data-contenturi="mgid:arc:video:nickjr.com:').f(b.get(["id"],!1),b,"h").w('" data-duration="').f(b.get(["duration"],!1),b,"h").w('">	<img class="related-content-list-tile-image" src="').f(b.getPath(!1,["images","r1-1"]),b,"h").w('" alt="').f(b.get(["title"],!1),b,"h").w('" ></a>')}function d(a,b){return b=b.shiftBlocks(e),a.p("modules/related-content/tiles/icon-video",b,{})}a.register("modules/related-content/tiles/related-content-tile-playlist",b);var e={content:c,icon:d};return b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.w('<div class="content-tile related-content-list-tile related-content-list-videos-tile" data-id="').f(b.get(["id"],!1),b,"h").w('" data-title="').f(b.get(["shortTitle"],!1),b,"h").w('" data-islocked="').f(b.get(["authRequired"],!1),b,"h").w('" data-auth-required="').f(b.get(["authRequired"],!1),b,"h").w('">').p("modules/related-content/tiles/related-content-tile-base",b,{}).w("</div>")}function c(a,b){return b=b.shiftBlocks(d),a.p("modules/related-content/tiles/icon-video",b,{})}a.register("modules/related-content/tiles/related-content-tile-video",b);var d={icon:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="kids-reporting"data-seriesUrlKey="').f(b.getPath(!1,["viewFeed","reporting","seriesUrlKey"]),b,"h").w('"data-contentType="').f(b.getPath(!1,["viewFeed","reporting","contentType"]),b,"h").w('"data-urlKey="').f(b.getPath(!1,["viewFeed","reporting","urlKey"]),b,"h").w('"data-id="').f(b.getPath(!1,["viewFeed","reporting","id"]),b,"h").w('"data-title="').f(b.getPath(!1,["viewFeed","reporting","title"]),b,"h").w('"data-rating="').f(b.getPath(!1,["viewFeed","reporting","rating"]),b,"h").w('"data-episode="').f(b.getPath(!1,["viewFeed","reporting","episode"]),b,"h").w('"data-videoType="').f(b.getPath(!1,["viewFeed","reporting","videoType"]),b,"h").w('"data-filter="').f(b.getPath(!1,["viewFeed","reporting","filter"]),b,"h").w('"></div>')}return a.register("modules/reporting/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="sidebar" data-child-selector=".sidebar-panel"><div class="sidebar-panel side-panel-grownups" data-child-selector=".sidebar-panel-view" data-id="grownups"><div class="sidebar-panel-view sidebar-panel-view-summary" data-controller="modules/page-summary/index">').p("modules/page-summary/index",b,{}).w('</div><div class="sidebar-panel-view" data-controller="modules/grownups/index">').p("modules/grownups/index",b,{}).w('</div></div><div class="sidebar-panel side-panel-privacy" data-child-selector=".sidebar-panel-view" data-id="privacy"><div class="sidebar-panel-view">').p("modules/privacy/index",b,{}).w('</div></div><div class="sidebar-close"></div></div><div class="sidebar-dimmer"></div>')}return a.register("modules/sidebar/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.p("modules/simple-footer/simple-footer",b,{})}return a.register("modules/simple-footer/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div id="simple-footer"><ul class="simple-footer-list" id="simple-footer-toggle"><li class="simple-footer-list-item is-clickable" id="grownups-toggle">grownups</li><li class="simple-footer-list-item" id="privacy-toggle">privacy</li></ul></div>')}return a.register("modules/simple-footer/simple-footer",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="sitemap-content"><h1 class="sitemap-title">NICKJR.COM SITEMAP</h1><div class="sitemap-tree clearfix">').s(b.getPath(!1,["viewFeed","tree"]),b,{block:c},{}).w("</div></div>")}function c(a,b){return a.w('<div class="sitemap-block"><h2>').s(b.get(["loc"],!1),b,{block:d},{}).nx(b.get(["loc"],!1),b,{block:e},{}).w('</h2><ul class="sitemap-nodes">').s(b.get(["nodes"],!1),b,{block:f},{}).w("</ul></div>")}function d(a,b){return a.w('<a class="sitemap-branch accent-font route" href="').f(b.get(["loc"],!1),b,"h",["s"]).w('">').f(b.get(["linkText"],!1),b,"h",["s"]).w("</a>")}function e(a,b){return a.w('<span class="sitemap-branch accent-font">').f(b.get(["linkText"],!1),b,"h",["s"]).w("</span>")}function f(a,b){return a.w('<li class="sitemap-leaf-item"><a class="sitemap-leaf route" href="').f(b.get(["loc"],!1),b,"h",["s"]).w('">').f(b.get(["linkText"],!1),b,"h",["s"]).w("</a><br/></li>")}return a.register("modules/sitemap/index",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<img class="alpha-button-image is-unloaded animated" src="https://web.archive.org/web/20150728212158/http://images.nickjr.com/nickjr/alphabuttons/icons/icon_alpha_').f(b.get(["letter"],!1),b,"h").w('-2x.png?quality=0.75&maxdimension=390" alt="Letter ').f(b.get(["letter"],!1),b,"h").w('">')}return a.register("modules/stream/items/alpha/alpha-button-picture",b),b.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/stream/items/tile",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('<div class="alpha-button"></div>')}a.register("modules/stream/items/alpha/alpha",b);var d={content:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.p("modules/stream/items/alpha/alpha",b,{})}return a.register("modules/stream/items/alpha/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(i),a.w('<a href="').f(b.getPath(!1,["data","url"]),b,"h").w('" class="route"   data-auth-required="').f(b.getPath(!1,["data","authRequired"]),b,"h").w('" ><div class="stream-block-item-wrapper" >').p("modules/stream/items/tile",b,{}).block(b.getBlock("icon"),b,{block:g},{}).w("</div></a>")}function c(a,b){return b=b.shiftBlocks(i),a.nx(b.get(["aboveTheFold"],!1),b,{block:d},{}).block(b.getBlock("mainImage"),b,{block:e},{}).nx(b.get(["aboveTheFold"],!1),b,{block:f},{})}function d(a,b){return b=b.shiftBlocks(i),a.w('<script class="stream-item-picture-src" type="text/html">')}function e(a,b){return b=b.shiftBlocks(i),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('" media="(min-width: 800px)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=800" media="(min-width: 600px)"><!--[if IE 9]></video><![endif]--><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=480" alt="').f(b.getPath(!1,["data","title"]),b,"h").w('"></picture>')}function f(a,b){return b=b.shiftBlocks(i),a.w('</script><div class="stream-item-picture-target"></div>')}function g(a,b){return b=b.shiftBlocks(i),a.p("modules/stream/items/icons",b,{data:h})}function h(a,b){return b=b.shiftBlocks(i),a.f(b.get(["data"],!1),b,"h")}a.register("modules/stream/items/content-item-base",b);var i={content:c};return b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(j),a.p("modules/stream/items/content-item-base",b,{})}function c(a,b){return b=b.shiftBlocks(j),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=500" media="(min-height: 1300px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=400" media="(min-height: 1000px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=350" media="(min-height: 800px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=250" media="(min-height: 600px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=200" media="(min-height: 500px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 1500px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=300" media="(min-width: 1000px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=220" media="(min-width: 760px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=300" media="(min-width: 600px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=220" media="(min-width: 400px) and (orientation: portrait)"><!--[if IE 9]></video><![endif]--><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=160" alt="').f(b.getPath(!1,["data","title"]),b,"h").x(b.getPath(!1,["data","mediaType"]),b,{block:d},{}).w('"></picture>')}function d(a,b){return b=b.shiftBlocks(j),a.h("select",b,{block:e},{key:i})}function e(a,b){return b=b.shiftBlocks(j),a.h("eq",b,{block:f},{value:"game"}).h("eq",b,{block:g},{value:"video"}).h("eq",b,{block:h},{value:"episode"})}function f(a,b){return b=b.shiftBlocks(j),a.w(" Games")}function g(a,b){return b=b.shiftBlocks(j),a.w(" Video Clip")}function h(a,b){return b=b.shiftBlocks(j),a.w(" Full Episode")}function i(a,b){return b=b.shiftBlocks(j),a.f(b.getPath(!1,["data","mediaType"]),b,"h")}a.register("modules/stream/items/content-item",b);var j={mainImage:c};return b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/stream/items/content-item-base",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=700" media="(min-width: 1000px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 800px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=650" media="(min-width: 650px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=im almost g500" media="(min-width: 450px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=370" media="(min-width: 370px) and (orientation: portrait)"><!--[if IE 9]></video><![endif]--><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=310" alt="').f(b.getPath(!1,["data","title"]),b,"h").w('"></picture>')}a.register("modules/stream/items/editorial-item",b);var d={mainImage:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/stream/items/content-item-base",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r4-3"]),b,"h",["s"]).w('&maxdimension=750" media="(min-height: 1400px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r4-3"]),b,"h",["s"]).w('&maxdimension=600" media="(min-height: 1200px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r4-3"]),b,"h",["s"]).w('&maxdimension=450" media="(min-height: 900px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r4-3"]),b,"h",["s"]).w('&maxdimension=350" media="(min-height: 700px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r4-3"]),b,"h",["s"]).w('&maxdimension=250" media="(min-height: 500px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=250" media="(min-width: 480px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=600" media="(min-width: 1500px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=450" media="(min-width: 1000px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=350" media="(min-width: 760px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=750" media="(min-width: 700px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=650" media="(min-width: 600px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 450px) and (orientation: portrait)"><!--[if IE 9]></video><![endif]--><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=300" alt="').f(b.getPath(!1,["data","title"]),b,"h").w('"></picture>')}a.register("modules/stream/items/featured-promo",b);var d={mainImage:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/stream/items/content-item-base",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=1500" media="(min-height: 1300px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=1000" media="(min-height: 1000px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=850" media="(min-height: 800px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=700" media="(min-height: 700px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=650" media="(min-height: 600px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=500" media="(min-height: 500px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 480px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('" media="(min-width: 1500px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=1400" media="(min-width: 1400px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=1100" media="(min-width: 1000px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=950" media="(min-width: 900px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=850" media="(min-width: 800px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=750" media="(min-width: 700px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r89-27"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 480px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 450px) and (orientation: portrait)"><!--[if IE 9]></video><![endif]--><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=480" alt="').f(b.getPath(!1,["data","title"]),b,"h").w('"></picture>')}a.register("modules/stream/items/featured-template-item-3-1",b);var d={mainImage:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/stream/items/content-item-base",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=500" media="(min-height: 1300px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=400" media="(min-height: 1000px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=350" media="(min-height: 800px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=250" media="(min-height: 600px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=200" media="(min-height: 500px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=250" media="(min-width: 480px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 1500px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=300" media="(min-width: 1000px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=250" media="(min-width: 800px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r1-1"]),b,"h",["s"]).w('&maxdimension=180" media="(min-width: 480px) and (orientation: portrait)"><!--[if IE 9]></video><![endif]--><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=480" alt="').f(b.getPath(!1,["data","title"]),b,"h").w('"></picture>')}a.register("modules/stream/items/featured-template-item-3-2",b);var d={mainImage:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return b=b.shiftBlocks(d),a.p("modules/stream/items/content-item-base",b,{})}function c(a,b){return b=b.shiftBlocks(d),a.w('<picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=860" media="(min-height: 1300px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=650" media="(min-height: 1000px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=550" media="(min-height: 800px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=450" media="(min-height: 700px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=350" media="(min-height: 600px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=300" media="(min-height: 500px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=250" media="(min-width: 480px) and (orientation: landscape)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=700" media="(min-width: 900px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 800px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=400" media="(min-width: 600px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r58-27"]),b,"h",["s"]).w('&maxdimension=310" media="(min-width: 480px) and (orientation: portrait)"><source srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=500" media="(min-width: 450px) and (orientation: portrait)"><img class="main-content-image" srcset="').f(b.getPath(!1,["data","images","r16-9"]),b,"h",["s"]).w('&maxdimension=300" alt="').f(b.getPath(!1,["data","title"]),b,"h").w('"></picture>')}a.register("modules/stream/items/featured-template-item-3-3",b);var d={mainImage:c};return b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.x(b.getPath(!1,["data","mediaType"]),b,{block:c},{})}function c(a,b){return a.h("select",b,{block:d},{key:j})}function d(a,b){return a.h("eq",b,{block:e},{value:"game"}).h("eq",b,{block:f},{value:"video"}).h("eq",b,{block:g},{value:"episode"})}function e(a,b){return a.w('<div class="stream-icon stream-tile-icon ').f(b.getPath(!1,["data","mediaType"]),b,"h").w('-icon"></div>')}function f(a,b){return a.w('<div class="stream-icon stream-tile-icon ').f(b.getPath(!1,["data","mediaType"]),b,"h").w('-icon"></div>')}function g(a,b){return a.w('<div class="stream-icon stream-tile-flag tile-').f(b.getPath(!1,["data","mediaType"]),b,"h").w('-flag"></div>').x(b.getPath(!1,["data","authRequired"]),b,{"else":h,block:i},{})}function h(a,b){return a.w('<div class="stream-icon stream-tile-icon tile-').f(b.getPath(!1,["data","mediaType"]),b,"h").w('-icon"></div>')}function i(a,b){return a.w('<div class="stream-icon stream-tile-icon tile-').f(b.getPath(!1,["data","authRequired"]),b,"h").w('-icon"></div>')}function j(a,b){return a.f(b.getPath(!1,["data","mediaType"]),b,"h")}return a.register("modules/stream/items/icons",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,b}(),function(){function b(a,b){return a.block(b.getBlock("content"),b,{block:c},{}).block(b.getBlock("icon"),b,{block:d},{})}function c(a,b){return a}function d(a,b){return a}return a.register("modules/stream/items/tile",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<a class="stream-control stream-control-previous" data-direction="previous" ').s(b.getPath(!1,["viewFeed","pagination"]),b,{block:c},{}).w('></a><a class="stream-control stream-control-next" data-direction="next" ').s(b.getPath(!1,["viewFeed","pagination"]),b,{block:f},{}).w("></a>")}function c(a,b){return a.x(b.get(["previous"],!1),b,{block:d},{})}function d(a,b){return a.w('href="https://web.archive.org/web/20150728212158/http://www.nickjr.com').f(b.getPath(!1,["request","path"]),b,"h").nx(b.get(["isSecondPage"],!1),b,{block:e},{}).w('"')}function e(a,b){return a.w("?page=").f(b.get(["previous"],!1),b,"h")}function f(a,b){return a.x(b.get(["next"],!1),b,{block:g},{})}function g(a,b){return a.w('href="https://web.archive.org/web/20150728212158/http://www.nickjr.com').f(b.getPath(!1,["request","path"]),b,"h").w("?page=").f(b.get(["next"],!1),b,"h").w('"')}return a.register("modules/stream/stream-arrows",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="stream-block ').f(b.get(["name"],!1),b,"h").w(' clearfix" data-controller="').f(b.get(["controller"],!1),b,"h").w('" data-child-selector=".stream-block-item">').s(b.get(["items"],!1),b,{
block:c},{}).w("</div>")}function c(a,b){return a.w('<div class="stream-block-item ').f(b.get(["name"],!1),b,"h").w(" ").f(b.get(["group"],!1),b,"h").w('"  data-controller="').f(b.get(["controller"],!1),b,"h").w('"  data-index="').f(b.get(["$idx"],!1),b,"h").w('"  data-id="').f(b.getPath(!1,["data","id"]),b,"h").w('"  ').x(b.getPath(!1,["data","isEditorial"]),b,{block:d},{}).w(">").p(e,b,{}).w("</div>")}function d(a,b){return a.w('data-is-editorial="').f(b.getPath(!1,["data","isEditorial"]),b,"h").w('"')}function e(a,b){return a.w("modules/").f(b.get(["template"],!1),b,"h")}return a.register("modules/stream/stream-block",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["data","stream"]),b,{block:c},{}).w("<!-- page end -->")}function c(a,b){return a.p("modules/stream/stream-block",b,{})}return a.register("modules/stream/stream-blocks-collection",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="stream-blocks clearfix">').x(b.getPath(!1,["viewFeed","stream"]),b,{block:c},{}).w("</div>")}function c(a,b){return a.p("modules/stream/stream-blocks-collection",b,{data:b.get(["viewFeed"],!1)})}return a.register("modules/stream/stream-blocks",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.s(b.getPath(!1,["viewFeed","styles"]),b,{block:c},{})}function c(a,b){return a.x(b.get(["show-art-mobile-portrait"],!1),b,{block:d},{})}function d(a,b){return a.w('<div class="stream-theme"><picture><!--[if IE 9]><video style="display: none;"><![endif]--><source srcset="').f(b.get(["show-art-desktop-landscape"],!1),b,"h",["s"]).w('" media="(min-height: 500px) and (orientation: landscape)"><source srcset="').f(b.get(["show-art-desktop-portrait"],!1),b,"h",["s"]).w('" media="(min-width: 760px) and (orientation: portrait)"><source srcset="').f(b.get(["show-art-mobile-landscape"],!1),b,"h",["s"]).w('" media="(orientation: landscape)"><!--[if IE 9]></video><![endif]--><img class="stream-theme-art" srcset="').f(b.get(["show-art-mobile-portrait"],!1),b,"h",["s"]).w('" alt="').f(b.get(["title"],!1),b,"h").w(' Background Art"></picture></div>')}return a.register("modules/stream/stream-theme",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,b}(),function(){function b(a,b){return a.x(b.getPath(!1,["viewFeed","meta","pageTitle"]),b,{block:c},{})}function c(a,b){return a.w('<div class="stream-title"><h1 class="stream-title-text">').f(b.getPath(!1,["viewFeed","meta","pageTitle"]),b,"h").w("</h1></div>")}return a.register("modules/stream/stream-title",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<div class="stream clearfix"><div class="stream-content" data-view="stream" data-child-selector=".stream-block" data-feed-url-key="').f(b.getPath(!1,["viewFeed","urlKey"]),b,"h").w('" data-feed-id="').f(b.getPath(!1,["viewFeed","feedId"]),b,"h").w('" data-feed-more-items="').f(b.getPath(!1,["viewFeed","pagination","moreItems"]),b,"h").w('" data-feed-current-page="').f(b.getPath(!1,["viewFeed","pagination","current"]),b,"h").w('">').p("modules/stream/stream-theme",b,{}).p("modules/stream/stream-blocks",b,{}).w('<div id="bottom-of-stream"></div></div>').p("modules/stream/stream-arrows",b,{}).w("</div>")}return a.register("modules/stream/stream",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<link id="theme-style" rel="stylesheet" type="text/css" href="').p("modules/theme-styles/theme-path",b,{}).w('" title="page-theme" media="screen">')}return a.register("modules/theme-styles/index",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w('<style id="theme-style" type="text/css">').f(b.get(["css"],!1),b,"h",["s"]).w("</style>")}return a.register("modules/theme-styles/theme-inline",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.x(b.getPath(!1,["viewFeed","themePageId"]),b,{block:c},{}).x(b.getPath(!1,["viewFeed","propertyKey"]),b,{block:d},{}).x(b.getPath(!1,["viewFeed","categoryKey"]),b,{block:e},{})}function c(a,b){return a.w("/theme/page/").f(b.getPath(!1,["viewFeed","themePageId"]),b,"h").w(".css")}function d(a,b){return a.w("/theme/property/").f(b.getPath(!1,["viewFeed","propertyKey"]),b,"h").w(".css")}function e(a,b){return a.w("/theme/property/").f(b.getPath(!1,["viewFeed","categoryKey"]),b,"h").w(".css")}return a.register("modules/theme-styles/theme-path",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,b}(),function(){function b(a,b){return a.w("/* -----------------------------------------------DEFAULT THEME----------------------------------------------- *//* color helper classes */.theme .th-primary-c            { color: ").f(b.get(["menu-color"],!1),b,"h").w("; }.theme .th-primary-b            { background-color: ").f(b.get(["menu-color"],!1),b,"h").w("; }.theme .th-primary-light-c      { color: ").f(b.get(["menu-light-color"],!1),b,"h").w("; }.theme .th-primary-light-b      { background-color: ").f(b.get(["menu-light-color"],!1),b,"h").w("; }.theme .th-primary-medium-c         { color: ").f(b.get(["menu-medium-color"],!1),b,"h").w("; }.theme .th-primary-medium-b         { background-color: ").f(b.get(["menu-medium-color"],!1),b,"h").w("; }.theme .th-primary-dark-c       { color: ").f(b.get(["menu-dark-color"],!1),b,"h").w("; }.theme .th-primary-dark-b       { background-color: ").f(b.get(["menu-dark-color"],!1),b,"h").w("; }@media screen and (min-height: 500px) and (orientation: landscape), (min-width: 760px) and (orientation: portrait)  {.theme {").x(b.get(["page-background-image-landscape"],!1),b,{block:c},{}).w("}}/* -----------------------------------------------MODULES----------------------------------------------- *//* top-navigation module */.theme .sticky-header.is-sticky {").s(b.get(["page-background-color"],!1),b,{block:d},{}).w("}/* page background colors/gradients */.theme {/* background color */").s(b.get(["page-background-color"],!1),b,{block:e},{}).w("}@media screen and (min-height: 500px) and (orientation: landscape), (min-width: 760px) and (orientation: portrait)  {.theme {background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w("); /* fallback */background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w("), -webkit-gradient(linear, left top, left bottom, from(").f(b.get(["page-background-gradient-color-1"],!1),b,"h").w("), to(").f(b.get(["page-background-gradient-color-2"],!1),b,"h").w(")); /* Saf4+, Chrome */background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w("), -webkit-linear-gradient(top, ").f(b.get(["page-background-gradient-color-1"],!1),b,"h").w(", ").f(b.get(["page-background-gradient-color-2"],!1),b,"h").w("); /* Chrome 10+, Saf5.1+ */background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w("),    -moz-linear-gradient(top, ").f(b.get(["page-background-gradient-color-1"],!1),b,"h").w(", ").f(b.get(["page-background-gradient-color-2"],!1),b,"h").w("); /* FF3.6+ */background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w("),      -o-linear-gradient(top, ").f(b.get(["page-background-gradient-color-1"],!1),b,"h").w(", ").f(b.get(["page-background-gradient-color-2"],!1),b,"h").w("); /* Opera 11.10+ */background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w("),         linear-gradient(to bottom, ").f(b.get(["page-background-gradient-color-1"],!1),b,"h").w(", ").f(b.get(["page-background-gradient-color-2"],!1),b,"h").w("); /* W3C */}}/* Go through all possible backgrounds. *//* If a gradient was set, apply both gradient and image to the background. *//* logo image (not currently in use) */").s(b.get(["logo-image"],!1),b,{block:f},{}).x(b.get(["menu-dark-color"],!1),b,{block:g},{}).x(b.get(["page-background-color"],!1),b,{block:h},{}).x(b.get(["about-background-color"],!1),b,{block:i},{})}function c(a,b){return a.w("background-image: url(").f(b.get(["page-background-image-landscape"],!1),b,"h",["s"]).w(");")}function d(a,b){return a.w("background-color: ").f(b.get(["page-background-color"],!1),b,"h").w(";")}function e(a,b){return a.w("background-color: ").f(b.get(["page-background-color"],!1),b,"h").w(";")}function f(a,b){return a.w(".theme .property-branding .property-logo-image {background-image: url(").f(b.get(["logo-image"],!1),b,"h",["s"]).w(");}")}function g(a,b){return a.w(".theme .property-filters-list-item .property-filters-list-item-link {background-color: ").f(b.get(["menu-dark-color"],!1),b,"h").w(";}")}function h(a,b){return a.w(".module-property-filters.bottom, .module-property-filters.expanded {background-color: ").f(b.get(["page-background-color"],!1),b,"h").w(";}@media (min-height: 500px) and (orientation: landscape) {.module-property-filters {background-color: ").f(b.get(["page-background-color"],!1),b,"h").w(";}}")}function i(a,b){return a.w(".theme .sidebar-panel-view-summary {background-color: ").f(b.get(["about-background-color"],!1),b,"h").w(";").x(b.get(["about-font-color"],!1),b,{"else":j,block:k},{}).w("}")}function j(a,b){return a.w("color: #fff;")}function k(a,b){return a.w("color: ").f(b.get(["about-font-color"],!1),b,"h").w(";")}return a.register("modules/theme/template",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,i.__dustBody=!0,j.__dustBody=!0,k.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<!-- [module]  id: ").f(b.get(["id"],!1),b,"h").w(" version: ").f(b.get(["version"],!1),b,"h").w(" view: ").f(b.get(["view"],!1),b,"h",["s"]).w(" ").x(b.get(["errors"],!1),b,{block:c},{}).w(" -->").s(b.get(["tag"],!1),b,{block:d},{}).nx(b.get(["tag"],!1),b,{block:g},{}).f(b.get(["contentHtml"],!1),b,"h",["s"]).s(b.get(["tag"],!1),b,{block:h},{})}function c(a,b){return a.w("module has errors: ").f(b.getPath(!1,["errors","join"]),b,"h")}function d(a,b){return a.w("<").f(b.get(["tag"],!1),b,"h").w(' class="l-module module-').f(b.get(["id"],!1),b,"h").w(" ").s(b.get(["error"],!1),b,{block:e},{}).w('" data-module-id="').f(b.get(["id"],!1),b,"h").w('" data-module-version="').f(b.get(["version"],!1),b,"h").w('" data-module-view="').f(b.get(["view"],!1),b,"h",["s"]).w('" data-module-template="').f(b.get(["template"],!1),b,"h",["s"]).w('" data-module-controller="').f(b.get(["controller"],!1),b,"h",["s"]).w('" ').x(b.get(["errors"],!1),b,{block:f},{}).w(">")}function e(a,b){return a.w("module-error")}function f(a,b){return a.w('data-module-error="').f(b.getPath(!1,["errors","join"]),b,"h").w('"')}function g(a,b){return a}function h(a,b){return a.w("</").f(b.get(["tag"],!1),b,"h").w(">")}return a.register("page/module",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,h.__dustBody=!0,b}(),function(){function b(a,b){return a}return a.register("page/section-wrapper",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w("<!-- [section] id: ").f(b.get(["id"],!1),b,"h").w(" -->").s(b.get(["children"],!1),b,{block:c},{})}function c(a,b){return a.f(b.get(["html"],!1),b,"h",["s"])}return a.register("page/section",b),b.__dustBody=!0,c.__dustBody=!0,b}(),function(){function b(a,b){return a}return a.register("page/zone-wrapper",b),b.__dustBody=!0,b}(),function(){function b(a,b){return a.w("		").s(b.get(["tag"],!1),b,{block:c},{}).nx(b.get(["tag"],!1),b,{block:d},{}).s(b.get(["children"],!1),b,{block:e},{}).s(b.get(["tag"],!1),b,{block:f},{})}function c(a,b){return a.w("<").f(b.get(["tag"],!1),b,"h").w(' class="l-zone" data-zone-id="').f(b.get(["id"],!1),b,"h").w('" data-zone-version="').f(b.get(["version"],!1),b,"h").w('">')}function d(a,b){return a.w("<!-- [zone] id: ").f(b.get(["id"],!1),b,"h").w(" version: ").f(b.get(["version"],!1),b,"h").w(" -->")}function e(a,b){return a.f(b.get(["html"],!1),b,"h",["s"])}function f(a,b){return a.w("</").f(b.get(["tag"],!1),b,"h").w(">")}return a.register("page/zone",b),b.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e.__dustBody=!0,f.__dustBody=!0,b}()}),define("app/common/templating",["dust","dust-helpers","app-templates"],function(a,b){function c(a){return{render:function(b){return d(a,b)}}}function d(b,c){"undefined"==typeof c&&(c={});var d,e;if(a.render(b,c,function(a,b){e=a,d=b}),null!==e)throw e.templateId=b,e;return d}return{get:c,render:d}}),define("app/yeti",["jquery","Q","_","dust","yetiNode","marionette","app/common/templating"],function(a,b,c,d,e,f,g){function h(a,b){var e,f;if(d.render(a,b,function(a,b){f=a,e=b}),null!==f)throw c.extend(f,{name:"View.renderTemplate:"+f.name,templateId:a}),this.errors.push(f),f;return e}function i(a,b){var c;return a=k+a,b=k+b,requirejs.specified(b)?c=requirejs(b):requirejs.specified(a)&&(c=requirejs(a)),c}var j={timeout:15e3},k="app/views/",l={templates:{module:"page/module",zone:"page/zone",section:"page/section",page:"page/index"}},m=new e(l),n=m.core,o=n.Page.prototype.fetchLayout;n.Page.prototype.fetchLayout=function(){return this.layoutPath="/layout/"+this.layoutPath+".json",o.call(this)};var p=n.Sync.url;return n.Sync.url=function(a,b){var c=p(a,b);return-1===c.indexOf("/")&&(c="/data/"+c+".json"),c},n.Sync.connect=function(c,d){var e={};d&&d.request&&(e=d.request.params);var f=a("html").data("apikey");return f&&(e.apiKey=f),b(a.ajax({timeout:j.timeout,json:!0,url:c,dataType:"json",data:e}))},n.View.prototype.renderTemplate=h,m.YetiLayout.getChildClass=function(a,b){var c=i(a,b);return!c&&console,c},m.core.events.on("log",function(a){"error"===a.level&&console&&console.error}),m}),!function(a,b){function c(a,b){var c,d,e=a.toLowerCase();for(b=[].concat(b),c=0;b.length>c;c+=1)if(d=b[c]){if(d.test&&d.test(a))return!0;if(d.toLowerCase()===e)return!0}}var d=b.prototype.trim,e=b.prototype.trimRight,f=b.prototype.trimLeft,g=function(a){return 1*a||0},h=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c},i=[].slice,j=function(a){return null==a?"\\s":a.source?a.source:"["+o.escapeRegExp(a)+"]"},k={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},l={};for(var m in k)l[k[m]]=m;l["'"]="#39";var n=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var c=h,d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)};return d.format=function(d,e){var f,g,h,i,j,k,l,m=1,o=d.length,p="",q=[];for(g=0;o>g;g++)if(p=a(d[g]),"string"===p)q.push(d[g]);else if("array"===p){if(i=d[g],i[2])for(f=e[m],h=0;i[2].length>h;h++){if(!f.hasOwnProperty(i[2][h]))throw new Error(n('[_.sprintf] property "%s" does not exist',i[2][h]));f=f[i[2][h]]}else f=i[1]?e[i[1]]:e[m++];if(/[^s]/.test(i[8])&&"number"!=a(f))throw new Error(n("[_.sprintf] expecting number but found %s",a(f)));switch(i[8]){case"b":f=f.toString(2);break;case"c":f=b.fromCharCode(f);break;case"d":f=parseInt(f,10);break;case"e":f=i[7]?f.toExponential(i[7]):f.toExponential();break;case"f":f=i[7]?parseFloat(f).toFixed(i[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=b(f))&&i[7]?f.substring(0,i[7]):f;break;case"u":f=Math.abs(f);break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}f=/[def]/.test(i[8])&&i[3]&&f>=0?"+"+f:f,k=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",l=i[6]-b(f).length,j=i[6]?c(k,l):"",q.push(i[5]?f+j:j+f)}return q.join("")},d.cache={},d.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw new Error("[_.sprintf] huh?");if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw new Error("[_.sprintf] huh?");for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw new Error("[_.sprintf] huh?");f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");d.push(c)}b=b.substring(c[0].length)}return d},d}(),o={VERSION:"2.3.0",isBlank:function(a){return null==a&&(a=""),/^\s*$/.test(a)},stripTags:function(a){return null==a?"":b(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){return a=null==a?"":b(a),a.charAt(0).toUpperCase()+a.slice(1)},chop:function(a,c){return null==a?[]:(a=b(a),c=~~c,c>0?a.match(new RegExp(".{1,"+c+"}","g")):[a])},clean:function(a){return o.strip(a).replace(/\s+/g," ")},count:function(a,c){if(null==a||null==c)return 0;a=b(a),c=b(c);for(var d=0,e=0,f=c.length;e=a.indexOf(c,e),-1!==e;)d++,e+=f;return d},chars:function(a){return null==a?[]:b(a).split("")},swapCase:function(a){return null==a?"":b(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})},escapeHTML:function(a){return null==a?"":b(a).replace(/[&<>"']/g,function(a){return"&"+l[a]+";"})},unescapeHTML:function(a){return null==a?"":b(a).replace(/\&([^;]+);/g,function(a,c){var d;return c in k?k[c]:(d=c.match(/^#x([\da-fA-F]+)$/))?b.fromCharCode(parseInt(d[1],16)):(d=c.match(/^#(\d+)$/))?b.fromCharCode(~~d[1]):a})},escapeRegExp:function(a){return null==a?"":b(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(a,b,c,d){var e=o.chars(a);return e.splice(~~b,~~c,d),e.join("")},insert:function(a,b,c){return o.splice(a,b,0,c)},include:function(a,c){return""===c?!0:null==a?!1:-1!==b(a).indexOf(c)},join:function(){var a=i.call(arguments),b=a.shift();return null==b&&(b=""),a.join(b)},lines:function(a){return null==a?[]:b(a).split("\n")},reverse:function(a){return o.chars(a).reverse().join("")},startsWith:function(a,c){return""===c?!0:null==a||null==c?!1:(a=b(a),c=b(c),a.length>=c.length&&a.slice(0,c.length)===c)},endsWith:function(a,c){return""===c?!0:null==a||null==c?!1:(a=b(a),c=b(c),a.length>=c.length&&a.slice(a.length-c.length)===c)},succ:function(a){return null==a?"":(a=b(a),a.slice(0,-1)+b.fromCharCode(a.charCodeAt(a.length-1)+1))},titleize:function(a){return null==a?"":(a=b(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},camelize:function(a){return o.trim(a).replace(/[-_\s]+(.)?/g,function(a,b){return b?b.toUpperCase():""})},underscored:function(a){return o.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return o.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return o.titleize(b(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(a){return o.capitalize(o.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,c){return null==a?"":!c&&d?d.call(a):(c=j(c),b(a).replace(new RegExp("^"+c+"+|"+c+"+$","g"),""))},ltrim:function(a,c){return null==a?"":!c&&f?f.call(a):(c=j(c),b(a).replace(new RegExp("^"+c+"+"),""))},rtrim:function(a,c){return null==a?"":!c&&e?e.call(a):(c=j(c),b(a).replace(new RegExp(c+"+$"),""))},truncate:function(a,c,d){return null==a?"":(a=b(a),d=d||"...",c=~~c,a.length>c?a.slice(0,c)+d:a)},prune:function(a,c,d){if(null==a)return"";if(a=b(a),c=~~c,d=null!=d?b(d):"...",c>=a.length)return a;var e=function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "},f=a.slice(0,c+1).replace(/.(?=\W*\w*$)/g,e);return f=f.slice(f.length-2).match(/\w\w/)?f.replace(/\s*\S+$/,""):o.rtrim(f.slice(0,f.length-1)),(f+d).length>a.length?a:a.slice(0,f.length)+d},words:function(a,b){return o.isBlank(a)?[]:o.trim(a,b).split(b||/\s+/)},pad:function(a,c,d,e){a=null==a?"":b(a),c=~~c;var f=0;switch(d?d.length>1&&(d=d.charAt(0)):d=" ",e){case"right":return f=c-a.length,a+h(d,f);case"both":return f=c-a.length,h(d,Math.ceil(f/2))+a+h(d,Math.floor(f/2));default:return f=c-a.length,h(d,f)+a}},lpad:function(a,b,c){return o.pad(a,b,c)},rpad:function(a,b,c){return o.pad(a,b,c,"right")},lrpad:function(a,b,c){return o.pad(a,b,c,"both")},sprintf:n,vsprintf:function(a,b){return b.unshift(a),n.apply(null,b)},toNumber:function(a,b){return a?(a=o.trim(a),a.match(/^-?\d+(?:\.\d+)?$/)?g(g(a).toFixed(~~b)):NaN):0},numberFormat:function(a,b,c,d){if(isNaN(a)||null==a)return"";a=a.toFixed(~~b),d="string"==typeof d?d:",";var e=a.split("."),f=e[0],g=e[1]?(c||".")+e[1]:"";return f.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+d)+g},strRight:function(a,c){if(null==a)return"";a=b(a),c=null!=c?b(c):c;var d=c?a.indexOf(c):-1;return~d?a.slice(d+c.length,a.length):a},strRightBack:function(a,c){if(null==a)return"";a=b(a),c=null!=c?b(c):c;var d=c?a.lastIndexOf(c):-1;return~d?a.slice(d+c.length,a.length):a},strLeft:function(a,c){if(null==a)return"";a=b(a),c=null!=c?b(c):c;var d=c?a.indexOf(c):-1;return~d?a.slice(0,d):a},strLeftBack:function(a,b){if(null==a)return"";a+="",b=null!=b?""+b:b;var c=a.lastIndexOf(b);return~c?a.slice(0,c):a},toSentence:function(a,b,c,d){b=b||", ",c=c||" and ";var e=a.slice(),f=e.pop();return a.length>2&&d&&(c=o.rtrim(b)+c),e.length?e.join(b)+c+f:f},toSentenceSerial:function(){var a=i.call(arguments);return a[3]=!0,o.toSentence.apply(o,a)},slugify:function(a){if(null==a)return"";var c="ÄÃ Ã¡Ã¤Ã¢Ã£Ã¥Ã¦Ä?ÄÄÃ¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®ÅÅÃ²Ã³Ã¶Ã´ÃµÃ¸ÅÈÈÃ¹ÃºÃ¼Ã»Ã±Ã§Å¼Åº",d="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",e=new RegExp(j(c),"g");return a=b(a).toLowerCase().replace(e,function(a){var b=c.indexOf(a);return d.charAt(b)||"-"}),o.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,b){return[b,a,b].join("")},quote:function(a,b){return o.surround(a,b||'"')},unquote:function(a,b){return b=b||'"',a[0]===b&&a[a.length-1]===b?a.slice(1,a.length-1):a},exports:function(){var a={};for(var b in this)this.hasOwnProperty(b)&&!b.match(/^(?:include|contains|reverse)$/)&&(a[b]=this[b]);return a},repeat:function(a,c,d){if(null==a)return"";if(c=~~c,null==d)return h(b(a),c);for(var e=[];c>0;e[--c]=a);return e.join(d)},naturalCmp:function(a,c){if(a==c)return 0;if(!a)return-1;if(!c)return 1;for(var d=/(\.\d+)|(\d+)|(\D+)/g,e=b(a).toLowerCase().match(d),f=b(c).toLowerCase().match(d),g=Math.min(e.length,f.length),h=0;g>h;h++){var i=e[h],j=f[h];if(i!==j){var k=parseInt(i,10);if(!isNaN(k)){var l=parseInt(j,10);if(!isNaN(l)&&k-l)return k-l}return j>i?-1:1}}return e.length===f.length?e.length-f.length:c>a?-1:1},levenshtein:function(a,c){if(null==a&&null==c)return 0;if(null==a)return b(c).length;if(null==c)return b(a).length;a=b(a),c=b(c);for(var d,e,f=[],g=0;c.length>=g;g++)for(var h=0;a.length>=h;h++)e=g&&h?a.charAt(h-1)===c.charAt(g-1)?d:Math.min(f[h],f[h-1],d)+1:g+h,d=f[h],f[h]=e;return f.pop()},toBoolean:function(a,b,d){return"number"==typeof a&&(a=""+a),"string"!=typeof a?!!a:(a=o.trim(a),c(a,b||["true","1"])?!0:c(a,d||["false","0"])?!1:void 0)}};o.strip=o.trim,o.lstrip=o.ltrim,o.rstrip=o.rtrim,o.center=o.lrpad,o.rjust=o.lpad,o.ljust=o.rpad,o.contains=o.include,o.q=o.quote,o.toBool=o.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=o),exports._s=o),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return o}),a._=a._||{},a._.string=a._.str=o}(this,String),define("app/setup/lodash-extensions",["_","underscore.string"],function(a,b){return a.s=b,a}),define("app/setup/index",["./lodash-extensions"],function(){}),define("app/setup",["jquery","_","backbone","marionette","app/common/templating"],function(a,b,c,d,e){c.$=a,d.$=a,d.Renderer.render=function(a,b){var c,d=function(b){var c="Error rendering template: "+a+"-"+b.toString();throw console&&console.warn,c};return a||d("it's false, null or undefined."),c="function"==typeof a?a(b):e.render(a,b)},d.ItemView.prototype.serializeData=function(){var a={};return this.model?a=this.model.toJSON?this.model.toJSON():this.model:this.collection&&(a={items:this.collection.toJSON?this.collection.toJSON():this.collection}),a},d.ItemView.prototype.render=function(){var a=(Array.prototype.slice.apply(arguments),{});this.model&&this.model.get&&(a=this.model.get("partials")||{});try{this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var b=this.serializeData();b=this.mixinTemplateHelpers(b);var c=this.getTemplate(),e=d.Renderer.render(c,b,a);return this.$el.html(e),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this}catch(f){this.$el&&this.$el.addClass("error-render").attr("data-error",f.toString()),console&&console.error}return this};var f=d.CompositeView.prototype.render;return d.CompositeView.prototype.render=function(){var a=Array.prototype.slice.apply(arguments);try{f.apply(this,a)}catch(b){this.$el&&this.$el.addClass("error-render").attr("data-error",b.toString()),console&&console.error}return this},a.support.transition||(a.fn.transition=a.fn.animate),d}),define("app/common/state",["backbone"],function(a){var b=a.Model.extend({defaults:{session:{},urlChanged:!1,orientation:"portrait",deviceBreakpoint:"mobile-portrait",isMobile:!0,isAdfree:!1,isTouchDevice:Modernizr.touch,prevUrls:[],isFullScreen:!1,appPath:"app/app",timeTraveling:!1}});return new b}),define("app/common/time-travel-state",["app/common/state"],function(a){var b="timeTravel",c=function(a,b){null!==window.localStorage.getItem(a)&&d(a),window.localStorage.setItem(a,b)},d=function(a){window.localStorage.removeItem(a)},e=function(b){a.set({timeTraveling:b})},f=function(){return g()?window.localStorage.getItem(b):!1},g=function(){var a=window.localStorage.getItem(b);return null!==a},h=function(a){e(!0),c(b,a)},i=function(){e(!1),d(b)},j={beginTimeTravel:h,endTimeTravel:i,userIsTimeTraveling:g,getTimeTravelDestination:f,updateTimeTravelState:e};return j}),define("app/models/page",["backbone"],function(a){var b=a.Model.extend({defaults:{templateId:null,request:null,is404:!1}});return b}),define("app/common/page",["app/models/page"],function(a){return new a}),define("app-resource-base",["jquery"],function(a){var b=a("#main-app").data("resources-path");return b}),function(a){var b,c=function(a,b){"undefined"==typeof b&&(b={}),this.init(a,b)},d=c.prototype,e=["canvas","vml"],f=["oval","spiral","square","rect","roundRect"],g=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,h=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1])?!0:!1,i=!!document.createElement("canvas").getContext,j=40,k=!0,l=function(a,b,c){var d,e=document.createElement(a);for(d in c)e[d]=c[d];return"undefined"!=typeof b&&b.appendChild(e),e},m=function(a,b){for(var c in b)a.style[c]=b[c];return a},n=function(a,b){for(var c in b)a.setAttribute(c,b[c]);return a},o=function(a,b,c,d){a.save(),a.translate(b,c),a.rotate(d),a.translate(-b,-c),a.beginPath()};d.init=function(a,d){"boolean"==typeof d.safeVML&&(k=d.safeVML);try{void 0!==document.getElementById(a)?this.mum=document.getElementById(a):this.mum=document.body}catch(f){this.mum=document.body}if(d.id="undefined"!=typeof d.id?d.id:"canvasLoader",this.cont=l("div",this.mum,{id:d.id}),i)b=e[0],this.can=l("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=m(l("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(b=e[1],"undefined"==typeof c.vmlSheet){document.getElementsByTagName("head")[0].appendChild(l("style")),c.vmlSheet=document.styleSheets[document.styleSheets.length-1];var g,h=["group","oval","roundrect","fill"];for(g in h)c.vmlSheet.addRule(h[g],"behavior:url(#default#VML); position:absolute;")}this.vml=l("group",this.cont)}this.setColor(this.color),this.draw(),m(this.cont,{display:"none"})},d.cont={},d.can={},d.con={},d.cCan={},d.cCon={},d.timer={},d.activeId=0,d.diameter=40,d.setDiameter=function(a){this.diameter=Math.round(Math.abs(a)),this.redraw()},d.getDiameter=function(){return this.diameter},d.cRGB={},d.color="#000000",d.setColor=function(a){this.color=g.test(a)?a:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},d.getColor=function(){return this.color},d.shape=f[0],d.setShape=function(a){var b;for(b in f)if(a===f[b]){this.shape=a,this.redraw();break}},d.getShape=function(){return this.shape},d.density=40,d.setDensity=function(a){k&&b===e[1]?this.density=Math.round(Math.abs(a))<=j?Math.round(Math.abs(a)):j:this.density=Math.round(Math.abs(a)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},d.getDensity=function(){return this.density},d.range=1.3,d.setRange=function(a){this.range=Math.abs(a),this.redraw()},d.getRange=function(){return this.range},d.speed=2,d.setSpeed=function(a){this.speed=Math.round(Math.abs(a))},d.getSpeed=function(){return this.speed},d.fps=24,d.setFPS=function(a){this.fps=Math.round(Math.abs(a)),this.reset()},d.getFPS=function(){return this.fps},d.getRGB=function(a){return a="#"===a.charAt(0)?a.substring(1,7):a,{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}},d.draw=function(){var a,c,d,g,i,j,k,p,q,r,s,t,u,v=0,w=this.density,x=Math.round(w*this.range),y=0,z=1e3,A=0,B=this.cCon,C=this.diameter,D=.47;if(b===e[0])for(B.clearRect(0,0,z,z),n(this.can,{width:C,height:C}),n(this.cCan,{width:C,height:C});w>v;){switch(q=x>=v?1-(1-y)/x*v:q=y,j=270-360/w*v,k=j/180*Math.PI,B.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+q.toString()+")",this.shape){case f[0]:case f[1]:a=.07*C,g=C*D+Math.cos(k)*(C*D-a)-C*D,i=C*D+Math.sin(k)*(C*D-a)-C*D,B.beginPath(),this.shape===f[1]?B.arc(.5*C+g,.5*C+i,a*q,0,2*Math.PI,!1):B.arc(.5*C+g,.5*C+i,a,0,2*Math.PI,!1);break;case f[2]:a=.12*C,g=Math.cos(k)*(C*D-a)+.5*C,i=Math.sin(k)*(C*D-a)+.5*C,o(B,g,i,k),B.fillRect(g,i-.5*a,a,a);break;case f[3]:case f[4]:c=.3*C,d=.27*c,g=Math.cos(k)*(d+.13*(C-d))+.5*C,i=Math.sin(k)*(d+.13*(C-d))+.5*C,o(B,g,i,k),this.shape===f[3]?B.fillRect(g,i-.5*d,c,d):(p=.55*d,B.moveTo(g+p,i-.5*d),B.lineTo(g+c-p,i-.5*d),B.quadraticCurveTo(g+c,i-.5*d,g+c,i-.5*d+p),B.lineTo(g+c,i-.5*d+d-p),B.quadraticCurveTo(g+c,i-.5*d+d,g+c-p,i-.5*d+d),B.lineTo(g+p,i-.5*d+d),B.quadraticCurveTo(g,i-.5*d+d,g,i-.5*d+d-p),B.lineTo(g,i-.5*d+p),B.quadraticCurveTo(g,i-.5*d,g+p,i-.5*d))}B.closePath(),B.fill(),B.restore(),++v}else{switch(m(this.cont,{width:C,height:C}),m(this.vml,{width:C,height:C}),this.shape){case f[0]:case f[1]:t="oval",a=.14*z;break;case f[2]:t="roundrect",a=.12*z;break;case f[3]:case f[4]:t="roundrect",a=.3*z}for(c=d=a,g=.5*z-d,i=.5*-d;w>v;){switch(q=x>=v?1-(1-y)/x*v:q=y,j=270-360/w*v,this.shape){case f[1]:c=d=a*q,g=.5*z-.5*a-a*q*.5,i=.5*(a-a*q);break;case f[0]:case f[2]:h&&(i=0,this.shape===f[2]&&(g=.5*z-.5*d));break;case f[3]:case f[4]:c=.95*a,d=.28*c,h?(g=0,i=.5*z-.5*d):(g=.5*z-c,i=.5*-d),A=this.shape===f[4]?.6:0}s=n(m(l("group",this.vml),{width:z,height:z,rotation:j}),{coordsize:z+","+z,coordorigin:.5*-z+","+.5*-z}),r=m(l(t,s,{stroked:!1,arcSize:A}),{width:c,height:d,top:i,left:g}),u=l("fill",r,{color:this.color,opacity:q}),++v}}this.tick(!0)},d.clean=function(){if(b===e[0])this.con.clearRect(0,0,1e3,1e3);else{var a=this.vml;if(a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)}},d.redraw=function(){this.clean(),this.draw()},d.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},d.tick=function(a){var c=this.con,d=this.diameter;a||(this.activeId+=360/this.density*this.speed),b===e[0]?(c.clearRect(0,0,d,d),o(c,.5*d,.5*d,this.activeId/180*Math.PI),c.drawImage(this.cCan,0,0,d,d),c.restore()):(this.activeId>=360&&(this.activeId-=360),m(this.vml,{rotation:this.activeId}))},d.show=function(){if("number"!=typeof this.timer){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1e3/this.fps)),m(this.cont,{display:"block"})}},d.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,m(this.cont,{display:"none"}))},d.kill=function(){var a=this.cont;"number"==typeof this.timer&&this.hide(),b===e[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);var c;for(c in this)delete this[c]},a.CanvasLoader=c}(window),define("CanvasLoader",function(){}),define("app/common/loading",["jquery","app/common/templating","CanvasLoader"],function(a,b){var c=null,d=function(){if(null!==c)throw new Error("Already initialized")};return d.prototype.create=function(c){
this.destroy(),c=c||!1;var d=a(b.render("modules/body/loading")),e=100,f=a(window);d.css({top:f.height()/2-e/2,left:f.width()/2-e/2}),c||a(".section-body .l-module").hide(),a("body").append(d)},d.prototype.destroy=function(){a(".loading-animation-container").remove()},d.getInstance=function(){return null===c&&(c=new d),window.loading=c,c},d.getInstance()}),define("app/common/theming",["jquery","Q","marionette","app-resource-base","app/common/templating","app/common/loading"],function(a,b,c,d,e,f){function g(c){return b(a.get(c)).fail(function(a){throw a})}function h(b){var c=a("#theme-style"),d=i(b);c.replaceWith(d)}function i(a){var b=e.render("modules/theme-styles/theme-inline",{css:a});return b}function j(a){var b=e.render("modules/theme-styles/theme-path",a);return b}function k(a){return{viewFeed:a.data}}function l(a){var b=k(a),c=j(b);return""===c&&(c="/theme/default.css"),g(c).then(h).fail(function(a){throw f.destroy(),a})}return{getStylesheet:g,injectStylesheet:h,newStyleTag:i,getStylesheetUrl:j,updateTheme:l}}),define("app/common/reporting/app-reports",["_","jquery"],function(a,b){function c(b){var c;return c=b.reportType&&a.isFunction(e[b.reportType])?e[b.reportType]:e.defaultHandler,c.call(null,b)}function d(d){return e=d,a.isObject(e)?void b(window).on("report.nickapp",c):!1}var e;return{setup:d,reportingHandler:c}}),define("app/common/reporting/click-tracking",["jquery"],function(a){function b(b){var c=a(b.currentTarget).data("cr");return c&&a.cookie("trackedClick",c,{path:"/"}),!0}function c(){a(window.document).on("click","[data-cr]",null,b)}return{setup:c,clickTrackingHandler:b}}),define("app/common/reporting/trigger-report",["_","jquery"],function(a,b){function c(){return e||(e=b(window)),e}function d(a,d){var e=b.Event("report.nickapp");e.reportType=a,e.report=d;var f=c();f.trigger(e)}var e;return{trigger:d,cacheTarget:c}}),define("app/common/reporting/index",["./app-reports","./click-tracking","./trigger-report"],function(a,b,c){function d(c){a.setup(c.handlers),b.setup()}return{setup:d,send:c.trigger}}),define("app/common/view/build-request",["_","underscore.string"],function(a,b){function c(a){var b={params:a,url:window.location.pathname};return b}function d(a,b){b.urlKey||null;b.hydraFilterPrefix=b.hydraFilterPrefix||"";var d=c(a),e={layout:b.layout,request:d,onMainFeedSuccess:b.onMainFeedSuccess,layoutOverride:b.layoutOverride};return e}var e={};return e.build=d,e}),define("app/controllers/view-controller/social-tags",["jquery","_"],function(a,b){function c(){var a="http://"+i.domain+window.location.pathname;return a}function d(a,b){var c=a.attr(b.attributeName),d=i.socialTagsDictionary[c];return a.attr("content",b.meta[d]),a}function e(b,c,e){var f=a(e);return d(f,b)}function f(a,c){return a.filter("["+c.attributeName+"]").each(b.bind(e,null,c))}function g(b){var d=a("head meta"),e={attributeName:i.ogAttributeName,meta:b};f(d,e);var g={attributeName:i.twitterAttributeName,meta:b};f(d,g);var h={attributeName:i.sm4AttributeName,meta:b};f(d,h);var j=d.filter('[property="og:url"]'),k=c();return j.attr("content",k),b}var h={},i={domain:"www.nick.com",ogAttributeName:"property",twitterAttributeName:"name",sm4AttributeName:"property",socialTagsDictionary:{"og:title":"title","og:description":"description","og:image":"image","og:type":"ogType","twitter:title":"title","twitter:description":"description","twitter:image":"image","sm4:type":"sm4Type","sm4:alias":"sm4Alias"}};return h.updateSocialMetaTags=g,h}),define("app/common/list-helpers",["_"],function(a){function b(a,b){return-1!==a.indexOf(b)}function c(c,d){return!a.isUndefined(a.find(c,a.partial(b,d)))}function d(b,d){return a.filter(d,a.partial(c,b))}return{hasPrefix:b,listHasPrefix:c,removeAllByPrefix:d}}),define("app/controllers/view-controller",["jquery","_","underscore.string","Q","marionette","app/common/state","app/common/time-travel-state","app/common/page","app/yeti","app/common/theming","app/common/reporting/index","app/common/loading","app/common/view/build-request","app/controllers/view-controller/social-tags","app/common/list-helpers"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){return a.feed&&a.feed.data&&a.feed.data.meta?a.feed.data.meta:null}function q(a){return function(b,c){return o.removeAllByPrefix(a,c.split(" ")).join(" ")}}function r(a){return function(b,c){return a.length?c+" lgroup-"+a.join(" lgroup-"):void 0}}var s=e.Controller.extend({initialize:function(){this.isPageAttached=!1},isPushState:function(){return this.isPageAttached||f.get("urlChanged")},setView:function(a,c,d){var e=this.setupPageOptions(a,c,d);return this.buildPage(e).then(this.removeLoader).then(b.bind(this.pageDoneBuilding,this)).then(b.bind(this.triggerRenderComplete,this)).fail(this.failSetView)},pageDoneBuilding:function(a){return this.isPageAttached=!0,a},triggerStartPageLoad:function(){var a={time:Date.now()},b=f.get("appPath");requirejs(b).vent.trigger("startPageLoad",a)},triggerRenderComplete:function(){var a={time:Date.now()},b=f.get("appPath");requirejs(b).vent.trigger("renderComplete",a)},removeLoader:function(){l.destroy()},failSetView:function(a){if(console&&console.error,a.fatal===!0)throw window.location.reload(),a;var b=f.get("appPath"),c=requirejs(b),d=h.get("templateId");throw"page-not-found"!==d&&c.execute("display-page-not-found","page-not-found"),a},buildPage:function(a){var b,c=this.isPushState();return b=c?this.buildPushStatePage(a):this.buildFreshPage(a)},buildFreshPage:function(b){var c=a("head").find("meta").filter('[name="adfree"]'),e="true"===c.attr("content");return f.set("isAdfree",e),k.send("reportPageView"),d(this.setBodyView())},buildPushStatePage:function(a){return this.unloadContent().then(b.bind(l.create,l,!1)).then(b.bind(this.triggerStartPageLoad,this)).then(b.bind(this.requestPageSections,this,a)).then(function(a){return a}).then(b.bind(this.updateTheme,this)).then(b.bind(this.updateMetaData,this)).then(b.bind(this.reportPageView,this)).then(b.bind(this.updateSocialMetaTags,this)).then(b.bind(this.updateTemplateReferences,this)).then(b.bind(this.setBodyView,this)).fail(function(a){throw a})},unloadContent:function(){var c=d.defer();return a(window).trigger("contentchange"),b.delay(c.resolve,800,this),c.promise},requestPageSections:function(a){var b=new i.Page(a);return b.buildSections("body").then(this.checkLayoutNotEmpty).fail(this.handleYetiFailure)},checkLayoutNotEmpty:function(a){if(a.children&&!a.children.length){var b=new Error("no data");throw b.code="NOCHILDREN",b}return a},handleYetiFailure:function(a){throw a.fatal=!0,a},updateTheme:function(a){return j.updateTheme(a.feed),a},injectTimeTravel:function(a){var c={timeTravel:g.getTimeTravelDestination(),useDb:!0};return a.request=b.extend(a.request,c),a},setupPageOptions:function(a,b,c){var d=Array.prototype.slice.call(arguments),e={};"string"==typeof d[0]?(e.path=d[0],e.request=d[1],e.layoutOverride=d[2]):e=d[0],"string"==typeof e.request&&(e.request={urlKey:e.request}),f.get("timeTraveling")===!0&&(e=this.injectTimeTravel(e));var g={};return g=m.build(e.request,e),g.path=e.path,h.set({templateId:g.path,request:g.request}),g},setSectionView:function(a,b,c){var d=f.get("appPath"),e=requirejs(d),g=e[c];if(!g)throw new Error('region "'+c+'" does not exists');var h=this.isPushState();return h?i.injectSection(g,"body",a):i.bindToSection(g),g},reportPageView:function(a){var b=a.feed.data;return k.send("reportPageView",b),a},setBodyView:function(a){return this.setSectionView(a,"body","sectionBody")},updateTemplateReferences:function(b){var c=b.id,d=b.type,e=b.source&&b.source.meta&&b.source.meta.groups||[];return a("body").attr({"data-template-id":c,"data-template-type":d}).removeClass(q(["template-","lgroup-"])).addClass("template-id-"+c+" template-type-"+d).addClass(r(e)),b},updateMetaData:function(b){var c=p(b);if(!c)return b;var d=b.feed.data.seriesUrlKey;d?h.set("series",d):h.unset("series");var e=a("head"),g=e.find("title"),i=e.find("meta").filter('[name="adfree"]'),j=e.find("meta").filter('[name="description"]');if(g.length>0){var k=c.title||"Nick.com";g.html(k)}if(i.length>0){var l=c.adfree||!1,m=e.find("meta").filter('[name="robots"]');f.set("isAdfree",l),l&&0===m.length?(m=a("<meta>"),m.attr({name:"robots",content:"noindex"}),e.append(m)):m.remove(),i.attr("content",l)}else f.set("isAdfree",!1);if(j.length>0){var n=c.description||"";j.attr("content",n)}return b},updateSocialMetaTags:function(a){var b=p(a);return b?(n.updateSocialMetaTags(b),a):a}});return new s}),define("app/views/view",["_","app/controllers/view-controller"],function(a,b){function c(a){if(!a.viewFeedUrl)return null;var b={viewFeed:{url:a.viewFeedUrl}};return b}function d(a){return a.layoutOverride=c(a),b.setView(a).done()}return{cloneOptions:a.clone,render:d}}),define("app/common/get-json-script",["jquery"],function(a){function b(a){var b;try{b=JSON.parse(a)}catch(c){throw c.title="parseJSON: "+(c.title||""),c}return b}function c(b,c){c=c||!1;var d,e=a(b);return 0===e.length?d:(d=e.html().trim(),c&&e.remove(),d)}function d(a,d){var e,f=c(a,d);return f&&(e=b(f)),e}return d}),define("app/common/site-categories",["_","./get-json-script"],function(a,b){function c(a){return d[a]}var d=b("head #propertyList");return{getCategory:c}}),define("app/routes/property",["app/views/view","app/common/site-categories"],function(a,b){return function(c,d){return function(e){var f=a.cloneOptions(c),g=b.getCategory(e);return g?(f="series"===g.type?f.property:f.specials,f.request=g.feedKey,f.urlKey=g.feedKey,a.render(f)):d()}}}),define("app/routes/property-videos",["app/views/view","app/common/site-categories"],function(a,b){return function(c,d){return function(e){var f=a.cloneOptions(c),g=b.getCategory(e);return g?(f="series"===g.type?f.property:f.specials,f.request={urlKey:g.feedKey,type:"video"},f.urlKey=g.feedKey,a.render(f)):d()}}}),define("app/routes/property-games",["app/views/view","app/common/site-categories"],function(a,b){return function(c,d){return function(e){var f=a.cloneOptions(c),g=b.getCategory(e);return g?(f="series"===g.type?c.property:c.specials,f.request={urlKey:g.feedKey,type:"game"},f.urlKey=g.feedKey,a.render(f)):d()}}}),define("app/routes/property-episodes",["app/views/view","app/common/site-categories"],function(a,b){return function(c,d){return function(e){var f=a.cloneOptions(c),g=b.getCategory(e);return g?(f="series"===g.type?c.property:c.specials,f.request={urlKey:g.feedKey,type:"episode"},f.urlKey=g.feedKey,a.render(f)):d()}}}),define("app/routes/property-character",["app/views/view","app/common/site-categories"],function(a,b){return function(c,d){return function(e,f){var g=a.cloneOptions(c),h=b.getCategory(e);return h?(g.request={urlKey:h.feedKey,charKey:f},g.urlKey=h.feedKey,a.render(g)):d()}}}),define("app/routes/generic-route",["app/views/view"],function(a){return function(b){return function(c){var d=a.cloneOptions(b);return d.request={urlKey:c},a.render(d)}}}),define("app/routes/generic-route-property",["app/views/view","app/common/site-categories"],function(a,b){return function(c,d){return function(e,f){var g=a.cloneOptions(c),h=b.getCategory(e),i=["nick-jr-originals"];return h||-1!==i.indexOf(e)?(g.request={propKey:e,urlKey:f},a.render(g)):d()}}}),define("app/routes/not-found",["app/views/view"],function(a){return function(b){return function(c){var d=a.cloneOptions(b);return a.render(d)}}}),define("app/routes/index",["./property","./property-videos","./property-games","./property-episodes","./property-character","./generic-route","./generic-route-property","./not-found"],function(){});var TVEAuthOptions={},TVEAuthElvisObject={},TVEAuth={ver:"3.2",build:201506151353,status:!1,baseUrl:"https://web.archive.org/web/20150728212158/http://tve.mtvnservices.com/tveauth/html5/",baseXboxUrl:"https://web.archive.org/web/20150728212158/http://xbox.mtvnservices.com/fpservice/special/html5",aeUrl:"https://web.archive.org/web/20150728212158/https://entitlement.auth.adobe.com/entitlement/AccessEnabler.js",rID:null,chID:null,wrapObj:null,hiddenObj:null,providersList:null,AE:function(){return"undefined"!=typeof ae?ae:null},MVPD:null,MVPD_ID:null,Helper:null,initialize:function(a){var b=TVEAuth;if(b.rID||b.chID)return!1;if(!a)return b.Error.showMess("Wrong RquestorID/ChannedlID"),b.Callback.errorHappened("PARAMETER_IS_UNDEFINED"),!1;if("string"==typeof a){var c=arguments[2],d=arguments[3],e=arguments[0];b.rID=arguments[0],b.chID=arguments[1]||arguments[0]}else{var c=a.customCSS,d=a.dev,e=a.brand||a.requestor;b.rID=a.requestor,b.chID=a.resource||a.requestor}if(!b.rID||!b.chID)return b.Error.showMess("Wrong RquestorID/ChannedlID"),b.Callback.errorHappened("PARAMETER_IS_UNDEFINED"),!1;var f=window.location.hostname;(d||-1!=f.search(".mtvi.com")&&!1!==d)&&(b.baseUrl="https://web.archive.org/web/20150728212158/http://tve.mtvnservices-q.mtvi.com/tveauth/html5/",b.baseXboxUrl="https://web.archive.org/web/20150728212158/http://xbox.mtvnservices-q.mtvi.com/fpservice/special/html5",b.aeUrl="https://web.archive.org/web/20150728212158/https://entitlement.auth-staging.adobe.com/entitlement/AccessEnabler.js");var g=this.baseUrl+this.ver+"/",h='<div id="tveapp_wrap" class="tveapp_wrap" style="display:none;"><div id="AccessEnablerDiv"></div><input id="selectedProvider" type="hidden"/></div><div class="tveapp_back" style="display:none;"></div>',i=document.getElementsByTagName("head")[0],j=document.createElement("script"),k=document.createElement("script");if(this.getMVPDinfo(),b.set("RequestorID",b.rID),b.set("ChannelID",b.chID),j.id="accessEnablerScriptID",j.type="text/javascript",j.src=this.aeUrl,k.id="tveapp_options",k.type="text/javascript",k.src=g+e+"/js/options.js",!c){var l=document.createElement("link");l.rel="stylesheet",l.href=g+e+"/css/tveauth.overlays.css",i.appendChild(l)}i.appendChild(j),i.appendChild(k),jQuery(document).ready(function(){b.wrapObj=jQuery(h).appendTo("body"),b.hiddenObj=jQuery("#tveAuthObj"),b.Overlay.init(),b.Providers.init(),b.Elvis.init(),b.Error.init(d),b.Auth.init(),/Android/i.test(navigator.userAgent)&&jQuery(window).resize(function(){var a=jQuery("#tveapp_wrap .tveapp_container").css("opacity",.9);setTimeout(function(){a.css("opacity",1)},5)})})},getMVPDinfo:function(){var a,b=TVEAuth.MVPD_ID=TVEAuth.get("MVPD_ID");b&&(a=TVEAuth.baseUrl+TVEAuth.rID.toLowerCase()+"/providerInfo/"+b,jQuery.ajax({url:a,data:{},dataType:"jsonp",jsonpCallback:"TVEAuth.Providers.getMvpdCompleted"}))},checkForSupport:function(){try{return localStorage.setItem("TVEAuth_ls","localStorage is available"),localStorage.removeItem("TVEAuth_ls"),!0}catch(a){return!1}},isReady:function(){return TVEAuth.status===!1&&TVEAuth.Callback.errorHappened("TVE_ERROR_COMPONENT_NOT_LOADED"),TVEAuth.status}};!function(){function a(){"undefined"!=typeof b.Error&&"undefined"!=typeof b.Callback?b.Error.showMess("localStorage Is Unavailable"):setTimeout(a,100)}var b=TVEAuth;b.checkForSupport()?(b.set=function(a,b){if("string"==typeof a)localStorage.setItem("TVEAuth_"+a,b);else if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&localStorage.setItem("TVEAuth_"+c,a[c])},b.get=function(a){return localStorage.getItem("TVEAuth_"+a)},b.erase=function(a){if("string"==typeof a)localStorage.removeItem("TVEAuth_"+a);else if("object"==typeof a)for(var b=a.length;b--;)localStorage.removeItem("TVEAuth_"+a[b])}):(a(),b.set=function(a,b,c){var d=new Date,e=c||5,f=864e5*e+d.getTime();if(d.setTime(f),"string"==typeof a)document.cookie="TVEAuth_"+a+"="+escape(b)+";expires="+d.toGMTString();else if("object"==typeof a)for(var g in a)a.hasOwnProperty(g)&&(document.cookie="TVEAuth_"+g+"="+escape(a[g])+";expires="+d.toGMTString())},b.get=function(a){var b=document.cookie.split(";");a="TVEAuth_"+a+"=";for(var c=0;c<b.length;c++)if(b[c]=jQuery.trim(b[c]),0===b[c].indexOf(a))return unescape(b[c].substring(a.length));return null},b.erase=function(a){if("string"==typeof a)this.set(a,"",-1);else if("object"==typeof a)for(var b=a.length;b--;)this.set(a[b],"",-1)}),b.storage={set:function(a,c,d){return a=a.replace(/^TVEAuth_/,""),b.set(a,c,d)},get:function(a){return a=a.replace(/^TVEAuth_/,""),b.get(a)},erase:function(a){return a=a.replace(/^TVEAuth_/,""),b.erase(a)}}}(),TVEAuth.Auth={init:function(){TVEAuth.AE=function(){return"undefined"!=typeof ae?ae:null}},set:function(){if("undefined"!=typeof ae){var a={callSetConfig:!0,backgroundLogin:!0,backgroundLogout:!0};ae.setRequestor(TVEAuth.rID,null,a)}else TVEAuth.Error.showMess("Auth.set")},checkAN:function(){"true"==TVEAuth.get("ELVIS_ISLOGGEDIN")?(TVEAuth.Elvis.Helper="checkAN",TVEAuth.Elvis.check()):TVEAuth.AE()&&TVEAuth.AE().checkAuthentication()},getAN:function(){TVEAuth.Elvis.Helper="checkAN","true"==TVEAuth.get("ELVIS_ISLOGGEDIN")?(TVEAuth.Elvis.Helper="checkAN",TVEAuth.Elvis.check()):TVEAuth.AE()?TVEAuth.AE().getAuthentication():TVEAuth.Error.showMess("getAuthN")},setANStatus:function(a,b){1==a?(TVEAuth.set("mvpdParam","authNEnd"),TVEAuth.Callback.authenticationCompleted(!0,TVEAuth.MVPD)):(TVEAuth.MVPD=TVEAuth.MVPD_ID=null,TVEAuth.erase("MVPD_ID"),TVEAuth.Callback.authenticationCompleted(!1,null)),TVEAuthOptions.interimScreen&&TVEAuth.Overlay.hide("interimScreen")},checkAZ:function(){"true"==TVEAuth.get("ELVIS_ISLOGGEDIN")?("true"==TVEAuth.get("checkANnAZ")?TVEAuth.Elvis.Helper="checkANnAZ":TVEAuth.Elvis.Helper="checkAZ",TVEAuth.Elvis.check()):TVEAuth.AE()?TVEAuth.AE().checkAuthorization(TVEAuth.rID):TVEAuth.Error.showMess("checkAuthZ")},getAZ:function(){"true"==TVEAuth.get("ELVIS_ISLOGGEDIN")?(TVEAuth.Elvis.Helper="checkAZ",TVEAuth.Elvis.check()):(TVEAuth.set({checkAZ:"true",getAZ:"true"}),TVEAuth.AE().getAuthorization(TVEAuth.chID))},setToken:function(a,b){TVEAuth.token=b;var c=TVEAuth.get("checkAZ"),d=TVEAuth.get("getAZ"),e=TVEAuth.get("MVPD_Selected"),f=TVEAuth.get("COMPONENTISLOADING"),g=TVEAuth.MVPD_ID,h=TVEAuth.Overlay;if(c||d){if("true"===f&&(TVEAuth.erase("getAZ"),TVEAuth.erase("COMPONENTISLOADING"),TVEAuth.status=!0,TVEAuth.Callback.componentLoaded()),TVEAuth.Callback.authorizationCompleted(!0,TVEAuth.MVPD,b),"true"==e){if(TVEAuthOptions.successScreen){var i=TVEAuth.MVPD;TVEAuthOptions.interimScreen&&h.show("interimScreen"),h.show("successMessage"),i&&i.logoutLogoUrl?jQuery("#tveapp_mvpdLogo").html('<img src="'+i.logoutLogoUrl+'" alt="'+i.id+'" title="'+i.displayName+'" />'):jQuery("#tveapp_mvpdLogo").html(""),jQuery("#tveapp_mvpdName").text(i.displayName)}else TVEAuthOptions.interimScreen?h.hide("interimScreen"):h.hide();TVEAuth.Callback.loginCompleted(!0,g),TVEAuth.erase("MVPD_Selected")}TVEAuth.erase(["checkAZ","getAZ","onLoad"])}},tokenRequestFailed:function(a,b,c){if(TVEAuth.get("ELVIS_ISLOGGEDIN")||"setupElvis"===TVEAuth.get("onLoad"))return!1;var d=TVEAuth.get("checkAZ"),e=TVEAuth.get("getAZ"),f=TVEAuth.get("COMPONENTISLOADING"),g=TVEAuth.erase;return TVEAuth.token="","true"==e?(g(["getAZ","checkAZ"]),TVEAuth.set("onLoad",b),TVEAuth.AE().logout(),this.onLoad(),!1):("true"===f&&(g(["getAZ","COMPONENTISLOADING"]),TVEAuth.status=!0,TVEAuth.Callback.componentLoaded()),d&&(g(["checkAZ","getAZ","onLoad"]),TVEAuth.Callback.errorHappened(b)),void TVEAuth.Overlay.hide("interimScreen"))},dataTracker:function(a,b){var c=TVEAuth.get("checkANnAZ"),d=b[0],e=b[1]||null,f=b[2]||null,g=TVEAuth.Callback;switch(a){case"mvpdSelection":e=b[0]||null,g.providerSelected(e),TVEAuth.MVPD_ID=e,TVEAuth.set({MVPD_ID:e,MVPD_Selected:"true"}),TVEAuth.getMVPDinfo();break;case"authorizationDetection":c&&(d?g.authNAndAuthZCompleted(!0,d,TVEAuth.MVPD):e&&f?g.authNAndAuthZCompleted(!0,d,TVEAuth.MVPD):g.authNAndAuthZCompleted(!1,d,null),TVEAuth.erase("checkANnAZ"))}TVEAuth.Helper=null},signOut:function(){TVEAuth.erase("MVPD_ID"),TVEAuthOptions.elvisFeature&&"true"==TVEAuth.get("ELVIS_ISLOGGEDIN")?TVEAuth.Elvis.signOut():(TVEAuth.erase("ELVIS_ISLOGGEDIN"),TVEAuth.set("onLoad","checkLogout"),TVEAuth.AE()?TVEAuth.AE().logout():TVEAuth.Error.showMess("signOut")),TVEAuthElvisObject={},TVEAuth.Elvis.save()},checkSignOut:function(){var a=TVEAuth.get("LOGOUT_COMPLETED");"true"==a&&TVEAuth.Callback.signOutCompleted()},onLoad:function(){var a=TVEAuth.get("onLoad")||"none",b=TVEAuth.erase;switch(a){case"User not Authorized Error":TVEAuth.Callback.errorHappened(a),b("onLoad");break;case"checkAN":b("onLoad"),TVEAuthOptions.interimScreen&&TVEAuth.Overlay.show("interimScreen"),TVEAuth.API.checkAuthentication();break;case"checkAZ":TVEAuth.API.checkAuthorization(),TVEAuthOptions.interimScreen&&TVEAuth.Overlay.show("interimScreen");break;case"checkLogout":TVEAuth.Callback.signOutCompleted(),b("onLoad");break;case"setupElvis":TVEAuth.erase("onLoad"),TVEAuth.Elvis.getRoadBlocker();break;case"showElvisSuccessScreen":TVEAuth.Overlay.show("elvisSuccess");break;default:b("onLoad")}}},TVEAuth.Providers={list:null,whiteList:[],current:{},_set:function(a){var b=document.createElement("a");b.href=window.location.href,"undefined"!=typeof TVEAuthMVPDWindow&&TVEAuthMVPDWindow.close(),TVEAuthMVPDWindow=window.open(b.protocol+"//"+b.hostname,"mvpdwindow"),TVEAuth.AE().setSelectedProvider(a)},saveList:function(a){"undefined"!=typeof a&&TVEAuth.set("MVPD_LIST",JSON.stringify(a))},loadList:function(){var a=JSON.parse(TVEAuth.get("MVPD_LIST"));return a?a:TVEAuth.Error.showMess("loadList")},getMvpdCompleted:function(a){switch(a&&a.mvpdList?(delete a.mvpdList.duration,TVEAuth.MVPD=a.mvpdList,TVEAuth.set({CURRENT_PROVIDER_ID:a.mvpdList.id,CURRENT_PROVIDER_NAME:a.mvpdList.displayName})):(a={mvpdList:null},TVEAuth.MVPD=null,TVEAuth.erase(["CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME"])),TVEAuth.get("getMvpd")&&(TVEAuth.Callback.currentProviderReceived(a.mvpdList),TVEAuth.erase("getMvpd")),TVEAuth.get("mvpdParam")){case"getMvpdNow":TVEAuth.Callback.currentProviderReceived(a.mvpdList),TVEAuth.erase("mvpdParam");break;case"authNEnd":TVEAuth.erase("mvpdParam")}},getList:function(a,b){var c,d,e=a.length;if(e){switch(b){case"defaultView":case"onlyLogo":for(var f=[],g=[],h=0,i="";e>h;h++)i=a[h].isSpecialProvider===!0?"elvismvpd":"mvpdid",a[h].altName.replace(", ","; "),f[h]="<li class='tveapp_pL-item tveapp_index_"+h+"'><a "+i+"='"+a[h].id+"' class='tveapp_pL-link' tveapp_alt='"+a[h].displayName+", "+a[h].altName+"'><span>"+a[h].displayName+"</span><i/></a></li>",a[h].isPrimary===!0&&g.push("<li class='tveapp_ePL tveapp_i_"+h+"'><a "+i+"='"+a[h].id+"' class='tveapp_ePL-link'><img src='"+a[h].pickerLogoUrl+"' alt='"+a[h].displayName+"' /><i/></a></li>");d="<ul class='tveapp_extraMvpdList'>"+g.join("")+"</ul>",c="<ul class='tveapp_providersList'>"+f.join("")+"<li class='tveapp_pL-item-extra'><a id='tveapp_providerNotListed' class='tveapp_pL-link' class='tveapp_pL-link'>Don&#8217;t see Your Provider?</a></li></ul>";break;case"fullList":c=a,d="";break;default:TVEAuth.Error.showMess("TVEAuth.Providers.getList")}return[c,d]}},loadWhiteList:function(){var a=TVEAuth.baseUrl+TVEAuth.rID.toLowerCase()+"/providersList?callback=TVEAuth.Providers.updProvidersList",b=document.createElement("script");b.src=a,document.getElementsByTagName("head")[0].appendChild(b),setTimeout(function(){TVEAuth.isWLLoaded||(TVEAuth.Providers.reloadWL(),TVEAuth.tryLoadWL+=1)},5e3)},reloadWL:function(){var a=TVEAuth.Providers.loadList();TVEAuth.tryLoadWL<1?TVEAuth.Providers.loadWhiteList():a?TVEAuth.Providers.updProvidersList(a):TVEAuth.Callback.errorHappened("Can Not Load The White List")},updProvidersList:function(a){if(!TVEAuth.isWLLoaded){var b=TVEAuth.get("onLoad"),c=TVEAuth.get("getAZ");this.whiteList=a.mvpdList,"true"===c&&"checkAZ"===b?TVEAuth.set("COMPONENTISLOADING","true"):(TVEAuth.erase("COMPONENTISLOADING"),TVEAuth.status=!0,TVEAuth.Callback.componentLoaded()),TVEAuth.Auth.onLoad(),TVEAuth.isWLLoaded=!0}},verifyWhiteList:function(a){var b=this.whiteList,c={};if(b&&b.length){for(var d=b.length,e=a.length,f=0,g=0,h=[],i="";e>g;g++)c[a[g].ID.toLowerCase()]=a[g];for(;d>f;f++)i=b[f].id.toLowerCase(),c[i]&&(b[f].pickerLogoUrl=b[f].pickerLogoUrl||c[i].logoURL,h.push({id:c[i].ID,displayName:b[f].displayName||c[i].displayName,pickerLogoUrl:b[f].pickerLogoUrl||null,isPrimary:b[f].isPrimary||!1,altName:b[f].altName||""}));for(f=0;d>f;f++)1==b[f].isSpecialProvider&&(b[f].pickerLogoUrl=b[f].pickerLogoUrl||"",h.push({id:b[f].id,displayName:b[f].displayName||"",pickerLogoUrl:b[f].pickerLogoUrl||null,isPrimary:b[f].isPrimary||!1,altName:b[f].altName||"",isSpecialProvider:!0}))}else TVEAuth.Error.showMess("verifyWhiteList"),TVEAuth.erase("MVPD_LIST");return this.list=h,this.saveList(h),this.list},checkCurrent:function(){},init:function(){var a=TVEAuth.get("MVPD_LIST");this.altWhiteList=a||null,this.list=a||null}},TVEAuth.Overlay={isClosedByUser:!0,qsText:"Type in provider name",list:{successMessage:null,selectProvider:null,iframeWrap:null,providerNotListed:null,error:null},get:function(a){var b,c,d,e=TVEAuthOptions;switch(a){case"successMessage":c=jQuery("<div id='tveapp_success' class='tveapp_container tveapp_mSize'><div class='tveapp_header'><a class='tveapp_button tveapp_close'>Close</a></div><div class='tveapp_content'><div class='tveapp_successMessage'><h5>Success!</h5><p>You are now logged in with</p><p id='tveapp_mvpdLogo'></p><p>You now have access <br >to watch your favorite shows.</p><p><a class='tveapp_button tveapp_close tveapp_watchNow'>Watch Now!</a></p></div></div></div>"),b=e.successOverlay||c;break;case"dontSeeUrMvpd":c=jQuery("<div id='tveapp_dontSeeUrMvpd' class='tveapp_container tveapp_mSize'><div class='tveapp_header'><a class='tveapp_button tveapp_goBack'>Back</a><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><div class='tveapp_dontSeeUrMvpdMessage'><h5>Provider Not Listed</h5><p>If your tv provider is not listed, <br>don&#8217;t panic.</p><p>We're working hard to get all tv providers to participate</p></div></div></div>"),b=e.unlistedMvpdOverlay||c;break;case"selectProvider":c=jQuery("<div id='tveapp_selectProvider' class='tveapp_container'><div class='tveapp_header'><a class='tveapp_button tveapp_learnMore'  onclick='TVEAuth.Callback.learnMoreButtonClicked();'>How this works</a><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><div class='tveapp_infoImg'><img /></div><div class='tveapp_brandLogo'></div><h4>Sign In</h4><div id='tveapp_searchBox' class='tveapp_searchBox'><span class='tveapp_wrapSearch'><input name='search' type='text' id='tveapp_search' class='tveapp_search' autocomplete='off' onfocus='if(this.value == \"Type in provider name\") { this.value = \"\"; };jQuery(\"#tveapp_selectProvider\").addClass(\"tveapp_searchActivated\");' onblur='this.value=!this.value?\"Type in provider name\":this.value;' value='Type in provider name' /></span></div></div><div class='tveapp_footer'><div id='providersWrapper'></div><div id='extraMvpdWrapper'></div></div></div>"),b=e.selectMvpdOverlay||c,d=TVEAuth.Providers.getList(TVEAuth.Providers.list,"defaultView"),b.find("#providersWrapper").append(d[0]),e.extraMvpd&&b.find("#extraMvpdWrapper").append(d[1]);break;case"error":c=jQuery("<div id='tveapp_error' class='tveapp_container tveapp_sSize'><div class='tveapp_header'><h4>Sorry</h4><a class='tveapp_button tveapp_close'>Close</a><</div><div class='tveapp_content'><div class='tveapp_mainCol'><div class='tveapp_brandLogo'></div><p id='tveapp_error_mess'>We can't show you this content at this time.<br />Try later or contact your TV service provider.</p></div></div><div class='tveapp_footer'><ul class='tveapp_buttons'><li><a class='tveapp_b-browse tveapp_close'>Close</a></li></ul></div></div>"),b=e.errorOverlay||c;break;case"signOut":c=jQuery("<div></div>"),b=e.signOutOverlay||c;break;case"providerNotListed":c=jQuery("<div id='tveapp_providerNotListed' class='tveapp_container tveapp_mSize'><div class='tveapp_header'><h4>Provider Not Listed</h4><a class='tveapp_close'>Cancel</a></div><div class='tveapp_content'><div class='tveapp_mainCol'><div class='tveapp_brandLogo'></div><p id='provNotListedText'>We are working to add providers.<br />If your provider is not listed, check back<br />frequently to see if your provider has been added.</p></div></div><div class='tveapp_footer'><ul class='tveapp_buttons'><li><a class='tveapp_b-browse tveapp_close'>Close</a></li></ul></div></div>"),b=e.mvpdNotListedOverlay||c;break;case"learnMore":c=jQuery("<div id='tveapp_learnMore' class='tveapp_container'><div class='tveapp_header'><h4>Grab an adult to unlock more full episodes!</h4><a class='tveapp_button tveapp_close'></a></div><div class='tveapp_content'><h5>Adults: To get these full episodes, follow the steps below.</h5><dl><dt>1. SELECT TV PROVIDER</dt><dd>There&#8217;s no extra charge! It&#8217;s all included in your TV subscription.</dd><dt>2. TYPE IN YOUR USERNAME AND PASSWORD</dt><dd>Forgot your username or password? Contact your TV provider.</dd><dt>3. START WATCHING FULL EPISODES!</dt></dl></div><div class='tveapp_footer'><a class='tveapp_button tveapp_close'>Get started</a></div><i class='tveapp_bgsponge'></i></div>"),b=e.learnMoreOverlay||c;break;case"interimScreen":c=jQuery("<div id='tveapp_interim' class='tveapp_container tveapp_mSize'><div class='tveapp_header'></div><div class='tveapp_interimContent'>Please wait while we sign you in...</div></div>"),b=e.interimOverlay||c;break;case"pleaseWait":c=jQuery("<div id='tveapp_pleaseWait' class='tveapp_container'><div class='tveapp_header'></div><div class='tveapp_content'>Please wait...</div></div>"),b=e.waitOverlay||c;break;case"elvisLogin":c=TVEAuth.Elvis.htmlLoginScreen(),b=e.elvisOverlay||c;break;case"elvisSuccess":c=TVEAuth.Elvis.htmlSuccessScreen(),b=e.elvisSuccess||c;break;case"elvisSignOut":c=TVEAuth.Elvis.htmlSignOutScreen(),b=e.elvisSignOut||c;break;case"elvisEnded":c=TVEAuth.Elvis.htmlEndedScreen(),b=e.elvisEnded||c;break;case"elvisTerminated":c=TVEAuth.Elvis.htmlTerminatedScreen(),b=e.elvisTerminated()||c;break;default:c=jQuery("<div></div>"),b=e[a]||c}TVEAuth.Overlay.list[a]=jQuery(b).appendTo(jQuery("#tveapp_wrap")).show(),TVEAuth.wrapObj.show()},init:function(){var a,b=TVEAuth.Overlay,c="click.tveevent",d=!1,e=TVEAuth.erase;a=function(){b.list.selectProvider.removeClass("tveapp_quickSearch tveapp_searchActivated").find("#tveapp_search").val("").trigger("keyup").val(TVEAuthOptions.qsText).blur().end().find(".tveapp_pL-item").removeAttr("style")},TVEAuth.Overlay.iframeWrap=TVEAuthOptions.iframeWrapper||jQuery("<div id='tveapp_iframeWrap' class='tveapp_container tveapp_mSize mvpdWrapBox' style='display:none;'><div class='tveapp_header'><a class='tveapp_button tveapp_goBack'>Back</a><a class='tveapp_button tveapp_close'>Cancel</a></div><div id='mvpddivWrap' class='tveapp_content'></div></div>"),TVEAuthOptions.fullScreenActivated&&jQuery("html").addClass("tveapp_fullScreenActivated"),jQuery(document).on("mouseup.tveevent touchend.tveevent","#tveapp_wrap",function(a){jQuery(a.target).closest("#tveapp_search, #providersWrapper").length?jQuery(a.target).closest("#providersWrapper").length&&!jQuery(a.target).closest(".tveapp_pL-link").length&&(a.preventDefault(),a.stopPropagation()):(jQuery("#tveapp_selectProvider").removeClass("tveapp_searchActivated"),jQuery("#tveapp_search").blur())}),jQuery("#tveapp_wrap").on("touchmove",function(){d=!0}).on("touchstart",function(){d=!1}).on("change.tveevent input.tveevent keydown.tveevent","#tveapp_search",function(a){var b=" "+jQuery.trim(this.value.toLowerCase()),d="",e=jQuery("#providersWrapper"),f=e.find(".tveapp_pL-item");1===b.length?f.show():f.each(function(){d=" "+jQuery(this).find(".tveapp_pL-link").attr("tveapp_alt").toLowerCase().replace(/,/g," "),jQuery(this).toggle(-1!==d.indexOf(b))}),f=f.add(e.find(".tveapp_pL-item-extra"));var g=0;if(jQuery(window).height()===jQuery("#tveapp_selectProvider").height()&&(e=jQuery("#tveapp_wrap"),g=jQuery(".tveapp_footer").css("margin-top")?parseInt(jQuery(".tveapp_footer").css("margin-top"),10):0),38===a.keyCode||40===a.keyCode){a.preventDefault();var h,i=e.offset().top+g,j=e.height();40===a.keyCode?f.filter(".highlight").length?f.filter(".highlight").nextAll(":visible:first").length&&f.filter(".highlight").removeClass("highlight").nextAll(":visible:first").addClass("highlight"):f.filter(":visible:first").addClass("highlight"):38===a.keyCode&&f.filter(".highlight").prevAll(":visible:first").length&&f.filter(".highlight").removeClass("highlight").prevAll(":visible:first").addClass("highlight"),h=f.filter(".highlight").offset().top,
h>i+j/2?e.scrollTop(e.scrollTop()+h-i-j/2):i>h&&e.scrollTop(e.scrollTop()+h-i)}else 13===a.keyCode?f.filter(".highlight").find("a").trigger(c):a.keyCode&&(f.filter(".highlight").removeClass("highlight"),e.scrollTop(0))}).on("mouseenter.tveevent",".tveapp_pL-link",function(){jQuery(this).closest("ul").find(".highlight").removeClass("highlight"),jQuery(this).closest("li").addClass("highlight")}).on(c,".tveapp_close",function(){var c=$(this).closest(".tveapp_container")[0].id;switch(c){case"tveapp_selectProvider":b.hide("selectProvider"),a(),TVEAuth.MVPD=null,e(["MVPD_Selected","onLoad","getAZ"]);break;case"tveapp_error":b.hide("error");break;case"tveapp_pleaseWait":e("onLoad"),b.hide("pleaseWait");break;case"tveapp_success":b.hide("successMessage");break;case"tveapp_elvisSuccess":TVEAuth.set("ELVIS_SUCCESS","closed"),b.hide("elvisSuccess"),e("onLoad");break;case"tveapp_elvisSignOut":b.hide("elvisSignOut");break;case"tveapp_learnMore":b.hide("learnMore");break;case"tveapp_elvisLogin":a(),b.hide("elvisLogin"),e(["MVPD_Selected","onLoad","getAZ","CURRENT_ELVIS_MVPD_ID","CURRENT_ELVIS_MVPD_NAME"]),TVEAuth.set("isSetANStatusSkip","true");break;case"tveapp_signOut":b.hide("signOut");break;case"tveapp_iframeWrap":a(),b.closeIFrame(),b.hide("iframeWrap"),e(["MVPD_Selected","onLoad","getAZ"]),TVEAuth.set("isSetANStatusSkip","true");break;case"tveapp_dontSeeUrMvpd":e(["MVPD_Selected","onLoad","getAZ"]),b.hide("dontSeeUrMvpd")}}).on(c,".tveapp_goBack",function(){var c=$(this).closest(".tveapp_container")[0].id;switch(c){case"tveapp_iframeWrap":a(),e(["CURRENT_ELVIS_MVPD_ID","CURRENT_ELVIS_MVPD_NAME"]),b.toggle("iframeWrap","selectProvider"),b.forceHideKeyboard();break;case"tveapp_elvisLogin":a(),b.toggle("elvisLogin","selectProvider");break;case"tveapp_dontSeeUrMvpd":b.toggle("dontSeeUrMvpd","selectProvider")}}).on(c,"#tveapp_providerNotListed",function(){a(),b.toggle("selectProvider","dontSeeUrMvpd"),TVEAuth.Callback.providerNotListedButtonSelected()}).on(c,"#tveapp_selectProvider a[mvpdid]",function(b){if(b.preventDefault(),!d){("checkAZ"===TVEAuth.Helper||"checkAN"===TVEAuth.Helper)&&TVEAuth.set("onLoad",TVEAuth.Helper),a();var c=jQuery(this).attr("mvpdid");TVEAuth.Providers._set(c)}}).on(c,"#tveapp_selectProvider a[elvismvpd]",function(c){if(a(),jQuery("#tveapp_selectProvider").removeClass("tveapp_searchActivated"),c.preventDefault(),!d){a();var e,f,g=jQuery(this);switch(e=g.attr("elvismvpd"),f=g.find("img").attr("alt")||g.find("span").text(),TVEAuth.Elvis.provider=e,jQuery.ajax({url:TVEAuth.baseUrl+TVEAuth.rID.toLowerCase()+"/providerInfo/"+e,data:{},dataType:"jsonp",jsonpCallback:"TVEAuth.Elvis.getMvpdCompleted"}),TVEAuth.Callback.providerSelected("SFPS"),TVEAuth.set({MVPD_ID:e,CURRENT_ELVIS_MVPD_ID:e,CURRENT_ELVIS_MVPD_NAME:f}),TVEAuth.MVPD={id:e,displayName:f},b.toggle("selectProvider","pleaseWait"),TVEAuth.rID){case"NICK":case"NICKJR":TVEAuth.Elvis.setupWithoutSocial();break;default:setTimeout(function(){b.toggle("pleaseWait","elvisLogin")},500)}TVEAuth.set("ELVIS_METHOD","nonSocial")}}).on(c,"#tveapp_elvisLogin a[elvisBy]",function(){var a=jQuery(this).attr("elvisBy");TVEAuth.Elvis.signIn(a),TVEAuth.set("ELVIS_METHOD",a),TVEAuth.Callback.specialPreviewPickedMethod(a,TVEAuth.MVPD)}).on(c,"[tvecallback=startWatching]",function(){TVEAuth.Callback.startWatchingNowButtonClicked()})},show:function(a){TVEAuth.wrapObj.show(),jQuery("html, body").addClass("tveapp_modalOpened"),jQuery(".tveapp_container:visible").hide(),this.list[a]?this.list[a].show():this.get(a)},hide:function(a){if(jQuery("html, body").removeClass("tveapp_modalOpened"),"string"==typeof a){var b=this.list[a];null!=b&&b.hide()}else if(a)for(var c=0,d=a.length;d>c;c++)null!=this.list[a[c]]&&this.list[a[c]].hide();this.forceHideKeyboard(),TVEAuth.wrapObj.hide()},toggle:function(a,b){var c,d,e=this.list;if("string"==typeof a&&null!=e[a])e[a].hide();else for(c=0,d=a.length;d>c;c++)null!=e[a[c]]&&e[a[c]].hide();this.list[b]?this.list[b].show():this.get(b)},forceHideKeyboard:function(){var a=navigator.userAgent.toLowerCase();(-1!==a.indexOf("iphone")||-1!==a.indexOf("ipad"))&&(jQuery("body").append('<input id="tveHiddenInput" type="text" style="position:absolute;top:-9999px;font-size:20px;" />'),jQuery("#tveHiddenInput").focus().blur().remove())},closeIFrame:function(){TVEAuth.Overlay.isClosedByUser=!0,jQuery("#mvpdframe").remove(),TVEAuth.Overlay.hide("iframeWrap"),TVEAuth.Providers._set(null)},createIFrame:function(a,b){var c=TVEAuth.Overlay,d=jQuery(window).width();c.hide("selectProvider"),a>d&&(a=d),c.list.iframeWrap=c.list.iframeWrap||TVEAuthOptions.iframeWrapper,c.list.iframeWrap.appendTo(TVEAuth.wrapObj[0]).css({"margin-left":-a/2,width:320}),jQuery("#mvpddivWrap").empty(),jQuery('<iframe id="mvpdframe" name="mvpdframe"></iframe>').css({width:a,height:b,background:"#fff",frameborder:0,border:0,display:"block"}).appendTo("#mvpddivWrap"),c.show("iframeWrap"),c.isClosedByUser=!1}},TVEAuth.Elvis={isEnabled:!1,isLoggining:!1,isLogUidEnabled:!0,Helper:"",mvpdId:null,ucid:null,MVPD:{id:"SFPS",displayName:"SFPS"},setupFlag:!1,save:function(){var a=TVEAuthElvisObject;TVEAuth.set("ELVIS_INFO",JSON.stringify(a))},init:function(){TVEAuthElvisObject=JSON.parse(TVEAuth.get("ELVIS_INFO"))||{},TVEAuthElvisObject["function"]="runFromCache";var a=TVEAuth.Overlay;this.mvpdId=TVEAuth.get("CURRENT_ELVIS_MVPD_ID"),jQuery("#tveapp_wrap").on("click.tveevent","#tveapp_elvisEnded .tveapp_close",function(){TVEAuth.set("ELVIS_ENDED","closed"),a.hide("elvisEnded")}),jQuery("#tveapp_wrap").on("click.tveevent","#tveapp_elvisTerminated .tveapp_close",function(){TVEAuth.set("ELVIS_TERMINATED","closed"),a.hide("elvisTerminated")})},getMvpdCompleted:function(a){a.mvpdList&&(delete a.mvpdList.duration,delete a.mvpdList.endDate,jQuery.extend(TVEAuthElvisObject,a.mvpdList),this.save())},check:function(){var a=TVEAuth.get("COMPONENTISLOADING"),b=TVEAuth.get("ELVIS_RID")==TVEAuth.get("RequestorID");if("true"===a&&(TVEAuth.erase(["getAZ","COMPONENTISLOADING"]),TVEAuth.status=!0,TVEAuth.Callback.componentLoaded()),TVEAuthElvisObject.expiredDate>(new Date).getTime()&&b)TVEAuthElvisObject["function"]="runFromCache",this.requestCompleted(TVEAuthElvisObject);else switch(TVEAuth.rID){case"NICK":case"NICKJR":TVEAuth.Elvis.checkStatusWithoutSocial();break;default:TVEAuth.Elvis.checkStatus()}},checkStatus:function(){var a,b=TVEAuth.Elvis,c=TVEAuth.baseXboxUrl+"/checkelvis",d="web",e=TVEAuth.rID;b.isUserLoggedIn()?(b.isEnabled=!0,a=TVEAuthElvisObject.ucid,jQuery.ajax({url:c,data:{deviceType:d,requestorId:e,uuid:a},dataType:"jsonp",jsonpCallback:"TVEAuth.Elvis.requestCompleted"}),TVEAuth.set({ELVIS_STATUS:"isActive",ELVIS_ISACTIVE:"true"})):Flux4&&!Flux4.getContext()&&"isActive"!==TVEAuth.get("ELVIS_STATUS")&&(setTimeout(b.check,1e3),TVEAuth.set("ELVIS_STATUS","isNotActive"))},checkStatusWithoutSocial:function(){var a=JSON.parse(TVEAuth.get("ELVIS_NONSOCIAL_"+TVEAuth.rID))||{},b=(TVEAuth.Elvis,TVEAuthElvisObject),c=TVEAuth.baseXboxUrl+"/checkelvis",d="web",e=TVEAuth.rID,f=a.mvpdid,g=JSON.parse(TVEAuth.get("ELVIS_NONSOCIAL_"+TVEAuth.rID))||{},h=(new Date).getTime();if(TVEAuth.set({ELVIS_STATUS:"isActive",ELVIS_ISACTIVE:"true"}),g.accessDuration>h)b["function"]="runFromCache",b.expiredDate=(new Date).getTime()+36e5,this.requestCompleted(b);else if(g.refreshDuration>h)jQuery.ajax({url:c,data:{deviceType:d,requestorId:e,providerId:f},dataType:"jsonp",jsonpCallback:"TVEAuth.Elvis.requestCompleted"});else{var i=TVEAuth.Auth;TVEAuth.erase(["ELVIS_ISLOGGEDIN","MVPD_ID","CURRENT_ELVIS_MVPD_ID","ELVIS_STATUS"]),TVEAuthElvisObject={},TVEAuth.Elvis.save(),"checkAN"==TVEAuth.Helper?i.checkAN():i.checkAZ()}},showElvisLoginScreen:function(){},isUserLoggedIn:function(){var a,b=Flux4.getContext();return b&&b.user?(TVEAuthElvisObject.isLoggedInWithFlux=!0,this.ucid=a=b.user.ucid,a=TVEAuthElvisObject.ucid=b.user.ucid,this.save(),!0):(TVEAuthElvisObject.isLoggedInWithFlux=!1,!1)},requestCompleted:function(a){var b=a||{},c=TVEAuthElvisObject,d=TVEAuth,e=this.MVPD;switch(b["function"]){case"setupDevice":if("success"===b.status)if(c.token=b.token||"",c.duration=parseInt(b.duration)||0,c.isActive=b.isActive||!1,c.expiredDate=(new Date).getTime()+36e5,d.MVPD={id:c.id,displayName:c.displayName},b.duration<1)c.endServiceMessageAvailable&&d.set("ELVIS_ENDEDMESSAGE","true"),d.set("ELVIS_ENDEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewExpiredWithProvider(e),c.isWarnMessShowed=!0;else if(b.isActive){d.set({CURRENT_PROVIDER_ID:c.id,CURRENT_PROVIDER_NAME:c.displayName,ELVIS_ISLOGGEDIN:"true",ELVIS_SETUP:"true",ELVIS_TOKEN:b.token,ELVIS_TIMER:b.duration,ELVIS_RID:TVEAuth.rID,MVPD_ID:c.id}),"checkAN"==this.Helper||"checkAN"==d.get("ELVIS_HELPER")?d.Callback.authenticationCompleted(!0,e):("checkAZ"==this.Helper||"checkAZ"==d.get("ELVIS_HELPER"))&&d.Callback.authorizationCompleted(!0,e,b.token),d.erase("ELVIS_HELPER"),d.Callback.specialPreviewSucceedLoginForMethod(d.get("ELVIS_METHOD"),e),TVEAuthOptions.successScreen||TVEAuthOptions.elvisSuccessScreen?d.Overlay.toggle(["elvisLogin","pleaseWait"],"elvisSuccess"):d.Overlay.hide(["elvisLogin","pleaseWait","elvisSuccess"]),d.erase("ELVIS_SUCCESS"),d.set("ELVIS_ISACTIVE","true");var f={isLoggedIn:!0,isLoggedOut:!1};switch(jQuery.extend(c,f),TVEAuth.rID){case"NICK":case"NICKJR":var g="ELVIS_NONSOCIAL_"+TVEAuth.rID,h={token:b.token,mvpdid:c.id,rID:TVEAuth.rID,accessDuration:b.accessDuration,refreshDuration:b.refreshDuration};TVEAuth.set(g,JSON.stringify(h))}}else b.duration<1?(c.endServiceMessageAvailable&&d.set("ELVIS_ENDEDMESSAGE","true"),d.set("ELVIS_ENDEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewExpiredWithProvider(d.MVPD)):c.terminatedServiceMessageAvailable?(c.isTermMessShowed||(d.set("ELVIS_TERMINATEDMESSAGE","true"),c.terminatedServiceMessageAvailable=!1),d.set("ELVIS_TERMINATEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewLockedWithProvider(d.MVPD)):d.erase(["ELVIS_ENDEDMESSAGE","ELVIS_TERMINATEDMESSAGE"]);else d.Error.showMess(b.error),d.erase(["ELVIS_SETUP","ELVIS_ISACTIVE"]);"showElvisSuccessScreen"!==d.get("onLoad")&&d.erase("onLoad");break;case"checkDevice":if("success"===b.status)if(b.providers!=[]){for(var i=0,j=b.providers.length;j>i;i++)if(1==b.providers[i].isLoggedIn){c.token=b.providers[i].token||"",c.duration=b.providers[i].duration||0,c.isActive=b.providers[i].isActive||!1,c.expiredDate=(new Date).getTime()+36e5,c.id=d.get("CURRENT_ELVIS_MVPD_ID"),c.displayName=d.get("CURRENT_ELVIS_MVPD_NAME"),d.set({ELVIS_ISLOGGEDIN:"true",ELVIS_TOKEN:b.providers[i].token,CURRENT_PROVIDER_ID:c.id,CURRENT_PROVIDER_NAME:c.displayName}),d.MVPD={id:c.id,displayName:c.displayName},b.providers[i].duration<1?(c.endServiceMessageAvailable&&d.set("ELVIS_ENDEDMESSAGE","true"),d.set("ELVIS_ENDEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewExpiredWithProvider(d.MVPD)):c.isActive?"checkAN"==this.Helper?d.Callback.authenticationCompleted(!0,e):"checkAZ"==this.Helper?d.Callback.authorizationCompleted(!0,e,b.providers[i].token):"checkANnAZ"==d.Helper&&d.Callback.authNAndAuthZCompleted(!0,!0,e):(c.terminatedServiceMessageAvailable&&(d.set("ELVIS_TERMINATEDMESSAGE","true"),c.terminatedServiceMessageAvailable=!1),d.set("ELVIS_TERMINATEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewLockedWithProvider(d.MVPD));var k=TVEAuthOptions,f={isLoggedIn:!0,isLoggedOut:!1};switch("closed"!==d.get("ELVIS_SUCCESS")&&(k.successScreen||k.elvisSuccessScreen)&&(d.set("onLoad","showElvisSuccessScreen"),d.Overlay.toggle("elvisLogin","elvisSuccess"),d.erase("ELVIS_SUCCESS")),jQuery.extend(c,f),TVEAuth.rID){case"NICK":case"NICKJR":var g="ELVIS_NONSOCIAL_"+TVEAuth.rID,h={token:b.providers[i].token,mvpdid:c.id,rID:TVEAuth.rID,accessDuration:b.providers[i].accessDuration,refreshDuration:b.providers[i].refreshDuration};TVEAuth.set(g,JSON.stringify(h))}break}d.set("ELVIS_ISACTIVE","true")}else"checkAN"==this.Helper?d.Callback.authenticationCompleted(!1,null):"checkAZ"==this.Helper&&d.Callback.errorHappened("User Not Authenticated Error");else d.Error.showMess(b.error),d.erase("ELVIS_ISLOGGEDIN"),d.set("ELVIS_ISACTIVE","false");break;case"logoutDevice":d.Overlay.hide("elvisSuccess"),d.Overlay.hide("elvisSignOut"),d.erase(["ELVIS_ISLOGGEDIN","CURRENT_PROVIDER_ID","CURRENT_PROVIDER_NAME","CURRENT_ELVIS_MVPD_ID","CURRENT_ELVIS_MVPD_NAME","ELVIS_SUCCESS"]);var f={mvpdId:null,mvpdName:null,isLoggedIn:!1,isLoggedOut:!0,expiredDate:0};switch(this.setupFlag=!1,jQuery.extend(c,f),TVEAuth.rID){case"NICK":case"NICKJR":var g="ELVIS_NONSOCIAL_"+TVEAuth.rID;TVEAuth.erase(g)}d.Callback.signOutCompleted(),"success"!==b.status?d.Error.showMess(b.error):d.get("ELVIS_ENDEDMESSAGE_TOSHOW")?(d.Overlay.show("elvisEnded"),d.erase("ELVIS_ENDEDMESSAGE_TOSHOW")):d.get("ELVIS_TERMINATEDMESSAGE_TOSHOW")&&(d.Overlay.show("elvisTerminated"),d.erase("ELVIS_TERMINATEDMESSAGE_TOSHOW"));break;case"runFromCache":d.MVPD={id:c.id||d.get("CURRENT_PROVIDER_ID"),displayName:c.displayName||d.get("CURRENT_PROVIDER_NAME")},c.isActive?c.duration<1?(c.endServiceMessageAvailable&&d.set("ELVIS_ENDEDMESSAGE","true"),d.set("ELVIS_ENDEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewExpiredWithProvider(d.MVPD)):"checkAN"==d.Helper||"getAN"==d.Helper?d.Callback.authenticationCompleted(!0,e):"checkAZ"==d.Helper||"getAZ"==d.Helper?d.Callback.authorizationCompleted(!0,e,c.token):"checkANnAZ"==d.Helper&&d.Callback.authNAndAuthZCompleted(!0,!0,e):(c.terminatedServiceMessageAvailable&&(d.set("ELVIS_TERMINATEDMESSAGE","true"),c.terminatedServiceMessageAvailable=!1),d.set("ELVIS_TERMINATEDMESSAGE_TOSHOW","true"),d.API.signOut(),d.Callback.specialPreviewLockedWithProvider(d.MVPD))}d.Helper=null,this.save(),d.set("ELVIS_STATUS","isNotActive"),"showElvisSuccessScreen"!==d.get("onLoad")&&d.erase("onLoad"),TVEAuthOptions.interimScreen&&d.Overlay.hide("interimScreen")},setup:function(){var a=TVEAuth.Elvis,b=this.mvpdId=TVEAuth.get("CURRENT_ELVIS_MVPD_ID");a.isUserLoggedIn()&&!this.setupFlag?(this.setupFlag=!0,jQuery.ajax({url:TVEAuth.baseXboxUrl+"/setupdevice",data:{deviceType:"web",providerId:b,requestorId:TVEAuth.rID,uuid:TVEAuthElvisObject.ucid},dataType:"jsonp",jsonpCallback:"TVEAuth.Elvis.requestCompleted"}),a.isLoggining=!1):a.isLoggining&&setTimeout(a.setup,1500)},setupWithoutSocial:function(){TVEAuth.set("onLoad","setupElvis"),"getAZ"==TVEAuth.Helper?(this.Helper="checkAZ",TVEAuth.set("ELVIS_HELPER","checkAZ")):"getAN"==TVEAuth.Helper&&(this.Helper="checkAN",TVEAuth.set("ELVIS_HELPER","checkAN")),jQuery.ajax({url:TVEAuth.baseXboxUrl+"/setupdevice",data:{deviceType:"web",providerId:TVEAuth.MVPD.id,requestorId:TVEAuth.rID},dataType:"jsonp",jsonpCallback:"TVEAuth.Elvis.requestCompleted"}),this.isLoggining=!1},signIn:function(a){if(this.isLoggining=!0,this.isUserLoggedIn())this.getRoadBlocker();else{switch(a){case"twitter":jQuery(".flux4Widget .socialButtons .button.tw:eq(0)").trigger("click");break;case"facebook":jQuery(".flux4Widget .socialButtons .button.fb:eq(0)").trigger("click");break;case"mail":jQuery(".flux4Widget .fluxSingInButton:eq(0)").trigger("click")}TVEAuth.set("onLoad","setupElvis")}"getAZ"==TVEAuth.Helper?(this.Helper="checkAZ",TVEAuth.set("ELVIS_HELPER","checkAZ")):"getAN"==TVEAuth.Helper&&(this.Helper="checkAN",TVEAuth.set("ELVIS_HELPER","checkAN"))},loginCompleted:function(a){this.isLoggining&&(a&&a.acceptedFluxTerms?this.setup():this.getRoadBlocker())},getRoadBlocker:function(){Flux4.performRoadBlockerCheck({resultCallback:function(a){a&&TVEAuth.Elvis.setup()}})},signOut:function(){var a=TVEAuth.baseXboxUrl+"/logoutdevice",b=TVEAuthElvisObject.ucid,c=TVEAuth.rID;switch(c){case"NICK":case"NICKJR":var d="ELVIS_NONSOCIAL_"+c,e={status:"success","function":"logoutDevice"};TVEAuth.erase(d),this.requestCompleted(e);break;default:jQuery.ajax({url:a,data:{requestorId:c,uuid:b},dataType:"jsonp",jsonpCallback:"TVEAuth.Elvis.requestCompleted"})}TVEAuth.erase(["ELVIS_STATUS","ELVIS_ISLOGGEDIN","CURRENT_ELVIS_MVPD_ID","getAZ"]),TVEAuth.set("onLoad","checkLogout")},post:function(){},htmlLoginScreen:function(){return jQuery("<div id='tveapp_elvisLogin' class='tveapp_container'><div class='tveapp_header'><a class='tveapp_button tveapp_goBack'>Back</a><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><div class='tveapp_infoImg'><img src='images/steps.jpg'></div><h4>Please sign in with one of the following:</h4></div><div class='tveapp_footer'><ul class='tveapp_elvis_buttons_list'><li><a class='tveapp_elvis_button' elvisBy='facebook'>Facebook</a></li><li><a class='tveapp_elvis_button' elvisBy='twitter'>Twitter</a></li><li><a class='tveapp_elvis_button' elvisBy='mail'>Sign In / Register</a></li></ul></div></div>")},htmlSuccessScreen:function(){return jQuery("<div id='tveapp_elvisSuccess' class='tveapp_container'><div class='tveapp_header'><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><h4>Congratulations!</h4></div><div class='tveapp_footer'><ul class='tveapp_elvis_buttons_list'><li><a class='tveapp_elvis_button tveapp_close tveapp_watchNow'>Watch Now</a></li><li><a class='tveapp_elvis_button tveapp_logOut' onclick='TVEAuth.API.signOut();'>Log Out</a></li></ul></div></div>")},htmlSignOutScreen:function(){return jQuery("<div id='tveapp_elvisSignOut' class='tveapp_container'><div class='tveapp_header'><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><h4>Congratulations!</h4></div><div class='tveapp_footer'><ul class='tveapp_elvis_buttons_list'><li><a class='tveapp_elvis_button tveapp_close tveapp_watchNow'>Watch Now</a></li><li><a class='tveapp_elvis_button tveapp_logOut' onclick='TVEAuth.API.signOut();'>Log Out</a></li></ul></div></div>")},htmlEndedScreen:function(){return jQuery("<div id='tveapp_elvisEnded' class='tveapp_container'><div class='tveapp_header'><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><h4>Your full access has ended.</h4><p>Don't panic. We are working hard to get your TV&nbsp;provider to&nbsp;participate.</p></div><div class='tveapp_footer'><p>Please let "+TVEAuthElvisObject.displayName+" know you would like <br>access to more "+TVEAuth.rID+" content.</p><ul class='tveapp_elvis_buttons_list'><li><a class='tveapp_elvis_button'>Facebook</a></li><li><a class='tveapp_elvis_button'>Twitter</a></li><li><a class='tveapp_elvis_button'>Contact</a></li></ul></div></div>")},htmlTerminatedScreen:function(){return jQuery("<div id='tveapp_elvisTerminated' class='tveapp_container'><div class='tveapp_header'><a class='tveapp_button tveapp_close'>Cancel</a></div><div class='tveapp_content'><p>At the request of "+TVEAuthElvisObject.displayName+", "+TVEAuth.rID+" is no longer able to provide "+TVEAuthElvisObject.displayName+" customers with full access to the "+TVEAuthElvisObject.displayName+" website.</p><p>We are working hard to restore your full access.</p></div><div class='tveapp_footer'><p>Please let "+TVEAuthElvisObject.displayName+" know you would like <br>access to more "+TVEAuth.rID+" content.</p><ul class='tveapp_elvis_buttons_list'><li><a class='tveapp_elvis_button'>Facebook</a></li><li><a class='tveapp_elvis_button'>Twitter</a></li><li><a class='tveapp_elvis_button'>Contact</a></li></ul></div></div>")}},"undefined"==typeof Flux4&&(window.Flux4={}),Flux4.addEventListener=Flux4.addEventListener||function(){},Flux4.addEventListener("signIn",function(a,b){TVEAuth.Elvis.loginCompleted(b)}),Flux4.addEventListener("signUp",function(a,b){TVEAuth.Elvis.loginCompleted(b)}),Flux4.addEventListener("join",function(a,b){TVEAuth.Elvis.loginCompleted(b)}),TVEAuth.Error={isDebugOn:!1,init:function(a){this.isDebugOn=a,window.console||(console={log:function(a){}})},showMess:function(a){this.isDebugOn,TVEAuth.Callback.errorHappened(this.list[a])},list:{Ready:"DebugMode is runnig","Wrong RquestorID/ChannelID":"RequestorID and/or channelID is not define",verifyWhiteList:"Initialization error","localStorage Is Unavailable":"No access to the localStorage",loadList:"Can Not Load The White List","Bad Request":"Error: TVEAuth.Elvis: Bad Request"}},TVEAuth.API={init:function(a,b,c,d){TVEAuth.initialize(a,b,c,d),TVEAuth.setCallbacks()},checkAuthentication:function(){return TVEAuth.isReady()?(TVEAuth.Helper="checkAN",void TVEAuth.Auth.checkAN()):!1},checkAuthorization:function(){return TVEAuth.isReady()?(TVEAuth.Helper="checkAZ",TVEAuth.set("checkAZ","true"),void TVEAuth.Auth.checkAZ()):!1},checkAuthNAndAuthZ:function(){return TVEAuth.isReady()?(TVEAuth.Helper="checkANnAZ",TVEAuth.set("checkANnAZ","true"),void TVEAuth.Auth.checkAZ()):!1},getAuthentication:function(){if(!TVEAuth.isReady())return!1;var a=TVEAuth.get("onLoad");"User not Authorized Error"!=a&&"setupElvis"!=a&&(TVEAuth.Helper="getAN",TVEAuth.Auth.getAN())},getAuthorization:function(){if(!TVEAuth.isReady())return!1;var a=TVEAuth.get("onLoad");"User not Authorized Error"!=a&&"setupElvis"!=a&&(TVEAuth.Helper="getAZ",TVEAuth.Auth.getAZ())},signOut:function(){return TVEAuth.isReady()?(TVEAuth.set("LOGOUT_COMPLETED","true"),void TVEAuth.Auth.signOut()):!1},getProvidersList:function(){if(!TVEAuth.isReady())return!1;var a=TVEAuth.Providers;TVEAuth.Helper="getPL",TVEAuth.MVPD?displayProviderDialog(a.loadList()):(TVEAuth.set("isSetANStatusSkip","true"),TVEAuth.Auth.getAN(),a._set(null))},getCurrentProvider:function(){return TVEAuth.isReady()?(TVEAuth.set("getMvpd","true"),void TVEAuth.AE().getSelectedProvider()):!1},closeMvpdPicker:function(){return TVEAuth.isReady()?(jQuery("#tveapp_selectProvider .tveapp_close").click(),void TVEAuth.Callback.mvpdPickerClosed()):!1},getSignOutScreen:function(){if(!TVEAuth.isReady())return!1;var a=TVEAuth.MVPD||{};"true"==TVEAuth.get("ELVIS_ISLOGGEDIN")?TVEAuth.Overlay.show("elvisSignOut"):(TVEAuth.Overlay.show("signOut"),jQuery("#tveapp_signOutMvpdLogo img").remove(),jQuery("<img>",{"class":"signOutMvpdLogo",src:a.logoutLogoUrl,alt:a.id,title:a.displayName}).appendTo("#tveapp_signOutMvpdLogo"))}},TVEAuth.setCallbacks=function(){var a=TVEAuth.Callback=TVEAuth.Callback||{};a.componentLoaded=a.componentLoaded||function(){},a.authenticationCompleted=a.authenticationCompleted||function(a,b){},a.authorizationCompleted=a.authorizationCompleted||function(a,b,c){},a.authNAndAuthZCompleted=a.authNAndAuthZCompleted||function(a,b,c){},a.providersListReceived=a.providersListReceived||function(a){},a.currentProviderReceived=a.currentProviderReceived||function(a){},a.signOutCompleted=a.signOutCompleted||function(){},a.errorHappened=a.errorHappened||function(a){},a.providerSelected=a.providerSelected||function(a){},a.providerNotListedButtonSelected=a.providerNotListedButtonSelected||function(){},a.loginCompleted=a.loginCompleted||function(a,b){},a.learnMoreButtonClicked=a.learnMoreButtonClicked||function(){},a.mvpdPickerClosed=a.mvpdPickerClosed||function(){},a.startWatchingNowButtonClicked=a.startWatchingNowButtonClicked||function(){},a.specialPreviewPickedMethod=a.specialPreviewPickedMethod||function(a,b){},a.specialPreviewSucceedLoginForMethod=a.specialPreviewSucceedLoginForMethod||function(a,b){},a.specialPreviewExpiredWithProvider=a.specialPreviewExpiredWithProvider||function(a){},a.specialPreviewLockedWithProvider=a.specialPreviewLockedWithProvider||function(a){}},define("TVEAuth",["jquery"],function(a){return function(){var b;return b||a.TVEAuth}}(this)),define("app/common/tve",["_","Q","marionette","jquery","TVEAuth"],function(a,b,c,d,e){var f={initialize:function(){return this.NickApp=requirejs("app/app"),this.initializeAPI(),this.recentEvent=null,this.authenticated=null,this.authorized=null,this.currentProviderLogo=null,this.currentProvider=null,this.contentLocked=!0,this.triggerRedirect=!1,this.redirectUrl=null,this.hasBeenInitialized=!1,this},componentLoaded:function(){this.hasBeenInitialized=!0,this.checkAuthentication()},checkAuthentication:function(){e.API.checkAuthentication()},authenticationCompleted:function(a,b){this.authenticated=a,this.authorized=a,b&&"string"!=typeof b&&(this.currentProvider=b,this.currentProviderLogo=this.currentProvider.defaultLogoUrl,this.cobrandingLogoUrl=this.currentProvider.cobrandingLogoUrl,this.isElvisProvider="xfinity"===this.currentProvider.id||"XFINITY"===this.currentProvider.id||"SFPS"===this.currentProvider.id),this.checkAuthState()},authorizationCompleted:function(a,b,c){a!==this.authorized&&(this.authenticated=a,this.authorized=a,b&&"object"==typeof b&&(this.currentProvider=b,this.currentProviderLogo=this.currentProvider.defaultLogoUrl,this.isElvisProvider="xfinity"===this.currentProvider.id||"XFINITY"===this.currentProvider.id||"SFPS"===this.currentProvider.id),this.recentEvent="TVE:authorizationCompleted",this.authToken=c),this.checkAuthState()},authNAndAuthZCompleted:function(a,b,c){this.authenticated=a,this.authorized=b,this.recentEvent="TVE:authNAndAuthZCompleted",c&&(this.currentProvider=c)},providersListReceived:function(a){this.providersList=a},currentProviderReceived:function(a){a&&(this.currentProvider=a,this.currentProviderLogo=this.currentProvider.defaultLogoUrl,this.recentEvent="TVE:currentProviderReceived",this.toggleLogout())},signOutCompleted:function(){this.authenticated=!1,this.authorized=!1,this.recentEvent="TVE:signOutCompleted",this.currentProvider=null,this.currentProviderLogo=null,this.isElvisProvider=!1,this.checkAuthState()},errorHappened:function(a){"User Not Authenticated Error"===a&&(this.recentEvent="TVE:Error:UserNotAuthenticated",this.NickApp.execute("display-tve-modal")),"User not Authorized Error"===a&&(this.recentEvent="TVE:Error:UserNotAuthorized",this.NickApp.execute("display-tve-modal","login-fail"))},loginCompleted:function(a,b){this.authenticated=a,this.authorized=a,b&&"object"==typeof b&&(this.currentProvider=b,this.currentProviderLogo=this.currentProvider.defaultLogoUrl,this.cobrandingLogoUrl=this.currentProvider.cobrandingLogoUrl,this.isElvisProvider="xfinity"===this.currentProvider.id||"XFINITY"===this.currentProvider.id||"SFPS"===this.currentProvider.id),this.checkAuthState()},learnMoreButtonClicked:function(){this.NickApp.execute("display-tve-modal"),e.API.closeMvpdPicker()},providerSelected:function(a){d(window.document).trigger("kfarEvent",["tveMVPDSelected",a])},providerNotListedButtonSelected:function(){d(window.document).trigger("kfarEvent",["tveNoProvider"]),this.NickApp.execute("display-tve-modal","provider-not-listed"),e.API.closeMvpdPicker()},watchMoreButtonClicked:function(){this.redirectUrl&&this.triggerRedirect?this.NickApp.execute("change-path",this.redirectUrl):this.checkAuthState()},initializeAPI:function(){var b="NICKJR",c="NICKJR",d=!0,f=!1;e.Callback={componentLoaded:a.bind(this.componentLoaded,this),authenticationCompleted:a.bind(this.authenticationCompleted,this),authorizationCompleted:a.bind(this.authorizationCompleted,this),authNAndAuthZCompleted:a.bind(this.authNAndAuthZCompleted,this),providersListReceived:a.bind(this.providersListReceived,this),currentProviderReceived:a.bind(this.currentProviderReceived,this),signOutCompleted:a.bind(this.signOutCompleted,this),errorHappened:a.bind(this.errorHappened,this),providerSelected:a.bind(this.providerSelected,this),providerNotListedButtonSelected:a.bind(this.providerNotListedButtonSelected,this),loginCompleted:a.bind(this.loginCompleted,this),learnMoreButtonClicked:a.bind(this.learnMoreButtonClicked,this),startWatchingNowButtonClicked:a.bind(this.watchMoreButtonClicked,this)},e.API.init(b,c,d,f)},checkAuthState:function(){this.authenticated&&this.authorized?(this.NickApp.vent.trigger("TVE:unlock-content"),d(window.document).trigger("TVE:unlock-content")):(this.NickApp.vent.trigger("TVE:lock-content"),d(window.document).trigger("TVE:lock-content")),this.toggleLogout()},reportOnTVE:function(){({eventType:this.recentEvent,mvpd:this.currentProvider,loggedIn:this.authenticated,authorized:this.authorized,contentLocked:this.contentLocked})},doTveLogout:function(){e.API.signOut()},clearRedirect:function(){this.triggerRedirect=!1,this.redirectUrl=null},setRedirectUrl:function(a){"/tve-login/"!==a&&(this.redirectUrl=a,this.triggerRedirect=!0)},toggleLogout:function(){this.authenticated?this.NickApp.vent.trigger("TVE:displayLogout"):this.NickApp.vent.trigger("TVE:hideLogout")}};return f}),define("app/common/tve-utils/tve-settings",["_","jquery","Q","TVEAuth"],function(a,b,c,d){var e=/live-tv\b|tve-login\b|full-episode\b/,f={fullEpisode:/full-episode\b/,liveTv:/live-tv\b/,tveLogin:/tve-login\b/},g=function(a,c,e){if(a&&a.target){var f=b(a.currentTarget),g=f.data("auth-required");return g?(e.setRedirectUrl(c),d.API.checkAuthentication(),!e.authenticated||!e.authorized):!1}return!1},h=function(a,b,c){var e=c.authenticated&&c.authorized,f=requirejs("app/app");return f.vent.trigger("sidebar:hide"),e?(d.API.signOut(),!0):!c.authenticated&&!c.authorized};return{allPaths:e,TVEpaths:f,fullEpisode:g,tveLogin:h}}),define("app/common/tve-utils/tve-bumper",["_","jquery","app/common/tve","app/common/tve-utils/tve-settings"],function(a,b,c,d){var e,f={isTVEPath:function(a){return d.allPaths.test(a)},checkTVEaction:function(b,c){b.stopImmediatePropagation();var e=a.findKey(d.TVEpaths,function(a){return a.test(c)});return e?(this.tve.setRedirectUrl(c),d[e].call(this,b,c,this.tve)):!1},initialize:function(){return this.tve||(this.tve=c.initialize()),this}},g=function(){return e||(e=f.initialize()),e};return{initialize:g,getInstance:g}}),define("app/common/audio/audio-file",["_"],function(a){function b(a,b){var d=Object.create(c);return b=b||{},d.id=a.id,d.root=a.root||b.root||"",d.path=a.path,d}var c={root:"",path:"",id:""};return{create:b}}),define("app/common/audio/audio-library",["_","Q","./audio-file"],function(a,b,c){function d(a,b){var c=new Error(a);return c.audio=b,c}function e(a){return i[a.id]=a,a}function f(a,b){var f=c.create(a,b);return i[f.id]?d("Duplicated Audio Id",f):e(f)}function g(b){var c=i[b];return a.isUndefined(c)?d("Invalid Audio Id",c):c}function h(b){var c=i[b];return a.isUndefined(c)?d("Invalid Audio Id",c):(delete i[b],c)}var i={};return{add:f,get:g,remove:h}}),this.createjs=this.createjs||{},function(){var a=createjs.SoundJS=createjs.SoundJS||{};a.version="0.5.2",a.buildDate="Thu, 12 Dec 2013 23:33:37 GMT"}(),this.createjs=this.createjs||{},function(){var a=function(){},b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b._listeners=null,b._captureListeners=null,b.initialize=function(){},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a,b){if("string"==typeof a){var c=this._listeners;if(!c||!c[a])return!1;a=new createjs.Event(a)}if(a.target=b||this,a.bubbles&&this.parent){for(var d=this,e=[d];d.parent;)e.push(d=d.parent);var f,g=e.length;for(f=g-1;f>=0&&!a.propagationStopped;f--)e[f]._dispatchEvent(a,1+(0==f));for(f=1;g>f&&!a.propagationStopped;f++)e[f]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;
b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;a.currentTarget=this,a.eventPhase=b,a.removed=!1,e=e.slice();for(var f=0;c>f&&!a.immediatePropagationStopped;f++){var g=e[f];g.handleEvent?g.handleEvent(a):g(a),a.removed&&(this.off(a.type,g,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype;b.type=null,b.target=null,b.currentTarget=null,b.eventPhase=0,b.bubbles=!1,b.cancelable=!1,b.timeStamp=0,b.defaultPrevented=!1,b.propagationStopped=!1,b.immediatePropagationStopped=!1,b.removed=!1,b.initialize=function(a,b,c){this.type=a,this.bubbles=b,this.cancelable=c,this.timeStamp=(new Date).getTime()},b.preventDefault=function(){this.defaultPrevented=!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){createjs.indexOf=function(a,b){for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1}}(),this.createjs=this.createjs||{},function(){createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){function a(){throw"Sound cannot be instantiated"}function b(a,b){this.init(a,b)}function c(){this.isDefault=!0,this.addEventListener=this.removeEventListener=this.removeAllEventListeners=this.dispatchEvent=this.hasEventListener=this._listeners=this._interrupt=this._playFailed=this.pause=this.resume=this.play=this._beginPlaying=this._cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return!1},this.getVolume=this.getPan=this.getDuration=function(){return 0},this.playState=a.PLAY_FAILED,this.toString=function(){return"[Sound Default Sound Instance]"}}function d(){}var e=a;e.DELIMITER="|",e.INTERRUPT_ANY="any",e.INTERRUPT_EARLY="early",e.INTERRUPT_LATE="late",e.INTERRUPT_NONE="none",e.PLAY_INITED="playInited",e.PLAY_SUCCEEDED="playSucceeded",e.PLAY_INTERRUPTED="playInterrupted",e.PLAY_FINISHED="playFinished",e.PLAY_FAILED="playFailed",e.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],e.EXTENSION_MAP={m4a:"mp4"},e.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,e.defaultInterruptBehavior=e.INTERRUPT_NONE,e.alternateExtensions=[],e._lastID=0,e.activePlugin=null,e._pluginsRegistered=!1,e._masterVolume=1,e._masterMute=!1,e._instances=[],e._idHash={},e._preloadHash={},e._defaultSoundInstance=null,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._sendFileLoadEvent=function(a){if(e._preloadHash[a])for(var b=0,c=e._preloadHash[a].length;c>b;b++){var d=e._preloadHash[a][b];if(e._preloadHash[a][b]=!0,e.hasEventListener("fileload")){var f=new createjs.Event("fileload");f.src=d.src,f.id=d.id,f.data=d.data,e.dispatchEvent(f)}}},e.getPreloadHandlers=function(){return{callback:createjs.proxy(e.initLoad,e),types:["sound"],extensions:e.SUPPORTED_EXTENSIONS}},e.registerPlugin=function(a){try{}catch(b){}return e._registerPlugin(a)},e._registerPlugin=function(a){return e._pluginsRegistered=!0,null==a?!1:a.isSupported()?(e.activePlugin=new a,!0):!1},e.registerPlugins=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(e._registerPlugin(d))return!0}return!1},e.initializeDefaultPlugins=function(){return null!=e.activePlugin?!0:e._pluginsRegistered?!1:e.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},e.isReady=function(){return null!=e.activePlugin},e.getCapabilities=function(){return null==e.activePlugin?null:e.activePlugin._capabilities},e.getCapability=function(a){return null==e.activePlugin?null:e.activePlugin._capabilities[a]},e.initLoad=function(a,b,c,d,f){a=a.replace(f,"");var g=e.registerSound(a,c,d,!1,f);return null==g?!1:g},e.registerSound=function(a,c,d,f,g){if(!e.initializeDefaultPlugins())return!1;if(a instanceof Object&&(g=c,c=a.id,d=a.data,a=a.src),e.alternateExtensions.length)var h=e._parsePath2(a,"sound",c,d);else var h=e._parsePath(a,"sound",c,d);if(null==h)return!1;null!=g&&(a=g+a,h.src=g+h.src),null!=c&&(e._idHash[c]=h.src);var i=null;null!=d&&(isNaN(d.channels)?isNaN(d)||(i=parseInt(d)):i=parseInt(d.channels));var j=e.activePlugin.register(h.src,i);if(null!=j&&(null!=j.numChannels&&(i=j.numChannels),b.create(h.src,i),null!=d&&isNaN(d)?d.channels=h.data.channels=i||b.maxPerChannel():d=h.data=i||b.maxPerChannel(),null!=j.tag?h.tag=j.tag:j.src&&(h.src=j.src),null!=j.completeHandler&&(h.completeHandler=j.completeHandler),j.type&&(h.type=j.type)),0!=f)if(e._preloadHash[h.src]||(e._preloadHash[h.src]=[]),e._preloadHash[h.src].push({src:a,id:c,data:d}),1==e._preloadHash[h.src].length)e.activePlugin.preload(h.src,j);else if(1==e._preloadHash[h.src][0])return!0;return h},e.registerManifest=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.registerSound(a[d].src,a[d].id,a[d].data,a[d].preload,b);return c},e.removeSound=function(a,c){if(null==e.activePlugin)return!1;if(a instanceof Object&&(a=a.src),a=e._getSrcById(a),e.alternateExtensions.length)var d=e._parsePath2(a);else var d=e._parsePath(a);if(null==d)return!1;null!=c&&(d.src=c+d.src),a=d.src;for(var f in e._idHash)e._idHash[f]==a&&delete e._idHash[f];return b.removeSrc(a),delete e._preloadHash[a],e.activePlugin.removeSound(a),!0},e.removeManifest=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.removeSound(a[d].src,b);return c},e.removeAllSounds=function(){e._idHash={},e._preloadHash={},b.removeAll(),e.activePlugin.removeAllSounds()},e.loadComplete=function(a){if(e.alternateExtensions.length)var b=e._parsePath2(a,"sound");else var b=e._parsePath(a,"sound");return a=b?e._getSrcById(b.src):e._getSrcById(a),1==e._preloadHash[a][0]},e._parsePath=function(a,b,c,d){"string"!=typeof a&&(a=a.toString());var f=a.split(e.DELIMITER);if(f.length>1)try{}catch(g){}for(var h={type:b||"sound",id:c,data:d},i=e.getCapabilities(),j=0,k=f.length;k>j;j++){var l=f[j],m=l.match(e.FILE_PATTERN);if(null==m)return!1;var n=m[4],o=m[5];if(i[o]&&createjs.indexOf(e.SUPPORTED_EXTENSIONS,o)>-1)return h.name=n,h.src=l,h.extension=o,h}return null},e._parsePath2=function(a,b,c,d){"string"!=typeof a&&(a=a.toString());var f=a.match(e.FILE_PATTERN);if(null==f)return!1;for(var g=f[4],h=f[5],i=e.getCapabilities(),j=0;!i[h];)if(h=e.alternateExtensions[j++],j>e.alternateExtensions.length)return null;a=a.replace("."+f[5],"."+h);var k={type:b||"sound",id:c,data:d};return k.name=g,k.src=a,k.extension=h,k},e.play=function(a,b,c,d,f,g,h){var i=e.createInstance(a),j=e._playInstance(i,b,c,d,f,g,h);return j||i.playFailed(),i},e.createInstance=function(c){if(!e.initializeDefaultPlugins())return e._defaultSoundInstance;if(c=e._getSrcById(c),e.alternateExtensions.length)var d=e._parsePath2(c,"sound");else var d=e._parsePath(c,"sound");var f=null;return null!=d&&null!=d.src?(b.create(d.src),f=e.activePlugin.create(d.src)):f=a._defaultSoundInstance,f.uniqueId=e._lastID++,f},e.setVolume=function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),e._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterVolume(a)},e.getVolume=function(){return e._masterVolume},e.setMute=function(a){if(null==a||void 0==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0},e.getMute=function(){return this._masterMute},e.stop=function(){for(var a=this._instances,b=a.length;b--;)a[b].stop()},e._playInstance=function(a,b,c,d,f,g,h){if(b instanceof Object&&(c=b.delay,d=b.offset,f=b.loop,g=b.volume,h=b.pan,b=b.interrupt),b=b||e.defaultInterruptBehavior,null==c&&(c=0),null==d&&(d=a.getPosition()),null==f&&(f=0),null==g&&(g=a.volume),null==h&&(h=a.pan),0==c){var i=e._beginPlaying(a,b,d,f,g,h);if(!i)return!1}else{var j=setTimeout(function(){e._beginPlaying(a,b,d,f,g,h)},c);a._delayTimeoutId=j}return this._instances.push(a),!0},e._beginPlaying=function(a,c,d,e,f,g){if(!b.add(a,c))return!1;var h=a._beginPlaying(d,e,f,g);if(!h){var i=createjs.indexOf(this._instances,a);return i>-1&&this._instances.splice(i,1),!1}return!0},e._getSrcById=function(a){return null==e._idHash||null==e._idHash[a]?a:e._idHash[a]},e._playFinished=function(a){b.remove(a);var c=createjs.indexOf(this._instances,a);c>-1&&this._instances.splice(c,1)},createjs.Sound=a,b.channels={},b.create=function(a,c){var d=b.get(a);return null==d?(b.channels[a]=new b(a,c),!0):!1},b.removeSrc=function(a){var c=b.get(a);return null==c?!1:(c.removeAll(),delete b.channels[a],!0)},b.removeAll=function(){for(var a in b.channels)b.channels[a].removeAll();b.channels={}},b.add=function(a,c){var d=b.get(a.src);return null==d?!1:d.add(a,c)},b.remove=function(a){var c=b.get(a.src);return null==c?!1:(c.remove(a),!0)},b.maxPerChannel=function(){return f.maxDefault},b.get=function(a){return b.channels[a]};var f=b.prototype;f.src=null,f.max=null,f.maxDefault=100,f.length=0,f.init=function(a,b){this.src=a,this.max=b||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},f.get=function(a){return this._instances[a]},f.add=function(a,b){return this.getSlot(b,a)?(this._instances.push(a),this.length++,!0):!1},f.remove=function(a){var b=createjs.indexOf(this._instances,a);return-1==b?!1:(this._instances.splice(b,1),this.length--,!0)},f.removeAll=function(){for(var a=this.length-1;a>=0;a--)this._instances[a].stop()},f.getSlot=function(b){for(var c,d,e=0,f=this.max;f>e;e++){if(c=this.get(e),null==c)return!0;(b!=a.INTERRUPT_NONE||c.playState==a.PLAY_FINISHED)&&(0!=e?c.playState==a.PLAY_FINISHED||c.playState==a.PLAY_INTERRUPTED||c.playState==a.PLAY_FAILED?d=c:(b==a.INTERRUPT_EARLY&&c.getPosition()<d.getPosition()||b==a.INTERRUPT_LATE&&c.getPosition()>d.getPosition())&&(d=c):d=c)}return null!=d?(d._interrupt(),this.remove(d),!0):!1},f.toString=function(){return"[Sound SoundChannel]"},a._defaultSoundInstance=new c,d.init=function(){var a=window.navigator.userAgent;d.isFirefox=a.indexOf("Firefox")>-1,d.isOpera=null!=window.opera,d.isChrome=a.indexOf("Chrome")>-1,d.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1,d.isAndroid=a.indexOf("Android")>-1,d.isBlackberry=a.indexOf("Blackberry")>-1},d.init(),createjs.Sound.BrowserDetect=d}(),this.createjs=this.createjs||{},function(){function a(){this._init()}var b=a;b._capabilities=null,b.isSupported=function(){var a=createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry;return"file:"!=location.protocol||a||this._isFileXHRSupported()?(b._generateCapabilities(),null==b.context?!1:!0):!1},b._isFileXHRSupported=function(){var a=!0,b=new XMLHttpRequest;try{b.open("GET","fail.fail",!1)}catch(c){return a=!1}b.onerror=function(){a=!1},b.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{b.send()}catch(c){a=!1}return a},b._generateCapabilities=function(){if(null==b._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;if(window.webkitAudioContext)b.context=new webkitAudioContext;else{if(!window.AudioContext)return null;b.context=new AudioContext}b._compatibilitySetUp(),b.playEmptySound(),b._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=c.length;f>e;e++){var g=c[e],h=d[g]||g;b._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}b.context.destination.numberOfChannels<2&&(b._capabilities.panning=!1),b.dynamicsCompressorNode=b.context.createDynamicsCompressor(),b.dynamicsCompressorNode.connect(b.context.destination),b.gainNode=b.context.createGain(),b.gainNode.connect(b.dynamicsCompressorNode)}},b._compatibilitySetUp=function(){if(!b.context.createGain){b.context.createGain=b.context.createGainNode;var a=b.context.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn,a.__proto__.stop=a.__proto__.noteOff,this._panningModel=0}},b.playEmptySound=function(){var a=this.context.createBuffer(1,1,22050),b=this.context.createBufferSource();b.buffer=a,b.connect(this.context.destination),b.start(0,0,0)};var c=a.prototype;c._capabilities=null,c._volume=1,c.context=null,c._panningModel="equalpower",c.dynamicsCompressorNode=null,c.gainNode=null,c._arrayBuffers=null,c._init=function(){this._capabilities=b._capabilities,this._arrayBuffers={},this.context=b.context,this.gainNode=b.gainNode,this.dynamicsCompressorNode=b.dynamicsCompressorNode},c.register=function(a){this._arrayBuffers[a]=!0;var b=new createjs.WebAudioPlugin.Loader(a,this);return{tag:b}},c.isPreloadStarted=function(a){return null!=this._arrayBuffers[a]},c.isPreloadComplete=function(a){return!(null==this._arrayBuffers[a]||1==this._arrayBuffers[a])},c.removeSound=function(a){delete this._arrayBuffers[a]},c.removeAllSounds=function(){this._arrayBuffers={}},c.addPreloadResults=function(a,b){this._arrayBuffers[a]=b},c._handlePreloadComplete=function(){createjs.Sound._sendFileLoadEvent(this.src)},c.preload=function(a){this._arrayBuffers[a]=!0;var b=new createjs.WebAudioPlugin.Loader(a,this);b.onload=this._handlePreloadComplete,b.load()},c.create=function(a){return this.isPreloadStarted(a)||this.preload(a),new createjs.WebAudioPlugin.SoundInstance(a,this)},c.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},c._updateVolume=function(){var a=createjs.Sound._masterMute?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},c.getVolume=function(){return this._volume},c.setMute=function(){return this._updateVolume(),!0},c.toString=function(){return"[WebAudioPlugin]"},createjs.WebAudioPlugin=a}(),function(){function a(a,b){this._init(a,b)}var b=a.prototype=new createjs.EventDispatcher;b.src=null,b.uniqueId=-1,b.playState=null,b._owner=null,b._offset=0,b._delay=0,b._volume=1;try{Object.defineProperty(b,"volume",{get:function(){return this._volume},set:function(a){return null==Number(a)?!1:(a=Math.max(0,Math.min(1,a)),this._volume=a,void this._updateVolume())}})}catch(c){}b._pan=0;try{Object.defineProperty(b,"pan",{get:function(){return this._pan},set:function(a){return this._owner._capabilities.panning&&null!=Number(a)?(a=Math.max(-1,Math.min(1,a)),this._pan=a,void this.panNode.setPosition(a,0,-.5)):!1}})}catch(c){}b._duration=0,b._remainingLoops=0,b._delayTimeoutId=null,b._soundCompleteTimeout=null,b.gainNode=null,b.panNode=null,b.sourceNode=null,b._sourceNodeNext=null,b._muted=!1,b._paused=!1,b._startTime=0,b._endedHandler=null,b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._init=function(a,b){this._owner=b,this.src=a,this.gainNode=this._owner.context.createGain(),this.panNode=this._owner.context.createPanner(),this.panNode.panningModel=this._owner._panningModel,this.panNode.connect(this.gainNode),this._owner.isPreloadComplete(this.src)&&(this._duration=1e3*this._owner._arrayBuffers[this.src].duration),this._endedHandler=createjs.proxy(this._handleSoundComplete,this)},b._cleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),this._startTime=0,null!=window.createjs&&createjs.Sound._playFinished(this)},b._cleanUpAudioNode=function(a){return a&&(a.stop(0),a.disconnect(this.panNode),a=null),a},b._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._paused=!1,this._sendEvent("interrupted")},b._handleSoundReady=function(){if(null!=window.createjs){if(1e3*this._offset>this.getDuration())return void this.playFailed();this._offset<0&&(this._offset=0),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.gainNode.connect(this._owner.gainNode);var a=this._owner._arrayBuffers[this.src].duration;this.sourceNode=this._createAndPlayAudioNode(this._owner.context.currentTime-a,this._offset),this._duration=1e3*a,this._startTime=this.sourceNode.startTime-this._offset,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(a-this._offset)),0!=this._remainingLoops&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0))}},b._createAndPlayAudioNode=function(a,b){var c=this._owner.context.createBufferSource();return c.buffer=this._owner._arrayBuffers[this.src],c.connect(this.panNode),this._owner.context.currentTime,c.startTime=a+c.buffer.duration,c.start(c.startTime,b,c.buffer.duration-b),c},b.play=function(a,b,c,d,e,f){this._cleanUp(),createjs.Sound._playInstance(this,a,b,c,d,e,f)},b._beginPlaying=function(a,b,c,d){return null!=window.createjs&&this.src?(this._offset=a/1e3,this._remainingLoops=b,this.volume=c,this.pan=d,this._owner.isPreloadComplete(this.src)?(this._handleSoundReady(null),this._sendEvent("succeeded"),1):void this.playFailed()):void 0},b.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this._paused=!0,this._offset=this._owner.context.currentTime-this._startTime,this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),!0)},b.resume=function(){return this._paused?(this._handleSoundReady(null),!0):!1},b.stop=function(){return this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._offset=0,!0},b.setVolume=function(a){return this.volume=a,!0},b._updateVolume=function(){var a=this._muted?0:this._volume;return a!=this.gainNode.gain.value?(this.gainNode.gain.value=a,!0):!1},b.getVolume=function(){return this.volume},b.setMute=function(a){return null==a||void 0==a?!1:(this._muted=a,this._updateVolume(),!0)},b.getMute=function(){return this._muted},b.setPan=function(a){return this.pan=a,this.pan!=a?!1:void 0},b.getPan=function(){return this.pan},b.getPosition=function(){if(this._paused||null==this.sourceNode)var a=this._offset;else var a=this._owner.context.currentTime-this._startTime;return 1e3*a},b.setPosition=function(a){return this._offset=a/1e3,this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout)),this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||this._handleSoundReady(null),!0},b.getDuration=function(){return this._duration},b._handleSoundComplete=function(){return this._offset=0,0!=this._remainingLoops?(this._remainingLoops--,this._sourceNodeNext?(this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._startTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)):this._handleSoundReady(null),void this._sendEvent("loop")):void(null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")))},b.playFailed=function(){null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed"))},b.toString=function(){return"[WebAudioPlugin SoundInstance]"},createjs.WebAudioPlugin.SoundInstance=a}(),function(){function a(a,b){this._init(a,b)}var b=a.prototype;b.request=null,b.owner=null,b.progress=-1,b.src=null,b.originalSrc=null,b.result=null,b.onload=null,b.onprogress=null,b.onError=null,b._init=function(a,b){this.src=a,this.originalSrc=a,this.owner=b},b.load=function(a){null!=a&&(this.src=a),this.request=new XMLHttpRequest,this.request.open("GET",this.src,!0),this.request.responseType="arraybuffer",this.request.onload=createjs.proxy(this.handleLoad,this),this.request.onError=createjs.proxy(this.handleError,this),this.request.onprogress=createjs.proxy(this.handleProgress,this),this.request.send()},b.handleProgress=function(a,b){this.progress=a/b,null!=this.onprogress&&this.onprogress({loaded:a,total:b,progress:this.progress})},b.handleLoad=function(){this.owner.context.decodeAudioData(this.request.response,createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))},b.handleAudioDecoded=function(a){this.progress=1,this.result=a,this.src=this.originalSrc,this.owner.addPreloadResults(this.src,this.result),this.onload&&this.onload()},b.handleError=function(a){this.owner.removeSound(this.src),this.onerror&&this.onerror(a)},b.toString=function(){return"[WebAudioPlugin Loader]"},createjs.WebAudioPlugin.Loader=a}(),this.createjs=this.createjs||{},function(){function a(){this._init()}var b=a;b.MAX_INSTANCES=30,b._AUDIO_READY="canplaythrough",b._AUDIO_ENDED="ended",b._AUDIO_SEEKED="seeked",b._AUDIO_STALLED="stalled",b._capabilities=null,b.enableIOS=!1,b.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS&&!b.enableIOS)return!1;b._generateCapabilities();var a=b.tag;return null==a||null==b._capabilities?!1:!0},b._generateCapabilities=function(){if(null==b._capabilities){var a=b.tag=document.createElement("audio");if(null==a.canPlayType)return null;b._capabilities={panning:!0,volume:!0,tracks:-1};for(var c=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=c.length;f>e;e++){var g=c[e],h=d[g]||g;b._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}}};var c=a.prototype;c._capabilities=null,c._audioSources=null,c.defaultNumChannels=2,c.loadedHandler=null,c._init=function(){this._capabilities=b._capabilities,this._audioSources={}},c.register=function(a,b){this._audioSources[a]=!0;for(var c=createjs.HTMLAudioPlugin.TagPool.get(a),d=null,e=b||this.defaultNumChannels,f=0;e>f;f++)d=this._createTag(a),c.add(d);if(d.id=a,this.loadedHandler=createjs.proxy(this._handleTagLoad,this),d.addEventListener&&d.addEventListener("canplaythrough",this.loadedHandler),null==d.onreadystatechange)d.onreadystatechange=this.loadedHandler;else{var g=d.onreadystatechange;d.onreadystatechange=function(){g(),this.loadedHandler()}}return{tag:d,numChannels:e}},c._handleTagLoad=function(a){a.target.removeEventListener&&a.target.removeEventListener("canplaythrough",this.loadedHandler),a.target.onreadystatechange=null,a.target.src!=a.target.id&&createjs.HTMLAudioPlugin.TagPool.checkSrc(a.target.id)},c._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},c.removeSound=function(a){delete this._audioSources[a],createjs.HTMLAudioPlugin.TagPool.remove(a)},c.removeAllSounds=function(){this._audioSources={},createjs.HTMLAudioPlugin.TagPool.removeAll()},c.create=function(a){if(!this.isPreloadStarted(a)){var b=createjs.HTMLAudioPlugin.TagPool.get(a),c=this._createTag(a);c.id=a,b.add(c),this.preload(a,{tag:c})}return new createjs.HTMLAudioPlugin.SoundInstance(a,this)},c.isPreloadStarted=function(a){return null!=this._audioSources[a]},c.preload=function(a,b){this._audioSources[a]=!0,new createjs.HTMLAudioPlugin.Loader(a,b.tag)},c.toString=function(){return"[HTMLAudioPlugin]"},createjs.HTMLAudioPlugin=a}(),function(){function a(a,b){this._init(a,b)}var b=a.prototype=new createjs.EventDispatcher;b.src=null,b.uniqueId=-1,b.playState=null,b._owner=null,b.loaded=!1,b._offset=0,b._delay=0,b._volume=1;try{Object.defineProperty(b,"volume",{get:function(){return this._volume},set:function(a){null!=Number(a)&&(a=Math.max(0,Math.min(1,a)),this._volume=a,this._updateVolume())}})}catch(c){}b.pan=0,b._duration=0,b._remainingLoops=0,b._delayTimeoutId=null,b.tag=null,b._muted=!1,b._paused=!1,b._endedHandler=null,b._readyHandler=null,b._stalledHandler=null,b.loopHandler=null,b._init=function(a,b){this.src=a,this._owner=b,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleSoundReady,this),this._stalledHandler=createjs.proxy(this._handleSoundStalled,this),this.loopHandler=createjs.proxy(this.handleSoundLoop,this)},b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._cleanUp=function(){var a=this.tag;if(null!=a){a.pause(),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{a.currentTime=0}catch(b){}createjs.HTMLAudioPlugin.TagPool.setInstance(this.src,a),this.tag=null}clearTimeout(this._delayTimeoutId),null!=window.createjs&&createjs.Sound._playFinished(this)},b._interrupt=function(){null!=this.tag&&(this.playState=createjs.Sound.PLAY_INTERRUPTED,this._cleanUp(),this._paused=!1,this._sendEvent("interrupted"))},b.play=function(a,b,c,d,e,f){this._cleanUp(),createjs.Sound._playInstance(this,a,b,c,d,e,f)},b._beginPlaying=function(a,b,c,d){if(null==window.createjs)return-1;var e=this.tag=createjs.HTMLAudioPlugin.TagPool.getInstance(this.src);return null==e?(this.playFailed(),-1):(e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._offset=a,this.volume=c,this.pan=d,this._updateVolume(),this._remainingLoops=b,4!==e.readyState?(e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",e.load()):this._handleSoundReady(null),this._sendEvent("succeeded"),1)},b._handleSoundStalled=function(){this._cleanUp(),this._sendEvent("failed")},b._handleSoundReady=function(){if(null!=window.createjs){if(this._duration=1e3*this.tag.duration,this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._offset>=this.getDuration())return void this.playFailed();this._offset>0&&(this.tag.currentTime=.001*this._offset),-1==this._remainingLoops&&(this.tag.loop=!0),0!=this._remainingLoops&&(this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1),this.tag.loop=!0),this.tag.play()}},b.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||null==this.tag?!1:(this._paused=!0,this.tag.pause(),clearTimeout(this._delayTimeoutId),!0)},b.resume=function(){return this._paused&&null!=this.tag?(this._paused=!1,this.tag.play(),!0):!1},b.stop=function(){return this._offset=0,this.pause(),this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),!0},b.setMasterVolume=function(){return this._updateVolume(),!0},b.setVolume=function(a){return this.volume=a,!0},b._updateVolume=function(){if(null!=this.tag){var a=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;return a!=this.tag.volume&&(this.tag.volume=a),!0}return!1},b.getVolume=function(){return this.volume},b.setMasterMute=function(){return this._updateVolume(),!0},b.setMute=function(a){return null==a||void 0==a?!1:(this._muted=a,this._updateVolume(),!0)},b.getMute=function(){return this._muted},b.setPan=function(){return!1},b.getPan=function(){return 0},b.getPosition=function(){return null==this.tag?this._offset:1e3*this.tag.currentTime},b.setPosition=function(a){if(null==this.tag)this._offset=a;else{this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{this.tag.currentTime=.001*a}catch(b){return!1}this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)}return!0},b.getDuration=function(){return this._duration},b._handleSoundComplete=function(){this._offset=0,null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),this._sendEvent("complete"))},b.handleSoundLoop=function(){this._offset=0,this._remainingLoops--,0==this._remainingLoops&&(this.tag.loop=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)),this._sendEvent("loop")},b.playFailed=function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,this._cleanUp(),this._sendEvent("failed"))},b.toString=function(){return"[HTMLAudioPlugin SoundInstance]"},createjs.HTMLAudioPlugin.SoundInstance=a}(),function(){function a(a,b){this._init(a,b)}var b=a.prototype;b.src=null,b.tag=null,b.preloadTimer=null,b.loadedHandler=null,b._init=function(a,b){if(this.src=a,this.tag=b,this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200),this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this),this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler),null==this.tag.onreadystatechange)this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);else{var c=this.tag.onreadystatechange;this.tag.onreadystatechange=function(){c(),this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this)}}this.tag.preload="auto",this.tag.load()},b.preloadTick=function(){var a=this.tag.buffered,b=this.tag.duration;a.length>0&&a.end(0)>=b-1&&this.handleTagLoaded()},b.handleTagLoaded=function(){clearInterval(this.preloadTimer)},b.sendLoadedEvent=function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler),this.tag.onreadystatechange=null,createjs.Sound._sendFileLoadEvent(this.src)},b.toString=function(){return"[HTMLAudioPlugin Loader]"},createjs.HTMLAudioPlugin.Loader=a}(),function(){function a(a){this._init(a)}var b=a;b.tags={},b.get=function(c){var d=b.tags[c];return null==d&&(d=b.tags[c]=new a(c)),d},b.remove=function(a){var c=b.tags[a];return null==c?!1:(c.removeAll(),delete b.tags[a],!0)},b.removeAll=function(){for(var a in b.tags)b.tags[a].removeAll();b.tags={}},b.getInstance=function(a){var c=b.tags[a];return null==c?null:c.get()},b.setInstance=function(a,c){var d=b.tags[a];return null==d?null:d.set(c)},b.checkSrc=function(a){var c=b.tags[a];return null==c?null:void c.checkSrcChange()};var c=a.prototype;c.src=null,c.length=0,c.available=0,c.tags=null,c._init=function(a){this.src=a,this.tags=[]},c.add=function(a){this.tags.push(a),this.length++,this.available++},c.removeAll=function(){for(;this.length--;)delete this.tags[this.length];this.src=null,this.tags.length=0},c.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var a=this.tags.pop();return null==a.parentNode&&document.body.appendChild(a),a},c.set=function(a){var b=createjs.indexOf(this.tags,a);-1==b&&this.tags.push(a),this.available=this.tags.length},c.checkSrcChange=function(){for(var a=this.tags.length-1,b=this.tags[a].src;a--;)this.tags[a].src=b},c.toString=function(){return"[HTMLAudioPlugin TagPool]"},createjs.HTMLAudioPlugin.TagPool=a}(),define("soundjs",function(a){return function(){var b;return b||a.createjs}}(this)),define("app/common/audio/sound",["_","Q","soundjs","./audio-library"],function(a,b,c,d){function e(){return m.stop()}function f(a){a=a||"";var b=a[a.length-1];return"/"!==b?a+"/":a}function g(a){return f(a.root)+a.path}function h(a){var c=b.defer(),d=g(a);return m.registerSound(d,a.id),m.on("fileload",function(b){c.resolve(a)},null,a),m.on("error",function(a){var b=new Error("Failed loading audio");b.audio=a.data,c.reject(b)},null,a),c.promise}function i(b,c){var d=m.play(b);a.isFunction(c)&&d.on("complete",c);
}function j(a,b,c){a&&c.src!==a.src||i(a.id,b)}function k(a){try{return m.loadComplete(a)}catch(b){return!1}}function l(b,c,e){if(m.initializeDefaultPlugins()){var f=d.get(c);if(!(f instanceof Error)){var h=g(f);if(f.src=h,k(h))return void i(f.id,e);m.registerSound(h,f.id),m.on("fileload",a.bind(j,b,f,e))}}}var m=c.Sound;return{stopAll:e,load:h,play:l}}),define("app/common/audio/index",["_","Q","./audio-library","./sound"],function(a,b,c,d){function e(b,d){a.forEach(b,function(a){c.add(a,d)})}function f(a,b,c){return d.play(a,b,c)}function g(b,c,d,e,g){var h="click.playsound";b.$(d).on(h,function(b){var d=!0;a.isFunction(e)&&(d=e.call(this,b)),d&&f(this,c,g)}),b.on("close",function(){b.$(d).off(h)})}function h(){return d.stopAll()}return{load:e,play:f,stop:h,playOnView:g}}),define("app/common/route-links",["jquery","app/common/tve-utils/tve-bumper","app/common/audio/index"],function(a,b,c){function d(d){d.preventDefault(),f||(f=requirejs("app/app")),g||(g=b.getInstance());var e=a(d.currentTarget),h=e.attr("href");return g.isTVEPath(h)&&g.checkTVEaction(d,h)?(c.play(this,"grownups-message"),f.execute("display-tve-modal"),!1):(f.execute("change-path",h),!1)}function e(){return a(window.document).on(h.routeEvent,h.routeSelector,d)}var f,g,h={routeSelector:"a.route",routeEvent:"click.router"};return{settings:h,routeClick:d,setup:e}}),define("app/controllers/site-navigation",["_","jquery","marionette","app/common/loading","app/common/state"],function(a,b,c,d,e){function f(a,b){for(var c in b)a.appRoute(new RegExp("^("+c+")/?$"),"show"),a.appRoute(new RegExp("^("+c+")/#about"),"propertyAbout"),a.appRoute(new RegExp("^("+c+")/games/?$"),"propertyGames"),a.appRoute(new RegExp("^("+c+")/videos/?$"),"propertyVideos"),a.appRoute(new RegExp("^("+c+")/episodes/?$"),"propertyEpisodes"),a.appRoute(new RegExp("^("+c+")/pictures/?$"),"propertyPictures"),a.appRoute(new RegExp("^("+c+")/((?!videos|games|episodes|#about|vote|pictures|nominees)[^/]+)/?$"),"showCharacter")}var g,h=c.AppRouter.extend({appRoutes:{"":"home",logout:"logout",sitemap:"sitemap","style-guide(/)":"styleGuide","nick-radio(/)":"radio","games/:urlKey.html":"game","games(/)":"games","games/:filter(/)":"gamesHubFilter","videos/clip/:urlKey":"video","videos/playlist/play/:urlKey":"playlist","videos(/)":"videoHub","videos/:filter(/)":"videoHubFilter","pictures/:urlKey":"flipbook","kids-choice-sports/vote(/)":"kcsVoting","kids-choice-sports/vote/:category(/)":"kcsVoting","kids-choice-sports/nominees(/)":"kcsNominees","*notFound":"pageNotFound"}}),i=c.Controller.extend({initialize:function(){this.app=requirejs(e.get("appPath")),b(window).on("popstate",a.bind(this.back,this)).on("hashchange",a.bind(this.hashchange,this))},back:function(a){e.get("prevUrls").length>0&&(a.preventDefault(),this.app.execute("change-path","back",!0,null))},hashchange:function(a){var b=e.get("prevUrls");a.target.location.hash===b[b.length-1]&&this.back(a)},logout:function(){this.app.execute("do-logout","")},home:function(){this.app.execute("display-home","")},sitemap:function(){this.app.execute("display-sitemap","")},show:function(a){var b=this.options.propertyList,c=b[a],d=c.feedKey;if(d&&(a=d),"nicks-best-games-and-videos-2014"===a)return void this.bestEver(a);if("best14"===a)return void this.bestEver(a);var e={series:"display-show",categoryTag:"display-specials-hub"};this.app.execute(e[c.type],a)},showCharacter:function(a,b){var c=this.options.propertyList,d=c[a].feedKey;d&&(a=d);var e={urlKey:a,charKey:b};this.app.execute("display-show-character",e)},showFilter:function(a,b){var c={urlKey:a,type:b};this.app.execute("display-property-hub-filter",c)},propertyGames:function(a){var b=this.options.propertyList,c=b[a],d={series:"display-property-hub-games",categoryTag:"display-specials-hub-games"};this.app.execute(d[c.type],{urlKey:a,type:"game"})},propertyVideos:function(a){var b=this.options.propertyList,c=b[a],d={series:"display-property-hub-videos",categoryTag:"display-specials-hub-videos"};this.app.execute(d[c.type],{urlKey:a,type:"video"})},propertyPictures:function(a){this.app.execute("display-property-hub-pictures",{urlKey:a,type:"photos"})},propertyAbout:function(a){this.show(a)},propertyEpisodes:function(a){this.app.execute("display-property-hub-episodes",{urlKey:a,type:"episode"})},videoHub:function(){this.app.execute("display-video-hub","videos")},video:function(a){a.indexOf(".html")>0&&(a=a.split(".")[0]);var b={urlKey:a};this.app.execute("display-video",b)},flipbook:function(a){a.indexOf(".html")>0&&(a=a.split(".")[0]);var b={urlKey:a};this.app.execute("display-flipbook",b)},playlist:function(a){a.indexOf(".html")>0&&(a=a.split(".")[0]);var b={urlKey:a};this.app.execute("display-playlist",b)},videoHubFilter:function(a){this.app.execute("display-video-hub-filter",a)},styleGuide:function(){this.app.execute("display-style-guide","style-guide")},radio:function(){this.app.execute("display-radio","nick-radio")},games:function(){this.app.execute("display-games-hub","games")},gamesHubFilter:function(a){this.app.execute("display-games-hub-filter",a)},game:function(a){this.app.execute("display-game",a)},kcsVoting:function(a){var b={urlKey:"kids-choice-sports/vote"};this.app.execute("display-kcs-voting",b)},kcsNominees:function(){var a={urlKey:"kids-choice-sports/nominees"};this.app.execute("display-kcs-nominees",a)},bestEver:function(a){a=a||"nicks-best-games-and-videos-2014";var b={urlKey:a};this.app.execute("display-best-ever",b)},pageNotFound:function(a){this.app.execute("display-page-not-found",a)}}),j=function(a){if(!g){d.create(!0);var b=new i({propertyList:a.propertyList});g=new h({controller:b}),f(g,a.propertyList)}return g};return{start:j,get:j}}),function(a,b){"function"==typeof define&&define.amd?define("isoroutes",["Marionette"],function(c){return a.plugin=b(c)}):"object"==typeof exports?module.exports=b(require("Marionette")):a.isoroutes=b(Marionette)}(this,function(a){function b(a){return"function"==typeof a}function c(a){return a.routes.map(function(b){return b.controllerPath=a.controllerPath||"",b}),a}function d(a,c){var d,e=c(a.controller,a.controllerPath);if(a.method&&b(e[a.method])?d=e[a.method]:b(e)&&(d=e),!d){var f=new Error("invalid controller/method for path:"+a.route||"unknown");throw f.route=a,f}return d}function e(a,e,f){var g={};g.routes={};var h=b(f)?f:c;return a=h(a),a.routes.forEach(function(a,b,c){var f=d(a,e);g[a.method]=a.module=f}),a.notFound&&(a.notFound.module=d(a.notFound,e)),g}function f(a){var b=a.browser=a.browser||{};return b.removeLeadingSlash=b.removeLeadingSlash||!0,a}function g(a,b){return b=b||"",m(b+a)}function h(a,b){return b.browser.removeLeadingSlash&&0===a.indexOf("/")&&(a=a.substr(1)),a}function c(a){if(a.routes.map(function(b){return b.controllerPath=a.browser.controllerPath||a.controllerPath||"",b}),a.notFound){var b=a.notFound;b.controllerPath=a.browser.controllerPath||a.controllerPath||""}return a}function i(a){return function(b){return b.path=h(b.path,a),b}}function j(a,b,c){return function(d){var e=d.method||k();if(e){var f;f=c&&c.notFound?function(a){return a.module.call(null,a.meta)}(c.notFound):function(){throw new Error("Controller Failed")},b[e]=d.module(d.meta,f),a.appRoute(d.path,e)}}}function k(){var a=0;return function(){return"method"+a++}}function l(b){b=f(b);var d=(e(b,g,c),b.routes),h={},k=a.AppRouter.extend({controller:h}),l=new k;return b.notFound&&(b.notFound.path="*notFound",d.push(b.notFound)),d.reverse().map(i(b)).forEach(j(l,h,b)),l}var m=requirejs||require,k=k();return l}),define("routes",{express:{addLeadingSlash:!0,controllerPath:"./lib/"},browser:{removeLeadingSlash:!0,controllerPath:"app/"},notFound:{controller:"routes/not-found",method:"notFoundRoute",meta:{path:"errors/index",groups:["error-page"]}},routes:[{path:"/",controller:"routes/generic-route",method:"genericRoute",meta:{path:"home/index",groups:["home"]}},{path:"/sitemap/",controller:"routes/generic-route",method:"genericRoute",meta:{path:"sitemap/index",groups:["sitemap"]}},{path:"/games/",controller:"routes/generic-route",method:"genericRoute",meta:{path:"game-hub/index",groups:["game-hub","hub","games"]}},{path:"/games/html5/",controller:"routes/generic-route",method:"genericRoute",meta:{path:"game-player-html5/index",groups:["game-end-level","game-html5","end-level","games"]}},{path:"/:propKey/games/:urlKey/",controller:"routes/generic-route-property",method:"genericRouteProperty",meta:{path:"game-end-level/index",groups:["game-end-level","end-level","games"]}},{path:"/:propKey/games/:urlKey/*query",controller:"routes/generic-route-property",method:"genericRouteProperty",meta:{path:"game-end-level/index",groups:["game-end-level","end-level","games"]}},{path:"/videos/",controller:"routes/generic-route",method:"genericRoute",meta:{path:"video-hub/index",groups:["video-hub","hub","videos"]}},{path:"/videos/:urlKey/",controller:"routes/generic-route",method:"genericRoute",meta:{path:"playlist-end-level/index",groups:["video-end-level","video-clip","end-level","videos"]}},{path:"/:propKey/videos/:urlKey/",controller:"routes/generic-route-property",method:"genericRouteProperty",meta:{path:"video-end-level/index",groups:["video-end-level","video-clip","end-level","videos"]}},{path:"/:urlKey/episodes/",controller:"routes/property-episodes",method:"propertyHubEpisodes",meta:{property:{path:"property/index",viewFeedUrl:"propertyHubEpisodes"},specials:{path:"specials/index",viewFeedUrl:"specialsHubEpisodes"},groups:["property-episodes","property","episodes","videos"]}},{path:"/:urlKey/videos/",controller:"routes/property-videos",method:"propertyVideos",meta:{property:{path:"property-videos/index",viewFeedUrl:"propertyVideos"},specials:{path:"property-videos/index",viewFeedUrl:"specialVideos"},groups:["property-videos","property","videos"]}},{path:"/:urlKey/games/",controller:"routes/property-games",method:"propertyGames",meta:{property:{path:"property-games/index",viewFeedUrl:"propertyGames"},specials:{path:"property-games/index",viewFeedUrl:"specialGames"},groups:["property-games","property","games"]}},{path:"/:urlKey/:charKey/",controller:"routes/property-character",method:"propertyHubCharacter",meta:{path:"characters/index",groups:["property-character","characters"]}},{path:"/:urlKey/",controller:"routes/property",method:"property",meta:{property:{path:"property/index",viewFeedUrl:"property"},specials:{path:"property/index",viewFeedUrl:"special"},groups:["property-hub","property"]}}]}),define("app/controllers/routes",["app/common/route-links","app/controllers/site-navigation","isoroutes","routes"],function(a,b,c,d){function e(b){return f||(c(d),a.setup(),f=!0),f}var f=!1;return{start:e}}),define("breakpoints",{landscape:"(orientation: landscape)",portrait:"(orientation: portrait)","mobile-small-portrait":"(max-width: 320px) and (orientation: portrait)","mobile-small-landscape":"(max-height: 320px) and (orientation: landscape)","mobile-landscape":"(max-height: 499px) and (orientation: landscape)","mobile-portrait":"(max-width: 759px) and (orientation: portrait)",phablet:"(min-width: 480px)","base-landscape":"(min-height: 500px) and (orientation: landscape)","base-portrait":"(min-width: 760px) and (orientation: portrait)","ipad-portrait":"(device-width: 768px) and (device-height: 1024px) and (orientation:portrait)","ipad-landscape":"(device-width: 768px) and (device-height: 1024px) and (orientation:landscape)","small-landscape":"(min-height: 500px) and (max-height: 599px) and (orientation: landscape)","regular-landscape":"(min-height: 600px) and (max-height: 699px) and (orientation: landscape)","tall-landscape":"(min-height: 700px) and (max-height: 899px) and (orientation: landscape)","large-landscape":"(min-height: 900px) and (orientation: landscape)","tablet-portrait":"(min-width: 760px) and (orientation: portrait)","tablet-landscape":"(min-height: 600px) and (max-height: 768px) and (orientation: landscape)","desktop-landscape":"(min-height:768px) and (orientation: landscape)","desktop-portrait":"(min-width: 768px) and (orientation: portrait)"}),define("app/controllers/event-controller",["_","jquery","marionette","app/common/state","breakpoints"],function(a,b,c,d,e){var f,g=c.Controller.extend({initialize:function(){var c=d.get("appPath");this.app=requirejs(c),this.resizeTimeoutId=-1,this.isPortrait=null;var f=b(window);f.on("resize.EventController",b.proxy(this.resizeEvent,this)).on("scroll.EventController",b.proxy(this.scrollEvent,this)),this.windowScrollTop=f.scrollTop(),this.windowScrollLeft=f.scrollLeft(),this.registerMediaQuery("orientation","device:orientation","(orientation: portrait)","portrait","landscape"),a.each(e,a.bind(this.registerMediaQueryBreakpoint,this)),this.setDeviceState()},registerMediaQuery:function(a,b,c,e,f){var g=window.matchMedia(c),h=this,i=function(c,g){var i,j=!1;"undefined"!=typeof f?(j=!0,i=c.matches?e:f):c.matches&&(j=!0,i=e),j&&(d.set(a,i),g||h.app.vent.trigger(b,i))};i(g,!0),g.addListener(i)},registerMediaQueryBreakpoint:function(a,b){var c=window.matchMedia(a),e=this,f=function(a,c){var f=window.matchMedia("all and (orientation:landscape)").matches?"landscape":"portrait",g=d.get("deviceBreakpoint");a.matches&&g!==b&&(d.set("deviceBreakpoint",b),d.set("orientation",f),c||e.app.vent.trigger("device:breakpoint",b,f,g))};f(c,!0),c.addListener(f)},resizeEvent:function(a){-1===this.resizeTimeoutId&&(this.resizeTimeoutId=setTimeout(b.proxy(this.triggerLazyResizeEvent,this),500)),this.app.vent.trigger("device:resize")},scrollEvent:function(a){var c=b(window),d=c.scrollTop(),e=this.windowScrollTop!==d,f=c.scrollLeft(),g=this.windowScrollLeft!==f;this.windowScrollTop=d,this.windowScrollLeft=f,this.app.vent.trigger("page:scroll",d,f,e,g)},triggerLazyResizeEvent:function(){clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=-1,this.app.vent.trigger("device:lazyresize"),this.setDeviceState()},setDeviceState:function(){var a=-1!==d.get("deviceBreakpoint").indexOf("mobile");a!==d.get("isMobile")&&(d.set("isMobile",a),this.app.vent.trigger("device:isMobile",a))}}),h=function(){if(f)throw new Error("EventController is not supposed to be initialized more than once");return f=new g};return{initialize:h}}),function(a){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),define("app/common/utils",["jquery","_","underscore.string","app/common/get-json-script","jquery.cookie","app/common/state"],function(a,b,c,d,e){function f(a){return a.val().trim()}function g(b,c){var d=a(window).scrollTop();return c=c||0,d<b.offset().top-c||0===d}function h(){var a=window.location.hostname,b={dev:a.indexOf("localhost")>=0||a.indexOf("d.mtvi.com")>=0||a.indexOf("dev")>=0,q:a.indexOf("q.mtvi.com")>=0};return b.q?"release":b.dev?"dev":"live"}function i(b,c,d){a.cookie(b,c,d)}function j(b,c){var d=a(".signin-text"),e=a(".signout-bubble"),f=a(".status-arrow.logout");"login"===b?(d.data("current",c),d.removeClass("is-animated-zoom"),e.removeClass("hide"),f.removeClass("hide")):(d.data("current",d.data("default")),d.addClass("is-animated-zoom"),e.addClass("hide"),f.addClass("hide")),d.text(d.data("current"))}function k(b,c){if(b="string"==typeof b?a(b):b,c="string"==typeof c?a(c):c,b.length>0&&c.length>0)for(var d=b.height();c.outerHeight()>d;)c.text(l(null,c.text()))}function l(a,b){var c=b.replace(/\W*\s(\S)*$/,"...");return c}function m(b){return b="string"==typeof b?a(b):b,c.endsWith(b.text(),"...")}function n(){if("undefined"!=typeof r)return r;var a=window.navigator.userAgent;return r=a.indexOf("Trident")>-1||a.indexOf("MSIE")>-1}function o(){switch(h()){case"release":return"http://www.nick-q.mtvi.com";case"dev":return"http://www.nick-d.mtvi.com";case"live":return"http://www.nick.com"}}function p(a){var c=a.replace(/\//g,"").split("#"),e="",f=c[0];c.length>1&&(e=c[1]);var g=d("head #propertyList");if(g[f]){var h=g[f];if(h.adfree){var i=b.filter(Object.keys(g),function(a){return g[a].adfree===!1&&g[a].seriesKey===h.seriesKey});return i.length>0?"/"+i[0]+e:a}return a}return a}function q(){try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(a){return!1}}var r,s={dev:"",release:"nick-dev-release-4nqdw2s43u.elasticbeanstalk.com",live:"nick.com"},t={USERNAME_INVALID_CHARACTER:"error-char",USERNAME_LONG:"error-long",USERNAME_SHORT:"error-short",USERNAME_TAKEN:"error-taken",PASSWORD_SHORT:"error-short",PASSWORD_EMPTY:"error-empty",PASSWORD_INVALID:"error-invalid",ANSWER_EMPTY:"error-empty",ANSWER_SHORT:"error-invalid"};return{url:s,error:t,getInput:f,isOnScreen:g,getEnv:h,setCookie:i,toggleNav:j,trimTextBlock:k,textBlockWasTruncated:m,isIEAny:n,getFullDomain:o,getAdSupportedDomain:p,supportsLocalStorage:q}}),define("app/views/modules/common/page-bumper",["jquery","backbone","marionette","app/common/state","app/common/utils"],function(a,b,c,d,e){var f=c.ItemView.extend({template:"modules/common/page-bumper",className:"bumper-modal",events:{"click .bumper-cancel":"cancelBumper","click .bumper-continue-button":"continueBumper"},initialize:function(){var a=d.get("appPath");this.app=requirejs(a),this.model=new b.Model({link:this.options.link,isExternalLink:this.options.isExternalLink===!0,isNewWindow:this.options.isNewWindow===!0})},display:function(){this.render(),a("body").append(this.el)},cancelBumper:function(){this.close()},continueBumper:function(){var a=this.model.get("link"),c=this.model.get("isNewWindow"),f=this.model.get("isExternalLink"),g=d.get("prevUrls")||[],h=e.getAdSupportedDomain(b.history.location.pathname);c?window.open(a,"_blank"):f===!0?window.location.assign(a):Modernizr.history?(b.history.history.replaceState({},document.title,h),g.push(h),d.set({urlChanged:!0,prevUrls:g}),b.history.navigate(a,{trigger:!0})):this.app.execute("change-path",a,!0,null),this.close()}});return f}),define("app/controllers/adfree-controller",["jquery","marionette","app/common/state","app/views/modules/common/page-bumper"],function(a,b,c,d){var e,f=b.Controller.extend({initialize:function(){var a=c.get("appPath");this.app=requirejs(a),this.adfree=!1,this.listenTo(c,"change",this.setupAdfreePage)},setupAdfreePage:function(){c.get("isAdfree")?this.adfree||(a('a[href*="http://"]:not([ignore-adfree])').on("click",this.adfreeLinkClick),this.adfree=!0,a(".footer-legal").addClass("adfree").find('a:contains("(AD)")').closest(".item").addClass("adfree-link"),a(".footer-list").addClass("adfree").find('a:contains("(AD)")').closest(".footer-mamabar-item-text").addClass("adfree-link")):(a('a[href*="http://"]').off("click",this.adfreeLinkClick),this.adfree=!1,a(".footer-legal").removeClass("adfree"))},adfreeLinkClick:function(b){b.preventDefault();var c=a(this),e=c.attr("href"),f="_blank"===c.attr("target"),g=!c.hasClass("route"),h=new d({link:e,isExternalLink:g,isNewWindow:f});h.display()}}),g=function(){if(e)throw new Error("AdfreeController is not supposed to be initialized more than once");return e=new f};return{initialize:g}}),define("app/common/kfar/kfar-event",["_","jquery"],function(a,b){function c(a,b,c){try{return b.apply(a,c)}catch(d){return!1}}function d(b,d){var e=window.KFAR;e&&a.isFunction(e[b])&&c(e,e[b],d)}function e(){var b=a.toArray(arguments),c=b.shift();return d(c,b)}return{trigger:e}}),define("app/common/kfar/page-report",["jquery","app/common/tve-utils/tve-bumper"],function(a,b){function c(){}function d(b){var c=a(".metadata[data-"+b+"]").data(b)||"";return a.trim(c)}function e(b){var c=a(".kids-reporting[data-"+b+"]").data(b)||"";return a.trim(c)}function f(a){var c=b.getInstance(),d={},e=window.localStorage.getItem("TVEauthorized"),f=window.localStorage.getItem("TVEmvpd");return d.loggedIn=c.tve.authenticated,d.authorized=c.tve.authorized,d.mvpd=f?f:"",d.authorized="true"===e?!0:!1,d.contentLocked=a,d}function g(b){b=b||{};var d,g=new c;return g.url=window.location.pathname,a.isEmptyObject(b)?(g.seriesUrlKey=e("seriesurlkey"),g.contentType=e("contenttype"),g.urlKey=e("urlkey"),g.id=e("id"),g.title=e("title"),g.rating=e("rating"),g.filter=e("filter"),g.episode=e("episode")?"true":"false",g.videoType=e("videotype"),d=a(".video-player").data("auth-required")):(g.seriesUrlKey=b.seriesUrlKey,g.contentType=b.contentType,g.urlKey=b.urlKey,g.id=b.feedId,g.title=b.title,g.rating=b.rating,g.filter=b.filter,g.episode=b.episode?"true":"false",g.videoType=b.videoType,d=b.authRequired),g.TVE=f(d),g}return{PageReport:c,getMetadata:d,create:g}}),define("app/common/kfar/report-events",["jquery","./kfar-event","./page-report","app/common/tve-utils/tve-bumper"],function(a,b,c,d){function e(a){var c;c=[].concat(a.reportType,a.report),b.trigger.apply(null,c)}function f(){var a=d.getInstance();a.tve.currentProvider.displayName;"undefined"!=typeof Storage&&(window.localStorage.setItem("TVEauthorized","true"),window.localStorage.setItem("TVEmvpd",a.tve.currentProvider.displayName))}function g(){"undefined"!=typeof Storage&&(window.localStorage.removeItem("TVEauthorized"),window.localStorage.removeItem("TVEmvpd"))}function h(a){var d=a.report,e=c.create(d);b.trigger("reportPage",e)}function i(a){var d=a.report,e=c.create(d);b.trigger("reportAlpha",e)}function j(a){var d=a.report,e=c.create(d);b.trigger("reportOpenPropertyCarousel",e)}function k(a){var d=a.report;if("account"===d.type)return b.trigger("siteAccountReport",d),!1;var e=c.create(d);e.isModal=!0,e.modalType=d.modalType||"",e.modalStep=d.modalStep||"",d.authRequired===!1||d.authRequired===!0?e.TVE.contentLocked=d.authRequired:e.TVE.contentLocked="true"===c.getMetadata("auth-required"),b.trigger("reportPage",e)}var l={};return l.defaultHandler=e,a(window.document).on("TVE:lock-content",g),a(window.document).on("TVE:unlock-content",f),l.reportPageView=h,l.reportAlpha=i,l.reportOpenPropertyCarousel=j,l.reportModalView=k,l}),define("app/common/kfar/index",["./report-events"],function(a){return{handlers:a}}),define("app/commands/change-path",["jquery","backbone","app/common/state","app/common/utils","app/views/modules/common/page-bumper"],function(a,b,c,d,e){var f=function(a,f,g){var h=c.get("appPath"),i=requirejs(h),j=b.history.getHash(),k=window.navigator.userAgent,l=k.indexOf("Trident")>-1||k.indexOf("MSIE")>-1,m=a.indexOf("nick-radio")>-1;if(c.get("isAdfree")&&!f){var n=new e({link:a,isExternalLink:a.indexOf("www.")>-1,isNewWindow:"_blank"===g});return void n.display()}if(Modernizr.history&&!l&&d.supportsLocalStorage()&&!m){var o,p,q=c.get("prevUrls"),r="back"===a;if(r){if(a=q[q.length-1],q.pop(),"undefined"==typeof a)return;a=d.getAdSupportedDomain(a),b.history.navigate(a,{trigger:!0})}else o=window.location.pathname,p=window.location.hash,o!==a&&q.push(o+p);c.set({urlChanged:!0,prevUrls:q}),i.vent.trigger("startPageLoad",{time:Date.now()});var s=b.history.fragment;if("undefined"!=typeof s&&0!==s.indexOf("/")&&(s="/"+s),c.get("timeTraveling")===!0&&s===a)b.history.loadUrl(a);else{if(s===a)return void i.vent.trigger("jumpToFirstPage");if(o===a&&"about"===j)return history.pushState({},"",a),void b.history.loadUrl(a);b.history.navigate(a,{trigger:!0,replace:!1})}}else{var o=window.location.pathname;if(a.indexOf(o)>-1&&-1!=a.indexOf("#"))return window.location.assign(a),void location.reload();a===o?i.vent.trigger("jumpToFirstPage"):window.location.assign(a)}};return f}),define("app/commands/display-home",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("home",b)};return b}),define("app/commands/display-video-hub",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("video-hub",b)};return b}),define("app/common/page-filters",["_"],function(a){function b(b,c){if("undefined"==typeof c.filters)return c;var d=a.findWhere(c.filters,{active:!0});d&&(d.active=!1);var e=a.findWhere(c.filters,{url:b});if(e&&(e.active=!0,"Hub page"===c.contentType?c.meta.pageTitle=e.title:e.title!==c.meta.pageTitle&&(c.activeFilterTitle=e.title)),!e){if("Hub page"===c.contentType)return;a.find(c.filters,function(d){if(d.children){var e=a.findWhere(d.children,{url:b})||"";e&&(d.active=!0,c.activeFilterTitle=e.title)}})}return c}var c={};return c.selectFilter=b,c}),define("app/commands/display-video-hub-filter",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"video-hub",urlKey:d,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:"videos",filters:[d],hydraFilterPrefix:"videosHub_"};return b.setView(f)};return d}),define("app/commands/display-video",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("video-end-level",b)};return b}),define("app/commands/display-flipbook",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("flipbook-end-level",b)};return b}),define("app/commands/display-playlist",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("playlist-end-level",b)};return b}),define("app/commands/display-show",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("property",b)};return b}),define("app/commands/display-show-character",["app/controllers/view-controller"],function(a){var b=function(b){var c={layout:"character",request:b,viewFeedUrl:"characterPage"};return a.setView(c)};return b}),define("app/commands/display-property-hub-games",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"property-games",urlKey:d.urlKey,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d,viewFeedUrl:"propertyHubGames"};return b.setView(f)};return d}),define("app/commands/display-property-hub-videos",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"property-videos",urlKey:d.urlKey,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d,viewFeedUrl:"propertyHubVideos"};return b.setView(f)};return d}),define("app/commands/display-property-hub-episodes",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"property",urlKey:d.urlKey,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d,viewFeedUrl:"propertyHubEpisodes"};return b.setView(f)};return d}),define("app/commands/display-property-hub-pictures",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"property",urlKey:d.urlKey,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d,viewFeedUrl:"propertyHubPictures"};return b.setView(f)};return d}),define("app/commands/display-style-guide",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("style-guide",b)};return b}),define("app/commands/display-radio",["app/controllers/view-controller"],function(a){var b=function(a){window.location.assign("/nick-radio/")};return b}),define("app/commands/display-games-hub",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("games-hub",b)};return b}),define("app/common/games-category-list",["_","./get-json-script"],function(a,b){function c(){if(!g){var a=!0;g=b(f.dataSelector,a)}return g}function d(b,c){var d=a.findWhere(c,{urlKey:b});if(!d)throw new Error("Game Category with urlKey "+b+"not found");return d}function e(a){var b=c();return d(a,b)}var f={dataSelector:"head #games-category-list"},g=null;return{getCategory:e}}),define("app/commands/display-games-hub-filter",["_","app/controllers/view-controller","app/common/page-filters","app/common/games-category-list"],function(a,b,c,d){var e=function(e){var f,g,h=["top-games"],i={urlKey:"games"};if(-1!==h.indexOf(e))f="gamesHub_";else{var j=d.getCategory(e);i.urlKey=e,i.gameGenre=j.id,e="categories",g="gamesHub_category"}var k=window.location.pathname,l={layout:"games-hub",urlKey:e,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,k),request:i,hydraFilterPrefix:f,viewFeedUrl:g};return b.setView(l)};return e}),define("app/commands/display-game",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("game-end-level",b)};return b}),define("app/commands/display-game-frame",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("game-end-level-frame",b)};return b}),+function(a){var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]!==a.target&&!this.$element.has(a.target).length&&this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),
this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),define("bootstrap",["jquery"],function(a){return function(){var b;return b||a.bootstrap}}(this)),define("app/views/modules/common/modal-wizard",["jquery","app/common/templating","backbone","marionette","bootstrap","app/common/state","app/controllers/routes"],function(a,b,c,d,e,f,g){var h=d.Layout.extend({template:"modules/header/login",className:"modal",ui:{title:"#modal-title",close:"#close"},regions:{currentStep:".current-step"},events:{"click #close":"this.onCloseModalWizard"},initialize:function(){this.steps={},this.data={},this.app=requirejs(f.get("appPath")),this.listenTo(this,"close",this.onCloseModalWizard),this.listenTo(f,"change:urlChanged",this.onUrlChange),this.listenTo(c.history,"route",this.onUrlChange)},display:function(){document.documentElement.className.indexOf("modal-open")<0?(this.render(),a("body").append(this.el),document.documentElement.className+=" modal-open ",this.$el.modal({show:!0}),this.$el.on("hidden.bs.modal",a.proxy(this.close,this)),this.trigger("after:display")):this.close()},onCloseModalWizard:function(){this.$el.modal("hide"),document.documentElement.className=document.documentElement.className.replace("modal-open","").replace("tveapp_modalOpened",""),this.app.vent.trigger("modal:close"),this.close()},onUrlChange:function(a){this.$el.modal("hide")},addStep:function(a,b){this.steps[a]=b},showStep:function(a){var b=this.steps[a],c=new b({wizard:this}),d=this;c.$("[data-title]").length&&c.once("render",function(){var a=c.$("[data-title]");a.hide(),d.ui.title.html(a.html())}),this.currentStep.show(c)}});return h}),define("app/common/key-codes",[],function(){var a={UP_ARROW:38,DOWN_ARROW:40,LEFT_ARROW:37,RIGHT_ARROW:39,ESCAPE:27,SPACEBAR:32,CTRL:17,ALT:18,TAB:9,SHIFT:16,CAPS_LOCK:20,WINDOWS_KEY:91,WINDOWS_OPTION_KEY:93,BACKSPACE:8,HOME:36,END:35,INSERT:45,DELETE:46,PAGE_UP:33,PAGE_DOWN:34,ENTER:13};return a}),define("app/common/validation",["_","underscore.string","app/common/utils"],function(a,b,c){function d(a){this.ui=a,this.validators={},this.uiValidators=this.uiValidators||{}}return d.prototype.validate=function(a,b){var c,d,e,f=!1,g=this.uiValidators;for(d in g)if(c=g[d],e=a[d],f=c.test.call(b||e,e),!f){c.fail.call(b||e,e);break}return f},d.prototype.validateAll=function(a,b){var c,d,e,f,g=!0,h=this.uiValidators;for(d in h)c=h[d],e=a[d],f=c.test.call(b||e,e),f||(g=!1,c.fail.call(b||e,e));return g},d.prototype.addValidation=function(a,b,c){this.uiValidators[a]={test:b,fail:c}},d.prototype.hasValidator=function(a){return"undefined"!=typeof this.uiValidators[a]},d.isNotEmpty=function(b){return!a.isEmpty(c.getInput(b))},d.hasActiveMember=function(a){return a.hasClass("active")},d.hasSelectedOption=function(a){return void 0!==a.val()},d.isValidPassword=function(a){var b=c.getInput(a),d=b.replace(/\D/g,""),e=new RegExp("[^A-Za-z0-9_]");return b.length>2&&d.length<6&&!e.test(b)},d.isValidUsername=function(a){var b=c.getInput(a),d=new RegExp("[^A-Za-z0-9_]");return d.test(b)?!1:b.length<3||b.length>10?!1:!0},d.passwordsMatch=function(b){return a.isEqual(c.getInput(this.ui.passConfirm),c.getInput(this.ui.password))&&!a.isEmpty(c.getInput(this.ui.password))},d}),function(a,b){function c(a){return f="SM4 Plugin: "+a,l(document.location.search)?void("undefined"!=typeof console):!1}if(a.fn.sm4)return!1;var d,e,f,g=[],h={},i=1,j="0.2.1",k=!1,l=function(a){return"boolean"==typeof a?void(k=a):k===!0?!0:a.match(/[\?|&]?enableWidgetsDebug=true[&]?/)},m=function(){var f=d.staging?"https://web.archive.org/web/20150728212158/http://widgets4.flux-staging.com/Core":"https://web.archive.org/web/20150728212158/http://widgets4.flux.com/Core",h=[];window.jQuery&&h.push("includeJquery=false"),d.FBJDK&&h.push("loadFacebookJDK=false"),l(document.location.search)&&h.push("enableWidgetsDebug=true"),h.length&&(f=f+"?"+h.join("&")),e=!0,b.Flux4=b.Flux4||{},b.Flux4.eventListeners=b.Flux4.eventListeners||{},b.Flux4.eventListeners.coreInitialized=function(){if(c("coreInitialized event"),g.length>0)for(var b=0;b<g.length;b++)g[b].call(void 0,window.Flux4);a("*").trigger("sm4:coreLoad",[!0]),e=!1};var i=document.createElement("script"),j=document.getElementsByTagName("script")[0];i.setAttribute("id",d.ucid),i.setAttribute("widgets4Debug","true"),d.culture&&i.setAttribute("culture",d.culture),i.src=f,d.testing?d.testing({src:i.src,id:i.getAttribute("id"),widgets4Debug:i.getAttribute("widgets4Debug"),culture:i.getAttribute("culture")}):j.parentNode.insertBefore(i,j)},n=function(e){var f=a(e);f.data("_guid")||f.data("_guid",i++);var g=f.data("_guid"),j=f.data("widget"),k=f.data("contenturi");if(d.widgets[j]){var l=a.extend({},d.widgets[j].opts);k&&(l.contentUri=k,l.contentId=k),h[g]!==j+"|"+(k||i)?(h[g]=j+"|"+(k||i),f.empty(),f.one("sm4:widget:create",function(){c("creating: "+d.widgets[j].name+" with opts: "),c("undefined"==typeof JSON?l:JSON.stringify(l,null,2)),l.container=e,b.Flux4.createWidget(d.widgets[j].name,l,function(a){d.widgets[j].onLoad&&d.widgets[j].onLoad(a),c(d.widgets[j].name+" success"),f.trigger("sm4:widget:load",[a,!0,d.widgets[j].name,l])})}),f.trigger("sm4:widget:create",[d.widgets[j].name,l])):(c(d.widgets[j].name+" fail"),f.trigger("sm4:widget:failed",[!1,!0,d.widgets[j].name,l]))}};a.fn.sm4=function(h){var i;return"debug"===h?{version:j,debugMode:l,logMessage:f,sm4Callbacks:g}:"function"==typeof h?(window.Flux4&&window.Flux4.createWidget?h.call(void 0,window.Flux4):g.push(h),this):h?void 0:b.MTVN&&b.MTVN.conf&&b.MTVN.conf.sm4?(d=b.MTVN.conf.sm4,d.ucid?(i=this.not(function(){return d.widgets[a(this).data("widget")]?!1:!0}),i.length&&(b.Flux4&&b.Flux4.createWidget?(a("*").trigger("sm4:coreLoad",[!0]),i.each(function(){n(this)})):(i.one("sm4:coreLoad",function(){n(this)}),e||m())),this):(c("no ucid configured"),this)):(c("no configuration"),this)}}(window.jQuery,window),define("jquery.sm4",["jquery"],function(a){return function(){var b;return b||a.$}}(this)),define("app/models/auth",["jquery","Q","backbone","_","app/common/utils","jquery.cookie","jquery.sm4"],function(a,b,c,d,e){var f=c.Model.extend({url:"/auth",defaults:{authToken:null,banned:null,displayName:null,domain:null,loggedIn:!1,signature:null,fluxDisabled:!0,timeStamp:null,username:null},initialize:function(b){var c=a.cookie("authToken"),d=a.cookie("username"),e=a.cookie("syncToken");c&&d&&this.set({authToken:c,loggedIn:!0,username:d,displayName:d,signature:e})},doLoginRequest:function(a){return this.url="/auth",this.save(a,{success:function(a,b){return b},error:function(a,b){return b},wait:!0})},doRegisterRequest:function(a){return this.url="/reg",this.save(a,{success:function(a,b){return b},error:function(a,b){return b},wait:!0})},logout:function(){this.clear(),this.set("loggedIn",!1)}});return f}),define("app/controllers/auth-controller",["jquery","marionette","Q","_","app/common/state","app/common/utils","app/models/auth","jquery.cookie","jquery.sm4"],function(a,b,c,d,e,f,g){var h,i=b.Controller.extend({initialize:function(b){this.authState=new g,this.app=requirejs(e.get("appPath")),this.listenTo(this.authState,"change:fluxDisabled",this.syncSm4State),a(window).one("sm4:coreLoad",a.proxy(this.sm4CoreLoad,this)),a(".sm4.userbar-widget").sm4()},sm4CoreLoad:function(a){var b=window.Flux4;this.authState.set({fluxDisabled:!window.Flux4,sm4LoggedIn:!1}),b.eventListeners=b.eventListeners||{},b.eventListeners.onBeforeSignIn=d.bind(this.showSignInRoadblock,this)},showSignInRoadblock:function(){this.app.execute("display-login","")},createAccount:function(a){return this.authState.clear(),this.authState.doRegisterRequest(a)},clearCookies:function(){a.cookie("authToken",null,{path:"/",expires:-1}),a.cookie("username",null,{path:"/",expires:-1}),a.cookie("syncToken",null,{path:"/",expires:-1}),a.cookie("gender",null,{path:"/",expires:-1})},login:function(a){this.setCookies(a),f.toggleNav("login",a.user.username),this.syncSm4State()},logout:function(){this.authState.logout(),this.clearCookies(),f.toggleNav("logout",""),this.syncSm4State()},setCookies:function(a){var b=(f.getEnv(),"/"),c=new Date;c.setDate(c.getDate()+1),this.authState.set({authToken:a.auth.token,banned:a.auth.banReason,domain:b,displayName:a.user.displayName,gender:a.user.gender,loggedIn:!0,username:a.user.username,signature:a.signature,timeStamp:a.ts}),f.setCookie("authToken",a.auth.token,{domain:"",path:"/",expires:c,secure:""}),f.setCookie("username",a.user.username,{domain:"",path:"/",secure:""}),f.setCookie("gender",a.user.gender,{domain:"",path:"/",secure:""}),f.setCookie("syncToken",a.signature,{domain:"",path:"/",secure:""})},updateSm4SyncData:function(a){return a.error?new Error("sync operation failed"):(this.authState.set({username:a.username,signature:a.signature,timeStamp:a.ts}),f.setCookie("username",a.username,{domain:"",path:"/",secure:""}),f.setCookie("gender",a.user.gender,{domain:"",path:"/",secure:""}),f.setCookie("syncToken",a.signature,{domain:"",path:"/",secure:""}),this.authState.get("signature"))},getSm4SyncToken:function(a,b){if(b>6e4){var e={op:"sm4_sync",user:a};return this.authState.doLoginRequest(e).then(d.bind(this.updateSm4SyncData,this))}return c(this.authState.get("signature"))},isSyncNeeded:function(){if(!this.authState.get("fluxDisabled")){var a=window.Flux4.getContext();if(a)return!!this.authState.get("loggedIn")!=!!a.user}return!1},checkPageReload:function(){window.location.pathname.indexOf("message-boards")>-1&&window.location.reload()},syncSm4State:function(a){!this.authState.get("fluxDisabled")&&this.isSyncNeeded()&&(this.authState.get("loggedIn")?this.doSync():c.fcall(window.Flux4.signOut).then(d.bind(this.checkPageReload,this)))},doSync:function(){var b={timestamp:this.authState.get("timeStamp")||0,current:Date.now(),username:a.cookie("username")};this.getSm4SyncToken(b.username,b.current-b.timestamp).then(d.bind(this.flux4Sync,this)).fail(function(a){})},flux4Sync:function(b){if("error"!=typeof b){var c=this.authState.get("timeStamp");window.Flux4.syncExternalAuth(a.cookie("username"),c,c,b,d.bind(this.checkPageReload,this))}}}),j=function(){return h||(h=new i),h};return{initialize:j,getInstance:j}}),define("app/controllers/reporting",["jquery"],function(a){function b(){this.url="",this.seriesUrlKey="",this.contentType="",this.categoryTag=[],this.TVE={}}function c(b){var c=a(".metadata[data-"+b+"]").data(b)||"";return a.trim(c)}function d(a){a=a||{};var d=new b;return d.url=window.location.pathname,d.seriesUrlKey=a.seriesUrlKey||c("series-url-key"),d.contentType=a.contentType||c("content-type"),d.categoryTag=a.categoryTags||c("category-tag").split(","),d.categoryTitles=a.categoryTitles||c("category-titles").split(","),d.isModal=a.isModal||!1,a.authRequired===!1||a.authRequired===!0?k.contentLocked=a.authRequired:k.contentLocked="true"===c("auth-required"),d.TVE=k,d}function e(b){var c=d(b);j.pageReport=c,a(window.document).trigger("kfarEvent",["reportPage",c])}function f(b){if("account"===b.type)return a(window.document).trigger("kfarEvent",["siteAccountReport",b]),!1;var c=d(b);c.isModal=!0,c.modalType=b.modalType||"",c.modalStep=b.modalStep||"",a(window.document).trigger("kfarEvent",["reportPage",c])}function g(b){var c=a(b.currentTarget).data("cr");return c&&a.cookie("trackedClick",c,{path:"/"}),!0}function h(a){k=a}function i(){a(window.document).on("click.clickTracking","[data-cr]",null,g)}var j={},k={eventType:null,mvpd:null,loggedIn:!1,authorized:!1,contentLocked:!1};return j.PageReport=b,j.pageReport=null,j.trigger=function(b,c){c.method=b,a(window.document).trigger("reporting",c)},j.reportPageView=e,j.reportModalView=f,j.updateTVEObject=h,j.initialize=i,j}),define("app/views/modules/common/wizard-item-view",["marionette","app/common/validation"],function(a,b){var c=a.ItemView.extend({initialize:function(a){this.validator=new b(this.ui),this.wizard=a.wizard},validate:function(){return this.$(".has-error").removeClass("has-error"),this.ui.dialogError.addClass("hidden"),this.validator.validate(this.ui,this)},validateAll:function(){return this.validator.validateAll(this.ui,this)},showError:function(a){var b=this.$(a.data("error-hint"));b.removeClass("hidden"),a.addClass("has-error")},serializeData:function(){return this.wizard.data||{}}});return c}),define("app/views/modules/header/login-views/sign-in",["jquery","Q","_","app/common/state","app/common/templating","app/common/key-codes","app/common/utils","app/common/validation","app/controllers/auth-controller","app/controllers/reporting","app/views/modules/common/wizard-item-view","jquery.sm4"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k.extend({template:"modules/header/login/sign-in",ui:{authError:"#auth-error",dialogError:".dialog-error",userName:"#user-name",password:"#password",forgotPassword:"#forgot-password"},events:{"focusout #user-name":"onInputBlur","focusout #password":"onInputBlur","click #login":"onLogin","click #forgot-password":"onForgotPassword","click #signup":"onSignUp",keypress:"onKeypress"},initialize:function(a){k.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments));var b=d.get("appPath");this.app=requirejs(b),this.validator=new h(this.ui),this.auth=i.getInstance(),this.validator.addValidation("userName",h.isNotEmpty,this.showError),this.validator.addValidation("password",h.isNotEmpty,this.showError)},onShow:function(a){this.ui.userName.focus();var b={type:"account",linkName:"Sign in start",events:"event4"};j.reportModalView(b)},onLogin:function(a){var b=this.validate();if(b){var d=this.ui.userName.val().trim(),e=this.ui.password.val().trim(),f={username:d,password:e,op:"login"};this.auth.authState.doLoginRequest(f).then(c.bind(this.onLoginResponse,this))}},onForgotPassword:function(a){this.wizard.$el.modal("hide"),this.app.execute("display-recover-password")},onKeypress:function(a){if(a.which===f.ENTER){a.preventDefault();var b=document.activeElement.id;switch(b){case"forgot-password":this.onForgotPassword();break;case"login":this.onLogin();break;case"signup":this.onSignUp();break;case"password":this.onLogin()}}},onSignUp:function(a){this.wizard.$el.modal("hide"),this.app.execute("display-register")},onLoginResponse:function(a){if(a.error)this.onLoginFail(a);else{this.auth.login(a),this.wizard.$el.modal("hide");var b={type:"account",linkName:"Sign in Complete",events:"event3"};j.reportModalView(b)}},onLoginFail:function(a){this.ui.authError.removeClass("hidden").addClass("show"),this.ui.password.addClass("has-error"),this.ui.userName.addClass("has-error");var b={type:"account",linkName:"Sign in Error",events:"event4"};j.reportModalView(b)}});return l}),define("app/views/modules/header/login-dialog",["jquery","app/common/templating","app/views/modules/common/modal-wizard","app/views/modules/header/login-views/sign-in"],function(a,b,c,d){var e=c.extend({template:"modules/common/modal-dialog",id:"login-modal",className:"modal login-dialog",initialize:function(){c.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.addStep("signIn",d),this.listenTo(this,"after:display",this.onAfterDisplay)},onAfterDisplay:function(){this.showStep("signIn")}});return e}),define("app/commands/display-login",["app/views/modules/header/login-dialog"],function(a){var b=function(){var b=new a;b.display()};return b}),define("app/views/modules/header/recover-password/username",["jquery","_","app/common/state","app/common/templating","Q","app/common/key-codes","app/common/validation","app/controllers/auth-controller","app/controllers/reporting","app/views/modules/common/wizard-item-view"],function(a,b,c,d,e,f,g,h,i,j){var k=j.extend({template:"modules/header/recover-password/username",ui:{answer:"#answer",userName:"#user-name",unameError:"#uname-error",dialogError:".dialog-error",back:"#back",next:"#next"},events:{"click #back":"onBack","click #next":"onNext",keypress:"onKeypress"},initialize:function(a){j.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.validator=new g(this.ui),this.auth=h.getInstance(),this.validator.addValidation("userName",g.isNotEmpty,this.showError)},onBack:function(a){this.wizard.$el.modal("hide");var b=c.get("appPath");requirejs(b).execute("display-login")},onKeypress:function(a){if(a.which===f.ENTER){a.preventDefault();var b=document.activeElement.id;switch(b){case"back":this.onBack();break;case"next":this.onNext();break;case"user-name":this.onNext()}}},onNext:function(a){var c=this.validate();c&&(this.username=this.ui.userName.val().trim(),this.getQuestion(this.username).then(b.bind(this.testResponse,this)))},onShow:function(){var a={type:"account",linkName:"Password Recovery Start",events:""};i.reportModalView(a)},getQuestion:function(a){var b={username:a,op:"get_passq"};return this.auth.authState.doLoginRequest(b)},testResponse:function(a){if(a.error){this.ui.userName.addClass("has-error"),this.ui.unameError.removeClass("hidden").addClass("show");var b={type:"account",linkName:"Password Recovery Username Error",events:""};i.reportModalView(b)}else{this.wizard.data.hintQuestion=a.response.question.text,this.wizard.data.username=this.username,this.wizard.showStep("question");var b={type:"account",linkName:"Password Recovery Question",events:""};i.reportModalView(b)}}});return k}),define("app/views/modules/header/recover-password/question",["jquery","_","app/common/templating","app/common/key-codes","app/common/validation","app/controllers/auth-controller","app/views/modules/common/wizard-item-view","app/controllers/reporting"],function(a,b,c,d,e,f,g,h){var i=g.extend({template:"modules/header/recover-password/question",ui:{answer:"#answer",dialogError:".dialog-error",recoverError:"#recover-error",back:"#back",submit:"#submit"},events:{"click #back":"onBack","click #submit":"onSubmit",keypress:"onKeypress"},initialize:function(a){g.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.auth=f.getInstance(),this.validator.addValidation("answer",e.isNotEmpty,this.showError)},onBack:function(a){this.wizard.showStep("username")},onKeypress:function(a){if(a.which===d.ENTER){a.preventDefault();var b=document.activeElement.id;switch(b){case"back":this.onBack();break;case"submit":this.onSubmit();break;case"answer":this.onSubmit()}}},onSubmit:function(a){var b=this.validate(),c=this;b&&this.getPass(this.ui.answer.val().trim()).done(function(a){c.testResponse(a)})},getPass:function(a){var b={username:this.ui.answer.attr("data-uname"),answer:a,op:"get_pword"};return this.auth.authState.doLoginRequest(b)},testResponse:function(a){if(a.error){this.ui.answer.addClass("has-error"),this.ui.recoverError.removeClass("hidden").addClass("show");var b={type:"account",linkName:"Password Recovery Question Error",events:""};h.reportModalView(b)}else this.wizard.data.password=a.response.password,this.wizard.data.username=a.response.username,this.wizard.showStep("complete")}});return i}),define("app/views/modules/header/recover-password/complete",["jquery","_","app/common/state","app/common/templating","app/common/key-codes","app/common/utils","app/controllers/auth-controller","app/controllers/reporting","app/views/modules/common/wizard-item-view"],function(a,b,c,d,e,f,g,h,i){var j=i.extend({template:"modules/header/recover-password/complete",ui:{password:"#password",login:"#login"},events:{"click #login":"onFinish",keypress:"onKeypress"},initialize:function(a){i.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments));var b=c.get("appPath");this.app=requirejs(b),this.auth=g.getInstance()},onKeypress:function(a){a.which===e.ENTER&&(a.preventDefault(),this.onFinish())},onFinish:function(){var a=this.ui.password.attr("data-uname"),c=this.ui.password.text();this.login(a,c).done(b.bind(this.onLoginSuccess,this))},onShow:function(){var a={type:"account",linkName:"Password Recovery Success",events:""};h.reportModalView(a)},login:function(a,b){var c={username:a,password:b,op:"login"};return this.auth.authState.doLoginRequest(c)},onLoginSuccess:function(a){this.auth.login(a),this.wizard.$el.modal("hide");var b={type:"account",linkName:"Sign in Complete",events:"event3"};h.reportModalView(b)}});return j}),define("app/views/modules/header/recover-password-dialog",["jquery","app/common/templating","app/views/modules/common/modal-wizard","app/views/modules/header/recover-password/username","app/views/modules/header/recover-password/question","app/views/modules/header/recover-password/complete"],function(a,b,c,d,e,f){var g=c.extend({template:"modules/common/modal-dialog",id:"recover-password-modal",className:"modal recover-dialog",initialize:function(){c.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.addStep("username",d),this.addStep("question",e),this.addStep("complete",f),this.listenTo(this,"after:display",this.onAfterDisplay)},onAfterDisplay:function(){this.showStep("username")}});return g}),define("app/commands/display-recover-password",["app/views/modules/header/recover-password-dialog"],function(a){var b=function(){var b=new a;b.display()};return b}),define("app/views/modules/header/registration/register",["jquery","_","Q","app/common/templating","app/common/utils","app/common/key-codes","app/common/validation","app/controllers/auth-controller","app/controllers/reporting","app/views/modules/common/wizard-item-view"],function(a,b,c,d,e,f,g,h,i,j){var k=j.extend({template:"modules/header/create-account/create-account",ui:{boy:"#boy",girl:"#girl",userName:"#user-name",check:".check",dialogError:".dialog-error",genderError:"#gender-error-hint",unameError:"#uname-error-hint",tooltip:"#valid-error-hint"},events:{"click #next":"onNext","click .check":"toggleGender","focus #user-name":"onUserNameFocus","blur #user-name":"onUserNameBlur",keypress:"onKeypress"},initialize:function(a){j.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.validator=new g(this.ui),this.validator.addValidation("check",g.hasActiveMember,this.showError),this.validator.addValidation("userName",g.isNotEmpty,this.showError)},onKeypress:function(a){if(a.which===f.ENTER){a.preventDefault();var b=document.activeElement.id;switch(b){case"next":this.onNext();break;case"user-name":this.onNext()}}},onQuestionResponse:function(a){var b=a.response.questions;b.length>0&&(this.wizard.data.questions=b,this.wizard.showStep("create-account"))},onUserNameFocus:function(a){this.ui.userName.removeClass("has-error"),this.ui.unameError.addClass("hidden"),this.ui.tooltip.removeClass("hidden")},onUserNameBlur:function(a){this.ui.tooltip.addClass("hidden")},onNext:function(){this.ui.tooltip.addClass("hidden");var a=this.validateAll(),c=h.getInstance();a&&(this.wizard.data.username=e.getInput(this.ui.userName),this.wizard.data.gender=this.ui.boy.hasClass("active")?"M":"F",c.authState.doRegisterRequest({op:"get_questions"}).then(b.bind(this.onQuestionResponse,this)))},onShow:function(){this.ui.check.removeClass("active");var a={type:"account",linkName:"Registration Start",events:"event5"};i.reportModalView(a)},hasGender:function(a){return this.ui.check.hasClass("active")},toggleGender:function(b){this.ui.check.removeClass("has-error"),this.ui.genderError.addClass("hidden");var c=a(b.currentTarget).data("gender");"M"===c?this.ui.boy.hasClass("active")?this.ui.boy.removeClass("active"):(this.ui.boy.addClass("active"),this.ui.girl.removeClass("active")):"F"===c&&(this.ui.girl.hasClass("active")?this.ui.girl.removeClass("active"):(this.ui.girl.addClass("active"),this.ui.boy.removeClass("active")))}});return k}),define("app/views/modules/header/registration/create-account",["Q","_","app/common/templating","app/common/key-codes","app/common/utils","app/common/validation","app/controllers/auth-controller","app/controllers/reporting","app/views/modules/common/wizard-item-view"],function(a,b,c,d,e,f,g,h,i){var j=i.extend({template:"modules/header/create-account/create-new",ui:{checks:".confirm-check",dialogError:".dialog-error",available:"#check-uname",userName:"#user-name",unameError:"#user-name-error-hint",unameCheck:"#user-name-check",password:"#password",passwordError:"#password-error-hint",passConfirm:"#pass-confirm",questionSelect:"#recover-q-select",selectArrow:"#recover-q-arrow",recoverAnswer:"#recover-a",qTooltip:"#question-hint",tosCheck:"#confirm-tos",privacyLink:"#privacy-link",tosLink:"#tos-link"},events:{"click #check-uname":"checkAvailable","click #register-submit":"clearErrors","click #confirm-tos":"toggleToSCheck","focus #username":"addValidation","focus #password":"addValidation","focus #pass-confirm":"addValidation","focus #recover-a":"addValidation","focus #recover-q-select":"toggleTooltip","mousedown #recover-q-arrow":"toggleDropdown","blur #password":"validateInput","blur #pass-confirm":"validateInput","blur #recover-a":"validateInput","blur #recover-q-select":"toggleTooltip","blur #user-name":"onUsernameBlur",keypress:"onKeypress"},initialize:function(a){i.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.validators={userName:f.isValidUsername,password:f.isValidPassword,passConfirm:f.passwordsMatch,questionSelect:f.hasSelectedOption,recoverAnswer:f.isNotEmpty,tosCheck:f.hasActiveMember},this.errors={userName:this.testUsername,password:this.showPasswordError,passConfirm:this.showPasswordConfirmError,questionSelect:this.showError,recoverAnswer:this.showRecoverAnswerError,tosCheck:this.showErrorCheck},this.validator=new f(this.ui)},addValidation:function(a){var c,d="#"+a.target.id;for(var e in this.ui)if(b.isEqual(this.ui[e].selector,d)){c=e;break}var f=this.ui[c];this.validator.hasValidator(c)?(this.hideCheck(f),this.hideError(f)):this.validator.addValidation(c,this.validators[c],this.errors[c])},addRemainingValidators:function(){for(var a in this.validators)this.validator.hasValidator(a)||this.validator.addValidation(a,this.validators[a],this.errors[a])},checkAvailable:function(a){a&&a.preventDefault();var c=f.isValidUsername(this.ui.userName);if(c){this.hideError(this.ui.userName);var d=g.getInstance(),h=e.getInput(this.ui.userName),i={op:"check_uname",username:h};d.authState.doRegisterRequest(i).then(b.bind(this.onUsernameResponse,this))}},clearErrors:function(a){$(".has-error").removeClass("has-error"),this.ui.dialogError.addClass("hidden"),window.setTimeout(b.bind(this.onSubmit,this),500)},hideError:function(a){var b=a.data("error-hint");$(b).addClass("hidden"),a.removeClass("has-error")},hideCheck:function(a){var b=a.data("valid-check");$(b).addClass("hidden")},onKeypress:function(a){if(a.which===d.ENTER){a.preventDefault();var b=document.activeElement.id;switch(b){case"check-uname":this.checkAvailable();break;case"register-submit":this.clearErrors();break;case"recover-a":this.clearErrors();break;case"confirm-tos":this.clearErrors()}}},onUsernameResponse:function(a){a.response.valid===!1?(this.ui.unameError.html(this.ui.unameError.data("error-invalid")),this.showError(this.ui.userName),this.reportHint()):a.response.taken===!0?(this.ui.unameError.html(this.ui.unameError.data("error-taken")),this.showError(this.ui.userName),this.reportHint()):(this.hideError(this.ui.userName),this.ui.unameCheck.removeClass("hidden"))},onRegisterResponse:function(a){if(a.error){var b,c=a.error[0].toLowerCase();if(c.indexOf("hint")>-1&&(b=this.ui.recoverAanswer,this.reportError()),c.indexOf("password")>-1?(b=this.ui.password,this.reportError()):c.indexOf("username")>-1&&(b=this.ui.userName,this.reportError()),void 0!==typeof b){var d=$(b.data("error-hint")),e=$(b.data("valid-check"));b.toggleClass("has-error",!0),d.html(d.data("error-invalid")).removeClass("hidden"),e.toggleClass("hidden",!0),this.reportError()}}else{this.wizard.showStep("complete");var f={type:"account",linkName:"Registration Complete",events:"event1"};h.reportModalView(f)}},onSelectArrowClick:function(a){this.ui.questionSelect.focus()},onShow:function(){this.checkAvailable(),this.ui.privacyLink.attr("href",$('a:contains("Privacy Policy")').attr("href")),this.ui.tosLink.attr("href",$('a:contains("Terms of Use")').attr("href"));var a={type:"account",linkName:"Registration Page 2",events:""};h.reportModalView(a)},onSubmit:function(){this.addRemainingValidators();var a=this.validator.validateAll(this.ui,this);if(a){var c=g.getInstance();this.wizard.data.username=e.getInput(this.ui.userName),this.wizard.data.password=e.getInput(this.ui.password),this.wizard.data.recoverQ=$("#recover-q-select :selected").text(),this.wizard.data.recoverA=e.getInput(this.ui.recoverAnswer);var d={op:"new_user",username:this.wizard.data.username,password:this.wizard.data.password,passwordConfirm:e.getInput(this.ui.passConfirm),gender:this.wizard.data.gender,securityQuestionId:this.ui.questionSelect.val(),securityAnswer:this.wizard.data.recoverA,confirm:this.ui.tosCheck.hasClass("active")?"confirm":""};c.createAccount(d).then(b.bind(this.onRegisterResponse,this))}},showErrorCheck:function(a){a.addClass("has-error")},showPasswordConfirmError:function(a){var b,c=(e.getInput(this.ui.passConfirm),e.getInput(this.ui.password)),d=$(this.ui.passConfirm.data("error-hint"));b=0===c.length?d.data("error-empty"):d.data("error-match"),d.html(b),this.showError(this.ui.passConfirm),this.reportHint()},showPasswordError:function(a){var b,c=e.getInput(a),d=c.replace(/\D/g,""),f=new RegExp("[^A-Za-z0-9_]");if(0===c.length?b=e.error.PASSWORD_EMPTY:c.length<3?b=e.error.PASSWORD_SHORT:(d.length>5||f.test(c))&&(b=e.error.PASSWORD_INVALID),"undefined"!=typeof b)this.ui.password.addClass("has-error"),this.ui.passwordError.removeClass("hidden").html(this.ui.passwordError.data(b));else{var g=this.ui.password.data("valid-check");$(g).removeClass("hidden")}this.reportHint()},showRecoverAnswerError:function(a){var b,c=e.getInput(a),d=$(a.data("error-hint")),f=$(a.data("valid-check"));0===c.length?b=e.error.ANSWER_EMPTY:c.length<3&&(b=e.error.ANSWER_SHORT),"undefined"!=typeof b?(a.addClass("has-error"),f.addClass("hidden"),d.html(d.data(b)).removeClass("hidden")):f.removeClass("hidden")},testUsername:function(a){var b,c=e.getInput(a),d=$(a.data("error-hint")),f=$(a.data("valid-check")),g=new RegExp("[^A-Za-z0-9_]");g.test(c)?b=e.error.USERNAME_INVALID_CHARACTER:c.length<3?b=e.error.USERNAME_SHORT:c.length>10&&(b=e.error.USERNAME_LONG),"undefined"!=typeof b?(a.addClass("has-error"),f.addClass("hidden"),d.html(d.data(b)).removeClass("hidden")):this.checkAvailable()},onUsernameBlur:function(a){a.preventDefault(),this.testUsername(this.ui.userName)},toggleDropdown:function(a){a.preventDefault();var b=$("#recover-q-select"),c=document.createEvent("MouseEvents");c.initMouseEvent("mousedown",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),b[0].dispatchEvent(c)},toggleToSCheck:function(a){a.preventDefault(),this.ui.tosCheck.removeClass("has-error");var b=this.ui.tosCheck.hasClass("active");this.ui.tosCheck.toggleClass("active",!b);
},showEvent:function(a){},toggleTooltip:function(a){a.preventDefault();var b=this.ui.qTooltip.hasClass("hidden");this.ui.qTooltip.toggleClass("hidden",!b)},validateInput:function(a){this.validateAll();var b=$(a.target),c=$(b.data("error-hint")),d=$(b.data("valid-check")),e=c.hasClass("hidden");d.toggleClass("hidden",!e)},reportHint:function(){var a={type:"account",linkName:"Registration Hints",events:""};h.reportModalView(a)},reportError:function(){var a={type:"account",linkName:"Registration Error",events:""};h.reportModalView(a)}});return j}),define("app/views/modules/header/registration/complete",["jquery","_","app/common/templating","app/common/utils","app/controllers/auth-controller","app/controllers/reporting","app/views/modules/common/wizard-item-view"],function(a,b,c,d,e,f,g){var h=g.extend({template:"modules/header/create-account/complete",ui:{userName:"#user-name",password:"#password"},events:{"click #sign-in":"onSignIn"},initialize:function(a){g.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments))},onSignIn:function(){var a=this.ui.userName.text(),c=this.ui.password.text();this.login(a,c).then(b.bind(this.onLoginSuccess,this)).fail(b.bind(this.onLoginFail,this))},login:function(a,b){var c={username:a,password:b,op:"login"},d=e.getInstance();return d.authState.doLoginRequest(c)},onLoginSuccess:function(a){var b=e.getInstance();a.error||(b.login(a),this.wizard.$el.modal("hide"))},onLoginFail:function(a){},onShow:function(){var a={modalType:"registration",modalStep:"3"};f.reportModalView(a)}});return h}),define("app/views/modules/header/register-dialog",["jquery","app/common/templating","app/views/modules/common/modal-wizard","app/views/modules/header/registration/register","app/views/modules/header/registration/create-account","app/views/modules/header/registration/complete"],function(a,b,c,d,e,f){var g=c.extend({template:"modules/common/modal-dialog",id:"register-modal",className:"modal login-dialog register-dialog",initialize:function(){c.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.addStep("register",d),this.addStep("create-account",e),this.addStep("complete",f),this.listenTo(this,"after:display",this.onAfterDisplay)},onAfterDisplay:function(){this.showStep("register")}});return g}),define("app/commands/display-register",["jquery","app/views/modules/header/register-dialog"],function(a,b){var c=function(){var a=new b;a.display()};return c}),define("app/commands/routes/display-sitemap",["app/controllers/view-controller"],function(a){var b=function(){return a.setView("sitemap")};return b}),define("app/commands/do-logout",["jquery","marionette","_","app/controllers/auth-controller","app/controllers/reporting"],function(a,b,c,d,e){var f=function(){var a=d.getInstance();a.logout()};return f}),define("app/commands/display-kcs-voting",["app/controllers/view-controller","../common/page"],function(a,b){var c=function(c){var d="kcs-voting";if(!b||b.get("templateId")!==d)return a.setView(d,c)};return c}),define("app/commands/display-kcs-nominees",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"kcs-nominees",onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d};return b.setView(f)};return d}),define("app/commands/display-best-ever",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(a){var c={layout:"voting-event",request:a};return c.request.pollKey="nicks_best_games_and_vids",b.setView(c)};return d}),define("app/commands/display-page-not-found",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("page-not-found",b)};return b}),define("app/commands/specials/display-specials-hub",["app/controllers/view-controller"],function(a){var b=function(b){return a.setView("specials",b)};return b}),define("app/commands/specials/display-specials-hub-videos",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"specials",urlKey:d.urlKey,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d,viewFeedUrl:"specialsHubVideos"};return b.setView(f)};return d}),define("app/commands/specials/display-specials-hub-games",["_","app/controllers/view-controller","app/common/page-filters"],function(a,b,c){var d=function(d){var e=window.location.pathname,f={layout:"specials",urlKey:d.urlKey,onMainFeedSuccess:a.bind(c.selectFilter,c.selectFilter,e),request:d,viewFeedUrl:"specialsHubGames"};return b.setView(f)};return d}),define("app/commands/specials/index",["./display-specials-hub","./display-specials-hub-videos","./display-specials-hub-games"],function(a,b,c){function d(d){d.setHandler("display-specials-hub",a),d.setHandler("display-specials-hub-videos",b),d.setHandler("display-specials-hub-games",c)}return{register:d}}),define("app/views/modules/end-level-info-modal/end-level-info-modal",["jquery","app/views/modules/common/modal-wizard"],function(a,b){var c=b.extend({template:"modules/modals/modal-base",ui:{close:"#close"},events:{"click #close":"onClose"},initialize:function(a){b.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.listenTo(this,"after:display",this.onAfterDisplay)},onAfterDisplay:function(b){var c=a(".module-about").clone();a(".current-step").append(c),a(".modal-box .module-about-more").css("display","")},onClose:function(){this.trigger("close")}});return c}),define("app/views/modules/end-level-info-modal/index.js",["./end-level-info-modal"],function(a){return a}),define("app/commands/modals/display-end-level-info-modal",["app/views/modules/end-level-info-modal/index.js"],function(a){var b=function(){var b=new a;b.display()};return b}),define("app/views/modules/tve-modal/grownups-prompt-step",["_","Q","jquery","app/common/templating","app/common/state","app/views/modules/common/wizard-item-view","TVEAuth"],function(a,b,c,d,e,f,g){var h=f.extend({template:"modules/modals/tve/grownups-prompt-step",ui:{loginButton:".modal-tve-grownups-prompt-login-button"},events:{"click .modal-tve-grownups-prompt-login-button":"onLoginClick"},initialize:function(){f.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments))},onLoginClick:function(a){g.API.getAuthorization(),this.wizard.trigger("close")}});return h}),define("app/views/modules/tve-modal/tve-login-fail-step",["jquery","app/common/templating","app/common/state","app/views/modules/common/wizard-item-view"],function(a,b,c,d){var e=d.extend({template:"modules/modals/tve/login-fail-step",id:"tve-modal"});return e}),define("app/views/modules/tve-modal/provider-not-listed",["_","Q","jquery","app/common/templating","app/common/state","app/views/modules/common/wizard-item-view"],function(a,b,c,d,e,f){var g=f.extend({template:"modules/modals/tve/provider-not-listed",ui:{closeButton:".modal-tve-providers-provider-close-button"},events:{"click .modal-tve-providers-provider-close-button":"onClose"},initialize:function(){f.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments))},onClose:function(a){this.wizard.trigger("close")}});return g}),define("app/views/modules/tve-modal/tve-modal-base",["jquery","app/common/templating","app/common/state","app/common/tve-utils/tve-bumper","app/views/modules/common/modal-wizard","app/views/modules/tve-modal/grownups-prompt-step","app/views/modules/tve-modal/tve-login-fail-step","app/views/modules/tve-modal/provider-not-listed"],function(a,b,c,d,e,f,g,h){var i=e.extend({template:"modules/modals/modal-base",id:"tve-modal",className:"tve-modal",ui:{close:"#close"},events:{"click #close":"onClose"},initialize:function(a){e.prototype.initialize.apply(this,Array.prototype.slice.apply(arguments)),this.app=requirejs("app/app"),this.tveBumper=d.getInstance(),this.stepName=a.view||this._showLoginOrError(),this.addStep("grownups-prompt",f),this.addStep("login-fail",g),this.addStep("provider-not-listed",h),this.listenTo(this,"after:display",this.onAfterDisplay)},onAfterDisplay:function(){this.showStep(this.stepName)},onClose:function(a){this.trigger("close")},_showLoginOrError:function(){return this.tveBumper.tve.authenticated&&!this.tveBumper.tve.authorized?"login-fail":"grownups-prompt"}});return i}),define("app/views/modules/tve-modal/index",["./tve-modal-base"],function(a){return a}),define("app/commands/modals/display-tve-modal",["app/views/modules/tve-modal/index"],function(a){var b=function(b){var c=new a({view:b});c.display()};return b}),define("app/commands/modals/index",["./display-end-level-info-modal","./display-tve-modal"],function(a,b){function c(c){c.setHandler("display-end-level-info-modal",a),c.setHandler("display-tve-modal",b)}return{register:c}}),define("app/commands/commands",["app/commands/change-path","app/commands/display-home","app/commands/display-video-hub","app/commands/display-video-hub-filter","app/commands/display-video","app/commands/display-flipbook","app/commands/display-playlist","app/commands/display-show","app/commands/display-show-character","app/commands/display-property-hub-games","app/commands/display-property-hub-videos","app/commands/display-property-hub-episodes","app/commands/display-property-hub-pictures","app/commands/display-style-guide","app/commands/display-radio","app/commands/display-games-hub","app/commands/display-games-hub-filter","app/commands/display-game","app/commands/display-game-frame","app/commands/display-login","app/commands/display-recover-password","app/commands/display-register","app/commands/routes/display-sitemap","app/commands/do-logout","app/commands/display-kcs-voting","app/commands/display-kcs-nominees","app/commands/display-best-ever","app/commands/display-page-not-found","app/commands/specials/index","app/commands/modals/index"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){function E(s){s.setHandler("change-path",a),s.setHandler("display-home",b),s.setHandler("display-video-hub",c),s.setHandler("display-video-hub-filter",d),s.setHandler("display-video",e),s.setHandler("display-flipbook",f),s.setHandler("display-playlist",g),s.setHandler("display-show",h),s.setHandler("display-show-character",i),s.setHandler("display-property-hub-games",j),s.setHandler("display-property-hub-videos",k),s.setHandler("display-property-hub-episodes",l),s.setHandler("display-property-hub-pictures",m),s.setHandler("display-style-guide",n),s.setHandler("display-radio",o),s.setHandler("display-games-hub",p),s.setHandler("display-games-hub-filter",q),s.setHandler("display-game",r),s.setHandler("display-login",t),s.setHandler("display-recover-password",u),s.setHandler("display-register",v),s.setHandler("do-logout",x),s.setHandler("display-sitemap",w),s.setHandler("display-kcs-voting",y),s.setHandler("display-kcs-nominees",z),s.setHandler("display-best-ever",A),s.setHandler("display-page-not-found",B),D.register(s),C.register(s)}return{register:E}}),define("app/common/media-query",["_","jquery","breakpoints"],function(a,b,c){function d(a,b){var c=a.match(b);return null!==c}function e(a,b,c){return window.matchMedia(b).matches&&a.push(c),a}function f(){var b=a.reduce(c,e,[]);return b}function g(b,c){var d=f();return a.find(d,function(a){return c(a,b)})}function h(b,c,e){return a.isArray(c)?e(c,function(a){return d(b,a)}):d(b,c)}function i(b,c){return h(b,c,a.some)}function j(b,c){return h(b,c,a.every)}function k(a){return g(a,i)}function l(a){return g(a,j)}function m(b){return!a.isUndefined(k(b))}function n(b){return!a.isUndefined(l(b))}return{getMatchedKeys:f,matchAnyMedia:k,matchAllMedia:l,isAnyMedia:m,isAllMedia:n}}),define("app/common/media-query-utils",["_","jquery","breakpoints","app/common/media-query"],function(a,b,c,d){function e(){return d.isAllMedia("portrait")}function f(){return!e()}function g(){var a=/^((?!mobile).)+\-landscape/;return d.isAllMedia(a)}function h(){var a=/^((?!mobile).)+\-portrait/;return d.isAllMedia(a)}function i(){return h()||g()}function j(){var a=/mobile-/;return d.isAllMedia(a)}return{isAnyMedia:d.isAnyMedia,isAllMedia:d.isAllMedia,isPortrait:e,isLandscape:f,isLargeLandscape:g,isLargePortrait:h,isLargeDevice:i,isMobile:j}}),define("app/common/document-scrolling",["_","jquery","app/common/media-query-utils"],function(a,b,c){function d(a){a.preventDefault()}function e(){var a=b("body").data("template-type"),c=["home","property"];return c.indexOf(a)>-1}function f(){return e()&&c.isAllMedia("tablet-landscape")}function g(){window.document.ontouchmove=f()?d:j}function h(a){g()}function i(a){g(),a.listenTo(a.vent,"device:orientation",h)}var j=window.document.ontouchmove;return{setup:i,onDeviceOrientationChange:h,setDocumentScrolling:g,preventDefaultEvent:d}}),define("app/common/page-performance",["backbone","_","app/common/state","app/common/reporting/index","jquery"],function(a,b,c,d,e){function f(a){j=a.time}function g(a){var b,e,f=a.time;j>0&&f>0&&(b=f-j,e=c.get("urlChanged")?"pushstate":"fullPageLoad",d.send("reportPerformance",{time:b,requestType:e})),h()}function h(){j=-1}function i(){if(!k){var a=(c.get("appPath"),requirejs("app/app"));a.vent.listenTo(a.vent,"startPageLoad",f),a.vent.listenTo(a.vent,"renderComplete",g),k=!0}}var j=-1,k=!1;return{initialize:i}}),define("app/common/orkin",["app/common/state"],function(a){var b={setAdFree:function(b){"boolean"==typeof b&&(a.isAdfree=b)}};window.Orkin=b}),function(a){window.XDomainRequest&&a.ajaxTransport(function(a){if(a.crossDomain&&a.async){a.timeout&&(a.xdrTimeout=a.timeout,delete a.timeout);var b;return{send:function(c,d){function e(a,c,e,f){b.onload=b.onerror=b.ontimeout=jQuery.noop,b=void 0,d(a,c,e,f)}b=new XDomainRequest,b.onload=function(){e(200,"OK",{text:b.responseText},"Content-Type: "+b.contentType)},b.onerror=function(){e(404,"Not Found")},b.onprogress=jQuery.noop,b.ontimeout=function(){e(0,"timeout")},b.timeout=a.xdrTimeout||Number.MAX_VALUE;var f=a.xDomainRequestUrlSuffix?a.url+a.xDomainRequestUrlSuffix:a.url;b.open("POST",f),b.send(a.data)},abort:function(){b&&(b.onerror=jQuery.noop,b.abort())}}}})}(jQuery),define("jquery.XDomainRequest",["jquery"],function(a){return function(){var b;return b||a.$}}(this)),define("app/app",["app/config/index","jquery","backbone","marionette","app/yeti","app/setup/index","app/setup","app/routes/index","app/controllers/routes","app/controllers/event-controller","app/controllers/adfree-controller","app/common/kfar/index","app/common/reporting/index","app/commands/commands","app/common/document-scrolling","app/common/state","app/common/page","app/common/page-performance","app/common/get-json-script","app/common/audio/index","app/common/orkin","app/common/tve-utils/tve-bumper","jquery.XDomainRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){var a=s("head #propertyList");i.start({propertyList:a})}function x(){r.initialize(),window.pageLoadStartTime&&(A.vent.trigger("startPageLoad",{time:window.pageLoadStartTime}),window.pageLoadStartTime=null)}function y(){var a,c=!1,d=b("body").data("template-id");return"page-not-found"===d&&(c=!0,q.set("is404",!0),a={time:Date.now()},A.vent.trigger("renderComplete",a)),c}function z(){j.initialize(),x(),k.initialize(),w(),o.setup(A),v.initialize(),e.bindToSection(A.sectionHeader),e.bindToSection(A.sectionFooter);var b=y(),d=b;b&&e.bindToSection(A.sectionBody),t.load(a.audio.files,a.audio.options),c.history.start({silent:d,pushState:"pushState"in window.history,hashChange:!1})}m.setup({handlers:l.handlers});var A=new d.Application({routers:{topNavigation:{}}});A.addRegions({navigation:"#navigation",main:".main",sectionHeader:".section-header",sectionBody:".section-body",sectionFooter:".section-footer"});window.document.ontouchmove;return A.on("initialize:after",z),n.register(A.commands),A}),define("app/views/yeti-modules",["app/yeti"],function(a){return a.YetiModules}),define("app/views/modules/body/title",["jquery","marionette","app/views/yeti-modules"],function(a,b,c){var d=c.ModuleView.extend({template:"modules/body/title",events:{"click a":"onVideoClick"},initialize:function(){},onShow:function(){},onClose:function(){},onVideoClick:function(b){b.preventDefault();var c=requirejs("app/app"),d=a(b.currentTarget).attr("href");c.execute("change-path",d)}});return d}),define("app/views/modules/body/back-button",["app/views/yeti-modules","jquery","app/common/state","app/common/utils"],function(a,b,c,d){var e=a.ModuleLayout.extend({template:"modules/body/back-button",events:{"click .back-button":"backButtonClick","touchend .back-button":"backButtonClick"},ui:{backButton:".back-button"},backButtonTimer:null,initialize:function(){this.app=requirejs("app/app")},onShow:function(){this.ui.backButton.addClass("video-player-fade-out hidden"),this.setupBackButton(),this.initListeners(),this.backButtonTimer=700},initListeners:function(){this.listenTo(this.app.vent,"backButton.backButtonOffStageToLeft",this.backButtonOffStageToLeft),this.listenTo(this.app.vent,"backButton.backButtonOnStageFromLeft",this.backButtonOnStageFromLeft)},setupBackButton:function(){var a=c.get("prevUrls");(a.length>0||d.isIEAny())&&this.ui.backButton.removeClass("hidden")},backButtonClick:function(){d.isIEAny()?window.history.back(-1):this.app.execute("change-path","back")},backButtonOffStageToLeft:function(){this.ui.backButton.animate({"margin-left":"-1000px"},this.backButtonTimer)},backButtonOnStageFromLeft:function(){this.ui.backButton.animate({"margin-left":""},this.backButtonTimer)}});return e}),define("nick.poll",["jquery","underscore.string","Q"],function(a,b,c){var d={};return d.Poll=function(a){this.init(a)},d.Poll.prototype={defaultsFunnel:{funnelDomain:"funnel.mtvnservices.com",funnelVersion:"v2",funnelSite:"nick.com",funnelPreviewMode:"true",funnelCollection:"",funnelQuestionPrefix:"",funnelAnswerPrefix:""},urlResults:"/sbcom/data/poll/success.jhtml",pollNameParam:"pollName",ballotNameParam:"ballotName",lineItemIdParam:"lineItemId",lineIndexParam:"vote",settings:{},settingsFunnel:null,defaults:{urlStandard:"/sbcom/data/poll/pkcav.jhtml",urlAkamai:"https://web.archive.org/web/20150728212158/http://www.nick.com/sbcom/data/poll/fcdm/kca/",urlFunnel:"/api/##FUNNEL_VERSION##/##FUNNEL_SITE##/collections/##FUNNEL_COLLECTION##/entries.json",urlFunnelTallies:"/api/##FUNNEL_VERSION##/##FUNNEL_SITE##/collections/##FUNNEL_COLLECTION##/tallies.json",cors:!1,type:"GET",dataType:"jsonp",useAkamai:!1,useFunnel:!1},init:function(b){this.settings=a.extend({},this.defaults,b),this.settingsFunnel=this.getFunnelOptions(b)},getUrl:function(a){var b="";return b=this.settings.useAkamai?this.settings.urlAkamai+a+"/":this.settings.useFunnel?this.getFunnelUrl(a):"https://web.archive.org/web/20150728212158/http://www.nick.com"+this.settings.urlStandard},getResultsUrl:function(){return"http://www.nick.com"+this.urlResults},getFunnelUrl:function(a){var b="http://"+this.settingsFunnel.funnelDomain+this.settings.urlFunnel;return b=b.replace("##FUNNEL_COLLECTION##",a),b=b.replace("##FUNNEL_VERSION##",this.settingsFunnel.funnelVersion),b=b.replace("##FUNNEL_SITE##",this.settingsFunnel.funnelSite)},getFunnelTallyUrl:function(a){var b="http://"+this.settingsFunnel.funnelDomain+this.settings.urlFunnelTallies;return b=b.replace("##FUNNEL_COLLECTION##",a),b=b.replace("##FUNNEL_VERSION##",this.settingsFunnel.funnelVersion),b=b.replace("##FUNNEL_SITE##",this.settingsFunnel.funnelSite)},getFunnelOptions:function(b){if(null==b||null==b.funnel)return null;var c=a.extend({},this.defaultsFunnel,b.funnel);return this.settings.useFunnel=!0,this.settings.useAkamai=!1,this.settings.dataType="json",this.settings.type="POST",this.settings.contentType="application/x-www-form-urlencoded; charset=UTF-8",c},getFunnelTallies:function(b){var d=c.defer();return a.ajax({xDomainRequestUrlSuffix:".ie",dataType:this.settings.dataType,type:"GET",url:this.getFunnelTallyUrl(b),contentType:this.settings.contentType,success:function(a){d.resolve(a)},error:function(a,b,c){var e=new Error(c);d.reject(e)}}),d.promise},doSubmit:function(e,f,g,h,i,j){var k=c.defer(),l={};1==this.settings.useFunnel?(l[f]=this.settingsFunnel.funnelAnswerPrefix+g,l.previewMode=this.settingsFunnel.funnelPreviewMode,b.isBlank(i)||(l.source=i),b.isBlank(j)||(l.multiplier=j)):(l[this.pollNameParam]=e,l[this.ballotNameParam]=f,l[this.lineItemIdParam]=g,l[this.lineIndexParam]=h,l.multiplier=j);var m=e;return d.utils.doLog("Poll: doSubmit: Type: "+this.settings.type),a.ajax({xDomainRequestUrlSuffix:".ie",dataType:this.settings.dataType,type:this.settings.type,url:this.getUrl(e),data:l,contentType:this.settings.contentType,success:function(a){k.resolve(a),d.utils.doLog("Poll: doSubmit: onSuccess: "+m),d.polls.doVoteResults("OK",m,a)},error:function(a,b,c){var e=new Error(c);k.reject(e),d.utils.doLog("Poll: doSubmit: onFail: "+m),d.polls.doVoteResults("ERROR",m,a)}}),d.utils.doLog("Poll: doSubmit: "+e+" | "+f+" | "+g+" | "+this.settings.type),k.promise},doSubmitData:function(e,f,g,h){if(null==g)return void d.utils.doLog("Poll: doSubmitData: no data passed.");var i=c.defer();null!=h&&d.polls.addListener(e,h,null),g.previewMode=this.settingsFunnel.funnelPreviewMode,b.isBlank(f)||(g.source=f);var j=e;return d.utils.doLog("Poll: doSubmitData: Type: "+this.settings.type),a.ajax({xDomainRequestUrlSuffix:".ie",dataType:this.settings.dataType,type:this.settings.type,url:this.getUrl(j),data:g,contentType:this.settings.contentType,success:function(a){d.utils.doLog("Poll: doSubmitData: onSuccess: "+j),d.polls.doSubmitResults("OK",j,a),i.resolve(a)},error:function(a,b,c){var e=new Error(c);i.reject(e),d.utils.doLog("Poll: doSubmitData: onFail: "+j),d.polls.doSubmitResults("ERROR",j,a)}}),i.promise},getResults:function(b){var c={};c[this.pollNameParam]=b,d.utils.doLog("getResults: "+this.getResultsUrl()),a.ajax({dataType:this.settings.dataType,url:this.getResultsUrl(),data:c,success:function(a){d.utils.doLog("Poll: getResults: onSuccess"),d.polls.doVoteResults("OK",a)},error:function(a){d.utils.doLog("Poll: getResults: onFail"),d.polls.doVoteResults("ERROR-REQUEST")}})}},d.polls={},d.polls.resultsListeners=null,d.polls.doVoteResults=function(a,b,c){return null==d.polls.resultsListeners||null==d.polls.resultsListeners[b]?void d.utils.doLog("Polls: doVoteResults: no listener found: "+b):(d.utils.doLog("Polls: doVoteResults: executing results: "+b+" | "+a+" | "+c),void d.polls.resultsListeners[b].callback(a,c,d.polls.resultsListeners[b].data))},d.polls.doSubmitResults=function(a,b,c){d.utils.doLog("Polls: doSubmitResults: executing 'doVoteResults': "+b+" | "+a+" | "+c),d.polls.doVoteResults(a,b,c)},d.polls.addListener=function(a,b,c){null==d.polls.resultsListeners&&(d.polls.resultsListeners={}),d.polls.resultsListeners[a]={callback:b,data:c}},d.polls.removeListener=function(a){null!=d.polls.resultsListeners&&(d.polls.resultsListeners[a]=null)},d.utils={},d.utils.doLog=function(a){},d}),define("app/views/modules/body/events/event-end-level",["app/views/yeti-modules","_","jquery","app/common/state","nick.poll","app/controllers/reporting"],function(a,b,c,d,e,f){var g=a.ModuleLayout.extend({ui:{funnelCollection:".funnel-collection",funnelQuestion:".funnel-question",funnelNominee:".funnel-nominee",funnelNomineeKey:".funnel-nominee-key",eventVoteBtn:".event-vote-btn"},events:{"click .event-vote-btn":"voteClick"},defaults:{platform:"desktop",masterSwitch:"/data/masterSwitch"},options:{collection:null,questionKey:null,nominee:null,nomineeKey:null,site:"nick.com",revote:!1},initialize:function(){this.options=b.extend(this.defaults),this.pollOptions={},this.pollOptions={funnel:{funnelDomain:this.options.domain,funnelCollection:this.options.collection,funnelSite:this.options.site},type:"POST",platform:this.options.platform,cors:!0,useFunnel:!0},this.poll=new e.Poll(this.pollOptions)},onShow:function(){this.ui.funnelCollection.data("funnel-collection")&&this.setupEvent()},eventOptions:function(){this.options.eventOptions={removeSidePanel:!0,title:"Nick's Best Games and Videos",urlKey:"nicks-best-games-and-videos-2014",endLevelVote:!0}},setupEvent:function(){if(this.$body=c("body"),this.$body.addClass("event-end-level"),this.eventOptions(),this.options.eventOptions.endLevelVote===!0&&c(".show-image a").hide(),this.options.eventOptions.title&&this.options.eventOptions.urlKey){var a="";a=c(this.$body.hasClass("template-id-game-play")?".series-title a":".show-property a"),a.attr("href","/"+this.options.eventOptions.urlKey).html(this.options.eventOptions.title)}},voteClick:function(a){a.preventDefault(),this.ui.eventVoteBtn.addClass("flipper"),setTimeout(b.bind(this.removeVoteCompleteState,this),3e3),this.options.collection=this.ui.funnelCollection.data("funnel-collection"),this.options.questionKey=this.ui.funnelQuestion.data("question-key"),this.options.nominee=this.ui.funnelNominee.data("nominee"),this.options.nomineeKey=this.ui.funnelNomineeKey.data("nominee-key");var c={ballot:this.options.questionKey,catId:this.options.questionKey,nomId:this.options.nomineeKey,lineId:null};return f.trigger("event-poll-vote",{contentItem:this.options.questionKey+"|"+this.options.nominee,revote:this.options.revote}),this.options.revote=!0,this.poll.doSubmit(this.options.collection,c.ballot,c.nomId,c.lineId,this.options.platform,c.multiplier).then(function(a){}).fail(function(a){})},removeVoteCompleteState:function(){this.ui.eventVoteBtn.removeClass("flipper")}});return g}),!function(a,b,c){function d(a,c){this.wrapper="string"==typeof a?b.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in c)this.options[d]=c[d];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function e(a,c,d){var e=b.createElement("div"),f=b.createElement("div");return d===!0&&(e.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator","h"==a?(d===!0&&(e.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),e.className="iScrollHorizontalScrollbar"):(d===!0&&(e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),e.className="iScrollVerticalScrollbar"),e.style.cssText+=";overflow:hidden",c||(e.style.pointerEvents="none"),e.appendChild(f),e}function f(c,d){this.wrapper="string"==typeof d.el?b.querySelector(d.el):d.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=c,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var e in d)this.options[e]=d[e];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(a,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.addEvent(a,h.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(a,"mouseup",this))),this.options.fade&&(this.wrapperStyle[h.style.transform]=this.scroller.translateZ,this.wrapperStyle[h.style.transitionDuration]=h.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var g=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},h=function(){function d(a){return g===!1?!1:""===g?a:g+a.charAt(0).toUpperCase()+a.substr(1)}var e={},f=b.createElement("div").style,g=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in f)return b[c].substr(0,b[c].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(a,b){for(var c in b)a[c]=b[c]},e.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},e.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},e.prefixPointerEvent=function(b){return a.MSPointerEvent?"MSPointer"+b.charAt(9).toUpperCase()+b.substr(10):b},e.momentum=function(a,b,d,e,f,g){var h,i,j=a-b,k=c.abs(j)/d;return g=void 0===g?6e-4:g,h=a+k*k/(2*g)*(0>j?-1:1),i=k/g,e>h?(h=f?e-f/2.5*(k/8):e,j=c.abs(h-a),i=j/k):h>0&&(h=f?f/2.5*(k/8):0,j=c.abs(a)+h,i=j/k),{destination:c.round(h),duration:i}};var h=d("transform");return e.extend(e,{hasTransform:h!==!1,hasPerspective:d("perspective")in f,hasTouch:"ontouchstart"in a,hasPointer:a.PointerEvent||a.MSPointerEvent,hasTransition:d("transition")in f}),e.isBadAndroid=/Android /.test(a.navigator.appVersion)&&!/Chrome\/\d/.test(a.navigator.appVersion),e.extend(e.style={},{transform:h,transitionTimingFunction:d("transitionTimingFunction"),transitionDuration:d("transitionDuration"),transitionDelay:d("transitionDelay"),transformOrigin:d("transformOrigin")}),e.hasClass=function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return c.test(a.className)},e.addClass=function(a,b){if(!e.hasClass(a,b)){var c=a.className.split(" ");c.push(b),a.className=c.join(" ")}},e.removeClass=function(a,b){if(e.hasClass(a,b)){var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")}},e.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},e.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,d=.4;return 0===a?0:1==a?1:d*c.pow(2,-10*a)*c.sin(2*(a-b/4)*c.PI/b)+1}}}),e.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d);
},e.click=function(a){var c,d=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(d.tagName)||(c=b.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),c._constructed=!0,d.dispatchEvent(c))},e}();d.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(a){if(!(1!=h.eventType[a.type]&&0!==a.button||!this.enabled||this.initiated&&h.eventType[a.type]!==this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(a.target,this.options.preventDefaultException)||a.preventDefault();var b,d=a.touches?a.touches[0]:a;this.initiated=h.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=d.pageX,this.pointY=d.pageY,this._execEvent("beforeScrollStart")}},_move:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,d,e,f,g=a.touches?a.touches[0]:a,i=g.pageX-this.pointX,j=g.pageY-this.pointY,k=h.getTime();if(this.pointX=g.pageX,this.pointY=g.pageY,this.distX+=i,this.distY+=j,e=c.abs(this.distX),f=c.abs(this.distY),!(k-this.endTime>300&&10>e&&10>f)){if(this.directionLocked||this.options.freeScroll||(e>f+this.options.directionLockThreshold?this.directionLocked="h":f>=e+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)a.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);j=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)a.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,j=this.hasVerticalScroll?j:0,b=this.x+i,d=this.y+j,(b>0||b<this.maxScrollX)&&(b=this.options.bounce?this.x+i/3:b>0?0:this.maxScrollX),(d>0||d<this.maxScrollY)&&(d=this.options.bounce?this.y+j/3:d>0?0:this.maxScrollY),this.directionX=i>0?-1:0>i?1:0,this.directionY=j>0?-1:0>j?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(b,d),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b,d,e=(a.changedTouches?a.changedTouches[0]:a,h.getTime()-this.startTime),f=c.round(this.x),g=c.round(this.y),i=c.abs(f-this.startX),j=c.abs(g-this.startY),k=0,l="";if(this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(f,g),!this.moved)return this.options.tap&&h.tap(a,this.options.tap),this.options.click&&h.click(a),void this._execEvent("scrollCancel");if(this._events.flick&&200>e&&100>i&&100>j)return void this._execEvent("flick");if(this.options.momentum&&300>e&&(b=this.hasHorizontalScroll?h.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:f,duration:0},d=this.hasVerticalScroll?h.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:g,duration:0},f=b.destination,g=d.destination,k=c.max(b.duration,d.duration),this.isInTransition=1),this.options.snap){var m=this._nearestSnap(f,g);this.currentPage=m,k=this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-m.x),1e3),c.min(c.abs(g-m.y),1e3)),300),f=m.x,g=m.y,this.directionX=0,this.directionY=0,l=this.options.bounceEasing}return f!=this.x||g!=this.y?((f>0||f<this.maxScrollX||g>0||g<this.maxScrollY)&&(l=h.ease.quadratic),void this.scrollTo(f,g,k,l)):void this._execEvent("scrollEnd")}}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight,this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||h.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,e,f){if(a=a.nodeType?a:this.scroller.querySelector(a)){var g=h.offset(a);g.left-=this.wrapperOffset.left,g.top-=this.wrapperOffset.top,d===!0&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),e===!0&&(e=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),g.left-=d||0,g.top-=e||0,g.left=g.left>0?0:g.left<this.maxScrollX?this.maxScrollX:g.left,g.top=g.top>0?0:g.top<this.maxScrollY?this.maxScrollY:g.top,b=void 0===b||null===b||"auto"===b?c.max(c.abs(this.x-g.left),c.abs(this.y-g.top)):b,this.scrollTo(g.left,g.top,b,f)}},_transitionTime:function(a){if(a=a||0,this.scrollerStyle[h.style.transitionDuration]=a+"ms",!a&&h.isBadAndroid&&(this.scrollerStyle[h.style.transitionDuration]="0.001s"),this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTime(a)},_transitionTimingFunction:function(a){if(this.scrollerStyle[h.style.transitionTimingFunction]=a,this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTimingFunction(a)},_translate:function(a,b){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b,this.indicators)for(var d=this.indicators.length;d--;)this.indicators[d].updatePosition()},_initEvents:function(b){var c=b?h.removeEvent:h.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,h.prefixPointerEvent("pointerdown"),this),c(d,h.prefixPointerEvent("pointermove"),this),c(d,h.prefixPointerEvent("pointercancel"),this),c(d,h.prefixPointerEvent("pointerup"),this)),h.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b,c,d=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(d=d[h.style.transform].split(")")[0].split(", "),b=+(d[12]||d[4]),c=+(d[13]||d[5])):(b=+d.left.replace(/[^-\d.]/g,""),c=+d.top.replace(/[^-\d.]/g,"")),{x:b,y:c}},_initIndicators:function(){function a(a){for(var b=h.indicators.length;b--;)a.call(h.indicators[b])}var b,c=this.options.interactiveScrollbars,d="string"!=typeof this.options.scrollbars,g=[],h=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(b={el:e("v",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(b.el),g.push(b)),this.options.scrollX&&(b={el:e("h",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(b.el),g.push(b))),this.options.indicators&&(g=g.concat(this.options.indicators));for(var i=g.length;i--;)this.indicators.push(new f(this,g[i]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){a(function(){this.fade()})}),this.on("scrollCancel",function(){a(function(){this.fade()})}),this.on("scrollStart",function(){a(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){a(function(){this.fade(1,!0)})})),this.on("refresh",function(){a(function(){this.refresh()})}),this.on("destroy",function(){a(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(a){if(this.enabled){a.preventDefault(),a.stopPropagation();var b,d,e,f,g=this;if(void 0===this.wheelTimeout&&g._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){g._execEvent("scrollEnd"),g.wheelTimeout=void 0},400),"deltaX"in a)1===a.deltaMode?(b=-a.deltaX*this.options.mouseWheelSpeed,d=-a.deltaY*this.options.mouseWheelSpeed):(b=-a.deltaX,d=-a.deltaY);else if("wheelDeltaX"in a)b=a.wheelDeltaX/120*this.options.mouseWheelSpeed,d=a.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in a)b=d=a.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in a))return;b=d=-a.detail/3*this.options.mouseWheelSpeed}if(b*=this.options.invertWheelDirection,d*=this.options.invertWheelDirection,this.hasVerticalScroll||(b=d,d=0),this.options.snap)return e=this.currentPage.pageX,f=this.currentPage.pageY,b>0?e--:0>b&&e++,d>0?f--:0>d&&f++,void this.goToPage(e,f);e=this.x+c.round(this.hasHorizontalScroll?b:0),f=this.y+c.round(this.hasVerticalScroll?d:0),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),f>0?f=0:f<this.maxScrollY&&(f=this.maxScrollY),this.scrollTo(e,f,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var a,b,d,e,f,g,h=0,i=0,j=0,k=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(d=c.round(k/2),e=c.round(l/2);j>-this.scrollerWidth;){for(this.pages[h]=[],a=0,f=0;f>-this.scrollerHeight;)this.pages[h][a]={x:c.max(j,this.maxScrollX),y:c.max(f,this.maxScrollY),width:k,height:l,cx:j-d,cy:f-e},f-=l,a++;j-=k,h++}else for(g=this.options.snap,a=g.length,b=-1;a>h;h++)(0===h||g[h].offsetLeft<=g[h-1].offsetLeft)&&(i=0,b++),this.pages[i]||(this.pages[i]=[]),j=c.max(-g[h].offsetLeft,this.maxScrollX),f=c.max(-g[h].offsetTop,this.maxScrollY),d=j-c.round(g[h].offsetWidth/2),e=f-c.round(g[h].offsetHeight/2),this.pages[i][b]={x:j,y:f,width:g[h].offsetWidth,height:g[h].offsetHeight,cx:d,cy:e},j>this.maxScrollX&&i++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var a=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.x-this.startX),1e3),c.min(c.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,a)})},_nearestSnap:function(a,b){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var d=0,e=this.pages.length,f=0;if(c.abs(a-this.absStartX)<this.snapThresholdX&&c.abs(b-this.absStartY)<this.snapThresholdY)return this.currentPage;for(a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),b>0?b=0:b<this.maxScrollY&&(b=this.maxScrollY);e>d;d++)if(a>=this.pages[d][0].cx){a=this.pages[d][0].x;break}for(e=this.pages[d].length;e>f;f++)if(b>=this.pages[0][f].cy){b=this.pages[0][f].y;break}return d==this.currentPage.pageX&&(d+=this.directionX,0>d?d=0:d>=this.pages.length&&(d=this.pages.length-1),a=this.pages[d][0].x),f==this.currentPage.pageY&&(f+=this.directionY,0>f?f=0:f>=this.pages[0].length&&(f=this.pages[0].length-1),b=this.pages[0][f].y),{x:a,y:b,pageX:d,pageY:f}},goToPage:function(a,b,d,e){e=e||this.options.bounceEasing,a>=this.pages.length?a=this.pages.length-1:0>a&&(a=0),b>=this.pages[a].length?b=this.pages[a].length-1:0>b&&(b=0);var f=this.pages[a][b].x,g=this.pages[a][b].y;d=void 0===d?this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-this.x),1e3),c.min(c.abs(g-this.y),1e3)),300):d,this.currentPage={x:f,y:g,pageX:a,pageY:b},this.scrollTo(f,g,d,e)},next:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVerticalScroll&&(c=0,d++),this.goToPage(c,d,a,b)},prev:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c--,0>c&&this.hasVerticalScroll&&(c=0,d--),this.goToPage(c,d,a,b)},_initKeys:function(b){var c,d={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(c in this.options.keyBindings)"string"==typeof this.options.keyBindings[c]&&(this.options.keyBindings[c]=this.options.keyBindings[c].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(c in d)this.options.keyBindings[c]=this.options.keyBindings[c]||d[c];h.addEvent(a,"keydown",this),this.on("destroy",function(){h.removeEvent(a,"keydown",this)})},_key:function(a){if(this.enabled){var b,d=this.options.snap,e=d?this.currentPage.pageX:this.x,f=d?this.currentPage.pageY:this.y,g=h.getTime(),i=this.keyTime||0,j="number"==typeof this.options.acceleration?this.options.acceleration:.25;switch(this.options.useTransition&&this.isInTransition&&(b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this.isInTransition=!1),this.keyAcceleration=200>g-i?c.min(this.keyAcceleration+j,50):0,a.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?e+=d?1:this.wrapperWidth:f+=d?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?e-=d?1:this.wrapperWidth:f-=d?1:this.wrapperHeight;break;case this.options.keyBindings.end:e=d?this.pages.length-1:this.maxScrollX,f=d?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:e=0,f=0;break;case this.options.keyBindings.left:e+=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=d?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:e-=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=d?1:5+this.keyAcceleration>>0;break;default:return}if(d)return void this.goToPage(e,f);e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollX&&(e=this.maxScrollX,this.keyAcceleration=0),f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(e,f,0),this.keyTime=g}},_animate:function(a,b,c,d){function e(){var m,n,o,p=h.getTime();return p>=l?(f.isAnimating=!1,f._translate(a,b),void(f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd"))):(p=(p-k)/c,o=d(p),m=(a-i)*o+i,n=(b-j)*o+j,f._translate(m,n),f.isAnimating&&g(e),void(3==f.options.probeType&&f._execEvent("scroll")))}var f=this,i=this.x,j=this.y,k=h.getTime(),l=k+c;this.isAnimating=!0,e()},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}}},f.prototype={handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a)}},destroy:function(){this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(a,"touchmove",this),h.removeEvent(a,h.prefixPointerEvent("pointermove"),this),h.removeEvent(a,"mousemove",this),h.removeEvent(a,"touchend",this),h.removeEvent(a,h.prefixPointerEvent("pointerup"),this),h.removeEvent(a,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(b){var c=b.touches?b.touches[0]:b;b.preventDefault(),b.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=c.pageX,this.lastPointY=c.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(a,"touchmove",this),this.options.disablePointer||h.addEvent(a,h.prefixPointerEvent("pointermove"),this),this.options.disableMouse||h.addEvent(a,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(a){var b,c,d,e,f=a.touches?a.touches[0]:a,g=h.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,b=f.pageX-this.lastPointX,this.lastPointX=f.pageX,c=f.pageY-this.lastPointY,this.lastPointY=f.pageY,d=this.x+b,e=this.y+c,this._pos(d,e),1==this.scroller.options.probeType&&g-this.startTime>300?(this.startTime=g,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),a.preventDefault(),a.stopPropagation()},_end:function(b){if(this.initiated){if(this.initiated=!1,b.preventDefault(),b.stopPropagation(),h.removeEvent(a,"touchmove",this),h.removeEvent(a,h.prefixPointerEvent("pointermove"),this),h.removeEvent(a,"mousemove",this),this.scroller.options.snap){var d=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),e=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.scroller.x-d.x),1e3),c.min(c.abs(this.scroller.y-d.y),1e3)),300);(this.scroller.x!=d.x||this.scroller.y!=d.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=d,this.scroller.scrollTo(d.x,d.y,e,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(a){a=a||0,this.indicatorStyle[h.style.transitionDuration]=a+"ms",!a&&h.isBadAndroid&&(this.indicatorStyle[h.style.transitionDuration]="0.001s")},transitionTimingFunction:function(a){this.indicatorStyle[h.style.transitionTimingFunction]=a},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),this.wrapper.offsetHeight,this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=c.max(c.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=c.max(c.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var a=this.options.listenX&&c.round(this.sizeRatioX*this.scroller.x)||0,b=this.options.listenY&&c.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(a<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=c.max(this.indicatorWidth+a,8),this.indicatorStyle.width=this.width+"px"),a=this.minBoundaryX):a>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=c.max(this.indicatorWidth-(a-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",a=this.maxPosX+this.indicatorWidth-this.width):a=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),b<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=c.max(this.indicatorHeight+3*b,8),this.indicatorStyle.height=this.height+"px"),b=this.minBoundaryY):b>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=c.max(this.indicatorHeight-3*(b-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",b=this.maxPosY+this.indicatorHeight-this.height):b=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=a,this.y=b,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+a+"px,"+b+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=a+"px",this.indicatorStyle.top=b+"px")},_pos:function(a,b){0>a?a=0:a>this.maxPosX&&(a=this.maxPosX),0>b?b=0:b>this.maxPosY&&(b=this.maxPosY),a=this.options.listenX?c.round(a/this.sizeRatioX):this.scroller.x,b=this.options.listenY?c.round(b/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(a,b)},fade:function(a,b){if(!b||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var c=a?250:500,d=a?0:300;a=a?"1":"0",this.wrapperStyle[h.style.transitionDuration]=c+"ms",this.fadeTimeout=setTimeout(function(a){this.wrapperStyle.opacity=a,this.visible=+a}.bind(this,a),d)}}},d.utils=h,"undefined"!=typeof module&&module.exports?module.exports=d:a.IScroll=d}(window,document,Math),define("iscroll",function(a){return function(){var b;return b||a.IScroll}}(this)),define("app/views/modules/body/event/event-poll-question",["jquery","marionette","app/yeti","app/common/state","app/controllers/reporting"],function(a,b,c,d,e){var f={ORIENTATION_PORTRAIT:"portrait",ORIENTATION_LANDSCAPE:"landscape"},g=b.ItemView.extend({events:{"click .event-poll-block-answer-vote":"onAnswerVoteClick","click .route":"onAnswerItemClick"},ui:{answers:".event-poll-block-answer"},initialize:function(){this.votingController=this.options.votingController,this.questionIndex=this.options.questionIndex,this.app=requirejs("app/app"),this.voteCast=!1},onShow:function(){this.bindUIElements(),this.setupPollInformation()},onClose:function(){clearTimeout(this.timeout)},setupPollInformation:function(){this.pollID=this.options.pollID,this.questionID=this.$el.data("question-id")},onAnswerVoteClick:function(b){if(!this.voteCast){this.voteCast=!0;var c=a(b.currentTarget),g=window.navigator.userAgent,h=g.indexOf("Trident")>-1||g.indexOf("MSIE")>-1;b.preventDefault(),d.get("orientation")===f.ORIENTATION_LANDSCAPE&&this.trigger("event-stream.focus-question",this.questionIndex);var i=c.data("answer-id");this.votingController.castVote(this.gatherVoteData(i)),h?c.addClass("flipper-ie"):c.addClass("flipper"),this.votingController.getTalliesByQuestion(this.questionID).then(a.proxy(this.displayVotingResults,this)).fail(a.proxy(this.votingResultsError));var j=a.trim(c.parents(".event-poll-block-content").find(".event-poll-block-title").text()),k=a.trim(c.parents(".event-poll-block-answer").find(".event-poll-answer-title").text());e.trigger("event-poll-vote",{contentItem:j+"|"+k,eventProperty:e.pageReport.url})}},onAnswerItemClick:function(b){b.preventDefault();var c=a(b.currentTarget);this.app.execute("change-path",c.attr("href"),null)},displayVotingResults:function(b){var c,e=b.answer,g=e.length;for(c=0;g>c;c++){var h=this.ui.answers.eq(c);h.find(".event-poll-answer-title").html(e[c].percentage+"%").css("width",e[c].percentage+18+"%"),h.find("button").addClass("hideVoteButton")}this.ui.answers.parent("ul").addClass("event-poll-results-active"),d.get("orientation")===f.ORIENTATION_LANDSCAPE&&(this.timeout=setTimeout(a.proxy(this.triggerVoteComplete,this),1500))},votingResultsError:function(a){},triggerVoteComplete:function(){clearTimeout(this.timeout),this.trigger("event-stream.vote-complete",this.questionIndex)},gatherVoteData:function(a){return{ballot:this.questionID,catId:this.questionID,nomId:a,lineId:a}}});return g}),define("app/models/user-progress",["jquery","Q","_","backbone","jquery.cookie"],function(a,b,c,d){var e=d.Model.extend({defaults:{storageKey:"UserProgress"},initialize:function(a){this.options=c.extend(this.defaults,a),this.set("hasProgress",!1),this.fetch()},getResult:function(){return localStorage?localStorage.getItem(this.options.storageKey):a.cookie(this.options.storageKey)},fetch:function(){var a=this.getResult();a&&this.set(JSON.parse(a))},save:function(){localStorage?localStorage.setItem(this.options.storageKey,JSON.stringify(this.toJSON())):a.cookie(this.options.storageKey,JSON.stringify(this.toJSON()))},clear:function(){localStorage?localStorage.removeItem(this.options.storageKey):a.removeCookie(this.options.storageKey),this.cachedCategories&&(this.set({hasProgress:!1,categories:c.cloneDeep(this.cachedCategories)}),this.save())},setCategories:function(a){var b=this.get("categories");this.cachedCategories=c.clone(a),b&&(a=c.extend(a,b)),this.set("categories",a),this.save()},setVote:function(a,b){var c=this.get("categories");c[a]=b,this.set({hasProgress:!0,categories:c}),this.save()},getVote:function(a){var b=this.get("categories");return b[a]},checkComplete:function(){var a=!0,b=this.get("categories");for(var c in b)if(-1===b[c]){a=!1;break}return a}});return e}),define("app/controllers/voting-controller",["jquery","marionette","_","Q","nick.poll","app/models/user-progress"],function(a,b,c,d,e){var f=b.Controller.extend({defaults:{type:"kca-vote-funnel",platform:"desktop",masterSwitch:"/data/masterSwitch"},initialize:function(a){this.options=c.extend(this.defaults,a),this.pollOptions={},"kca-vote-funnel"===this.options.type?this.pollOptions={funnel:{funnelDomain:this.options.domain,funnelCollection:this.options.collection,funnelSite:this.options.site},type:"POST",cors:!0,votingType:this.options.type,platform:this.options.platform}:this.pollOptions={urlStandard:"/sbcom/data/poll/pkcav14.jhtml",useAkamai:!1,funnel:null,type:"GET",votingType:this.options.type},this.poll=new e.Poll(this.pollOptions)},castVote:function(a){var b="";return"kca-vote-funnel"===this.pollOptions.votingType&&(b=this.options.collection),this.poll.doSubmit(b,a.ballot,a.nomId,a.lineId,this.options.platform,a.multiplier).then(function(a){}).fail(function(a){})},getTalliesByQuestion:function(a){var a=a;return this.poll.getFunnelTallies(this.options.collection).then(function(b){if(!b.tallies||!b.tallies.tally)return new Error("Reading Tallies Failed.");var d=b.tallies.tally,e=c.find(d,{question:a});return e?e:new Error("Question Results not found : "+a)})},submitGameMultiplier:function(a,b,c){var d={ballot:a,catId:a,nomId:b,multiplier:c};return this.castVote(d)},updateConfig:function(){a.ajax({url:this.options.masterSwitch,dataType:"json",success:a.proxy(this.updateConfigSuccess,this)})},updateConfigSuccess:function(a){var b;b="on"===a.enabled?{funnel:{funnelDomain:a.domain?a.domain:this.options.domain,funnelCollection:this.options.collection,funnelSite:this.options.site},type:"POST",cors:!0,votingType:this.options.type,platform:this.options.platform}:{votingType:"kca-vote-internal",urlStandard:"/sbcom/data/poll/pkcav14.jhtml",useAkamai:!1,funnel:null,type:"GET"},this.poll.init(b)}});return f}),define("app/views/modules/body/event/event-poll-stream",["jquery","_","marionette","app/yeti","app/common/state","iscroll","app/views/modules/body/event/event-poll-question","app/controllers/voting-controller","app/common/templating","app/controllers/reporting"],function(a,b,c,d,e,f,g,h,i,j){var k={ORIENTATION_PORTRAIT:"portrait",ORIENTATION_LANDSCAPE:"landscape"},l=d.YetiLayout.extend({events:{"click .next-button":"gotoNext","click .previous-button":"gotoPrev"
},ui:{wrapper:".event-poll-stream",content:".event-poll-stream-content",items:".event-poll-block-item",nextButton:".next-button",previousButton:".previous-button"},defaults:{scrollTime:600},initialize:function(c){this.options=b.extend(this.defaults,c),this.$window=a(window),this.app=requirejs("app/app"),this.itemViews=[],this.steps=[],this.adSteps=[],this.adCount=0,this.adLoadedCount=0,this.currentOffset=0,this.initializeLayout()},onShow:function(){this.addBodyClass(),this.setupVotingController(),this.createChildViews(),this.injectAds(),this.updateContentSize(),e.get("orientation")===k.ORIENTATION_LANDSCAPE?this.setupScroller():this.setupVerticalScrollEvents(),this.ui.wrapper.addClass("is-loaded"),this.addListeners(),this.propertyArt=a(".scroll-with-content-stream-landscape"),this.propertyArtWidth=this.propertyArt.outerWidth(!0)},addListeners:function(){this.dOnWindowResize=b.debounce(a.proxy(this.updateContentSize,this),300),this.listenTo(this.app.vent,"device:resize",this.dOnWindowResize),this.dOnDeviceOrientationChange=b.debounce(a.proxy(this.onDeviceOrientationChange,this),300),this.listenTo(this.app.vent,"device:orientation",this.dOnDeviceOrientationChange)},addBodyClass:function(){a("body").addClass("event-poll-stream-enabled")},setupVotingController:function(){var a=this.ui.content.attr("data-poll-id");this.votingController=new h({collection:a})},initializeLayout:function(){this.currentLayout=k.ORIENTATION_PORTRAIT},setupScroller:function(){this.ui.wrapper.addClass("is-loaded"),this.scroller=new f(".event-poll-stream",{scrollX:!0,scrollY:!1,preventDefault:!1,mouseWheel:!0,eventPassthrough:!0,probeType:2}),this.scroller.on("scrollEnd",a.proxy(this.updateNavigationState,this)),this.scroller.on("scroll",a.proxy(this.updateArtPosition,this)),!this.adfree&&this.adFrequency&&this.adFrequency>0&&(this.placeAds(),this.scroller.on("scrollEnd",a.proxy(this.placeAds,this))),this.updateNavigationState()},setupVerticalScrollEvents:function(){this.isAdfree()||(this.dPlaceAds=b.debounce(a.proxy(this.placeAds,this),300),this.$window.on("scroll",this.dPlaceAds))},removeVerticalScrollEvents:function(){this.$window.off("scroll",this.dPlaceAds)},createChildViews:function(){var a,b,c,d=this.ui.items,e=this.ui.items.length;for(a=0;e>a;a++)b=d[a],c=new g({votingController:this.votingController,questionIndex:a}),this.listenTo(c,"event-stream.vote-complete",this.gotoNextVote),this.listenTo(c,"event-stream.focus-question",this.focusQuestion),c.setElement(b),c.triggerMethod("show"),this.itemViews.push(c)},updateContentSize:function(){this.ui.wrapper.css({"font-size":this.getFontSize()}),this.ui.content.css({width:this.getContentMaxWidth(),height:this.getContentMaxHeight()}),this.scroller&&this.scroller.scrollTo(0,null,0),this.generateStepArray()},getFontSize:function(){var b=this.ui.content,c=this.$window,d=e.get("orientation"),f=a(".section-footer:visible").height();return d===k.ORIENTATION_LANDSCAPE?c.height()-(b.offset().top+f):c.width()-(parseInt(b.css("padding-left"),10)+parseInt(b.css("padding-right"),10))},generateStepArray:function(){var a,b,c,d;c=this.ui.content.children(),d=c.length;var f=e.get("orientation")===k.ORIENTATION_LANDSCAPE?"left":"top";for(this.steps=[],this.adSteps=[],a=0;d>a;a++)b=c.eq(a),"ad"===b.data("type")?this.adSteps.push(Math.ceil(b.position()[f])):this.steps.push(Math.ceil(b.position()[f]))},injectAds:function(){var a,b,c,d,f=0,g=i.get("modules/body/event/event-poll-stream-ad");if(this.adFrequency=parseInt(this.ui.wrapper.data("ad-frequency"),10),this.adfree=e.get("isAdfree"),!this.isAdfree()){for(a=this.ui.items.length,b=0;a>b;b+=this.adFrequency)c=this.ui.items.eq(b),d=g.render({adIndex:f}),c.after(d),f++;this.adCount=f}},placeAds:function(){var b=e.get("orientation")===k.ORIENTATION_PORTRAIT;if(this.adCount===this.adLoadedCount)return this.removeVerticalScrollEvents(),void(this.scroller&&this.scroller.off("scrollEnd",a.proxy(this.placeAds,this)));var c,d,f,g,h,i,l,b=e.get("orientation")===k.ORIENTATION_PORTRAIT,m=this.adSteps.length;for(b?(c="top",d=this.$window.scrollTop(),f=this.$window.height()):(c="left",d=Math.abs(this.ui.content.position().left),f=this.$window.width()),g=0;m>g&&(h=this.adSteps[g],l=d+f>h,l);g++)i=this.ui.content.children().filter(".event-poll-block-ad").eq(g),i.hasClass("ad-loaded")||(i.addClass("ad-loaded"),a(window.document).trigger("kfarEvent",["reloadAd",i.attr("id"),i.data("ad-sizes"),j.pageReport]),this.adLoadedCount++)},getContentMaxHeight:function(){var b=a(".section-footer:visible").height(),c=this.ui.content.offset().top,d=this.$window.height()-(b+c);return d},getContentMaxWidth:function(){var a,b,c,d,f,g=e.get("orientation");if(g===k.ORIENTATION_PORTRAIT)return"";for(d=this.ui.content.children(),b=d.length,f=0,a=0;b>a;a++)c=d.eq(a),f+=c.outerWidth(!0);return f},getClosestIndex:function(a){a=a||"next";var b=Math.abs(this.ui.content.position().left);"next"===a?b+=this.currentOffset:(b-=this.currentOffset,b-=this.currentParentOffset);var c,d,e,f,g=this.steps.length;for(c=0;g>c;c++)if(d=this.steps[c],e=this.steps[c+1],b>=d&&e>b){f="previous"===a&&0>d-b?c+1:c;break}return f},isAdfree:function(){return this.adfree||!this.adFrequency||this.adFrequency<1},updateNavigationState:function(){var a=!1,b=!1;if(e.get("orientation")===k.ORIENTATION_LANDSCAPE){var c=Math.abs(this.ui.content.position().left),d=c+this.$window.width();d===this.ui.content.width()&&(a=!0),0===c&&(b=!0)}else a=!0,b=!0;this.ui.nextButton.toggleClass("invisible",a),this.ui.previousButton.toggleClass("invisible",b)},gotoItem:function(a,b){var c=this.getOffset(a),d=this.getParentOffset(),e=-1*(c-d);this.currentOffset=c,this.currentParentOffset=d,b>0&&0===this.propertyArt.position().left?this.animateArtPosition("left"):0===b&&(e-=d,this.animateArtPosition("right")),this.scroller.scrollToElement(a.get(0),this.options.scrollTime,e),this.updateNavigationState()},getOffset:function(a){var b=a.outerWidth(!0)-a.width();return b/=2},getParentOffset:function(){return this.ui.wrapper.outerWidth(!0)-this.ui.wrapper.width()},gotoNext:function(){var a=this.getClosestIndex("next")+1;a>this.ui.items.length||this.gotoItem(this.ui.items.eq(a),a)},gotoPrev:function(){var a=this.getClosestIndex("previous")-1;0>a||this.gotoItem(this.ui.items.eq(a),a)},gotoNextVote:function(a){if(this.scroller){var b=a+1;b>=0&&b<this.ui.items.length&&(0===a&&this.animateArtPosition("left"),this.gotoItem(this.ui.items.eq(b),b))}},focusQuestion:function(a){this.gotoItem(this.ui.items.eq(a),a)},onDeviceOrientationChange:function(a){a===k.ORIENTATION_PORTRAIT?(this.destroyScroller(),this.updateNavigationState(),this.setupVerticalScrollEvents()):(this.updateContentSize(),this.removeVerticalScrollEvents(),this.setupScroller())},updateArtPosition:function(){var a=this.scroller.x;Math.abs(a)>this.propertyArtWidth||this.propertyArt.css({left:a})},animateArtPosition:function(a){var b=0;a=a||"left","left"===a&&(b=-1*this.propertyArtWidth),this.propertyArt.animate({left:b},this.options.scrollTime,"linear")},onClose:function(){this.removeVerticalScrollEvents(),this.destroyScroller(),this.cleanupChildren()},destroyScroller:function(){this.scroller&&(this.scroller.off("scrollEnd",a.proxy(this.updateNavigationState,this)),this.scroller.off("scroll",a.proxy(this.updateArtPosition,this)),this.scroller.off("scrollEnd",a.proxy(this.placeAds,this)),this.scroller.destroy(),this.scroller=null)},cleanupChildren:function(){var a,b,c=this.itemViews.length;for(a=0;c>a;a++)b=this.itemViews[a],b.close()}});return l}),define("app/views/modules/body/property/filters",["jquery","_","marionette","app/views/yeti-modules"],function(a,b,c,d){var e=d.ModuleItemView.extend({events:{"click .property-filters-overlay":"onDropdownClick","click .filters-dropdown":"onDropdownClick","click .route":"onFilterByClick","mouseover .filter-item:first-child":"onFirstFilterHover","mouseout .filter-item:first-child":"onFirstFilterHover"},ui:{topMenuItems:".filter-link",subMenus:".filter-submenu",propertyFilters:".property-filters",filtersMenu:".filters-menu",dropDownArrow:".filters-dropdown .filters-submenu-tail"},initialize:function(){this.app=requirejs("app/app"),this.removeSubMenuTransition=null},onShow:function(){this.subMenus=this.$el.find(".filter-submenu"),a(window.document).bind("click.filtersView",a.proxy(this.hideSubmenusOnOutsideClick,this)),window.location.hash.indexOf("about")>0&&(this.$(".filter-item.is-active").removeClass("is-active"),this.$(".filter-item").last().addClass("is-active"))},onClose:function(){a(window.document).unbind("click.filtersView")},hideSubmenusOnOutsideClick:function(b){if(this.subMenus.is(":visible")){var c=a(b.target),d=c.parents();-1===d.index(a("ul.filters-menu"))&&(this.hideSubmenus(),this.animateDropDown("fadeOutScale"))}},hideSubmenus:function(a){this.ui.topMenuItems.removeClass("is-open"),this.subMenus.removeClass("is-open")},onDropdownClick:function(a){this.$el.toggleClass("module-dropdown-active"),this.$el.toggleClass("is-open"),this.ui.dropDownArrow.toggleClass("is-active",this._isFirstItemSelected())},onFilterByClick:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("href");this.$(".filter-item.is-active").removeClass("is-active"),c.closest("li").addClass("is-active"),this.ui.dropDownArrow.toggleClass("is-active",this._isFirstItemSelected());var e=c.data("filter-id"),f=this.$('[data-parent-id="'+e+'"]');return f.find(".filter-submenu-item").length?void(null===this.removeSubMenuTransition&&(c.toggleClass("is-open"),this.toggleSubmenu(f))):(this.hideSubmenus(),0!==window.location.hash.length&&d===window.location.pathname&&(window.location.hash="",window.location.reload()),void("#"!==d&&this.app.execute("change-path",d)))},onFirstFilterHover:function(a){if(!this._isFirstItemSelected()){var b="mouseover"===a.type;this.ui.dropDownArrow.toggleClass("is-active",b)}},toggleSubmenu:function(a){a.data("columns-broken")||this.subMenuBreakdown(a),this.ui.subMenus.toggleClass("is-open");var b=this.ui.subMenus.hasClass("is-open")?"fadeInScale":"fadeOutScale";this.animateDropDown(b)},animateDropDown:function(a){this.removeSubMenuTransition=this.removeSubMenuTransition||b.bind(this.ui.subMenus.removeClass,this.ui.subMenus,a),this.rebounceRemoveTransition=this.rebounceRemoveTransition||b.debounce(b.bind(this.removeAnimateDropDown,this),450),this.ui.subMenus.addClass(a),this.rebounceRemoveTransition()},removeAnimateDropDown:function(a){this.removeSubMenuTransition(),this.rebounceRemoveTransition=null,this.removeSubMenuTransition=null},subMenuBreakdown:function(b){var c=b.find(".filter-submenu-item"),d=b.find(".filter-submenu-column"),e=c.length;if(c.length<5)return!1;var f=Math.round(e/2),g=c.splice(f);a(d[1]).append(g),b.data("columns-broken",!0),b.addClass("is-broken")},_isFirstItemSelected:function(){var a=this.$(".filter-item.is-active"),b=0===a.index();return b}});return e}),define("app/views/modules/body/property/title",["jquery","_","app/views/yeti-modules","app/common/state","app/common/utils"],function(a,b,c,d,e){var f=c.ModuleItemView.extend({ui:{propertyTitle:".property-title",propertyTitleWrapper:".property-title-wrapper",seriesTitleLink:".property-title-wrapper h2"},events:{"click .property-title-wrapper h2":"utils.goLink"},initialize:function(){this.app=requirejs("app/app")},onShow:function(){this.checkAboutHash(),this.adjustForBackButton()},isHistoryOrIe:function(){return d.get("urlChanged")||e.isIEAny()},adjustForBackButton:function(){this.isHistoryOrIe()&&this.ui.propertyTitle.addClass("adjust-for-back-button")},checkAboutHash:function(){var a=window.location.hash||"";0===a.indexOf("#about")&&this.ui.propertyTitleWrapper.find("h1").wrapInner('<span class="property-title-filtered">').append("About")}});return f}),define("app/views/modules/body/sticky-header",["jquery","app/views/yeti-modules","app/common/utils","app/common/state","app/common/page","app/views/modules/body/property/filters","app/views/modules/body/property/title"],function(a,b,c,d,e,f,g){var h=b.ModuleLayout.extend({regions:{propContent:".sticky-content"},ui:{stickyHeader:".sticky-header",propFilters:".property-filters",propTitle:".property-title"},initialize:function(){this.app=requirejs("app/app"),this.stickyAt,this.isSticky=!1,this.isPropertyPage="property"===e.get("templateId")},onShow:function(){this.filters=new f,this.propTitle=new g,this.propContent.setView(this.filters,!0,this.ui.propFilters),this.propContent.setView(this.propTitle,!0,this.ui.propTitle),this.listenTo(this.app.vent,"page:scroll",this.updateStickyState),this.listenTo(this.app.vent,"device:orientation",this.updateStickyState),this.listenTo(this.app.vent,"device:lazyresize",this.updateStickyState)},updateStickyState:function(b,c,e,f){var g=!1;if("portrait"===d.get("orientation")){b=b||a(window).scrollTop();var h=38;"mobile-portrait"===d.get("deviceBreakpoint")&&(h=150),b>h&&(g=!0)}this.isSticky=g,this.ui.stickyHeader.toggleClass("is-sticky",this.isSticky)}});return h}),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||c:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.4"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,
i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.4"}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;
return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),define("jquery.ui",["jquery"],function(a){return function(){var b;return b||a.$}}(this));var Handlebars=function(){var a=function(){function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();define("handlebars",function(){});var GUI=function(){function a(a){this.options=_.defaults(a||{},d),this.render(this.options)}var b=function(){return this.Templates=this.Templates||{},this.Templates["src/ad-display/template.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n	    <a class="mtvn-ad-gui-learn-more" href="',(d=c.buttonLink)?d=d.call(a,{hash:{},data:b}):(d=a.buttonLink,d=typeof d===i?d.apply(a):d),e+=j(d)+'" target="',(d=c.buttonTarget)?d=d.call(a,{hash:{},data:b}):(d=a.buttonTarget,d=typeof d===i?d.apply(a):d),e+=j(d)+'">\n	    	',(d=c.buttonText)?d=d.call(a,{hash:{},data:b}):(d=a.buttonText,d=typeof d===i?d.apply(a):d),e+=j(d)+"\n	    </a>\n	    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="mtvn-ad-gui">\n	<div class="mtvn-ad-gui-container">\n	    <span class="mtvn-ad-gui-countdown"></span>\n	    ',g=c["if"].call(b,b.buttonLink,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n	</div>\n</div>"}),this.Templates["src/controls/template.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){return'\n<div class="mtvn-controls-rewind mtvn-controls-button"></div>\n'}function g(a,b){return'\n<div class="mtvn-controls-live mtvn-controls-button"></div>\n'}function h(a,b){return'\n<div class="mtvn-controls-cc mtvn-controls-button ad-hide"></div>\n'}function i(a,b){return'\n<div class="mtvn-controls-volume mtvn-controls-button">\n	<div class="mtvn-controls-volume-slider-container-outer">\n		<div class="mtvn-controls-volume-slider-container">\n			<div class="mtvn-controls-volume-slider">\n				<div class="mtvn-controls-volume-slider-foreground"></div>\n			</div>\n		</div>\n	</div>\n</div>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression;return k+="<!-- controls -->\n",j=c["if"].call(b,b.isDVR,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+='\n<div class="mtvn-controls-play-pause mtvn-controls-button"></div>\n',j=c["if"].call(b,b.isLive,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(j||0===j)&&(k+=j),k+='\n<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'">\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-time-display ad-hide"></div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-progress-container">\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-buffered"></div>\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-progress"></div>\n	</div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-background"></div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-segment-container"></div>\n	<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-thumb-container">\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-tool-tip-container">\n			<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-tool-tip-background"></div>\n			<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-tool-tip-time"></div>\n		</div>\n		<div class="',(j=c.slider)?j=j.call(b,{hash:{},data:e}):(j=b.slider,j=typeof j===m?j.apply(b):j),k+=n(j)+'-thumb"/>\n	</div>\n</div>\n',j=c["if"].call(b,b.showVolume,{hash:{},inverse:l.noop,fn:l.program(7,i,e),data:e}),(j||0===j)&&(k+=j),k+='\n<div class="mtvn-controls-fullscreen mtvn-controls-button"></div>',j=c["if"].call(b,b.ccEnabled,{hash:{},inverse:l.noop,fn:l.program(5,h,e),data:e}),(j||0===j)&&(k+=j),k+="\n"}),this.Templates["src/top-panel/top-panel.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var c="";return c+='\n	<div class="mtvn-tp-share-divider"></div>\n	<div class="mtvn-tp-share-item mtvn-tp-'+k(typeof a===j?a.apply(a):a)+'" data-share-id="'+k(typeof a===j?a.apply(a):a)+'"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<div class="mtvn-tp-container">\n	<span class="mtvn-tp-metadata">',(g=c.metadata)?g=g.call(b,{hash:{},data:e}):(g=b.metadata,g=typeof g===j?g.apply(b):g),(g||0===g)&&(i+=g),i+='</span>\n	<div class="mtvn-tp-share">\n	',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.share)?g=g.call(b,h):(g=b.share,g=typeof g===j?g.apply(b):g),c.share||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+="\n	</div>\n</div>"}),this.Templates}.apply({}),c=b["src/ad-display/template.html"],d={countdownText:"Your content will resume in {{time}}.",messageText:"Your content will resume shortly.",buttonText:"Learn More",buttonTarget:"_blank"};a.prototype={render:function(a){var b=a.template||c,d=this.$el=$(b(a));return this.$countdown=d.find(".mtvn-ad-gui-countdown"),this.renderMessage(a.time),d},renderMessage:function(a){var b=this.options[_.isUndefined(a)?"messageText":"countdownText"],c=_.template(b,{time:a},{interpolate:/\{\{(.+?)\}\}/g});this.$countdown.text(c)}};var e={availableShareItems:["facebook","twitter","email"],validate:function(a){return a.share&&(a.share=_.intersection(a.share,e.availableShareItems)),a}},f=Backbone.View.extend({template:b["src/top-panel/top-panel.html"],tagName:"div",className:"mtvn-tp",events:{"click .mtvn-tp-share":"onShare","touchstart .mtvn-tp-share":"onShare"},initialize:function(a){this.options=e.validate(a||{}),this.render()},setMetadata:function(a){this.$(".mtvn-tp-metadata").html(a)},render:function(){this.$el.html($(this.template(this.options)))},onShare:function(a){a.preventDefault(),this.trigger(f.Events.SHARE,$(a.target).data("share-id"))}},{Events:{SHARE:"share"}}),g=function(){return Backbone.View.extend({ccEnabled:!1,className:"mtvn-controls-cc",events:{click:"toggle",touchstart:"toggle"},toggle:function(a){a.preventDefault(),this.trigger(i.CC,{type:i.CC})}})}(),h=function(){var a=function(){var a="slider:resize",b="mtvn-controls-slider-thumb",c="mtvn-controls-slider-thumb-active",d=function(a){if(isNaN(a))return"00:00";var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60);return(0===b?"":10>b?"0"+b+":":b+":")+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)},e={_isLive:!1,IS_LIVE_THRESHOLD:3,checkLive:function(){var a=this.isLive();this._isLive!==a&&(this.trigger(i.IS_LIVE,{type:i.IS_LIVE,data:a,target:this}),this._isLive=a)},isLive:function(){return this.duration-this.playhead<this.IS_LIVE_THRESHOLD}},f={isSegmented:!0,createDividers:function(){this.$dividerContainer.empty(),_.each(this.durations,function(){this.$dividerContainer.append($('<div class="mtvn-controls-slider-segment"/>'))},this)},moveDividers:function(){var a=this.$dividerContainer.children();_.each(this.durations,function(b,c){$(a[c]).css({left:this.getLeftFromPlayhead(b)})},this)}};return Backbone.View.extend({enabled:!0,dragging:!1,duration:0,playhead:0,sliderWidth:0,events:function(){return _.extend({click:"onSliderClick","touchstart .mtvn-controls-slider-thumb-container":"onThumbActive","touchmove .mtvn-controls-slider-thumb-container":"onThumbMove","touchend .mtvn-controls-slider-thumb-container":"onThumbInactive","mousedown .mtvn-controls-slider-thumb-container":"onThumbActive"})},initialize:function(a){this.options=a,_.bindAll(this,"onThumbMove","onThumbInactive");var b=$(document);b.on("mousemove",this.onThumbMove),b.on("mouseup",this.onThumbInactive),this.$thumbContainer=this.$(".mtvn-controls-slider-thumb-container"),this.$progress=this.$(".mtvn-controls-slider-progress"),this.$buffered=this.$(".mtvn-controls-slider-buffered"),this.$timeDisplay=this.$(".mtvn-controls-slider-time-display"),this.$timeDuration=$(".mtvn-controls-slider-total-time"),this.$toolTipContainer=this.$(".mtvn-controls-slider-tool-tip-container"),this.$toolTipContainer.hide(),this.$toolTipTime=this.$(".mtvn-controls-slider-tool-tip-time"),this.$dividerContainer=this.$(".mtvn-controls-slider-segment-container"),this.throttledMeasure=_.throttle(this.measure,1500),this.throttledRender=_.throttle(this.render,250),this.moveTo=0,this.setDurations(this.options.durations),this.setPlayhead(this.options.playhead),a.isDVR?_.extend(this,e):a.isLive&&this.setEnabled(!1)},setPlayhead:function(a){this.dragging||this.seeking||(isNaN(a)&&(a=parseFloat(a,10)),isNaN(a)||(a=Math.round(100*a)/100,this.playhead=Math.max(0,Math.min(a,this.duration)),this.throttledRender()))},setDurations:function(b){if(_.isArray(b)){!this.options.isLive&&b.length>1&&!this.isSegmented&&_.extend(this,f);var c=0;this.durations=_.map(b,function(a){return c+=a}),this.duration=this.durations.pop(),this.throttledMeasure(),this.isSegmented?(this.createDividers(),this.moveDividers(),this.$dividerContainer.show(),this.on(a,_.bind(this.moveDividers,this))):this.$dividerContainer.hide(),this.throttledRender()}},render:function(){this.dragging||this.seeking||(this.checkLive(),this.throttledMeasure(),this.moveThumb(this.getLeftFromPlayhead(this.isLive()?this.duration:this.playhead)),this.updateTime())},setBuffered:function(a){if(!this.dragging&&!this.seeking&&this.duration>1){var b=Math.max(0,this.getLeftFromPlayhead(a));this.throttledMeasure(),b=Math.min(b,this.sliderWidth),this.$buffered.css({width:b})}},measure:function(){var b=this.$el[0].offsetWidth;b!==this.sliderWidth&&(this.sliderWidth=b,this.trigger(a,b))},isLive:function(){return!1},checkLive:function(){},setEnabled:function(a){a!==this.enabled&&(a?(this.$thumbContainer.show(),this.$timeDisplay.css({visibility:"visible"}),this.$buffered.show(),this.$progress.show()):(this.$thumbContainer.hide(),this.$timeDisplay.css({visibility:"hidden"}),this.$progress.hide(),this.$buffered.hide())),this.enabled=a},onSliderClick:function(a){if(a.preventDefault(),this.enabled&&!$(a.target).hasClass(b)){var c=a.pageX;this.containerOffset||(this.containerOffset=this.$el.offset().left),this.moveThumb(c-this.containerOffset),this.moveTo=c-this.containerOffset,this.sendSeek()}},onThumbActive:function(a){a.preventDefault();var e=this.$("."+b);e.removeClass(b),e.addClass(c),("touchstart"===a.type||"mousedown"===a.type)&&(this.dragging=!0),this.throttledMeasure(),this.$buffered.css({width:0}),this.$toolTipTime.html(d(this.playhead)),this.$toolTipContainer.show()},onThumbMove:function(a){if(this.dragging){a.preventDefault();var b;b="touchmove"===a.type?a.originalEvent.pageX:a.pageX,this.containerOffset||(this.containerOffset=this.$el.offset().left),this.moveTo=b-this.containerOffset,this.moveThumb(b-this.containerOffset)}},onThumbInactive:function(a){var d=a.currentTarget;if(!this.isParentOf(d,"div.mtvn-controls"))return void(this.dragging=!1);if(a.preventDefault(),!this.dragging){var e=a.pageX;this.moveTo=e-this.containerOffset,this.moveThumb(this.moveTo)}var f=this.$("."+c);f.removeClass(c),f.addClass(b),this.dragging=!1,this.sendSeek(),this.$toolTipContainer.hide()},moveThumb:function(a){var b=Math.max(0,a);b=Math.min(b,this.sliderWidth),isNaN(b)||Math.abs(this.lastLeft-b)<.25||(this.$thumbContainer.css({left:b}),this.$progress.css({width:b}),this.$toolTipTime.html(d(this.getTimeFromThumb(b))),this.lastLeft=b)},isParentOf:function(a,b){return $(a).parents(b).size()>0},getLeftFromPlayhead:function(a){if(!a)return 0;var b=a/Math.max(1,this.duration);return b*this.sliderWidth},getTimeFromThumb:function(a){isNaN(a)&&(a=parseFloat(this.$thumbContainer.css("left"),10));var b=a/this.sliderWidth;return b*this.duration},updateTime:function(){this.$timeDisplay.html(this.getTimeDisplayText()),this.$timeDuration.html(d(this.duration))},getTimeDisplayText:function(){return this.duration?this.isLive()?d(this.duration):'<span class="mtvn-controls-slider-current-time">'+d(this.playhead)+"</span>":""},sendSeek:function(){this.dragging?this.setPlayhead(this.getTimeFromThumb()):this.setPlayhead(this.getTimeFromThumb(this.moveTo)),this.trigger(i.SEEK,{type:i.SEEK,data:this.playhead})}})}(),c=b["src/controls/template.html"],d={hide:"mtvn-controls-hidden",slider:"mtvn-controls-slider",playPause:"mtvn-controls-play-pause",live:"mtvn-controls-live",volume:"mtvn-controls-volume",cc:"mtvn-controls-cc"},e=function(a,b,c,d){_.each(c,function(c){a.listenTo(b,c,d)})};return Backbone.View.extend({tagName:"div",className:"mtvn-controls",events:{"click .mtvn-controls-fullscreen":"onFullscreen","touchstart .mtvn-controls-fullscreen":"onFullscreen","click .mtvn-controls-rewind":"onRewind","touchstart .mtvn-controls-rewind":"onRewind"},initialize:function(a){this.options=a,_.bindAll(this,"sendEvent"),_.extend(this.options,{slider:d.slider}),this.render()},render:function(){var b=this.options;this.$el.html($(c(b))),this.playPauseButton=new k({el:this.$("."+d.playPause),paused:b.paused}),e(this,this.playPauseButton,[i.PLAY,i.PAUSE],this.sendEvent),this.slider=new a({el:this.$("."+d.slider),playhead:b.playhead,isLive:b.isLive,isDVR:b.isDVR,durations:b.durations}),this.listenTo(this.slider,i.SEEK,this.sendEvent),b.isLive&&(this.liveButton=new j({el:this.$("."+d.live),isLive:b.isLive}),b.isDVR&&(this.listenTo(this.liveButton,i.GO_LIVE,this.sendEvent),this.liveButton.listenTo(this.slider,i.IS_LIVE,this.liveButton.onLiveChange))),b.showVolume&&(this.volumeButton=new l({volume:b.volume,muted:b.muted,showVolumeSlider:b.showVolumeSlider,el:this.$("."+d.volume)}),e(this,this.volumeButton,[i.VOLUME,i.MUTE,i.UNMUTE],this.sendEvent)),this.closedCaptionButton=new g({ccEnabled:b.ccEnabled,el:this.$("."+d.cc)}),this.listenTo(this.closedCaptionButton,i.CC,this.sendEvent)},hide:function(){this.$el.addClass(d.hide),this.volumeButton&&this.volumeButton.setEnabled(!1)},show:function(){this.$el.removeClass(d.hide),this.volumeButton&&this.volumeButton.setEnabled(!0)},setVolume:function(a){this.volumeButton&&this.volumeButton.setVolume(a)},setPaused:function(a){this.playPauseButton.setPaused(a)},getPlayhead:function(){return this.slider.playhead},setPlayhead:function(a){this.slider.setPlayhead(a)},setBuffered:function(a){this.slider.setBuffered(a)},setDurations:function(a){this.slider.setDurations(a)},sendEvent:function(a){a.target=this,this.trigger(a.type,a)},onRewind:function(){event.preventDefault(),this.sendEvent({type:i.REWIND})},onFullscreen:function(a){a.preventDefault(),this.sendEvent({type:i.FULLSCREEN})}})}(),i={PLAY:"PLAY",PAUSE:"PAUSE",FULLSCREEN:"FULLSCREEN",CC:"CC",GO_LIVE:"GO_LIVE",IS_LIVE:"IS_LIVE",MUTE:"MUTE",VOLUME:"VOLUME",UNMUTE:"UNMUTE",REWIND:"REWIND",SEEK:"SEEK"},j=function(){var a={live:"mtvn-controls-is-live",golive:"mtvn-controls-go-live"};return Backbone.View.extend({initialize:function(a){this.options=a,this.setLive(a.isLive),_.bindAll(this,"onLiveChange")},events:{click:"toggle",touchstart:"toggle"},onLiveChange:function(a){this.setLive(a.data)},setLive:function(b){var c=this.$el;c.toggleClass(a.live,b),c.toggleClass(a.golive,!b)},toggle:function(b){b.preventDefault(),this.$el.hasClass(a.golive)&&this.trigger(i.GO_LIVE,{type:i.GO_LIVE})}})}(),k=function(){var a={play:"mtvn-controls-play",pause:"mtvn-controls-pause"};return Backbone.View.extend({initialize:function(b){this.options=b,this.$el.addClass(this.options.paused?a.play:a.pause)},events:{click:"toggle",touchstart:"toggle"},setPaused:function(b){var c=this.$el;c.toggleClass(a.play,b),c.toggleClass(a.pause,!b)},toggle:function(b){b.preventDefault();var c=this.$el,d=c.hasClass(a.pause),e=d?i.PAUSE:i.PLAY;c.toggleClass(a.play,d),c.toggleClass(a.pause,!d),this.trigger(e,{type:e})}})}(),l=function(){var a={controls:"mtvn-controls",unmute:"mtvn-controls-unmute",mute:"mtvn-controls-mute",showSlider:"mtvn-controls-volume-slider-container-over",slider:"mtvn-controls-volume-slider",thumb:"mtvn-controls-volume-slider-foreground"},b=function(b){var c=$(b.target);return c.hasClass(a.mute)||c.hasClass(a.unmute)};return Backbone.View.extend({enabled:!0,defaultEvents:{click:"toggle",touchstart:"toggle"},mouseEvents:{"click .mtvn-controls-volume-slider":"onSliderClick","touchstart .mtvn-controls-volume-slider":"onSliderClick",mouseover:"onMouseOver",mouseleave:"onMouseOut","mousedown .mtvn-controls-volume-slider-foreground":"onThumbActive","touchstart .mtvn-controls-volume-slider-foreground":"onThumbActive"},events:function(){return this.options.showVolumeSlider?_.extend(this.defaultEvents,this.mouseEvents):this.defaultEvents},initialize:function(b){if(_.bindAll(this,"updateView"),this.options=b,b.showVolumeSlider){_.bindAll(this,"onThumbMove","onThumbInactive","toggleSlider");var c=$(document);this.listenTo(c,"mousemove",this.onThumbMove),this.listenTo(c,"mouseup",this.onThumbInactive),this.$slider=this.$("."+a.slider),this.$container=$(this.$slider.parent()),this.$thumb=this.$("."+a.thumb)}this.isMuted=this.options.muted,this.setVolume(isNaN(b.volume)?.7:b.volume),_.delay(this.updateView,100)},setEnabled:function(b){this.enabled!==b&&(this.enabled=b,!b&&this.$container&&this.$container.removeClass(a.showSlider))},onThumbActive:function(a){a.preventDefault(),this.dragging=!0},getElementOffset:function(){if(!this.elOffset){var a=this.$el.offset();a.width>0&&(this.elOffset=a)}return this.elOffset},onMouseOut:function(b){this.isMouseOver=!1;var c=b.offsetX,d=this.getElementOffset();_.isUndefined(c)&&(c=b.pageX-d.left);var e=0>c||c>=d.width,f=b.toElement?$(b.toElement):$(b.relatedTarget),g=e&&f.hasClass(a.controls)?0:1500;_.delay(this.toggleSlider,g)},onMouseOver:function(){this.isMouseOver=this.enabled,this.toggleSlider()},toggleSlider:function(){this.$container.toggleClass(a.showSlider,this.isMouseOver)},onSliderClick:function(a){a.preventDefault(),this.isMuted=!1,this.trigger(i.UNMUTE,{type:i.UNMUTE}),this.setVolume(this.calculatePercentageFromTop(a.pageY-this.getContainerOffset()))},updateView:function(b){_.isUndefined(b)&&(b=this.isMuted?0:this.currentVolume),this.$thumb&&(this.$thumb.css({top:this.calculateSliderValueFromPercentage(b)}),0===this.getVolumeHeight()&&_.delay(this.updateView,100));var c=b>0;this.$el.toggleClass(a.mute,c),this.$el.toggleClass(a.unmute,!c)},onThumbMove:function(a){if(this.dragging){a.preventDefault();
var b=a.pageY;this.isMuted=!1,this.trigger(i.UNMUTE,{type:i.UNMUTE}),this.setVolume(this.calculatePercentageFromTop(b-this.getContainerOffset()))}},onThumbInactive:function(a){this.dragging&&(a.preventDefault(),this.dragging=!1)},calculatePercentageFromTop:function(a){var b=Math.max(0,a),c=this.getVolumeHeight();return b=Math.min(b,c),1-b/c},calculateSliderValueFromPercentage:function(a){return(1-a)*this.getVolumeHeight()},getContainerOffset:function(){return this.containerOffset||(this.containerOffset=this.$slider.offset().top),this.containerOffset},getVolumeHeight:function(){return this.volumeHeight||(this.volumeHeight=this.$slider.offset().height-this.$thumb.offset().height),this.volumeHeight},setVolume:function(a){isNaN(a)||(a=Math.round(100*a)/100,this.currentVolume!==a&&(this.currentVolume=a,this.trigger(i.VOLUME,{type:i.VOLUME,data:this.currentVolume,target:this}),this.updateView()))},toggle:function(c){if(this.isMuted=!1,c.preventDefault(),b(c)){var d=this.$el,e=d.hasClass(a.unmute),f=e?i.UNMUTE:i.MUTE,g=e?this.currentVolume:0;this.updateView(g),this.trigger(f,{type:f})}}})}();return{AdDisplay:a,Controls:h,Events:i,version:"0.5.1",build:"08/27/2013 02:44:16 PM"}}();define("player.gui",["backbone","jquery","_","handlebars"],function(a){return function(){var b;return b||a.GUI}}(this));var FullScreen=function(a){var b,c=a.cancelFullScreen||a.mozCancelFullScreen||a.webkitCancelFullScreen||a.msExitFullscreen,d=_.extend({},Backbone.Events,{toggle:function(a){return d.isFullScreen()?d.cancelFullScreen():d.requestFullScreen(a)},requestFullScreen:function(b){b=b||a.documentElement;var c=b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullScreen;return _.isFunction(c)?(c.call(b),!0):!1},cancelFullScreen:function(){return _.isFunction(c)?(c.call(a),!0):!1},isFullScreen:function(){return void 0!==a.fullScreenElement&&null!==a.fullScreenElement||void 0!==a.mozFullScreen&&a.mozFullScreen===!0||void 0!==a.webkitIsFullScreen&&a.webkitIsFullScreen===!0||void 0!==a.msFullScreenElement&&null!==a.msFullScreenElement},Events:{FULL_SCREEN_CHANGE:"fullscreenChange"}});return a.fullScreenEnabled||a.fullscreenEnabled?b="fullscreenchange":a.mozFullscreenEnabled||a.mozFullScreenEnabled?b="mozFullscreenchange":a.webkitFullscreenEnabled||a.webkitFullScreenEnabled?b="webkitFullscreenchange":(a.msFullscreenEnabled||a.msFullScreenEnabled)&&(b="msFullscreenchange"),b&&a.addEventListener(b,function(){d.trigger(d.Events.FULL_SCREEN_CHANGE,{type:d.Events.FULL_SCREEN_CHANGE,data:d.isFullScreen()})},!1),d}(document);define("fullscreen",["backbone","_"],function(a){return function(){var b;return b||a.FullScreen}}(this)),define("app/views/modules/body/video/video-player",["jquery","jquery.ui","app/controllers/reporting","_","marionette","app/views/yeti-modules","app/common/templating","player.gui","fullscreen","app/common/state","app/common/key-codes","app/common/media-query-utils"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=f.ModuleLayout.extend({ui:{volumeAdjustEl:".video-player-volume-adjust-container",volumeAdjustThumbEl:".video-player-volume-adjust-thumb-container",volumeAdjustBarOn:".video-player-volume-adjust-bar-on",videoPlayerInformation:".video-player-title-container-desktop-tablet",videoPlayerInformationMobile:".video-player-title-container-mobile",videoPlayerTotalTime:".mtvn-controls-slider-total-time",videoPlayerScreen:".video-player-screen",videoDimmer:".video-dimmer",videoPlayerInfoButton:".video-player-info-button",videoPlayerInfoBackButton:".video-player-info-back-button",videoPlayerContainer:".video-player-container",tvRatingEl:".property-rating",controllerVolumeButton:".mtvn-controls-volume",videoPlayerController:".mtvn-controls",fullScreenButton:".mtvn-controls-fullscreen",videoPlayer:".video-player",controlSlider:".mtvn-controls-slider",controlSliderBuffered:".mtvn-controls-slider-buffered",controlSliderProgress:".mtvn-controls-slider-progress",controlPlayPause:".mtvn-controls-play-pause",controlsTimeDisplay:".mtvn-controls-slider-time-display",adLabel:".ad-label"},events:{"mousemove .video-player, .mtvn-controls, .video-player-title-container-desktop-tablet":"onVideoPlayerFocus","mousedown .video-player, .mtvn-p":"onVideoPlayerClicked","mouseleave .video-player-screen, .mtvn-controls, .video-player-title-container-desktop-tablet":"onVideoPlayerBlur","mouseenter .mtvn-controls":"onControllerFocus","mouseleave .mtvn-controls":"onControllerBlur","mouseenter .video-player-volume-adjust-container":"onVolumeAdjusterFocus","mouseleave .video-player-volume-adjust-container":"onVolumeAdjusterBlur","mouseenter .mtvn-controls-volume":"showVolumeAdjuster","mouseleave .mtvn-controls-volume":"noShowVolumeAdjuster","click .video-player-info-button":"onClickVideoPlayerInfoButton","click .video-player-info-back-button":"onClickVideoPlayerInfoButton","dblclick .video-player object":"toggleFullScreen","click .video-dimmer":"onClickDimmer"},initialize:function(){this.controllerHasFocus=!1,this.debugMode=!1,this.fadeTVRatingTimeout=null,this.fadeControlTimeout=null,this.fadeVolumeTimeout=null,this.volumeHideTimer=null,this.volumeShowTimer=null,this.isTouchDevice=Modernizr.touch,this.NickApp=requirejs("app/app"),this.player=null,this.volumeLevel=0,this.$controllerEl=null,this.$fadingElements=null,this.durationsSet=!1,this.durations=null,this.totalDuration=null,this.startTimeBase=0,this.playlistIndex=0,this.itemType=null,this.isSidebarOpen=!1,this.canPlay=!1,this.isPlaying=!1,this.isPaused=!1,this.isCarouselOpen=!1,this.playerInitialized=!1,this.controls=null,this.playlistComplete=!1},onShow:function(){this.onIOS7Mobile=window.navigator.userAgent.match(/(iPhone).*OS 7/),this.isMobile=j.get("isMobile"),this.createPlayer(),this.listenTo(this.NickApp.vent,"propertycarousel.opened",this.onPropertyCarouselOpen),this.listenTo(this.NickApp.vent,"propertycarousel.closed",this.onPropertyCarouselClose),this.listenTo(this.NickApp.vent,"videoplayer.doPause",this.onVideoPlayerPause),this.listenTo(this.NickApp.vent,"videoplayer.doPlay",this.onVideoPlayerPlay),this.listenTo(this.NickApp.vent,"device:orientation",this.onOrientationChange),this.listenTo(this.NickApp.vent,"RelatedContent.videoClipChanged",this.playVideo),this.listenTo(this.NickApp.vent,"TVE:lock-content",this.fadeInControls),l.isMobile()&&this.ui.videoPlayerController.addClass("is-mobile"),this.setRating()},onOrientationChange:function(){a(window).width()},onVideoPlayerPlay:function(){this.canPlay===!0&&this.isPlaying===!1&&this.player.play()},onVideoPlayerPause:function(){this.isPlaying===!0&&this.player.pause()},togglePlayPause:function(a){a&&a.keyCode!==k.SPACEBAR||this.isSidebarOpen===!1&&("playing"===this.player.state?this.player.pause():this.canPlay===!0&&this.player.play())},updateVolumeSliderPosition:function(a){var b=Math.round(153*a/100);this.ui.volumeAdjustBarOn.css("height",b),this.onVolumeAdjust(a)},setVolume:function(a){isNaN(a)||(this.ui.volumeAdjustThumbEl.slider("value",a),this.updateVolumeSliderPosition(a))},onPropertyCarouselOpen:function(){clearTimeout(this.fadeControlTimeout),this.fadeInControls(),this.isCarouselOpen=!0},onPropertyCarouselClose:function(){clearTimeout(this.fadeControlTimeout),this.isCarouselOpen=!1},onClose:function(){this.isCarouselOpen=!1,clearTimeout(this.fadeControlTimeout),clearTimeout(this.fadeTVRatingTimeout),clearTimeout(this.fadeVolumeTimeout),this.fadeInControls(),a("body").off(".videoendlevel"),this.player.off("stateChange",a.proxy(this.onPlayerStateChange,this)),this.player.off("uiStateChange",a.proxy(this.onPlayerUIStateChange,this)),this.player.off("playheadUpdate",a.proxy(this.onPlayheadUpdate,this)),this.player.off("metadata",a.proxy(this.onPlayerEvents,this)),this.player.off("playlistComplete",a.proxy(this.onPlayerEvents,this)),this.player.off("mediaStart",a.proxy(this.onPlayerEvents,this)),this.player.off("indexChange",a.proxy(this.onPlayerEvents,this)),this.player.destroy()},onVolumeAdjusterFocus:function(){clearTimeout(this.fadeVolumeTimeout),clearTimeout(this.volumeHideTimer),clearTimeout(this.volumeShowTimer)},onVolumeAdjusterBlur:function(){this.hideVolumeAdjuster()},hideVolumeAdjuster:function(){var a=this.ui.videoPlayerController;clearTimeout(this.volumeShowTimer),clearTimeout(this.volumeHideTimer),this.ui.volumeAdjustEl.addClass("is-hidden"),this.volumeHideTimer=setTimeout(function(){a.addClass("volume-is-hidden")},1e3)},showVolumeAdjuster:function(){clearTimeout(this.volumeShowTimer),this.volumeShowTimer=setTimeout(a.proxy(this.launchVolumeAdjuster,this),300)},noShowVolumeAdjuster:function(){clearTimeout(this.volumeShowTimer)},launchVolumeAdjuster:function(){clearTimeout(this.volumeShowTimer),clearTimeout(this.volumeHideTimer),!this.isTouchDevice&&this.ui.volumeAdjustEl.hasClass("is-hidden")&&(this.ui.volumeAdjustEl.removeClass("is-hidden"),this.ui.videoPlayerController.removeClass("volume-is-hidden"),this.fadeVolumeTimeout=setTimeout(a.proxy(this.hideVolumeAdjuster,this),3e3))},onVideoPlayerFocus:function(){this.fadeInControls(),this.fadeOutControls(3e3)},onVideoPlayerClicked:function(){this.$fadingElements.hasClass("controls-are-hidden")?this.onVideoPlayerFocus():this.fadeOutControls()},onVideoPlayerBlur:function(){this.fadeOutControls(3e3)},onControllerFocus:function(){this.controllerHasFocus=!0},onControllerBlur:function(){this.controllerHasFocus=!1},onPlayerClickedOrTapped:function(a){this.$controllerEl.hasClass("controls-are-hidden")?this.fadeInControls():this.fadeOutControls()},fadeInControls:function(){clearTimeout(this.fadeControlTimeout),(this.playerInitialized||this.isAd)&&(this.$fadingElements.removeClass("controls-are-hidden"),this.NickApp.vent.trigger("VideoPlayer.fadeInControls"))},fadeOutControls:function(b){clearTimeout(this.fadeControlTimeout),this.NickApp.vent.trigger("VideoPlayer.fadeInControls"),b?this.fadeControlTimeout=setTimeout(a.proxy(this.hideAllControls,this),b):this.hideAllControls()},hideAllControls:function(){clearTimeout(this.fadeControlTimeout),this.controllerHasFocus===!1&&"playing"==this.player.state&&(this.$fadingElements.addClass("controls-are-hidden"),this.ui.volumeAdjustEl.addClass("is-hidden"),this.NickApp.vent.trigger("VideoPlayer.fadeOutControls"))},createVolumeAdjuster:function(){this.ui.videoPlayerController.addClass("volume-is-hidden"),this.ui.controlPlayPause.after(this.ui.controllerVolumeButton),this.ui.controllerVolumeButton.wrap('<div class="mtvn-controls-volume-wrapper" />'),this.ui.controllerVolumeButton.after(this.ui.volumeAdjustEl),this.ui.controllerVolumeButton.attr("data-type","3"),this.ui.volumeAdjustThumbEl.slider({max:100,min:0,step:1,value:100,animate:"fast",orientation:"vertical",slide:a.proxy(this.onVolumeAdjusterSlide,this)})},onVolumeAdjusterSlide:function(a,b){this.updateVolumeSliderPosition(b.value)},onVolumeAdjust:function(a){a=Math.round(a),this.player.volume(a/100);var b=Math.ceil(a/33);(this.volumeLevel!==b||0===a)&&(this.ui.controllerVolumeButton.attr("data-type",b),.1>=a?(this.player.mute(),this.setPlayerIsMuted(!0)):(this.player.unmute(),this.setPlayerIsMuted(!1))),this.volumeLevel=b},getSSID:function(){var a="Nick__",b="Video_Clips",c="Video_Full_Eps",d="Video_Playlist";return a+="episode"===this.itemType?c:"playlist"===this.itemType?d:b},createPlayer:function(){this.itemType=this.ui.videoPlayer.data("videoType");var b="100%",c="100%",d=a(".video-player")[0];this.player=new MTVNPlayer.Player(d,{params:{wmode:"opaque",controls:!1,bgcolor:"#000000"},flashVars:{autoPlay:!0,allowFullScreen:!0,sid:this.getSSID()},width:c,height:b}),this.createController(),this.createVolumeAdjuster()},initializePlayerExtras:function(){a("body").on("keypress.videoendlevel",d.bind(this.togglePlayPause,this))},createController:function(){var b=new h.Controls({showVolume:!0,ccEnabled:!0});this.Events=h.Events;var c=0;setInterval(function(){c+=1;var a=b.getPlayhead()+c;b.setBuffered(a)},250);this.controls=b,this.player.$el.append(this.controls.$el[0]),this.$controllerEl=a(".mtvn-controls"),this.$controllerEl.addClass("video-player-fade-out slide-when-sidebar-expanded"),this.$fadingElements=a(".video-player-fade-out"),this.bindUIElements(),this.ui.controlSliderTrack=a('<div class="mtvn-controls-slider-track" />'),this.ui.controlPlayPause.after(this.ui.controlsTimeDisplay),this.ui.controlSliderBuffered.before(this.ui.controlSliderTrack),this.ui.controlSliderProgress.after(this.ui.controlSliderSeekClicker),this.ui.controlSlider.after(this.ui.videoPlayerTotalTime),this.ui.controlSlider.after(this.ui.adLabel),this.ui.controlSlider.addClass("ad-hide"),this.ui.videoPlayerController.after(this.ui.videoPlayerInformationMobile),this.ui.videoPlayer.after(this.ui.videoPlayerInfoButton),this.controls.setPaused(!0),this.player.on("stateChange",a.proxy(this.onPlayerStateChange,this)),this.player.on("uiStateChange",a.proxy(this.onPlayerUIStateChange,this)),this.player.on("playheadUpdate",a.proxy(this.onPlayheadUpdate,this)),this.player.on("metadata",a.proxy(this.onPlayerEvents,this)),this.player.on("playlistComplete",a.proxy(this.onPlayerEvents,this)),this.player.on("mediaStart",a.proxy(this.onPlayerEvents,this)),this.player.on("indexChange",a.proxy(this.onPlayerEvents,this)),this.listenTo(this.controls,this.Events.PLAY,a.proxy(this.onPlayerPlay,this)),this.listenTo(this.controls,this.Events.PAUSE,a.proxy(this.onPlayerPause,this)),this.listenTo(this.controls,this.Events.SEEK,a.proxy(this.onPlayerSeek,this)),this.listenTo(this.controls,this.Events.CC,a.proxy(this.onPlayerCC,this)),this.listenTo(this.controls,this.Events.FULLSCREEN,a.proxy(this.onPlayerFullscreen,this)),j.isTouchDevice||(this.listenTo(this.controls,this.Events.MUTE,a.proxy(this.onPlayerMuted,this)),this.listenTo(this.controls,this.Events.UNMUTE,a.proxy(this.onPlayerUnmuted,this)))},onPlayerMuted:function(){this.player.mute(),this.setVolume(0)},onPlayerUnmuted:function(){this.player.unmute(),this.setVolume(100)},onPlayerPlay:function(){this.isPaused=!1,this.canPlay&&this.player.play()},onPlayerPause:function(){this.isPaused=!0,this.player.pause()},onPlayerSeek:function(a){if(this.durations){for(var b=a.data,c=0,d=0;d<this.durations.length;d++){if(!(b-this.durations[d]>0)){c=d;break}b-=this.durations[d]}c!==this.playlistIndex||this.playlistComplete?(this.playlistComplete=!1,this.ui.videoPlayerScreen.removeClass("playComplete"),this.player.playIndex(c,b)):this.player.seek(a.data)}},onPlayerCC:function(){this.player.showCCPanel()},onPlayerFullscreen:function(){this.toggleFullScreen()},onPlayerUIStateChange:function(a){a.data.isActive===!0?this.fadeInControls():this.hideAllControls()},onPlayerStateChange:function(a){var b;switch(a.data){case"connected":case"canplay":if(this.playerInitialized||(this.playerInitialized=!0,this.initializePlayerExtras(),this.fadeInControls()),this.durationsSet===!1){var c=0;for(b=a.target.playlistMetadata.items,this.durations=[],d=0;d<b.length;d++)this.durations[d]=Math.round(b[d].duration),c+=this.durations[d];this.totalDuration=c,this.controls.setDurations(this.durations),this.playlistComplete=!1,this.durationsSet=!0}this.playlistIndex=a.target.playlistMetadata.index,this.startTimeBase=0;for(var d=0;d<this.playlistIndex;d++)this.startTimeBase+=this.durations[d];var e=100*this.player.volume();this.setVolume(e),0===e&&this.setPlayerIsMuted(!0);break;case"playing":this.fadeOutControls(3e3),this.controls.setPaused(!1),this.isPlaying=!0;break;case"paused":this.controls.setPaused(!0),this.isPlaying=!1}},onPlayheadUpdate:function(a){this.isAd||this.controls.setPlayhead(this.startTimeBase+a.data),this.isSidebarOpen===!0&&"function"==typeof this.player.pause&&this.player.pause()},onPlayerEvents:function(a){switch(a.type){case"metadata":this.isAd=a.data.isAd,this.setAdBar();break;case"playlistComplete":this.playlistComplete=!0,this.fadeOutControls(),this.ui.videoPlayerScreen.addClass("playComplete"),this.NickApp.vent.trigger("videoplayer.playlistComplete"),this.isAd=!1,this.setAdBar();break;case"mediaStart":this.canPlay=!0,this.setRating(),this.NickApp.vent.trigger("videoplayer.mediaStart"),this.player.volume()<.3&&(this.setVolume(0),this.setPlayerIsMuted(!0)),this.ui.videoPlayerController.css("display","block");break;case"indexChange":this.NickApp.vent.trigger("videoplayer.indexChange",a)}},setRating:function(){"episode"===this.itemType?this.ui.tvRatingEl.removeClass("hidden"):this.ui.tvRatingEl.addClass("hidden")},setPlayerIsMuted:function(a){this.ui.controllerVolumeButton.toggleClass("mtvn-controls-mute",!a),this.ui.controllerVolumeButton.toggleClass("mtvn-controls-unmute",a)},setAdBar:function(){var b=a(".ad-hide");this.isAd?(this.ui.adLabel.show(),b.hide(),this.fadeInControls()):(this.ui.adLabel.hide(),b.show())},toggleFullScreen:function(){var a=j.get("isFullScreen");a=a?!1:!0,j.set("isFullScreen",a),this.ui.fullScreenButton.toggleClass("is-active",j.get("isFullScreen")),i.isFullScreen()?i.cancelFullScreen():(this.isNativeFullScreen=i.requestFullScreen(this.$el[0]),this.isNativeFullScreen||(this.$el.toggleClass("fullScreen"),this.$el.parent().toggleClass("fullScreen"),this.$el.parent().parent().toggleClass("fullScreen")))},onClickVideoPlayerInfoButton:function(){this.ui.videoPlayerContainer.toggleClass("is-info-expanded")},onClickDimmer:function(){this.NickApp.vent.trigger("sidePanel.hide")},playVideo:function(a){this.durations=[];var b=a.duration.split(":");if(b.length>1){var c=60*parseInt(b[0],10)+parseInt(b[1],10);this.durations[0]=c}var d=a.contentUri;this.player.playURI(d),this.controls.setDurations(this.durations),this.playlistComplete=!1}});return m}),define("app/views/modules/body/video/video-content-1.0.0",["jquery","backbone","TVEAuth","app/views/yeti-modules","app/common/state","app/common/tve-utils/tve-bumper","app/views/modules/body/video/video-player","app/common/audio/index"],function(a,b,c,d,e,f,g,h){var i=d.ModuleLayout.extend({template:"modules/body/video/video-content",regions:{videoPlayerContent:"#player"},ui:{videoPlayerBackButton:".video-player-back-button",videoPlayerContainer:".video-player-container",videoPlayerModule:".player-module",videoPlayer:".video-player"},initialize:function(){this.app=requirejs("app/app"),this.isTouchDevice=Modernizr.touch,this.tveBumper=f.getInstance()},onShow:function(){this.videoPlayer=new g,this.authRequired=this.ui.videoPlayer.data("auth-required"),this.isLocked=!0,this.setupListeners(),this.authRequired!==!0?(this.videoPlayerContent.setView(this.videoPlayer,!0,this.ui.videoPlayerContainer),this.isLocked=!1):this.tveBumper.tve.hasBeenInitialized&&(this.isLocked=!0,this.tveBumper.tve.checkAuthentication())},onClose:function(){this.stopListening()},setupListeners:function(){this.authRequired===!0&&(this.listenTo(this.app.vent,"TVE:unlock-content",this.unlockEpisode),this.listenTo(this.app.vent,"TVE:lock-content",this.lockEpisode)),this.listenTo(e,"change:urlChanged",this.onUrlChange),this.listenTo(b.history,"route",this.onUrlChange)},onUrlChange:function(){window.TVEAuth.wrapObj&&window.TVEAuth.wrapObj.hide()},unlockEpisode:function(){this.isLocked&&(this.ui.videoPlayerContainer.removeClass("locked"),this.videoPlayerContent.currentView?this.ui.videoPlayer.removeClass("hidden"):this.videoPlayerContent.setView(this.videoPlayer,!0,this.ui.videoPlayerContainer),this.isLocked=!1)},lockEpisode:function(){this.ui.videoPlayerContainer.addClass("locked"),this.isLocked=!0,this.videoPlayerContent.currentView&&this.ui.videoPlayer.addClass("hidden"),this.launchedTveModal||(h.play(this,"grownups-message"),this.app.execute("display-tve-modal"),this.launchedTveModal=!0)}});return i}),define("app/views/modules/carousel",["jquery","app/views/yeti-modules","app/common/state"],function(a,b,c){var d=b.ModuleItemView.extend({ui:{wrapper:".carousel-wrapper",list:".carousel-list",listItems:".carousel-list-item",mask:".carousel-mask",next:".carousel-arrow-next",previous:".carousel-arrow-previous"},events:{"click .carousel-arrow-next":"gotoNext","touchend .carousel-arrow-next":"gotoNext","click .carousel-arrow-previous":"gotoPrevious","touchend .carousel-arrow-previous":"gotoPrevious"},defaults:{visibleItems:3,stepSize:3,responsiveWidth:!0,animationSpeed:1200,animationFunctionCss:"ease",animationFuncitonJs:"swing",disableAnimation:!1,infinite:!0,animateProperty:"x",dynamicMask:!0,disableOnMobile:!1,peek:!1},options:{},initialize:function(){this.options=a.extend({},this.defaults,this.options),a.support.transition||(this.options.animateProperty="left"),this.animating=!1,this.currentIndex=0,this.last=!1,this.first=!0,this.attached=!1;var b=c.get("appPath");this.app=requirejs(b),this.adfree=!1},attach:function(){this.attached=!0,this.bindUIElements(),this.$el.removeClass("is-mobile"),this.$el.addClass("is-desktop"),this.options.responsiveWidth?(this.listenTo(this.app.vent,"device:lazyresize",this._resize),this._resize()):(this._updateCarouselWidth(),this._updateNavigation())},detach:function(){this.attached=!1,this.unbindUIElements(),this.stopListening(this.app.vent,"device:lazyresize",this._resize),this.$el.removeClass("is-desktop"),this.$el.addClass("is-mobile")},onShow:function(){this._checkMobile(),this.listenTo(this.app.vent,"device:lazyresize",this._checkMobile)},onClose:function(){this.detach(),this.stopListening()},gotoNext:function(a){if(!this.animating){a&&a.preventDefault();var b=this.currentIndex+this.options.visibleItems+this.options.stepSize,c=!1;if(this.options.peek&&(b+=2),b>this.ui.list.children().length&&this.options.infinite&&(c=!0),this.last||c){if(!this.options.infinite)return;this.last=!1,this._infinitePush()}var d=this.currentIndex+this.options.stepSize;this.gotoSlide(d)}},gotoPrevious:function(a){if(!this.animating){a&&a.preventDefault();var b=this.currentIndex-(this.options.visibleItems+this.options.stepSize),c=!1;if(0>b&&this.options.infinite&&(c=!0),this.first||c){if(!this.options.infinite)return;this.first=!1,this._infiniteUnshift()}var d=this.currentIndex-this.options.stepSize;this.gotoSlide(d)}},gotoSlide:function(a,b){if(!this.animating){b=b||!1,this.currentIndex=a;var c=this.ui.list.children();this.currentIndex<0?this.currentIndex=0:this.currentIndex+this.options.visibleItems>c.length&&(this.currentIndex=c.length-this.options.visibleItems);var d=this.currentIndex*this.itemWidth;this.animating=!0,this.ui.next&&this.ui.previous&&this._updateNavigation(),this.options.disableAnimation||b?(this.ui.list.css(this.options.animateProperty,-1*d),this.animating=!1):(this.last&&(d+=.2*this.itemWidth),this._animate(d))}},insert:function(a,b){b=b||"end","end"===b?this.ui.list.append(a):this.ui.list.prepend(a),this._updateCarouselWidth()},_checkMobile:function(){var a=this._isMobile();a&&this.attached?this.detach():a||this.attached||this.attach()},_isMobile:function(){var a=!1;return("mobile-landscape"===c.get("deviceBreakpoint")||"mobile-portrait"===c.get("deviceBreakpoint"))&&(a=!0),a},_cleanup:function(){var a=this.ui.list.children(),b=a.filter(".cleanup"),c=a.index(b.eq(0)),d=b.length*this.itemWidth,e=this.currentIndex*this.itemWidth,f=0;if(0===c){f=e-d;var g=b.length;b.remove(),this.ui.list.width(this.itemWidth*this.ui.list.children().length),this._resetList(f),this.currentIndex=this.currentIndex-g}else b.remove(),this.ui.list.width(this.itemWidth*this.ui.list.children().length)},_animate:function(b){var c=this,d=function(){c.animating=!1,c._cleanup()};a.support.transition?this.ui.list.transition({x:-1*b,easing:this.options.animationFunctionCss,duration:this.options.animationSpeed,complete:d}):this.ui.list.animate({left:-1*b},{duration:this.options.animationSpeed,complete:d,easing:this.options.animationFunctionJs})},_infinitePush:function(){for(var a=(this.currentIndex*this.itemWidth,0);a<this.options.stepSize;a++){var b=this.ui.list.children().eq(a);this.ui.list.append(b.clone()),b.addClass("cleanup")}this.ui.list.css("width",this.itemWidth*this.ui.list.children().length)},_infiniteUnshift:function(){for(var a=this.currentIndex*this.itemWidth,b=this.ui.list.children(),c=b.length;c>=b.length-this.options.stepSize;c--){var d=b.eq(c);this.ui.list.prepend(d.clone()),d.addClass("cleanup")}var e=a+this.options.stepSize*this.itemWidth;this.ui.list.css(this.options.animateProperty,-1*e),this.ui.list.width(this.itemWidth*this.ui.list.children().length),this.currentIndex+=this.options.stepSize},_resetList:function(a){a=a||0,this.ui.list.css(this.options.animateProperty,-1*a)},_updateNavigation:function(){this.currentIndex+this.options.visibleItems===this.ui.list.children().length?(this.last=!0,this.options.infinite||(this.ui.wrapper.addClass("next-disabled"),this.options.alwaysShowNav||this.ui.wrapper.addClass("next-hidden"))):(this.ui.wrapper.removeClass("next-disabled next-hidden"),this.last=!1),0===this.currentIndex?(this.first=!0,this.options.infinite||(this.ui.wrapper.addClass("previous-disabled"),this.options.alwaysShowNav||this.ui.wrapper.addClass("previous-hidden"))):(this.ui.wrapper.removeClass("previous-disabled previous-hidden"),this.first=!1)},_updateCarouselWidth:function(){var a=this.ui.list.children();if(this.itemWidth=a.outerWidth(!0),this.options.dynamicMask){this.ui.mask.height(a.outerHeight(!0)),this.ui.mask.width(this.itemWidth*this.options.visibleItems);var b=this.ui.previous.outerWidth(!0)+this.ui.next.outerWidth(!0);this.ui.wrapper.width(this.ui.mask.outerWidth()+b)}this.ui.list.width(this.itemWidth*a.length)},_resize:function(){if(!this._isMobile()){this.itemWidth=this.ui.list.children().outerWidth(!0);var a=this.ui.wrapper.outerWidth(!0);(this.options.dynamicMask||this.options.peek)&&(a-=this.ui.next.outerWidth(!0),a-=this.ui.previous.outerWidth(!0)),this.options.visibleItems=Math.floor(a/this.itemWidth),this.options.stepSize=this.options.visibleItems,this._updateCarouselWidth(),this._updateNavigation(),this.gotoSlide(0,!0)}}});return d}),define("app/views/modules/body/related-content",["jquery","_","app/views/yeti-modules","app/views/modules/carousel","app/common/templating","app/common/state"],function(a,b,c,d,e,f){var g=c.ModuleLayout.extend({regions:{carouselWrapper:".carousel-wrapper"},ui:{relatedContainer:".relatedContainer",secondsContainer:".seconds",watchAgainButton:".watch-again-button",upNextModule:".up-next",seeMoreModule:".see-more",propertyImage:".see-more a img",relatedWrapper:".related-videos-wrapper",relatedMask:".carousel-mask",carouselList:".carousel-list",carouselListItems:".carousel-list-item",carouselArrows:".carousel-arrow"},events:{"click .resume-button":"onResumeClick","click .watch-again-button":"onWatchAgainClick","click .orange-close":"stopCountDown","touchend .carousel-arrow":"setCarouselWidth","click .carousel-arrow":"setCarouselWidth","click a.route":"onClickPromo","click .related-video a, .up-next a":"relatedTracking"},initialize:function(){this.app=requirejs("app/app"),this.countDown=null,this.countDownSeconds=null,this.isTouchDevice=Modernizr.touch,this.relatedCarousel=null,this.playlistComplete=!1,this.relatedHidden=!1,this.itemWidth=0},onShow:function(){window.location.pathname;switch(this.removedItems=0,this.currentUrlKey=this.$el.find(".relatedContainer").data("urlkey"),this.initListeners(),window.picturefill(),this.itemWidth=this.ui.carouselList.find(".carousel-list-item:first-child img").width(),this.ui.carouselListItems.length){case 0:this.relatedHidden=!0,this.app.vent.trigger("sidePanelTabs.hideRelated"),this.$el.hide();break;case 1:this.ui.relatedWrapper.hide();break;default:this.ui.carouselListItems.each(b.bind(this.updateRelatedIem,this)),this.initRelatedCarousel()}var a=f.get("orientation");"portrait"!==a&&this.app.vent.trigger("sidePanel.close")},initListeners:function(){this.listenTo(this.app.vent,"device:lazyresize",this.checkEndSlate),this.listenTo(this.app.vent,"sidePanel.showContent",this.toggleContent),this.listenTo(this.app.vent,"sidePanel.close",this.stopCountDown)},updateRelatedIem:function(b,c){var d=a(c);d.data("urlkey")===this.currentUrlKey&&(d.next().length>0&&this.updateNextItem(d.next()),d.remove(),this.removedItems++),d.find("a").attr("data-related",b-this.removedItems+1),d.css("max-width",this.itemWidth)},initRelatedCarousel:function(){this.ui.carouselList.children().length>3?(this.relatedCarousel=new d({dynamicMask:!1,infinite:!1,stepSize:2}),this.carouselWrapper.setView(this.relatedCarousel,!0,this.ui.relatedWrapper)):this.ui.carouselArrows.hide()},setCarouselWidth:function(b){var c=0;"mobile-landscape"!==f.get("deviceBreakpoint")?(this.ui.carouselListItems.each(function(){a(this).css("max-width",a(this).width())}),c=this.ui.relatedMask.parent().hasClass("previous-disabled")||this.ui.relatedMask.parent().hasClass("next-disabled")?this.$el.outerWidth()-116:this.$el.outerWidth()-172,this.ui.relatedMask.width!==c&&this.ui.relatedMask.css({width:c}),this.relatedCarousel&&this.relatedCarousel._resize()):this.ui.relatedMask.css({width:"auto"})},checkEndSlate:function(a){"landscape"===f.get("orientation")&&(window.picturefill(),this.relatedCarousel&&this.relatedCarousel.attached&&(this.relatedCarousel._resetList(),this.relatedCarousel._updateCarouselWidth(),this.setCarouselWidth()))},onShowRelated:function(a){this.$el.removeClass("is-closed"),"landscape"===f.get("orientation")&&(this.relatedCarousel&&this.relatedCarousel.attached&&this.relatedCarousel._resetList(),this.checkEndSlate(),this.$el.toggleClass("paused",!this.playlistComplete))},toggleContent:function(a){"related"===a?this.onShowRelated():this.onHideRelated()},onHideRelated:function(a){this.$el.addClass("is-closed")},onResumeClick:function(){this.app.vent.trigger("sidePanel.hide")},onWatchAgainClick:function(a){a.preventDefault(),window.location.reload(!1)},onClickPromo:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("href");this.app.execute("change-path",d)},updateNextItem:function(a){},relatedTracking:function(b){var c=a(b.currentTarget).data("related")||0;a(document).trigger("nickapp.relatedTabTracking",[{relatedItemNum:c}])}});return g}),define("app/views/modules/body/video/video-related",["jquery","_","app/views/yeti-modules","app/views/modules/carousel","app/views/modules/body/related-content","app/common/templating","app/common/state"],function(a,b,c,d,e,f,g){var h=e.extend({initialize:function(){this.app=requirejs("app/app"),this.countDown=null,this.countDownSeconds=null,this.isTouchDevice=Modernizr.touch,this.relatedCarousel=null,this.relatedHidden=!1},onClose:function(){this.stopCountDown()},initListeners:function(){this.listenTo(this.app.vent,"device:lazyresize",this.checkEndSlate),this.listenTo(this.app.vent,"videoplayer.playlistComplete",this.playNextVideo),this.listenTo(this.app.vent,"sidePanel.showContent",this.toggleContent),this.listenTo(this.app.vent,"sidePanel.close",this.stopCountDown)},startCountDown:function(){var a=this;this.countDownSeconds=9,this.ui.secondsContainer.css("color","#fff"),this.ui.secondsContainer.html("10"),this.stopCountDown(),this.countDown=setInterval(function(){a.counterDowner()},1e3)},counterDowner:function(){if(this.countDownSeconds<=0){var a=this.$(".up-next a").attr("href");this.app.execute("change-path",a),this.stopCountDown()}this.countDownSeconds<4&&this.ui.secondsContainer.css("color","red"),this.ui.secondsContainer.html(this.countDownSeconds),this.countDownSeconds--},stopCountDown:function(){clearInterval(this.countDown)},playNextVideo:function(){var a=this.$(".up-next a").attr("href");this.app.execute("change-path",a)},updateNextItem:function(a){var b={};b.duration=a.find(".duration").html(),b.seriesTitle=a.find(".series-title").html(),b.videoTitle=a.find(".video-title").html(),b.url=a.find("a").attr("href");var c=a.find(".image-span");b.oneByOne=c.data("oneByOne"),b.sixteenByNine=c.data("sixteenByNine");var d=f.render("modules/body/video/up-next",b);this.ui.upNextModule.html(d),window.picturefill()}});return h}),(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto),define("vendor/swipe",function(){}),function(a){function b(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=j),
void 0!==b.click&&void 0===b.tap&&(b.tap=b.click),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var d=a(this),e=d.data(z);e||(e=new c(this,b),d.data(z,e))})}function c(b,c){function A(b){if(!(ha()||a(b.target).closest(c.excludedElements,Qa).length>0)){var d,e=b.originalEvent?b.originalEvent:b,f=y?e.touches[0]:e;return Ra=u,y?Sa=e.touches.length:b.preventDefault(),Ha=0,Ia=null,Oa=null,Ja=0,Ka=0,La=0,Ma=1,Na=0,Ta=ma(),Pa=pa(),fa(),!y||Sa===c.fingers||c.fingers===s||P()?(ja(0,f),Ua=ya(),2==Sa&&(ja(1,e.touches[1]),Ka=La=sa(Ta[0].start,Ta[1].start)),(c.swipeStatus||c.pinchStatus)&&(d=H(e,Ra))):d=!1,d===!1?(Ra=x,H(e,Ra),d):void ia(!0)}}function B(a){var b=a.originalEvent?a.originalEvent:a;if(Ra!==w&&Ra!==x&&!ga()){var d,e=y?b.touches[0]:b,f=ka(e);if(Va=ya(),y&&(Sa=b.touches.length),Ra=v,2==Sa&&(0==Ka?(ja(1,b.touches[1]),Ka=La=sa(Ta[0].start,Ta[1].start)):(ka(b.touches[1]),La=sa(Ta[0].end,Ta[1].end),Oa=ua(Ta[0].end,Ta[1].end)),Ma=ta(Ka,La),Na=Math.abs(Ka-La)),Sa===c.fingers||c.fingers===s||!y||P()){if(Ia=xa(f.start,f.end),N(a,Ia),Ha=va(f.start,f.end),Ja=ra(),na(Ia,Ha),(c.swipeStatus||c.pinchStatus)&&(d=H(b,Ra)),!c.triggerOnTouchEnd||c.triggerOnTouchLeave){var g=!0;if(c.triggerOnTouchLeave){var h=za(this);g=Aa(f.end,h)}!c.triggerOnTouchEnd&&g?Ra=G(v):c.triggerOnTouchLeave&&!g&&(Ra=G(w)),(Ra==x||Ra==w)&&H(b,Ra)}}else Ra=x,H(b,Ra);d===!1&&(Ra=x,H(b,Ra))}}function C(a){var b=a.originalEvent;return y&&b.touches.length>0?(ea(),!0):(ga()&&(Sa=Xa),a.preventDefault(),Va=ya(),Ja=ra(),K()?(Ra=x,H(b,Ra)):c.triggerOnTouchEnd||0==c.triggerOnTouchEnd&&Ra===v?(Ra=w,H(b,Ra)):!c.triggerOnTouchEnd&&W()?(Ra=w,I(b,Ra,n)):Ra===v&&(Ra=x,H(b,Ra)),void ia(!1))}function D(){Sa=0,Va=0,Ua=0,Ka=0,La=0,Ma=1,fa(),ia(!1)}function E(a){var b=a.originalEvent;c.triggerOnTouchLeave&&(Ra=G(w),H(b,Ra))}function F(){Qa.unbind(Ca,A),Qa.unbind(Ga,D),Qa.unbind(Da,B),Qa.unbind(Ea,C),Fa&&Qa.unbind(Fa,E),ia(!1)}function G(a){var b=a,d=M(),e=J(),f=K();return!d||f?b=x:!e||a!=v||c.triggerOnTouchEnd&&!c.triggerOnTouchLeave?!e&&a==w&&c.triggerOnTouchLeave&&(b=x):b=w,b}function H(a,b){var c=void 0;return T()||S()?c=I(a,b,l):(Q()||P())&&c!==!1&&(c=I(a,b,m)),ca()&&c!==!1?c=I(a,b,o):da()&&c!==!1?c=I(a,b,p):ba()&&c!==!1&&(c=I(a,b,n)),b===x&&D(a),b===w&&(y?0==a.touches.length&&D(a):D(a)),c}function I(b,j,k){var q=void 0;if(k==l){if(Qa.trigger("swipeStatus",[j,Ia||null,Ha||0,Ja||0,Sa]),c.swipeStatus&&(q=c.swipeStatus.call(Qa,b,j,Ia||null,Ha||0,Ja||0,Sa),q===!1))return!1;if(j==w&&R()){if(Qa.trigger("swipe",[Ia,Ha,Ja,Sa]),c.swipe&&(q=c.swipe.call(Qa,b,Ia,Ha,Ja,Sa),q===!1))return!1;switch(Ia){case d:Qa.trigger("swipeLeft",[Ia,Ha,Ja,Sa]),c.swipeLeft&&(q=c.swipeLeft.call(Qa,b,Ia,Ha,Ja,Sa));break;case e:Qa.trigger("swipeRight",[Ia,Ha,Ja,Sa]),c.swipeRight&&(q=c.swipeRight.call(Qa,b,Ia,Ha,Ja,Sa));break;case f:Qa.trigger("swipeUp",[Ia,Ha,Ja,Sa]),c.swipeUp&&(q=c.swipeUp.call(Qa,b,Ia,Ha,Ja,Sa));break;case g:Qa.trigger("swipeDown",[Ia,Ha,Ja,Sa]),c.swipeDown&&(q=c.swipeDown.call(Qa,b,Ia,Ha,Ja,Sa))}}}if(k==m){if(Qa.trigger("pinchStatus",[j,Oa||null,Na||0,Ja||0,Sa,Ma]),c.pinchStatus&&(q=c.pinchStatus.call(Qa,b,j,Oa||null,Na||0,Ja||0,Sa,Ma),q===!1))return!1;if(j==w&&O())switch(Oa){case h:Qa.trigger("pinchIn",[Oa||null,Na||0,Ja||0,Sa,Ma]),c.pinchIn&&(q=c.pinchIn.call(Qa,b,Oa||null,Na||0,Ja||0,Sa,Ma));break;case i:Qa.trigger("pinchOut",[Oa||null,Na||0,Ja||0,Sa,Ma]),c.pinchOut&&(q=c.pinchOut.call(Qa,b,Oa||null,Na||0,Ja||0,Sa,Ma))}}return k==n?(j===x||j===w)&&(clearTimeout(Za),X()&&!$()?(Ya=ya(),Za=setTimeout(a.proxy(function(){Ya=null,Qa.trigger("tap",[b.target]),c.tap&&(q=c.tap.call(Qa,b,b.target))},this),c.doubleTapThreshold)):(Ya=null,Qa.trigger("tap",[b.target]),c.tap&&(q=c.tap.call(Qa,b,b.target)))):k==o?(j===x||j===w)&&(clearTimeout(Za),Ya=null,Qa.trigger("doubletap",[b.target]),c.doubleTap&&(q=c.doubleTap.call(Qa,b,b.target))):k==p&&(j===x||j===w)&&(clearTimeout(Za),Ya=null,Qa.trigger("longtap",[b.target]),c.longTap&&(q=c.longTap.call(Qa,b,b.target))),q}function J(){var a=!0;return null!==c.threshold&&(a=Ha>=c.threshold),a}function K(){var a=!1;return null!==c.cancelThreshold&&null!==Ia&&(a=oa(Ia)-Ha>=c.cancelThreshold),a}function L(){return null!==c.pinchThreshold?Na>=c.pinchThreshold:!0}function M(){var a;return a=c.maxTimeThreshold&&Ja>=c.maxTimeThreshold?!1:!0}function N(a,b){if(c.allowPageScroll===j||P())a.preventDefault();else{var h=c.allowPageScroll===k;switch(b){case d:(c.swipeLeft&&h||!h&&c.allowPageScroll!=q)&&a.preventDefault();break;case e:(c.swipeRight&&h||!h&&c.allowPageScroll!=q)&&a.preventDefault();break;case f:(c.swipeUp&&h||!h&&c.allowPageScroll!=r)&&a.preventDefault();break;case g:(c.swipeDown&&h||!h&&c.allowPageScroll!=r)&&a.preventDefault()}}}function O(){var a=U(),b=V(),c=L();return a&&b&&c}function P(){return!!(c.pinchStatus||c.pinchIn||c.pinchOut)}function Q(){return!(!O()||!P())}function R(){var a=M(),b=J(),c=U(),d=V(),e=K(),f=!e&&d&&c&&b&&a;return f}function S(){return!!(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)}function T(){return!(!R()||!S())}function U(){return Sa===c.fingers||c.fingers===s||!y}function V(){return 0!==Ta[0].end.x}function W(){return!!c.tap}function X(){return!!c.doubleTap}function Y(){return!!c.longTap}function Z(){if(null==Ya)return!1;var a=ya();return X()&&a-Ya<=c.doubleTapThreshold}function $(){return Z()}function _(){return!(1!==Sa&&y||!isNaN(Ha)&&0!==Ha)}function aa(){return Ja>c.longTapThreshold&&t>Ha}function ba(){return!(!_()||!W())}function ca(){return!(!Z()||!X())}function da(){return!(!aa()||!Y())}function ea(){Wa=ya(),Xa=event.touches.length+1}function fa(){Wa=0,Xa=0}function ga(){var a=!1;if(Wa){var b=ya()-Wa;b<=c.fingerReleaseThreshold&&(a=!0)}return a}function ha(){return!(Qa.data(z+"_intouch")!==!0)}function ia(a){a===!0?(Qa.bind(Da,B),Qa.bind(Ea,C),Fa&&Qa.bind(Fa,E)):(Qa.unbind(Da,B,!1),Qa.unbind(Ea,C,!1),Fa&&Qa.unbind(Fa,E,!1)),Qa.data(z+"_intouch",a===!0)}function ja(a,b){var c=void 0!==b.identifier?b.identifier:0;return Ta[a].identifier=c,Ta[a].start.x=Ta[a].end.x=b.pageX||b.clientX,Ta[a].start.y=Ta[a].end.y=b.pageY||b.clientY,Ta[a]}function ka(a){var b=void 0!==a.identifier?a.identifier:0,c=la(b);return c.end.x=a.pageX||a.clientX,c.end.y=a.pageY||a.clientY,c}function la(a){for(var b=0;b<Ta.length;b++)if(Ta[b].identifier==a)return Ta[b]}function ma(){for(var a=[],b=0;5>=b;b++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return a}function na(a,b){b=Math.max(b,oa(a)),Pa[a].distance=b}function oa(a){return Pa[a].distance}function pa(){var a={};return a[d]=qa(d),a[e]=qa(e),a[f]=qa(f),a[g]=qa(g),a}function qa(a){return{direction:a,distance:0}}function ra(){return Va-Ua}function sa(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function ta(a,b){var c=b/a*1;return c.toFixed(2)}function ua(){return 1>Ma?i:h}function va(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function wa(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return 0>f&&(f=360-Math.abs(f)),f}function xa(a,b){var c=wa(a,b);return 45>=c&&c>=0?d:360>=c&&c>=315?d:c>=135&&225>=c?e:c>45&&135>c?g:f}function ya(){var a=new Date;return a.getTime()}function za(b){b=a(b);var c=b.offset(),d={left:c.left,right:c.left+b.outerWidth(),top:c.top,bottom:c.top+b.outerHeight()};return d}function Aa(a,b){return a.x>b.left&&a.x<b.right&&a.y>b.top&&a.y<b.bottom}var Ba=y||!c.fallbackToMouseEvents,Ca=Ba?"touchstart":"mousedown",Da=Ba?"touchmove":"mousemove",Ea=Ba?"touchend":"mouseup",Fa=Ba?null:"mouseleave",Ga="touchcancel",Ha=0,Ia=null,Ja=0,Ka=0,La=0,Ma=1,Na=0,Oa=0,Pa=null,Qa=a(b),Ra="start",Sa=0,Ta=null,Ua=0,Va=0,Wa=0,Xa=0,Ya=0,Za=null;try{Qa.bind(Ca,A),Qa.bind(Ga,D)}catch($a){a.error("events not supported "+Ca+","+Ga+" on jQuery.swipe")}this.enable=function(){return Qa.bind(Ca,A),Qa.bind(Ga,D),Qa},this.disable=function(){return F(),Qa},this.destroy=function(){return F(),Qa.data(z,null),Qa},this.option=function(b,d){if(void 0!==c[b]){if(void 0===d)return c[b];c[b]=d}else a.error("Option "+b+" does not exist on jQuery.swipe.options")}}var d="left",e="right",f="up",g="down",h="in",i="out",j="none",k="auto",l="swipe",m="pinch",n="tap",o="doubletap",p="longtap",q="horizontal",r="vertical",s="all",t=10,u="start",v="move",w="end",x="cancel",y="ontouchstart"in window,z="TouchSwipe",A={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};a.fn.swipe=function(c){var d=a(this),e=d.data(z);if(e&&"string"==typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(!(e||"object"!=typeof c&&c))return b.apply(this,arguments);return d},a.fn.swipe.defaults=A,a.fn.swipe.phases={PHASE_START:u,PHASE_MOVE:v,PHASE_END:w,PHASE_CANCEL:x},a.fn.swipe.directions={LEFT:d,RIGHT:e,UP:f,DOWN:g,IN:h,OUT:i},a.fn.swipe.pageScroll={NONE:j,HORIZONTAL:q,VERTICAL:r,AUTO:k},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:s}}(jQuery),define("jquery.touchSwipe",function(){}),define("app/views/modules/body/flipbook/flipbook-carousel",["jquery","marionette","vendor/swipe","app/common/state","jquery.touchSwipe"],function(a,b,c,d,e){var f=b.ItemView.extend({ui:{flipbookContainer:"#flipbook",wrapper:".flipbook-carousel-wrapper",next:".flipbook-carousel-arrow-next",previous:".flipbook-carousel-arrow-previous",captionContainer:".caption",titleContainer:".title",flipbookItems:".flipbook-carousel-list-item",flipbookInfo:".flipbook-info"},events:{"click .flipbook-carousel-arrow-next":"gotoNext","click .flipbook-carousel-arrow-previous":"gotoPrevious"},defaults:{dragThreshold:20},initialize:function(){this.options=a.extend({},this.defaults,this.options),this.NickApp=requirejs("app/app")},onShow:function(){if(this.swiper=this.ui.flipbookContainer.Swipe({callback:a.proxy(this.populateInfo,this),transitionEnd:a.proxy(this.swipeCallback,this)}).data("Swipe"),this.populateInfo(),d.get("isTouchDevice")){var b=d.get("deviceBreakpoint");b.indexOf("mobile")>-1?this.setupMobileBindings():this.setupTabletBindings()}},onClose:function(){this.swiper=null,this.ui.flipbookInfo.swipe("destroy"),this.ui.previous.swipe("destroy"),this.ui.next.swipe("destroy")},setupMobileBindings:function(){this.ui.flipbookInfo.swipe({swipeLeft:a.proxy(this.gotoNext,this),swipeRight:a.proxy(this.gotoPrevious,this)})},setupTabletBindings:function(){this.ui.previous.swipe({swipeLeft:a.proxy(this.gotoPrevious,this),tap:a.proxy(this.gotoPrevious,this),threshold:this.options.dragThreshold}),this.ui.next.swipe({swipeRight:a.proxy(this.gotoNext,this),tap:a.proxy(this.gotoNext,this),threshold:this.options.dragThreshold})},swipeCallback:function(){this.NickApp.vent.trigger("flipbook.paginate")},populateInfo:function(b,c){var d=c?a(c):this.ui.flipbookItems.eq(this.swiper.getPos());this.ui.titleContainer.html(d.data("title")),this.ui.captionContainer.html(d.data("caption"))},gotoNext:function(){this.swiper.next()},gotoPrevious:function(){this.swiper.prev()}});return f}),define("app/views/modules/body/flipbook/flipbook-content-1.0.0",["jquery","backbone","app/views/yeti-modules","app/views/modules/body/flipbook/flipbook-carousel","app/common/state","app/common/utils","jquery.touchSwipe","app/controllers/reporting","app/common/templating"],function(a,b,c,d,e,f,g,h,i){var j=c.ModuleLayout.extend({regions:{flipbookCarouselContent:".module-flipbook-carousel"},ui:{flipbookBackButton:".module-back-button",flipbookCarouselContainer:".flipbook-container",flipbookCarouselNavigation:".flipbook-carousel-navigation",flipbookBody:"#flipbook",flipbookWrap:".swipe-wrap",flipbookInfo:".flipbook-info",flipbookPropertyBreadcrumbs:".flipbook-back-info"},events:{"click .module-back-button":"backButtonClick","click .flipbook-carousel-navigation":"hideAllControls","click .flipbook-carousel-list-item img":"flipbookUIToggle","mousemove .flipbook-carousel-list-item":"showAllControls"},options:{fadeControlTimeout:4e3},initialize:function(){this.fadeTimer=null,this.NickApp=requirejs("app/app")},onShow:function(){this.flipbookCarousel=new d,this.flipbookCarouselContent.setView(this.flipbookCarousel,!0,this.ui.flipbookCarouselContainer),this.flipbookKeyNav(),this.setupTouchBindings(),this.setupBackButton(),this.fadeOutControls(),this.flipbookNavBar=a(".video-player-fade-out"),this.listenTo(this.NickApp.vent,"flipbook.paginate",this.onFlipbookPaginate),this._setupAds()},onClose:function(){this.stopListening(),a(document).unbind(".flipbook")},setupTouchBindings:function(){e.get("isTouchDevice")&&this.ui.flipbookWrap.swipe({tap:a.proxy(this.flipbookUIToggle,this)})},onFlipbookPaginate:function(){this.hideAllControls()},flipbookKeyNav:function(){e.get("isTouchDevice")||a(document).bind("keydown.flipbook",a.proxy(this.flipbookManualPaginate,this))},flipbookManualPaginate:function(a){var b=a.keyCode;37===b?this.ui.flipbookCarouselContainer.find(".flipbook-carousel-wrapper").find("span.flipbook-carousel-arrow.flipbook-carousel-arrow-previous").trigger("click"):39===b&&this.ui.flipbookCarouselContainer.find(".flipbook-carousel-wrapper").find("span.flipbook-carousel-arrow.flipbook-carousel-arrow-next").trigger("click")},flipbookUIToggle:function(){clearTimeout(this.fadeTimer),this.ui.flipbookCarouselContainer.find(".flipbook-breadcrumb").hasClass("flipbook-fade-out")?this.showAllControls():this.hideAllControls()},fadeOutControls:function(){var b=this.options.fadeControlTimeout;clearTimeout(this.fadeTimer),this.fadeTimer=setTimeout(a.proxy(this.hideAllControls,this),b)},showAllControls:function(){clearTimeout(this.fadeTimer),this.flipbookNavBar.removeClass("flipbook-fade-out").addClass("flipbook-fade-in"),this.ui.flipbookCarouselContainer.find(".flipbook-breadcrumb").removeClass("flipbook-fade-out").addClass("flipbook-fade-in"),this.fadeOutControls()},hideAllControls:function(){clearTimeout(this.fadeTimer),this.flipbookNavBar.removeClass("flipbook-fade-in").addClass("flipbook-fade-out"),this.ui.flipbookCarouselContainer.find(".flipbook-breadcrumb").removeClass("flipbook-fade-in").addClass("flipbook-fade-out")},showFlipbookInfo:function(){this.ui.flipbookInfo.removeClass("flipbook-fade-out").addClass("flipbook-fade-in")},hideFlipbookInfo:function(){this.ui.flipbookInfo.removeClass("flipbook-fade-in").addClass("flipbook-fade-out")},setupBackButton:function(){if(!(e.get("deviceBreakpoint").indexOf("mobile")>-1)){var a=e.get("prevUrls");(a.length>0||f.isIEAny())&&this.ui.flipbookBackButton.removeClass("hidden")}},backButtonClick:function(){f.isIEAny()?window.history.back(-1):this.NickApp.execute("change-path","back")},hasLogo:function(){var a=!1;try{a=window.KIDS.AdConfig.size.indexOf("120x60")>-1}catch(b){}return a},_setupAds:function(){var b=this.hasLogo();if(b){var c=a(".flipbook-info"),d=i.render("modules/body/property/ad-container",{extraClass:"small-sponsor-ad flipbook-sponsor"}),e=i.render("modules/body/property/ad",{adSize:"120x60",adIndex:"1"});c.append(d).find(".small-sponsor-ad").append(e),a(window.document).trigger("kfarEvent",["reloadAd","ad-120x60-1Div","120x60",h.pageReport]),this.bindUIElements()}}});return j}),define("app/views/modules/body/property/branding",["jquery","app/common/state","marionette","app/views/yeti-modules"],function(a,b,c,d){var e=d.ModuleItemView.extend({ui:{propertyBranding:".property-branding",propertyRating:".property-rating",propertyArtLandscape:".property-show-art-landscape"},initialize:function(){this.resizeTimeout=null},onShow:function(){this.app=requirejs("app/app"),this.resizeShowArt(),this.listenTo(this.app.vent,"device:orientation",this.resetPropertyRating);var b=this;a(window).resize(function(){clearTimeout(b.resizeTimeout),b.resizeTimeout=setTimeout(a.proxy(b.resizeShowArt,b),800)})},onClose:function(){this.stopListening()},resizeShowArt:function(){this.bindUIElements(),this.ui.propertyBranding.length>0},resetPropertyRating:function(){"portrait"===b.get("orientation")&&(this.ui.propertyArtLandscape.attr("style",""),this.ui.propertyRating.attr("style",""))}});return e}),define("app/common/selection",[],function(){function a(){var a=window.document;if(a.selection&&a.selection.empty)a.selection.empty();else if(window.getSelection){var b=window.getSelection();b.removeAllRanges()}}return{clear:a}}),define("app/models/stream-pagination",["jquery","Q","_","backbone","app/common/templating","app/common/page"],function(a,b,c,d,e,f){var g=d.Model.extend({defaults:{pageFeedId:null,page:"",excludeIds:[],hasMore:!0,currentPageIndex:0},initialize:function(){var a=new d.Model;a.url="/data/"+this.get("pageFeedId"),this.page=a},buildPageHTML:function(a){var b=e.get("modules/body/property/stream/page"),c=e.get("modules/body/property/stream/promo"),d=e.get("modules/body/property/stream/poll"),f={promo:c,poll:d};return b.render(a,f)},getNextPageNumber:function(){var a=this.get("currentPageIndex");return a++,this.set("currentPageIndex",a),a},getPaginationExcludeIds:function(){if(this.cacheExcludeIds)return this.cacheExcludeIds;var a=this.get("excludeIds")||[];return this.cacheExcludeIds=a.join(","),this.cacheExcludeIds},buildRequestParams:function(){var b=this.getNextPageNumber()+1,d=this.getPaginationExcludeIds(),e={page:b,excludeIds:d},g=a.cookie("nick_device");g&&(e.apiKey=g);var h={},i=f.get("request");return i&&(h=i.params),c.extend(e,h),e},fetchNextPage:function(){var a=this.buildRequestParams(),c=this.page;return b(c.fetch({data:a})).then(function(){return c.toJSON()})},processPageData:function(a){return this.set("hasMore",a.pagination.moreItems===!0),a},setNewPage:function(a){return this.trigger("pagination:end",this.hasMore),this.set("page",a),a},handleFail:function(a){throw console&&console.error,this.trigger("pagination:error",a),a},fetch:function(){return this.get("hasMore")===!1?b(null):(this.trigger("pagination:start",!1),this.fetchNextPage().then(a.proxy(this.processPageData,this)).then(a.proxy(this.buildPageHTML,this)).then(a.proxy(this.setNewPage,this)).fail(a.proxy(this.handleFail,this)))}});return g}),define("app/views/modules/body/stream/stream-aspect-ratio",["jquery","_"],function(a,b){function c(b,c){c=c||[];var d=!1,e=b.width()/b.height();e=+e.toFixed(1);var g=b.find("["+f.dataAttrName+"] img"),h=f.imgRatios[e],i=b.find("[data-ratio="+h+"]"),j=i.data("src"),k=i.data("alt");if(!j){var l=b.find("a:first");j=i.siblings("[data-src]").eq(0).data("src")||f.errorImgSrc,k=i.siblings("[data-alt]").eq(0).data("alt")||"",i.length<1&&(i=a("<span/>",{"data-src":j,"data-ratio":h,"data-alt":k}).appendTo(l)),c.push(l.attr("href"))}return g.attr("src")!==j&&(g.remove(),a("<img/>",{src:j,alt:k}).appendTo(i),d=!0),d}function d(b,d,e){var f=a(e);return c(f,b),f}function e(a){var c=[];return a.each(b.partial(d,c)),c.length,a}var f={dataAttrName:"data-picture-aspect-ratio",imgRatios:{1.3:"4-3",1.8:"16-9",1:"1-1"},errorImgSrc:"https://web.archive.org/web/20150728212158/http://images.nick.com/nick-assets/nick-web/content-stream/content-missing-image.png"};return{toCollection:e,toElement:c}}),define("app/views/modules/body/stream/stream-animation",["jquery","Q"],function(a,b){function c(a){return"portrait"===a?m.TILE_ANIMATION_PORTRAIT:m.TILE_ANIMATION_LANDSCAPE}function d(b){return a(b).map(function(){return this.toArray()})}function e(){return a(this).removeClass(m.tileAnimationClass+" animate is-not-loaded")}function f(a){return m.fallbackToBasicAnimation?a.animate({opacity:1},450):a.removeClass(m.tileAnimationClass+" animate").addClass(m.tileAnimationClass+" animate").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",e)}function g(a){return a.filter(".is-not-loaded:not(.animate)")}function h(a){var b=a.closest(".slider-block-item");return b.addClass("is-loaded"),f(b)}function i(b){var c=a(this);return h(c)}function j(a){var b=a.find("[data-picture-aspect-ratio] img"),c=b[0].complete;return c?f(a):b.load(i),a}function k(a){return function(){return b.spread([a],j).delay(m.tileAnimationDelay)}}function l(a,e,f,h){m.fallbackToBasicAnimation=h,m.tileAnimationClass=c(f);var i=e.slice(0);a&&i.reverse();for(var j,l,n=b();i.length;)l=d(i.splice(0,1)),l=g(l),l.length&&(j=k(l),n=n.then(j));return n}var m={TILE_ANIMATION_PORTRAIT:"tile-animation-portrait",TILE_ANIMATION_LANDSCAPE:"tile-animation-landscape",tileAnimationClass:"",tileAnimationDelay:70,fallbackToBasicAnimation:a("html").hasClass("ie9")},n={};return n.animateTiles=l,n}),define("app/views/modules/body/stream/stream-pagination-peek",["jquery","_","Q"],function(a,b,c){function d(a){return g(".scroll-with-content-stream-landscape",a,h.distance,h.duration)}function e(){return d(h.peekRight)}function f(){return d(h.peekLeft)}function g(d,e,f,g){var h=c.defer(),i=a(d),j={x:e+"="+f};try{i.transition(j,g,"ease",b.partial(h.resolve,i))}catch(k){h.reject(k)}return h.promise}var h={peekRight:"+",peekLeft:"-",distance:40,duration:400};return{contentStreamPeekAnimation:d,doScrollEaseTransition:g,contentStreamPeekRight:e,contentStreamPeekLeft:f}}),define("app/views/modules/body/stream/stream-mousewheel",["jquery","Q"],function(a,b){function c(){this.TIMESTAMP_DIFFERENCE_THRESHOLD=100,this.LAST_SCROLL_OCCURED_THRESHOLD=400;var a=(new Date).getTime();this.delta=0,this.mousewheelLastDelta=0,this.timeStamp=a,this.mousewheelLastTimeStamp=a,this.lastScrollOccured=a}return c.prototype.isTimestampDiffEnough=function(){var a=this.timeStamp-this.mousewheelLastTimeStamp,b=a>this.TIMESTAMP_DIFFERENCE_THRESHOLD;return b},c.prototype.isLastScrollFarEnough=function(){var a=this.timeStamp-this.lastScrollOccured,b=a>this.LAST_SCROLL_OCCURED_THRESHOLD;return b},c.prototype.isScrollValid=function(a,b){this.delta=a,this.timeStamp=b;var c=this.isTimestampDiffEnough();if(!c)return!1;this.mousewheelLastTimeStamp=this.timeStamp;var d=this.isLastScrollFarEnough();return d?!0:!1},c}),define("app/models/cache-data",[],function(){function a(a,b){this.meta=a||{},this.data=b||""}function b(a,b){var c,d;return c=a.slice(0,b),d=JSON.parse(c)}function c(c){var d=f.token,e=d.length,g=c.indexOf(d),h=b(c,g),i=c.slice(g+e);return new a(h,i)}function d(a){a.timestamp=(new Date).getTime();var b=JSON.stringify(a);return b}function e(a){var b=f.token,c=d(a.meta),e=c+b+a.data;return e}var f={token:"\n	"};return a.settings=f,a.prototype.append=function(a){return this.data+=a,this},a.prototype.flush=function(){return this.meta=null,this.data="",this},a.decode=c,a.encode=e,a}),define("app/views/modules/body/stream/stream-cache",["_","Q","app/models/cache-data"],function(a,b,c){function d(){return!r||!s}function e(){return p&&p.flush(),p=null,!0}function f(b,c){var d,e,f=window.localStorage,g=a.keys(f);for(d=g.length-1;d>=0;d--){e=g[d];var h=c(e,b);h&&f.removeItem(e)}return g.length}function g(a,b){return a.indexOf(b)>-1}function h(){var a=q.storageNamespace+q.storageNamespaceSeparator;return f(a,g)}function i(a){return a=a||{},r=!1,d()?(e(),p=a instanceof c?a:new c(a.meta,a.data)):!1}function j(a){return d()?p.append(a):!1}function k(a){var b=q.storageNamespace+q.storageNamespaceSeparator,c=b+a;return c}function l(){if(!d())return!1;var a=p.meta.url,b=k(a);try{var f=c.encode(p);window.localStorage.setItem(b,f)}catch(g){r=!0}return e(),r}function m(a){var b=(new Date).getTime(),c=b-a;return c>q.streamTTL}function n(a){if(!d())return!1;var b=k(a),e=window.localStorage.getItem(b);if(!e)return!1;var f;try{f=c.decode(e)}catch(g){throw r=!0,g}return!f.meta.timestamp||m(f.meta.timestamp)?(window.localStorage.removeItem(b),!1):f}function o(){return d()?p:!1}var p,q={streamTTL:18e5,storageNamespace:"stream",storageNamespaceSeparator:":"},r=!1,s="localStorage"in window;return h(),{cleanAll:h,flush:e,create:i,append:j,save:l,get:n,getCurrentCache:o}});var flambe={FLASH_VERSION:"11"};flambe.embed=function(a,b){"string"==typeof a&&(a=[a+"-flash.swf",a+"-html.js"]);var c=document.getElementById(b);if(null==c)throw Error("Could not find element [id="+b+"]");for(var d={},e=window.location.search.substr(1).split("&"),f=0;f<e.length;++f){var g=e[f].split("=");d[unescape(g[0])]=1<g.length?unescape(g[1]):null}for(e=d.flambe,f=0;f<a.length;++f)switch(d=a[f],(g=d.match(/\.(\w+)(\?|$)/))&&(g=g[1].toLowerCase()),g){case"swf":if((null==e||"flash"==e)&&swfobject.hasFlashPlayerVersion(flambe.FLASH_VERSION))return f=document.createElement("div"),f.id=b+"-swf",c.appendChild(f),"undefined"==typeof $flambe_expose&&(window.$flambe_expose=function(a,b){window[a]=null!=b?function(){var c=document.getElementById(b);c[a].apply(c,arguments)}:null}),swfobject.embedSWF(d,f.id,"100%","100%",flambe.FLASH_VERSION,null,{},{allowScriptAccess:"always",allowFullScreen:"true",fullscreenOnSelection:"true",wmode:"direct"},{id:f.id,name:f.id}),!0;break;case"js":if((null==e||"html"==e)&&(g=document.createElement("canvas"),"getContext"in g))return g.id=b+"-canvas",c.appendChild(g),flambe.canvas=g,f=document.createElement("script"),f.onload=function(){flambe.canvas=null},f.src=d,c.appendChild(f),!0;break;default:throw Error("Don't know how to embed [url="+d+"]")}return!1};var swfobject=function(){function a(){if(!K){try{var a=D.getElementsByTagName("body")[0].appendChild(D.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}K=!0;for(var a=G.length,c=0;a>c;c++)G[c]()}}function b(a){K?a():G[G.length]=a}function c(a){if(typeof C.addEventListener!=y)C.addEventListener("load",a,!1);else if(typeof D.addEventListener!=y)D.addEventListener("load",a,!1);else if(typeof C.attachEvent!=y)n(C,"onload",a);else if("function"==typeof C.onload){var b=C.onload;C.onload=function(){b(),a()}}else C.onload=a}function d(){var a=D.getElementsByTagName("body")[0],b=D.createElement(z);b.setAttribute("type",A);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=y){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),N.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,e()}()}else e()}function e(){var a=H.length;if(a>0)for(var b=0;a>b;b++){var c=H[b].id,d=H[b].callbackFn,e={success:!1,id:c};if(0<N.pv[0]){var j=m(c);if(j)if(!o(H[b].swfVersion)||N.wk&&312>N.wk)if(H[b].expressInstall&&g()){e={},e.data=H[b].expressInstall,e.width=j.getAttribute("width")||"0",e.height=j.getAttribute("height")||"0",j.getAttribute("class")&&(e.styleclass=j.getAttribute("class")),j.getAttribute("align")&&(e.align=j.getAttribute("align"));for(var k={},j=j.getElementsByTagName("param"),l=j.length,n=0;l>n;n++)"movie"!=j[n].getAttribute("name").toLowerCase()&&(k[j[n].getAttribute("name")]=j[n].getAttribute("value"));h(e,k,c,d)}else i(j),d&&d(e);else q(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else q(c,!0),d&&((c=f(c))&&typeof c.SetVariable!=y&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;return(a=m(a))&&"OBJECT"==a.nodeName&&(typeof a.SetVariable!=y?b=a:(a=a.getElementsByTagName(z)[0])&&(b=a)),b}function g(){return!L&&o("6.0.65")&&(N.win||N.mac)&&!(N.wk&&312>N.wk)}function h(a,b,c,d){L=!0,u=d||null,v={success:!1,id:c};var e=m(c);e&&("OBJECT"==e.nodeName?(s=j(e),t=null):(s=e,t=c),a.id=B,(typeof a.width==y||!/%$/.test(a.width)&&310>parseInt(a.width,10))&&(a.width="310"),(typeof a.height==y||!/%$/.test(a.height)&&137>parseInt(a.height,10))&&(a.height="137"),D.title=D.title.slice(0,47)+" - Flash Player Installation",d=N.ie&&N.win?"ActiveX":"PlugIn",d="MMredirectURL="+C.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+D.title,b.flashvars=typeof b.flashvars!=y?b.flashvars+("&"+d):d,N.ie&&N.win&&4!=e.readyState&&(d=D.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()),k(a,b,c))}function i(a){if(N.ie&&N.win&&4!=a.readyState){var b=D.createElement("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(j(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(j(a),a)}function j(a){var b=D.createElement("div");if(N.win&&N.ie)b.innerHTML=a.innerHTML;else if((a=a.getElementsByTagName(z)[0])&&(a=a.childNodes))for(var c=a.length,d=0;c>d;d++)!(1==a[d].nodeType&&"PARAM"==a[d].nodeName)&&8!=a[d].nodeType&&b.appendChild(a[d].cloneNode(!0));return b}function k(a,b,c){var d,e=m(c);if(N.wk&&312>N.wk)return d;if(e)if(typeof a.id==y&&(a.id=c),N.ie&&N.win){var f,g="";for(f in a)a[f]!=Object.prototype[f]&&("data"==f.toLowerCase()?b.movie=a[f]:"styleclass"==f.toLowerCase()?g+=' class="'+a[f]+'"':"classid"!=f.toLowerCase()&&(g+=" "+f+'="'+a[f]+'"'));f="";for(var h in b)b[h]!=Object.prototype[h]&&(f+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+f+"</object>",I[I.length]=a.id,d=m(a.id)}else{h=D.createElement(z),h.setAttribute("type",A);for(var i in a)a[i]!=Object.prototype[i]&&("styleclass"==i.toLowerCase()?h.setAttribute("class",a[i]):"classid"!=i.toLowerCase()&&h.setAttribute(i,a[i]));for(g in b)b[g]!=Object.prototype[g]&&"movie"!=g.toLowerCase()&&(a=h,f=g,i=b[g],c=D.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",i),a.appendChild(c));e.parentNode.replaceChild(h,e),d=h}return d}function l(a){var b=m(a);b&&"OBJECT"==b.nodeName&&(N.ie&&N.win?(b.style.display="none",function(){if(4==b.readyState){var c=m(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function m(a){var b=null;try{b=D.getElementById(a)}catch(c){}return b}function n(a,b,c){a.attachEvent(b,c),J[J.length]=[a,b,c]}function o(a){var b=N.pv,a=a.split(".");return a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||0,a[2]=parseInt(a[2],10)||0,b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function p(a,b,c,d){if(!N.ie||!N.mac){var e=D.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(x=w=null),w&&x==c||(d=D.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),w=e.appendChild(d),N.ie&&N.win&&typeof D.styleSheets!=y&&0<D.styleSheets.length&&(w=D.styleSheets[D.styleSheets.length-1]),x=c),N.ie&&N.win?w&&typeof w.addRule==z&&w.addRule(a,b):w&&typeof D.createTextNode!=y&&w.appendChild(D.createTextNode(a+" {"+b+"}")))}}function q(a,b){if(M){var c=b?"visible":"hidden";K&&m(a)?m(a).style.visibility=c:p("#"+a,"visibility:"+c)}}function r(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=y?encodeURIComponent(a):a}var s,t,u,v,w,x,y="undefined",z="object",A="application/x-shockwave-flash",B="SWFObjectExprInst",C=window,D=document,E=navigator,F=!1,G=[function(){F?d():e()}],H=[],I=[],J=[],K=!1,L=!1,M=!0,N=function(){var a=typeof D.getElementById!=y&&typeof D.getElementsByTagName!=y&&typeof D.createElement!=y,b=E.userAgent.toLowerCase(),c=E.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!1,f=[0,0,0],g=null;if(typeof E.plugins!=y&&typeof E.plugins["Shockwave Flash"]==z)!(g=E.plugins["Shockwave Flash"].description)||typeof E.mimeTypes!=y&&E.mimeTypes[A]&&!E.mimeTypes[A].enabledPlugin||(F=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof C.ActiveXObject!=y)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"))&&(e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}catch(i){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c
}}();return function(){N.w3&&((typeof D.readyState!=y&&"complete"==D.readyState||typeof D.readyState==y&&(D.getElementsByTagName("body")[0]||D.body))&&a(),K||(typeof D.addEventListener!=y&&D.addEventListener("DOMContentLoaded",a,!1),N.ie&&N.win&&(D.attachEvent("onreadystatechange",function(){"complete"==D.readyState&&(D.detachEvent("onreadystatechange",arguments.callee),a())}),C==top&&function(){if(!K){try{D.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),N.wk&&function(){K||(/loaded|complete/.test(D.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))}(),function(){N.ie&&N.win&&window.attachEvent("onunload",function(){for(var a=J.length,b=0;a>b;b++)J[b][0].detachEvent(J[b][1],J[b][2]);for(a=I.length,b=0;a>b;b++)l(I[b]);for(var c in N)N[c]=null;N=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})}(),{registerObject:function(a,b,c,d){if(N.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,H[H.length]=e,q(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return N.w3?f(a):void 0},embedSWF:function(a,c,d,e,f,i,j,l,m,n){var p={success:!1,id:c};N.w3&&!(N.wk&&312>N.wk)&&a&&c&&d&&e&&f?(q(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===z)for(var r in m)b[r]=m[r];if(b.data=a,b.width=d,b.height=e,r={},l&&typeof l===z)for(var s in l)r[s]=l[s];if(j&&typeof j===z)for(var t in j)r.flashvars=typeof r.flashvars!=y?r.flashvars+("&"+t+"="+j[t]):t+"="+j[t];if(o(f))s=k(b,r,c),b.id==c&&q(c,!0),p.success=!0,p.ref=s;else{if(i&&g())return b.data=i,void h(b,r,c,n);q(c,!0)}n&&n(p)})):n&&n(p)},switchOffAutoHideShow:function(){M=!1},ua:N,getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]}},hasFlashPlayerVersion:o,createSWF:function(a,b,c){return N.w3?k(a,b,c):void 0},showExpressInstall:function(a,b,c,d){N.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){N.w3&&l(a)},createCSS:function(a,b,c,d){N.w3&&p(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=D.location.search||D.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return r(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return r(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(L){var a=m(B);a&&s&&(a.parentNode.replaceChild(s,a),t&&(q(t,!0),N.ie&&N.win&&(s.style.display="block")),u&&u(v)),L=!1}}}}();define("flambe",function(){});var jsembed=function(){function a(){var a=ja.body.style;a.setProperty("-ms-touch-action","none",null)}function b(){f("apple-mobile-web-app-capable","yes"),f("apple-mobile-web-app-status-bar-style","black"),f("viewport","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"),f("HandheldFriendly","true")}function c(){return O.scaletype==$?void q(1):void(na||(na=!0,g(window,"resize",r),s(),setTimeout(s,500)))}function d(){document.body.winParameters=function(){return{}},document.body._pnConfig=new Array,window._pnConfig=new Array,(null==O||null==O.allowtouchmove||"true"!=O.allowtouchmove)&&g(document.body,"touchmove",function(a){a.preventDefault()})}function e(a,b,c,d,f){if(d>0)return ra++,void setTimeout(function(){e(a,b,!0,0)},d);var h=!1;if(0!=b||0!=c)for(var i in sa)if(sa[i].src==a){if(h=!0,!c)return;if(sa[i].retry++,sa[i].retry>3)return}h||(c||ra++,sa[sa.length]={src:a,retry:0});var j=document.createElement("script");j.setAttribute("type","text/javascript"),j.src=1==f?a:n(a),g(j,"load",v),g(j,"error",w),ja.getElementsByTagName("head").item(0).appendChild(j)}function f(a,b){var c=ja.createElement("meta");c.name=a,c.content=b,ja.getElementsByTagName("head").item(0).appendChild(c)}function g(a,b,c){null!=a&&void 0!=a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)}function h(a,b,c){null!=a&&void 0!=a&&(a.removeEventListener?a.removeEventListener(b,c):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null)}function i(){if(!la){try{var a=ja.getElementsByTagName("body")[0].appendChild(ja.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}la=!0;for(var c=pa.length,d=0;c>d;d++)pa[d]()}}function j(){}function k(a,b){if(typeof ia.addEventListener!=Y)ia.addEventListener("load",a,!1),ia.addEventListener("error",b,!1);else if(typeof ja.addEventListener!=Y)ja.addEventListener("load",a,!1),ja.addEventListener("error",b,!1);else if(typeof ia.attachEvent!=Y)addListener(ia,"onload",a),addListener(ia,"onerror",b);else if("function"==typeof ia.onload){var c=ia.onload;ia.onload=function(){c(),a()};var d=ia.onerror;ia.onerror=function(){d(),b()}}else ia.onload=fn}function l(){ra>qa||ma&&(d(),a(),setTimeout(m,500))}function m(){var a=ja.getElementById(K),b=ja.createElement("script");b.setAttribute("async","true"),b.setAttribute("type","text/javascript");for(var c in N)N.hasOwnProperty(c)&&a.setAttribute(c,N[c]);if(a.setAttribute("base",ua),1==H(a,b)){if(""==ta)return;M=b,g(M,"load",x),g(M,"error",y),a.appendChild(M)}}function n(a){return a&&a.indexOf("http")<0?ua+a:a}function o(a){var b,c=a.substr(0,8);try{c=c.search("http://")<0&&c.search("https://")<0&&c.search("ftp://")<0?"http://"+a:a,b=c.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/)[2]}catch(d){b=""}return b}function p(){if(null==O)return T;if(null!=L){if("nme"==L.toLowerCase())return U;if("flambe"==L.toLowerCase())return V;if("c2"==L.toLowerCase()||"construct2"==L.toLowerCase())return W;if("tresensa"==L.toLowerCase())return X}return T}function q(a){if(a>fa&&(a=fa),O.scaletype!=$){var b=Math.round(da*a*1e3)/1e3,c=Math.round(ea*a*1e3)/1e3,d=ja.getElementById(K);O.scaletype==aa?(d.style.width=t()+"px",d.style.height=u()+"px",b=t(),c=u()):O.scaletype==ba?(b=Math.round(ga*a*1e3)/1e3,c=Math.round(ha*a*1e3)/1e3,t()>b?d.style.width=b+"px":(d.style.width=t()+"px",b=t()),u()>c?d.style.height=c+"px":(d.style.height=u()+"px",c=u())):O.scaletype==_?(d.style.width=b+"px",d.style.height=c+"px",d.style.left=t()/2-b/2+"px"):O.scaletype==ca&&(t()>b?d.style.width=b+"px":d.style.width=t()+"px",d.style.height=c+"px",d.style.left=t()/2-b/2+"px")}ia.canvasScale=a,ja.canvasScale=a,S=a,Q=t(),R=u(),za=b,Aa=c,O.scaletype==aa?(xa=(t()-b)/2,ya=(u()-c)/2):O.scaletype==ba&&(xa=(b-da*a)/2,ya=(c-ea*a)/2)}function r(a){s()}function s(){var a=t(),b=u(),c=1;c=O.scaletype==ca?a/da:b/ea>a/da?a/da:b/ea,q(c)}function t(){return window.innerWidth}function u(){return window.innerHeight}function v(a){qa++,la&&l()}function w(a){e(a.target.src,!1,!0,500,!0)}function x(a){I()}function y(a){return h(M,"load",x),h(M,"error",y),va++,va>3?void console.log:void m()}function z(a){oa=a,ia.isPaused=flagPause}function A(){return ja.getElementById(K)}function B(){return K}function C(a){isNaN(a)||0>=a||(fa=a,s())}function D(a){console.log;var b=new Event(a);A().dispatchEvent(b)}function E(a,b){(""==b||null==b)&&(b=K);var c="alertoverlay",d=ja.getElementById(b);if(ja.getElementById(c))return e=ja.getElementById(c),void(e.innerHTML="<font color=#FFFFFFF; size=6; align='center'>"+a+"<font>");var e=ja.createElement("div");e.setAttribute("id",c),e.innerHTML="<font color=#FFFFFFF; size=6; align='center'>"+a+"<font>",e.setAttribute("style","position:absolute; index:99999; left:5%; top:40%; text-align:'center'; text-shadow:1px 1px 1px black; "),d.appendChild(e)}function F(a){(""==a||null==a)&&(a=K);var b="alertoverlay",c=ja.getElementById(a);return ja.getElementById(b)?(div=ja.getElementById(b),void c.removeChild(div)):void 0}function G(){switch(p()){case V:e(ta,!0,!1,0);break;case W:break;case X:case U:case T:}}function H(a,b){switch(p()){case U:return a.setAttribute("style","position: absolute; left: 50%;	"+("false"==N.autoscale?"margin-left:-512px;":"padding:0;")+"-webkit-user-select: none; -ms-touch-action:none;	overflow: hidden; width:"+da+"px;	height:"+ea+"px; -webkit-tap-highlight-color: rgba(0,0,0,0); data-framerate:30;"),K="haxe:jeash",a.setAttribute("id","haxe:jeash"),a.setAttribute("name","viewport"),b.setAttribute("id","haxe:jeash:script"),c(),b.src=n(ta),!0;case V:a.setAttribute("style","padding:0;-webkit-user-select: none; -ms-touch-action:none;	overflow: hidden; width:"+da+"px;	height:"+ea+"px; -webkit-tap-highlight-color: rgba(0,0,0,0); data-framerate:30;"),c();var d=O&&O.flambeEmbed?O.flambeEmbed:ua+"targets/main-html.js";return ia.flambe.embed([d],K),!1;case W:var e=document.createElement("canvas");return e.setAttribute("id","c2canvas"),e.setAttribute("width",da),e.setAttribute("height",ea),ja.getElementsByTagName("body")[0].appendChild(e),b.src=n(ta),!0;case X:return a.setAttribute("style","position:relative; width:"+da+"px; height:"+ea+"px; overflow: hidden;"),b.src=n(ta),c(),!0;default:case T:return b.src=n(ta),!0}return!0}function I(){switch(p()){case W:break;case X:var a=new window[N.gameclass];a.IsPlatformAcceptable()&&a.Launch({gameDiv:K,initialWidth:da,initialHeight:ea});break;case U:case V:case T:}}var J,K,L,M,N,O,P,Q,R,S,T="none",U="nme",V="flambe",W="c2",X="tresensa",Y="undefined",Z="onReadystatechange",$="none",_="fit",aa="fill",ba="fillto",ca="fith",da=960,ea=560,fa=3,ga=960,ha=560,ia=window,ja=document,ka=navigator,la=!1,ma=!1,na=!1,oa=!1,pa=[l],qa=0,ra=0,sa=[],ta="",ua="",va=0,wa=!1,xa=0,ya=0,za=0,Aa=0;window.console||(window.console={}),window.console.log||(window.console.log=function(){}),b();var Ba=function(){var a=typeof ja.getElementById!=Y&&typeof ja.getElementsByTagName!=Y&&typeof ja.createElement!=Y,b=ka.userAgent.toLowerCase(),c=ka.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1;return{w3:a,wk:f,ie:g,win:d,mac:e}}();(function(){(typeof ja.readyState!=Y&&"complete"==ja.readyState||typeof ja.readyState==Y&&(ja.getElementsByTagName("body")[0]||ja.body))&&i(),la||(typeof ja.addEventListener!=Y&&ja.addEventListener("DOMContentLoaded",i,!1),Ba.ie&&Ba.win&&(ja.attachEvent(Z,function(){"complete"==ja.readyState&&(ja.detachEvent(Z,arguments.callee),i())}),ia==top&&!function(){if(!la){try{ja.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}i()}}()),Ba.wk&&!function(){return la?void 0:/loaded|complete/.test(ja.readyState)?void i():void setTimeout(arguments.callee,0)}(),k(i,j))})();return{exists:function(){return!0},params:function(){return O},attr:function(){return N},baseUrl:function(){return ua},embedDiv:function(){return A()},embedDivId:function(){return B()},isBaseCrossdomain:function(){return wa},canvasWidth:function(){return Q},canvasHeight:function(){return R},scaledWidth:function(){return za},scaledHeight:function(){return Aa},canvasScale:function(){return S},contentOffsetX:function(){return xa},contentOffsetY:function(){return ya},scaleType:function(){return null==O.scaletype?_:O.scaletype},setCanvasScaleMax:function(a){C(a)},setCanvasOffset:function(a,b){xa=a,ya=b},embed:function(a,b,c,d,f,g){console.log,ta=a,K=b,N=g,O=f,ma=!0,L="",null!=O.haxeapi?L=O.haxeapi:null!=O.api&&(L=O.api),da=c,ea=d,P=null==O.indexroot?!1:"true"==O.indexroot,null==O.scaletype&&(null==O.autoscale?O.scaletype=_:O.scaletype="true"==O.autoscale?_:$),null!=O.maxwidth&&(ga=O.maxwidth),null!=O.maxheight&&(ha=O.maxheight);var h=window.location.host,i="";if(null==O.base)ua="",i=h;else{if(ua=O.base,ua.indexOf("http")>=0)i=o(ua);else if(P)i=h;else{var j=window.location.toString().indexOf("https://")<0?"http://":"https://";ua=j+h+("/"==h.charAt(h.length-1)||"/"==ua.charAt(0)?"":"/")+ua,i=h}ua.length>0&&"/"!=ua.charAt(ua.length-1)&&(ua+="/")}console.log,wa=i!=h,wa&&console.log,J=null==O.libs?[]:"string"==typeof O.libs?[O.libs]:O.libs;var k=0;for(var m in J)e(J[m],!0,!1,250*k,"true"==O.libsIgnoreBase?!0:!1),k++;G(),la&&l()},pause:function(){z(!0)},unpause:function(){z(!1)},isPaused:function(){return oa},inform:function(a){D(a)},informConstructed:function(){D("constructed")},informtInitialized:function(){D("init")},informReady:function(){D("ready")},setDimensions:function(a,b){var c=1;c=b/ea>a/da?a/da:b/ea,q(c)},setScale:function(a){q(a)},addMetaTag:function(a,b){f(a,b)},addAlert:function(a,b){E(a,b)},removeAlert:function(a){F(a)}}}();define("jsembed",function(a){return function(){var b;return b||a.jsembed}}(this)),define("app/views/modules/body/do-not-touch",["jquery","_","app/common/state","soundjs","flambe","jsembed"],function(a,b,c,d){var e,f=a("#do-not-touch-animations"),g=a("#do-not-touch-container"),h=a("#do-not-touch-screen"),i={},j=[],k=null,l=-1,m=-1,n={},o="sound.mp3",p={initialize:function(){this.setupFeed(),e=requirejs("app/app")},randomize:function(){if(j instanceof Array&&j.length>0&&g.length>0&&(k=this.setAnimationFormat())){var a=0;for(l=-1;0>l&&20>=a;)a++,l=this.getRandomIndex(),n=j[l],this.isUsableAnimation()?(this.play(),m=l):l=-1}},setupFeed:function(){f=a("#do-not-touch-animations"),g=a("#do-not-touch-container"),h=a("#do-not-touch-screen"),i={},j=[],f.length>0&&(i=JSON.parse(f.text()),i.results&&(j=i.results),i=null),g.hide(),h.hide()},setAnimationFormat:function(){var a="flash";return swfobject.hasFlashPlayerVersion("9")&&this.feedHasFormat(a)||(a="flump-large",o="sound.mp3",Modernizr.canvas&&this.feedHasFormat(a)?window.outerWidth<768&&(a="flump-small",o="sound.mp3"):(a="png-sequence",this.feedHasFormat(a)||(a=null))),a},feedHasFormat:function(a){var b,c,d,e,f=!1;for(b=0,d=j.length;d>b;b++){var g=j[b];if(g.predicateList){for(c=0,e=g.predicateList.length;e>c;c++)if(a===g.predicateList[c]){f=!0;break}if(f)break}}return f},isUsableAnimation:function(){var a=!1;if(n.predicateList&&n.predicateList.length>0)for(var b=0,c=n.predicateList.length;c>b;b++)if(k===n.predicateList[b]){a=!0;break}return a},getRandomIndex:function(){var a=-1;if(1===j.length)a=0;else{for(;0>a||a===m;)a=~~(Math.random()*j.length);m=a}return a},play:function(){"png-sequence"===k&&this.getAudioFile();var a=c.get("deviceBreakpoint"),b=document.getElementById("do-not-touch-container-canvas");g.show(),h.show(),b.width=g.width(),b.height=g.height(),g.css("z-index","100000"),("desktop-landcape"===a||"desktop-portrait"===a)&&g.css("-webkit-transform","scale(.85)"),e.vent.trigger("DNT-play",!0),this.loadAtlas(n.gspLocation+"/"+k+"/library.json")},onSoundLoaded:function(a){var b=d.Sound.play("sound");b.addEventListener("complete",d.proxy(this.onSoundComplete,this))},onSoundComplete:function(a){d.Sound.removeAllSounds()},queueAudio:function(a){d.Sound.registerSound(a,"sound"),d.Sound.addEventListener("fileload",d.proxy(this.onSoundLoaded,this))},getAudioFile:function(){a.get(n.gspLocation+"/"+k+"/animate.json").done(b.bind(this.onResponse,this))},loadAtlas:function(c){a.get(c).done(b.bind(this.onAtlasResponse,this)),this.queueAudio(n.gspLocation+"/"+k+"/"+o)},onAtlasResponse:function(a){if("undefined"!=typeof a){var b=JSON.parse(a),c=b.textureGroups[0].atlases.length;window.dntPlay(n.gspLocation,k,c)}},onResponse:function(a){"undefined"!=typeof a&&a.soundFile&&(o=a.soundFile)},stop:function(){var a=document.getElementById("do-not-touch-container-canvas"),b=a.getContext("2d");b.clearRect(0,0,a.width,a.height),g.hide(),h.hide(),g.css("z-index","0"),l=-1}};return window.dntFinished=function(){p.stop(),p.onSoundComplete()},p}),define("app/views/modules/body/stream/stream-do-not-touch",["jquery","_","Q","app/common/templating","app-resource-base","app/views/modules/body/do-not-touch","flambe","jsembed"],function(a,b,c,d,e,f,g,h){return}),define("app/views/modules/body/stream/stream-element-tracker",["jquery","Q"],function(a,b){var c=[],d=function(a){c.push(a)},e=function(){for(;c.length;){var a=c.pop();a.close()}};return{closeAll:e,addElement:d}}),define("app/views/modules/poll",["jquery","_","marionette","app/common/templating","nick.poll"],function(a,b,c,d,e){var f=c.ItemView.extend({ui:{answersContent:".slider-block-item-content .answers",thankYouContent:".slider-block-item-content .thank-you",voteAgainButton:".vote-again"},events:{},defaults:{collection:null,site:"nick.com",platform:"desktop"},initialize:function(b){this.voteCast=!1,this.voteCastSuccess=!1,this.doResponseUIChange=!1,this.pollID=b.data("pollid"),this.collection=null,this.displayResults=!1,this.pollFeedUrl="/data/pollData?urlKey="+this.pollID,this.ui.pollElement=b,this.ui.answersContent=b.find(".slider-block-item-content .answers"),this.ui.thankYouContent=b.find(".slider-block-item-content .thank-you"),this.ui.voteAgainButton=this.ui.thankYouContent.find(".vote-again"),this.ui.voteAgainButton.bind("click",a.proxy(this.resetPoll,this)),this.ui.voteAgainButton.bind("touchend",a.proxy(this.resetPoll,this)),this.getPollContent()},setPollConfig:function(a){this.options=b.extend(this.defaults),this.pollOptions={funnel:{funnelCollection:this.collection},type:"POST",cors:!0},this.poll=new e.Poll(this.pollOptions)},castVote:function(b){return this.poll.doSubmit(this.collection,b.ballot,b.nomId,b.lineId,this.options.platform).then(a.proxy(this.setVoteState,this))},setVoteState:function(a){this.voteCastSuccess=!0,this.doResponseUIChange===!0&&this.voteSuccess()},getPollContent:function(){a.ajax({url:this.pollFeedUrl,dataType:"json",success:a.proxy(this.buildPollHtml,this)})},buildPollHtml:function(b){var c=this;this.collection=b.collection;var e=b.questions[0].answers;switch("Kids-Results"===b.pollType&&(this.displayResults=!0,a('<div class="answers"></div>').insertBefore(this.ui.thankYouContent.find(".vote-again")),this.ui.answersContent=this.ui.pollElement.find(".slider-block-item-content .answers")),e.forEach(function(a){var b=(a.title,a.images[0].url,d.render("modules/body/property/stream/answer",a));c.ui.answersContent.append(b)}),e.length){case 3:this.ui.answersContent.addClass("three-answers");break;case 4:this.ui.answersContent.addClass("four-answers");break;case 5:this.ui.answersContent.addClass("five-answers")}this.setPollConfig(b.urlKey),this.ui.answersContent.find(".poll-answer").bind("click",a.proxy(this.answerClick,this)),this.ui.answersContent.find(".poll-answer").bind("touchend",a.proxy(this.answerClick,this))},answerClick:function(b){var c=this;if(this.voteCast===!1){this.voteCast=!0;var d=a(b.target),e={};e.ballot="question",e.lineId=0,e.nomId=d.data("answer"),d.find("input[type=checkbox]").prop("checked",!0),this.castVote(e),setTimeout(function(){c.voteCastSuccess?c.voteSuccess():c.doResponseUIChange=!0},500)}},voteSuccess:function(){return this.displayResults===!0?this.poll.getFunnelTallies(this.collection).then(a.proxy(this.setResults,this)):void this.ui.pollElement.addClass("flipped")},setResults:function(a){var b=a.tallies.tally.answer,c=this;b.forEach(function(a){var b=a.percentage,d=a.value;c.ui.thankYouContent.find('[data-answer="'+d+'"]').find(".answer-results").html(b+"%")}),this.ui.pollElement.addClass("flipped")},resetPoll:function(a){this.voteCast=!1,this.voteCastSuccess=!1,this.doResponseUIChange=!1,this.ui.pollElement.removeClass("flipped"),this.ui.answersContent.find("input[type=checkbox]:checked").prop("checked",!1)},onClose:function(){this.ui.answersContent.find(".poll-answer").unbind("click"),this.ui.voteAgainButton.unbind("click"),this.ui.answersContent.find(".poll-answer").unbind("touchend"),this.ui.voteAgainButton.unbind("touchend")}});return f}),function(a,b){"function"==typeof define&&define.amd?define("jquery.transit",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){function b(a){if(a in l.style)return a;for(var b=["Moz","Webkit","O","ms"],c=a.charAt(0).toUpperCase()+a.substr(1),d=0;d<b.length;++d){var e=b[d]+c;if(e in l.style)return e}}function c(){return l.style[m.transform]="",l.style[m.transform]="rotateY(90deg)",""!==l.style[m.transform]}function d(a){return"string"==typeof a&&this.parse(a),this}function e(a,b,c){b===!0?a.queue(c):b?a.queue(b,c):a.each(function(){c.call(this)})}function f(b){var c=[];return a.each(b,function(b){b=a.camelCase(b),b=a.transit.propertyMap[b]||a.cssProps[b]||b,b=i(b),m[b]&&(b=i(m[b])),-1===a.inArray(b,c)&&c.push(b)}),c}function g(b,c,d,e){var g=f(b);a.cssEase[d]&&(d=a.cssEase[d]);var h=""+k(c)+" "+d;parseInt(e,10)>0&&(h+=" "+k(e));var i=[];return a.each(g,function(a,b){i.push(b+" "+h)}),i.join(", ")}function h(b,c){c||(a.cssNumber[b]=!0),a.transit.propertyMap[b]=m.transform,a.cssHooks[b]={get:function(c){var d=a(c).css("transit:transform");return d.get(b)},set:function(c,d){var e=a(c).css("transit:transform");e.setFromString(b,d),a(c).css({"transit:transform":e})}}}function i(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function j(a,b){return"string"!=typeof a||a.match(/^[\-0-9\.]+$/)?""+a+b:a}function k(b){var c=b;return"string"!=typeof c||c.match(/^[\-0-9\.]+/)||(c=a.fx.speeds[c]||a.fx.speeds._default),j(c,"ms")}a.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),m={},n=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;m.transition=b("transition"),m.transitionDelay=b("transitionDelay"),m.transform=b("transform"),m.transformOrigin=b("transformOrigin"),m.filter=b("Filter"),m.transform3d=c();var o={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},p=m.transitionEnd=o[m.transition]||null;for(var q in m)m.hasOwnProperty(q)&&"undefined"==typeof a.support[q]&&(a.support[q]=m[q]);return l=null,a.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},a.cssHooks["transit:transform"]={get:function(b){return a(b).data("transform")||new d},set:function(b,c){var e=c;e instanceof d||(e=new d(e)),"WebkitTransform"!==m.transform||n?b.style[m.transform]=e.toString():b.style[m.transform]=e.toString(!0),a(b).data("transform",e)}},a.cssHooks.transform={set:a.cssHooks["transit:transform"].set},a.cssHooks.filter={get:function(a){return a.style[m.filter]},set:function(a,b){a.style[m.filter]=b}},a.fn.jquery<"1.8"&&(a.cssHooks.transformOrigin={get:function(a){return a.style[m.transformOrigin]},set:function(a,b){a.style[m.transformOrigin]=b}},a.cssHooks.transition={get:function(a){return a.style[m.transition]},set:function(a,b){a.style[m.transition]=b}}),h("scale"),h("scaleX"),h("scaleY"),h("translate"),h("rotate"),h("rotateX"),h("rotateY"),h("rotate3d"),h("perspective"),h("skewX"),h("skewY"),h("x",!0),h("y",!0),d.prototype={setFromString:function(a,b){var c="string"==typeof b?b.split(","):b.constructor===Array?b:[b];c.unshift(a),d.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);this.setter[a]?this.setter[a].apply(this,b):this[a]=b.join(",")},get:function(a){return this.getter[a]?this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=j(a,"deg")},rotateX:function(a){this.rotateX=j(a,"deg")},rotateY:function(a){this.rotateY=j(a,"deg")},scale:function(a,b){void 0===b&&(b=a),this.scale=a+","+b},skewX:function(a){this.skewX=j(a,"deg")},skewY:function(a){this.skewY=j(a,"deg")},perspective:function(a){this.perspective=j(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,b){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==a&&void 0!==a&&(this._translateX=j(a,"px")),null!==b&&void 0!==b&&(this._translateY=j(b,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");return a[0]&&(a[0]=parseFloat(a[0])),a[1]&&(a[1]=parseFloat(a[1])),a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||"0,0,0,0deg").split(","),b=0;3>=b;++b)a[b]&&(a[b]=parseFloat(a[b]));return a[3]&&(a[3]=j(a[3],"deg")),a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this)if(this.hasOwnProperty(c)){if(!m.transform3d&&("rotateX"===c||"rotateY"===c||"perspective"===c||"transformOrigin"===c))continue;"_"!==c[0]&&(a&&"scale"===c?b.push(c+"3d("+this[c]+",1)"):a&&"translate"===c?b.push(c+"3d("+this[c]+",0)"):b.push(c+"("+this[c]+")"))}return b.join(" ")}},a.fn.transition=a.fn.transit=function(b,c,d,f){var h=this,i=0,j=!0,l=a.extend(!0,{},b);"function"==typeof c&&(f=c,c=void 0),"object"==typeof c&&(d=c.easing,i=c.delay||0,j="undefined"==typeof c.queue?!0:c.queue,f=c.complete,c=c.duration),"function"==typeof d&&(f=d,d=void 0),"undefined"!=typeof l.easing&&(d=l.easing,delete l.easing),"undefined"!=typeof l.duration&&(c=l.duration,delete l.duration),"undefined"!=typeof l.complete&&(f=l.complete,delete l.complete),"undefined"!=typeof l.queue&&(j=l.queue,delete l.queue),"undefined"!=typeof l.delay&&(i=l.delay,delete l.delay),"undefined"==typeof c&&(c=a.fx.speeds._default),"undefined"==typeof d&&(d=a.cssEase._default),c=k(c);var n=g(l,c,d,i),o=a.transit.enabled&&m.transition,q=o?parseInt(c,10)+parseInt(i,10):0;if(0===q){var r=function(a){h.css(l),f&&f.apply(h),a&&a()};return e(h,j,r),h}var s={},t=function(b){var c=!1,d=function(){c&&h.unbind(p,d),q>0&&h.each(function(){this.style[m.transition]=s[this]||null}),"function"==typeof f&&f.apply(h),"function"==typeof b&&b()};q>0&&p&&a.transit.useTransitionEnd?(c=!0,h.bind(p,d)):window.setTimeout(d,q),h.each(function(){q>0&&(this.style[m.transition]=n),a(this).css(l)})},u=function(a){this.offsetWidth,t(a)};return e(h,j,u),this},a.transit.getTransitionValue=g,a}),!function(a){var b="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()),a.support=a.support||{},a.extend(a.support,{touch:"ontouchend"in document});var c=function(){return!1},d=function(b,c){return this.settings=c,this.el=b,this.$el=a(b),this._initElements(),this};d.DATA_KEY="kinetic",d.DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},d.prototype.start=function(b){this.settings=a.extend(this.settings,b),this.velocity=b.velocity||this.velocity,this.velocityY=b.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},d.prototype.end=function(){this.settings.decelerate=!0},d.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,a.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},d.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(b).css("cursor","")},d.prototype.attach=function(){this.$el.hasClass(b)||(this._attachListeners(this.$el),this.$el.addClass(b).css("cursor",this.settings.cursor))},d.prototype._initElements=function(){this.$el.addClass(b),a.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,a(document).mouseup(a.proxy(this._resetMouse,this)).click(a.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},d.prototype._initEvents=function(){var b=this;this.settings.events={touchStart:function(a){var c;b._useTarget(a.target,a)&&(c=a.originalEvent.touches[0],b._start(c.clientX,c.clientY),a.stopPropagation())},touchMove:function(a){var c;b.mouseDown&&(c=a.originalEvent.touches[0],b._inputmove(c.clientX,c.clientY),a.preventDefault&&a.preventDefault())},inputDown:function(a){b._useTarget(a.target,a)&&(b._start(a.clientX,a.clientY),b.elementFocused=a.target,"IMG"===a.target.nodeName&&a.preventDefault(),a.stopPropagation())},inputEnd:function(a){b._useTarget(a.target,a)&&(b._end(),b.elementFocused=null,a.preventDefault&&a.preventDefault())},inputMove:function(a){b.mouseDown&&(b._inputmove(a.clientX,a.clientY),a.preventDefault&&a.preventDefault())},scroll:function(c){a.isFunction(b.settings.moved)&&b.settings.moved.call(b,b.settings),c.preventDefault&&c.preventDefault()},inputClick:function(a){return Math.abs(b.velocity)>0?(a.preventDefault(),!1):void 0},dragStart:function(a){return b._useTarget(a.target,a)&&b.elementFocused?!1:void 0}},this._attachListeners(this.$el,this.settings)},d.prototype._inputmove=function(b,c){var d=this.$el;if(this.el,(!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){this.elementFocused&&(a(this.elementFocused).blur(),this.elementFocused=null,d.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var e=this.scrollLeft(),f=this.scrollTop(),g=b-this.xpos,h=c-this.ypos;this.scrollLeft(this.settings.x?e-g:e),this.scrollTop(this.settings.y?f-h:f),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=b,this.ypos=c,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),a.isFunction(this.settings.moved)&&this.settings.moved.call(d,this.settings)}},d.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity)},d.prototype._end=function(){this.xpos&&this.prevXPos&&this.settings.decelerate===!1&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},d.prototype._useTarget=function(b,c){return a.isFunction(this.settings.filterTarget)?this.settings.filterTarget.call(this,b,c)!==!1:!0},d.prototype._start=function(a,b){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=a,this.ypos=b},d.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},d.prototype._decelerateVelocity=function(a,b){return 0===Math.floor(Math.abs(a))?0:a*b},d.prototype._capVelocity=function(a,b){var c=a;return a>0?a>b&&(c=b):0-b>a&&(c=0-b),c},d.prototype._setMoveClasses=function(a){var b=this.settings,c=this.$el;c.removeClass(b.movingClass.up).removeClass(b.movingClass.down).removeClass(b.movingClass.left).removeClass(b.movingClass.right).removeClass(b.deceleratingClass.up).removeClass(b.deceleratingClass.down).removeClass(b.deceleratingClass.left).removeClass(b.deceleratingClass.right),this.velocity>0&&c.addClass(a.right),this.velocity<0&&c.addClass(a.left),this.velocityY>0&&c.addClass(a.down),this.velocityY<0&&c.addClass(a.up);
},d.prototype._move=function(){var b=(this.$el,this.el),c=this,d=c.settings;d.x&&b.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=d.decelerate?c._decelerateVelocity(this.velocity,d.slowdown):this.velocity)):this.velocity=0,d.y&&b.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=d.decelerate?c._decelerateVelocity(this.velocityY,d.slowdown):this.velocityY)):this.velocityY=0,c._setMoveClasses(d.deceleratingClass),a.isFunction(d.moved)&&d.moved.call(this,d),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){c.moving=!1,c._move()})):c.stop()},d.prototype._getScroller=function(){var b=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(b=a(window)),b},d.prototype.scrollLeft=function(a){var b=this._getScroller();return"number"!=typeof a?b.scrollLeft():(b.scrollLeft(a),void(this.settings.scrollLeft=a))},d.prototype.scrollTop=function(a){var b=this._getScroller();return"number"!=typeof a?b.scrollTop():(b.scrollTop(a),void(this.settings.scrollTop=a))},d.prototype._attachListeners=function(){var b=this.$el,d=this.settings;a.support.touch?b.bind("touchstart",d.events.touchStart).bind("touchend",d.events.inputEnd).bind("touchmove",d.events.touchMove):b.mousedown(d.events.inputDown).mouseup(d.events.inputEnd).mousemove(d.events.inputMove),b.click(d.events.inputClick).scroll(d.events.scroll).bind("selectstart",c).bind("dragstart",d.events.dragStart)},d.prototype._detachListeners=function(){var b=this.$el,d=this.settings;a.support.touch?b.unbind("touchstart",d.events.touchStart).unbind("touchend",d.events.inputEnd).unbind("touchmove",d.events.touchMove):b.unbind("mousedown",d.events.inputDown).unbind("mouseup",d.events.inputEnd).unbind("mousemove",d.events.inputMove).unbind("scroll",d.events.scroll),b.unbind("click",d.events.inputClick).unbind("selectstart",c).unbind("dragstart",d.events.dragStart)},a.Kinetic=d,a.fn.kinetic=function(b,c){return this.each(function(){var e=a(this),f=e.data(d.DATA_KEY),g=a.extend({},d.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data(d.DATA_KEY,f=new d(this,g)),"string"==typeof b&&f[b](c)})}}(window.jQuery||window.Zepto),define("jquery.kinetic",function(){}),function(a){"function"==typeof define&&define.amd?define("jquery.mousewheel",["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,k=0,l=0,m=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(l=-1*g.detail),"wheelDelta"in g&&(l=g.wheelDelta),"wheelDeltaY"in g&&(l=g.wheelDeltaY),"wheelDeltaX"in g&&(k=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(k=-1*l,l=0),j=0===l?k:l,"deltaY"in g&&(l=-1*g.deltaY,j=l),"deltaX"in g&&(k=g.deltaX,0===l&&(j=-1*k)),0!==l||0!==k){if(1===g.deltaMode){var n=a.data(this,"mousewheel-line-height");j*=n,l*=n,k*=n}else if(2===g.deltaMode){var o=a.data(this,"mousewheel-page-height");j*=o,l*=o,k*=o}return m=Math.max(Math.abs(l),Math.abs(k)),(!f||f>m)&&(f=m,d(g,m)&&(f/=40)),d(g,m)&&(j/=40,k/=40,l/=40),j=Math[j>=1?"floor":"ceil"](j/f),k=Math[k>=1?"floor":"ceil"](k/f),l=Math[l>=1?"floor":"ceil"](l/f),b.deltaX=k,b.deltaY=l,b.deltaFactor=f,b.deltaMode=0,h.unshift(b,j,k,l),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=h.length;a;)this.removeEventListener(h[--a],b,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),define("app/views/modules/body/main-content-stream",["jquery","_","Q","app/views/yeti-modules","app/common/templating","app/common/state","app/common/page","app/common/selection","app/common/key-codes","app/common/tve","app/controllers/reporting","app/views/modules/carousel","app/models/stream-pagination","app/views/modules/body/stream/stream-aspect-ratio","app/views/modules/body/stream/stream-animation","app/views/modules/body/stream/stream-pagination-peek","app/views/modules/body/stream/stream-mousewheel","app/views/modules/body/stream/stream-cache","app/views/modules/body/stream/stream-do-not-touch","app/views/modules/body/stream/stream-element-tracker","app/views/modules/poll","jquery.transit","jquery.kinetic","jquery.mousewheel","jquery.touchSwipe"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){return a.length?parseInt(a.css("left"),10)+a.outerWidth(!0):0}var w={ORIENTATION_PORTRAIT:"portrait",ORIENTATION_LANDSCAPE:"landscape",LAYOUT_TWO_ROWS:"twoRows",ENABLE_TOUCH_EVENTS:!0},x=d.ModuleLayout.extend({regions:{byShowCarouselRegion:".slider-by-show-carousel"},events:{"mouseenter .block-item-about-text":"toggleScrollingAboutBox","mouseleave .block-item-about-text":"toggleScrollingAboutBox","mouseenter .slider-arrow-container-previous":"dMouseenterArrowPrevious","mouseleave .slider-arrow-container-previous":"dMouseleaveArrowPrevious","mouseenter .slider-arrow-container-next":"dMouseenterArrowNext","mouseleave .slider-arrow-container-next":"dMouseleaveArrowNext","mouseenter .slider-by-show-carousel .carousel-list-item":"hoverCarouselItem","mouseleave .slider-by-show-carousel .carousel-list-item":"hoverCarouselItem","click .slider-arrow":"dClickArrow","click .block-item-dnt":"_playDnt","click .route":"clickRoute","touchend .block-item-dnt":"_playDnt"},ui:{wrapper:".slider",scroller:".slider-scroller",content:".slider-content",sliderControls:".slider-controls",lockedItem:".locked",previous:".slider-arrow-container-previous",next:".slider-arrow-container-next",blockItem:".slider-block-item",byShowCarouselWrapper:".slider-by-show-carousel",blockItemHero:".slider-block-item-hero"},defaults:{scrollSpeed:1200,mobileScrollSpeed:800},initialize:function(c){this.options=b.extend(this.defaults,c),this.touchEventsAttached={portrait:!1,landscsape:!1},this.app=requirejs("app/app"),this.isIE9=a("html").hasClass("ie9"),this.deepLinkHash=null,this.templateOverride="",this.dntHasBeenAttached=!1,this.initializePagination(),this.initializeAds(),this.initializeStreamCache(),this.initializeLayout(),this.initializeAspectRatio(),this.initializeDNT(),window.pageRendered=!1,this.setTestAndTarget()},initializePagination:function(){this.isLoadingNextPage=!1,this.endOfStreamReached=!1,this.endOfView=!1,this.isLandscapeScrolling=!1,this.pageNumber=0,this.percentScrolled=0;var c=400;this.dGetMaxPages=b.debounce(a.proxy(this.getMaxPages,this),c,!0),this.dGetPagePositionLeft=b.debounce(a.proxy(this.getPagePositionLeft,this),c,!0),this.dMoveToPage=b.debounce(a.proxy(this.moveToPage,this),300,!0),this.dClickArrow=b.debounce(a.proxy(this.clickArrow,this),c,!0),this.dMouseenterArrowPrevious=b.debounce(a.proxy(this.mouseenterArrowPrevious,this),500,!0),this.dMouseleaveArrowPrevious=b.debounce(a.proxy(this.mouseleaveArrowPrevious,this),500,!0),this.dMouseenterArrowNext=b.debounce(a.proxy(this.mouseenterArrowNext,this),500,!0),this.dMouseleaveArrowNext=b.debounce(a.proxy(this.mouseleaveArrowNext,this),500,!0),this.dUpdatePageinViewport=b.debounce(a.proxy(this.updatePageinViewport,this),c,!0),this.dUpdatePageLayout=b.debounce(a.proxy(this.updatePageLayout,this),c,!0),this.dSwipeEnd=b.debounce(a.proxy(this.onSwipeEnd,this),c,!0)},initializeAds:function(){this.totalAds=0},initializeLayout:function(){this.currentLayout=w.ORIENTATION_PORTRAIT,this.updatePageWidth=!0,this.updatePageHeight=!0,this.recalculatePromoMetrics=!0},initializeAspectRatio:function(){this.promoAspectRatioClasses=b.shuffle(["aspect-ratio-1-1","aspect-ratio-4-3","aspect-ratio-16-9"]),this.promoAspectRatioIndex=0,this.showRandomAspectRatios=!0},initializeDNT:function(){s.initialize(),this.dntHasBeenAttached=!0,this.listenTo(this.app.vent,"DNT-press",this.dntClicked)},dntClicked:function(){a(window.document).trigger("nickapp.dntClicked")},onShow:function(){this.$window=a(window),this.$document=a(window.document),this._setTemplateOverride(),this.onIOS8=window.navigator.userAgent.match(/(iPad|iPhone).*OS 8/),this._setupMouseScroll(),this._setupTouchScroll(),this.lockEpisodes(),this.setupDoNotTouch(),this.endOfStreamReached=this.ui.wrapper.data("has-pagination")===!1,this.deepLink(),this.setupStreamPagination(),this.injectCachedPages(),this.updateLayout(),this.setUpHeroPromo(),this.setUpPolls(),this.ui.byShowCarouselWrapper.length&&this._setupByShowCarousel(),this.addListeners(),this.moveToBookmark().then(b.bind(this.updatePageinViewport,this)).then(b.bind(this.updatePagesOutsideVieport,this)).then(b.bind(this.revealLayout,this)).then(b.bind(this.fetchNextPage,this)),j.initialize()},onBeforeClose:function(){this.isStreamCacheSaved||this.saveStreamCache()},revealLayout:function(){this.updateArrows(),this.ui.wrapper.addClass("is-loaded")},updatePagesOutsideVieport:function(){var a=this.$(".slider-block-item.promo");return a.filter(".is-on-viewport").removeClass("is-not-loaded"),a.filter(":not(.is-on-viewport)").addClass("is-not-loaded"),a},moveToBookmark:function(){var a=this.$(".promo.page-bookmark");if(!a.length)return c();var b,d=f.get("orientation"),e=a.position();return b=d===w.ORIENTATION_LANDSCAPE?this.moveToBookmarkLandscape(e):this.moveToBookmarkPortrait(e),c(b)},moveToBookmarkLandscape:function(a){var b=a.left,c=this.getPageWidth(),d=0,e=.8*c;if(b>e){var f=.25*c;d=b-f}return this.scrollPageLandscape(d,0)},moveToBookmarkPortrait:function(a){var b=0,c=this.getPageHeight(),d=a.top,e=Math.round(.75*c);if(d>e){var f=Math.round(.25*c);b=d-f}return this.$window.scrollTop(b),!0},getIdToBookmark:function(a){var b;b=a?a.closest(".slider-block-item"):this.$(".slider-block-item.promo.is-on-viewport:not(.is-not-loaded)").first();var c=0;return b.length&&(c=b.data("id")),c},setupStreamPagination:function(){var a=this.ui.wrapper.data("stream-feed-id"),b=this._getEditorialIds();this.streamPagination=new m({pageFeedId:a,excludeIds:b})},addListeners:function(){this.setupKeyboardNavigation(),this.dOnDeviceOrientationChange=b.debounce(a.proxy(this.onDeviceOrientationChange,this),300),this.listenTo(this.app.vent,"device:orientation",this.dOnDeviceOrientationChange),this.dOnWindowResize=b.debounce(a.proxy(this.onWindowResize,this),300),this.listenTo(this.app.vent,"device:resize",this.dOnWindowResize),this.listenTo(this.app.vent,"TVE.unlockContent",this.unlockEpisodes),this.listenTo(this.app.vent,"TVE.lockContent",this.lockEpisodes),this.dOnPageScroll=b.debounce(a.proxy(this.onPageScroll,this),300),this.listenTo(this.app.vent,"page:scroll",this.dOnPageScroll),this.listenTo(this.app.vent,"jumpToFirstPage",this.jumpToFirstPage),this.listenTo(this.streamPagination,"change:page",this.onPaginationChangePage),this.listenTo(this.streamPagination,"change:hasMore",this.onPaginationEndOfStream),this.listenTo(this.streamPagination,"pagination:start",this.onPaginationStart),this.listenTo(this.streamPagination,"pagination:end",this.onPaginationEnd),this.listenTo(this.streamPagination,"pagination:error",this.onPaginationEndOfStream),this.listenTo(this.app.vent,"renderComplete",this.pageReady),this.dOnReachedLastPage=b.debounce(this.onReachedLastPage,500,!0),this.listenTo(this.app.vent,"reachedLastPage",this.dOnReachedLastPage)},onReachedLastPage:function(){a(window.document).trigger("nickapp.paginationEnd")},onClose:function(){this.stopListening(),Modernizr.touch&&this.ui.scroller.kinetic("detach"),a(window.document).off(".contentstream"),this.touchEventsAttached.portrait&&this.ui.scroller.kinetic("detach"),this.touchEventsAttached.landscape&&this.ui.scroller.swipe("destroy")},setupKeyboardNavigation:function(){var c=b.debounce(a.proxy(this.onKeydownHandler,this),300,!0);a(window.document).on("keydown.contentstream",c)},onKeydownHandler:function(a){this.navigateStream(a,a.keyCode,a.shiftKey),this.ui.next.hide(),this.ui.previous.hide()},navigateStream:function(a,b,c){var d=a.currentTarget.activeElement,e="INPUT"===d.nodeName;return e?void 0:b===i.HOME?void this.jumpToFirstPage():b===i.END?void this.jumpToLastPage():b===i.RIGHT_ARROW||b===i.SPACEBAR&&!c?void this.nextPage():b===i.LEFT_ARROW||b===i.SPACEBAR&&c?void this.previousPage():void 0},onPageScroll:function(a,b,c,d){return this.updatePagePortrait(a)},deepLink:function(){this.deepLinkHash=window.location.hash||"",this.deepLinkAbout()},deepLinkAbout:function(){var a=0===this.deepLinkHash.indexOf("#about");if(a)return void this.removePromoTiles();if(!this.endOfStreamReached){var b=this.ui.content.children(".slider-block-item-about").length>0;!a&&b&&this.hideAboutContent()}},removePromoTiles:function(){this.$(".slider-block-item.promo").remove(),this.$(".slider-block-item.poll").remove()},hideAboutContent:function(){var a=this.ui.content.children(".slider-block-item-about, .slider-block-item-character");a.detach(),this.aboutTilesDetached=a},placeBackAboutContent:function(){this.endOfStreamReached&&this.aboutTilesDetached&&(this.ui.content.append(this.aboutTilesDetached),this.aboutTilesDetached=null)},_isMainHub:function(){var a=!1,b=g.get("templateId");if("home"===b||b.indexOf("-hub")>=0){var c=window.location.pathname.split("/");(c.length<3||3===c.length&&""===c[2])&&(a=!0)}return a},setupDoNotTouch:function(){if(this.isDNTenabled=!this.isIE9&&this._isMainHub(),this.isDNTenabled){var a=this.ui.content.data("dntFrequency");s.settings.frequency=a,s.setup(this.ui.blockItem),this.setupDoNotTouchBindings()}},injectDoNotTouch:function(a){if(!this.isDNTenabled)return a;var b=this.ui.content,c=b.children(".slider-block-item").length-1,d=b.children('[data-type="dnt"]').last().index(),e=d-c;return s.inject(e,a)},_setupByShowCarousel:function(){this.byShowCarousel=new l({dynamicMask:!1,infinite:!0}),this.byShowCarouselRegion.setView(this.byShowCarousel,!0,this.ui.byShowCarouselWrapper)},hoverCarouselItem:function(b){var c=a(b.currentTarget),d="mouseenter"===b.type;this.zoomCarouselItem(c,d)},zoomCarouselItem:function(a,b){b?(a.toggleClass("carousel-zoom-primary",!0).prev().toggleClass("carousel-zoom-secondary-left",!0),a.next().toggleClass("carousel-zoom-secondary-right",!0),a.siblings(":not(.carousel-zoom-primary, .carousel-zoom-secondary-left, .carousel-zoom-secondary-right)").addClass("carousel-zoom-others")):a.siblings().addBack().removeClass("carousel-zoom-primary carousel-zoom-secondary-left carousel-zoom-secondary-right carousel-zoom-others")},resizeByShowCarousel:function(){"undefined"!=typeof this.byShowCarousel&&this.byShowCarousel._resize()},_setupAds:function(){var b=this.ui.blockItem.filter('[data-type="ad"]');if(f.get("isAdfree"))return void b.remove();var c,d,g=1,h=this.ui.content.data("adFrequency")||7,i=1,j=this.ui.content.find("#property-about").index(),k=this.ui.content.children().length;if(j>=0&&(k=j-1),b.length<1&&k>0){for(var l=g;k>=l;l+=h)d=a(".slider-block-item"),c=e.render("modules/body/property/ad-box",{adIndex:i}),d.eq(l).hasClass("slider-block-item-character")||(d.eq(l-1).after(c),this.totalAds++,k++,i++);this.bindUIElements()}},_injectAds:function(b){if(f.get("isAdfree"))return b;var c,d=this.ui.blockItem.filter('[data-type="ad"]'),g=d.length+1,h=a("<div/>").append(b),i=h.children().length,j=this.ui.content.data("adFrequency")||7,k=this.ui.blockItem.filter('[data-type="ad"]:last').index();k=0>k?0:k;var l=this.ui.blockItem.length-k,m=j-l;for(m=0>m?0:m;i>=m;m+=j)c=e.render("modules/body/property/ad-box",{adIndex:g}),h.children().eq(m).hasClass("slider-block-item-character")||(h.children().eq(m).before(c),i++),g++;var n=h.html();return h=null,n},_setupTouchScroll:function(){var b=f.get("orientation");Modernizr.touch&&w.ENABLE_TOUCH_EVENTS&&(b===w.ORIENTATION_LANDSCAPE?(this.touchEventsAttached.portrait&&a(".slider-scroller").kinetic("detach"),this._touchAttachLandscape()):(this.touchEventsAttached.landscape&&this.ui.content.swipe("disable"),this._touchAttachPortrait()),this.ui.sliderControls.hide())},_touchAttachPortrait:function(){if(this.onIOS8)return!1;var c=a(".slider-scroller");this.touchEventsAttached.portrait?c.kinetic("attach"):(c.kinetic({x:!1,y:!0,cursor:"auto",maxvelocity:60,triggerHardware:!0,slowdown:.1,filterTarget:b.bind(this.contentTileFilter,this)}),this.touchEventsAttached.portrait=!0)},_touchAttachLandscape:function(){var b=a.proxy(this.nextPage,this),c=a.proxy(this.previousPage,this),d=this.ui.content,e=!1;this.touchEventsAttached.landscape?d.swipe("enable"):(d.swipe({allowPageScroll:"none",triggerOnTouchEnd:!1,threshold:50,excludedElements:a.fn.swipe.defaults.excludedElements.replace(/\ba, *|, *a\b/gi,""),swipe:function(d,f,g,h,i){var j=a(d.target),k=j.parents();k.index(a("div.slider-scroller"))>-1&&("left"===f?b():c(),e=!0)},tap:function(b,c){e?e=!1:a(c).trigger("click")}}),this.touchEventsAttached.landscape=!0)},contentTileFilter:function(a,b){var c=!1;switch(b.type){case"touchstart":this.kineticStart={x:b.originalEvent.changedTouches[0].clientX,y:b.originalEvent.changedTouches[0].clientY};break;case"touchend":this.kineticEnd={x:b.originalEvent.changedTouches[0].clientX,y:b.originalEvent.changedTouches[0].clientY},c=this.contentStreamScrolled()}return c},contentStreamScrolled:function(){return this.kineticStart.x<this.kineticEnd.x+4&&this.kineticStart.x>this.kineticEnd.x-4&&this.kineticStart.y<this.kineticEnd.y+4&&this.kineticStart.y>this.kineticEnd.y-4?!1:!0},_setupMouseScroll:function(){var b={mousewheel:{intent:{delay:300,sensitivity:7}}};this.streamMouseWheel=new q,this.ui.scroller.on("mousewheel",b,a.proxy(this.handleMousewheel,this))},handleMousewheel:function(a){if(f.get("orientation")===w.ORIENTATION_LANDSCAPE){a.preventDefault();var b=a.deltaX;if(0===Math.abs(a.deltaX)&&(b=-1*a.deltaY),!this.isLandscapeScrolling){var c=(new Date).getTime(),d=this.streamMouseWheel.isScrollValid(b,c);return d?this.scrollLandscapeByDelta(b):!1}}},scrollLandscapeByDelta:function(a){var b;return b=a>0?this.nextPage():this.previousPage()},clickRoute:function(b){var c=a(b.currentTarget);this.stopListening(),this.saveStreamCache(c)},toggleScrollingAboutBox:function(a){"mouseenter"===a.type?this.ui.scroller.off("mousewheel"):this._setupMouseScroll()},mouseenterArrowPrevious:function(a){this.peekContentStream(a,!1,!0)},mouseleaveArrowPrevious:function(a){this.peekContentStream(a,!0,!1)},mouseenterArrowNext:function(a){this.peekContentStream(a,!0,!0)},mouseleaveArrowNext:function(a){this.peekContentStream(a,!1,!1)},peekContentStream:function(b,c,d){if(Modernizr.touch||this.isIE9)return!1;var e;if(e=this._getArrowData(b),!e.currentTarget.is(":visible"))return!1;var f=this.getCurrentPageIndex();0===f&&this.ui.previous.data("peek-direction",null);var g=a(b.currentTarget);return this.shouldContentPeek(g,d)?(c?p.contentStreamPeekLeft().done():p.contentStreamPeekRight().done(),!0):!1},shouldContentPeek:function(a,b){var c=a.data("peek-direction"),d=b?"IN":"OUT";return c===d?!1:(a.data("peek-direction",d),!0)},clickArrow:function(a){var b;a.preventDefault(),b=this._getArrowData(a);var c="next"===b.direction;return c||0!==this.getNextLandscapePosition(!c)||this.ui.previous.hide(),this.isIE9&&h.clear(),this.dMoveToPage(c),!1},moveToPage:function(a){var b;return b=a===!0?this.nextPage():this.previousPage()},_getArrowData:function(b){var c,d;return c=a(b.currentTarget),d=c.data("direction"),{currentTarget:c,direction:d}},updateArrows:function(){var a=this.dGetPagePositionLeft(),b=this.ui.scroller.width(),c=this.ui.content.outerWidth(!0),d=c-b,e=d-a,f=!1,g=!1;e>0&&(f=!0),a>0&&(g=!0),100>a?(f=!this.isLoadingNextPage,g=!1,a>0&&this.ui.content.stop().transition({x:0},100,"linear")):100>e&&(f=!1,!this.endOfView&&this.endOfStreamReached&&(this.endOfView=!0,this.app.vent.trigger("reachedLastPage")),e>0&&100>e&&this.ui.content.stop().transition({x:"-="+e},100,"linear")),b>c&&(f=!1),this.ui.previous.toggle(g),this.ui.next.toggle(f),this.ui.content.addClass("item-shadows")},_resetToPortrait:function(){if(this.currentLayout!==w.ORIENTATION_PORTRAIT){this.currentLayout=w.ORIENTATION_PORTRAIT;var a=this.ui.blockItem;a.css({left:"",top:"",position:""})}},_addRandomAspectRatio:function(c){var d,e,f;0===a(c).filter('[class*="aspect-ratio-"]').length&&"kids-unlimited-featured"!==this.templateOverride&&(e=this.promoAspectRatioClasses,f=this.promoAspectRatioIndex,d=e[f],a(c).addClass(d),this.promoAspectRatioIndex=f<e.length-1?f+1:0,0===this.promoAspectRatioIndex&&(this.promoAspectRatioClasses=b.shuffle(this.promoAspectRatioClasses)))},placeBlock:function(a,b){a.css({position:"absolute",top:b.top+"px",left:b.left+"px"}).data("position",b)},stackAboutLandscape:function(b){var c=a(b[1]).outerHeight(!0),d=!0,e=this,f=0;b.each(function(g){var h,i,j=a(this);0===g?(h=0,i=0):(d?(i=0,f=v(a(b[g-1]))):i=c,h=f,d=!d);var k={top:i,left:h};a.proxy(e.placeBlock(j,k),e)})},stackStreamLandscape:function(){this.currentLayout=w.LAYOUT_TWO_ROWS;var b=a(".slider-block-item"),c=window.matchMedia("(min-height: 600px) and (max-height: 767px)").matches,d=b.filter(':not(:first,.span-full-height,[data-type="ad"])').outerHeight(!0),e=this,f=!1;return a(b[0]).hasClass("slider-block-item-about")?void this.stackAboutLandscape(b):void b.each(function(g){var h,i,j,k,l=g%2===0,m=a(this),n="ad"===m.data("type");g>0&&e.showRandomAspectRatios&&e._addRandomAspectRatio(this),h=l?0:d,0===g?(i=0,h=0):1===g?(i=a(b[0]).outerWidth(!0),k=m.next(".span-full-height").length>0,!n&&k&&(h=0)):(f?(j=1,f=!1):j=2,i=v(a(b[g-j]))),c&&n&&(h=0,1!==g&&(i=Math.max(v(a(b[g-2])),v(a(b[g-1])))),f=!0),m.hasClass("span-full-height")&&(h=0,i=Math.max(v(a(b[g-2])),v(a(b[g-1]))),f=!0);var o={top:h,left:i};a.proxy(e.placeBlock(m,o),e)})},setVariableAspectRatioImages:function(){var a=this.$(".slider-content").children('.slider-block-item:not(.aspect-ratio-ignore, [data-type="ad"],[data-type="dnt"], [data-type="episodes-button"])');return n.toCollection(a)},getTotalWidthSumOfElements:function(b){for(var c=b.length,d=0,e=0;c>e;e++)d+=a(b[e]).outerWidth(!0);return d+=1},getContentMaxWidth:function(){var b=f.get("orientation"),c=0;if(b===w.ORIENTATION_PORTRAIT)return"";var d=this.currentLayout===w.LAYOUT_TWO_ROWS,e=this.ui.content.children();if(!d)return this.getTotalWidthSumOfElements(e);for(var g,h,i=5,j=e.length,k=j>=i?j-i:0,l=k;j>l;l++)g=a(e[l]),h=v(g),h>c&&(c=h);return c},_updateContentWidth:function(){var a=(this.currentLayout===w.LAYOUT_TWO_ROWS,f.get("orientation"),this.getContentMaxWidth());this.ui.content.css("width",a)},updateContentHeight:function(){var b,c=this.ui.content,d=this.$window,e=f.get("orientation"),g=a(".section-footer:visible").height();b=e===w.ORIENTATION_LANDSCAPE?{"font-size":d.height()-(c.offset().top+g),height:"1.1em"}:{"font-size":d.width()-(parseInt(c.css("padding-left"),10)+parseInt(c.css("padding-right"),10)),width:"",height:"auto"},c.css(b)},onDeviceOrientationChange:function(a){this.recalculatePromoMetrics=!0,this._setupTouchScroll(),a===w.ORIENTATION_PORTRAIT&&this.ui.content.stop().transition({x:0},0),this.dUpdatePageLayout()},onWindowResize:function(){this.recalculatePromoMetrics=!0,c(this.updatePageLayout()).then(b.bind(this.animateTiles,this,!1))},updateLayout:function(){var a=f.get("orientation"),b=window.matchMedia("(min-height: 600px)").matches;this.updatePageWidth=!0,this.updatePageHeight=!0,this.ui.blockItem=this.$(".slider-block-item"),this._setupAds(),this.updateContentHeight(),a===w.ORIENTATION_LANDSCAPE&&b?this.stackStreamLandscape():this._resetToPortrait(),this.setVariableAspectRatioImages(),this._updateContentWidth()},updatePageLayout:function(){return this.updateLayout(),this.resizeByShowCarousel(),this.updateArrows(),this.updatePageinViewport()},setUpHeroPromo:function(){this.ellipsize(this.ui.blockItemHero)},setUpPolls:function(){var b=a('[data-type="poll"]');b.each(function(b){var c=a(this);this.poll=new u(c),t.addElement(this.poll)})},ellipsize:function(b){var c,d;b.each(function(){for(c=a(this),c.children().length||c.contents().wrap("<div></div>"),d=c.find(":last");c.height()<d.offset().top-(c.offset().top+parseInt(c.css("padding-top"),10))+(d.outerHeight()-parseInt(d.css("margin-bottom"),10)+parseInt(d.css("margin-top"),10));)d.text(d.text().substring(0,d.text().length-6).trim()+"..."),"..."===d.text()&&(d.remove(),d=c.find(":last"))})},swipePage:function(a,c){return this.scrollPageLandscape(a,c).then(b.bind(this.dSwipeEnd,this))},onSwipeEnd:function(){var a=this.dGetMaxPages(),b=this.getCurrentPageIndex();2>=a-b&&this.fetchNextPage(),this.updatePageinViewport()},scrollPageLandscape:function(b,c){this.ui.content.removeClass("item-shadows");var d,e=Math.abs(b);return d=(0>b?1:-1)*e,d=d>0?0:d,this.doScrollTransition(".scroll-with-content-stream-landscape",d,c.toFixed(1)).then(a.proxy(this.updateArrows,this))},doScrollTransition:function(b,d,e){var f=c.defer();return this.isIE9?a(b).animate({left:d},{duration:e,easing:"swing",done:function(){f.resolve(b)}}):a(b).transition({x:d},e,"cubic-bezier(0.2, 1.15, 0.5, 1)",function(){f.resolve(b)}),f.promise},resetLandscapeScrollSettings:function(){this.isLandscapeScrolling=!1,this.streamMouseWheel.lastScrollOccured=(new Date).getTime()},setupDoNotTouchBindings:function(){var d=a(".block-item-dnt");c.fcall(d.swipe("disable")).then(b.bind(this.attachDoNotTouchBindings,this))},attachDoNotTouchBindings:function(){var b=a(".block-item-dnt");b.swipe({allowPageScroll:"none",threshold:50,cancelThreshold:20,tap:a.proxy(this._playDnt,this)})},previousPage:function(){return this.goToPageLandscape("previous")},nextPage:function(){return this.pageNumber++,k.trigger("paginationNext",{pageNumber:this.pageNumber}),this.ui.previous.is(":visible")||this.ui.previous.show(),this.goToPageLandscape("next")},jumpToFirstPage:function(){var c=this.options.scrollSpeed;if(f.get("orientation")===w.ORIENTATION_PORTRAIT)a("html, body").animate({scrollTop:0},c);else if(this.getCurrentPageIndex()>0)return this.scrollPageLandscape(0,c).then(b.bind(this.dUpdatePageinViewport,this)).then(b.bind(this.animateTiles,this,!1)).then(b.bind(this.resetLandscapeScrollSettings,this)).then(b.bind(this.fetchNextPageLandscape,this)).done()},jumpToLastPage:function(){if(f.get("orientation")!==w.ORIENTATION_PORTRAIT){var a=this.options.scrollSpeed,c=this.getPageWidth(),d=this.ui.content.outerWidth(!0),e=d-c;return this.scrollPageLandscape(e,a).then(b.bind(this.dUpdatePageinViewport,this)).then(b.bind(this.animateTiles,this,!1)).then(b.bind(this.resetLandscapeScrollSettings,this)).then(b.bind(this.fetchNextPageLandscape,this)).done()}},getNextLandscapePosition:function(a){var b,c;b=this.getPageWidth(),c=this.dGetMaxPages();var d=b*(c-1),e=Math.round(.75*b),f=this.dGetPagePositionLeft();return a?(f-=e,.25*b>f&&(f=0),f=Math.max(f,0)):(f+=e,f=Math.min(f,d)),f},goToPageLandscape:function(a){if(this.isLandscapeScrolling)return c(!1);this.isLandscapeScrolling=!0;var d="previous"===a,e=this.getNextLandscapePosition(d),g=f.get("isMobile"),h=g?this.options.mobileScrollSpeed:this.options.scrollSpeed;return this.scrollPageLandscape(e,h).then(b.bind(this.dUpdatePageinViewport,this)).then(b.bind(this.animateTiles,this,d)).then(b.bind(this.resetLandscapeScrollSettings,this)).then(b.bind(this.fetchNextPageLandscape,this)).then(b.bind(this.updateArrows,this)).then(b.bind(this.setupDoNotTouchBindings,this))},lockEpisodes:function(){this.ui.content.hasClass("locked")||this.ui.content.addClass("locked")},unlockEpisodes:function(){this.ui.content.removeClass("locked")},_playDnt:function(){this.isDNTenabled&&this.dntHasBeenAttached&&(this.app.vent.trigger("DNT-press",!0),s.randomize())},getPagePositionLeft:function(){var a=this.ui.content.offset(),b=a.left;this.__contentMarginLeft=this.__contentMarginLeft||parseInt(this.ui.content.css("margin-left"),10);var c=-(b-this.__contentMarginLeft);return c},getCurrentPageIndex:function(){var a=this.getPageSize(),b=this.dGetPagePositionLeft(),c=Math.round(b/a);return c},pageReady:function(){window.pageRendered=!0,this.updateTestAndTarget()},setTestAndTarget:function(){var b=this.injectTTPromo;window.mboxUpdateCallback=window.mboxUpdateCallback||function(c){var d=a(".slider-content .slider-block-item").first();window.pageRendered?b(d,c):window.ttData=c}},updateTestAndTarget:function(){if(window.ttData&&""!==window.ttData){var a=this.ui.blockItem.first();this.injectTTPromo(a,window.ttData)}else mboxUpdate("nickvia")},injectTTPromo:function(b,c){var d=window.location.pathname;if("/"===d&&!b.hasClass("home-hero")||-1!==d.indexOf("/games/")&&!b.hasClass("game-hero")){var f=e.render("modules/body/property/stream/promo",c);b.replaceWith(f);var g=a(".slider-content .slider-block-item").first();g.addClass("home-hero"),n.toElement(g)}},updatePageinViewport:function(){var b=(this.getCurrentPageIndex(),f.get("orientation")),c=this.$(".promo"),d=(this.$(".block-item-ad"),this.getPageWidth()),e=this.dGetPagePositionLeft(),g=e-2*d,h=e+2*d,i=e-.25*d,j=e+d,k=this.getPageHeight(),l=this.$window.scrollTop(),m=l-k,n=l+2*k,o=l-.25*k,p=l+1.25*k,q=this,r=[];return c.each(function(c){var d=a(this),e=q.getPromoPosition(d,q.recalculatePromoMetrics),f=!1,k=!1;b===w.ORIENTATION_LANDSCAPE?(f=e.left>g&&e.left<h,k=e.left>=i&&e.left<=j):(f=e.top>m&&e.top<n,k=e.top>=o&&e.top<=p),d.toggleClass("is-on-viewport",k),k&&r.push(d);var l=d.data("isDisplayed")!==!1;d.data("isDisplayed",f);var s=d.data("html");if(s||(s=d.html(),d.data("html",s)),d.filter('[data-type="ad"]').length>0){if(k)return q.displayAd(d),!0;q.resetAd(d)}return f&&l||!f&&!l?!0:void(f?q.displayHiddenPromo(d,s):d.empty())}),this.recalculatePromoMetrics=!1,r},displayAd:function(b){if(!b.hasClass("ad-loaded")){""===b.html()&&b.html(b.data("html")),b.removeClass("is-not-loaded").addClass("ad-loaded");var c=b.find(".block-item-ad");a(window.document).trigger("kfarEvent",["reloadAd",c.attr("id"),c.data("ad-sizes"),k.pageReport])}},resetAd:function(a){a.html(a.data("html")),a.toggleClass("ad-loaded",!1),a.find(".block-item-ad").empty()},displayHiddenPromo:function(a,b){var c=!1;return a.hasClass("is-not-loaded")?(a.html(b),c=n.toElement(a)):a.hide().html(b).fadeIn(300),c&&(b=a.html(),a.data("html",b)),a},getPromoPosition:function(a,b){var c=a.data("position");return b!==!0&&c||(c=a.position(),a.data("position",c)),c},isScrollTopOutsideThreshold:function(a){this.scrollTopCache=this.scrollTopCache||0;var b=this.scrollTopCache-200,c=this.scrollTopCache+200;return b>a||a>c?(this.scrollTopCache=a,!0):!1},getPercentageScrolledPortrait:function(a){var b=a+this.getPageHeight(),c=this.$document.height(),d=100*b/c;return d},fetchNextPagePortrait:function(){var a=this.getPercentageScrolledPortrait(this.scrollTopCache);return this.percentScrolled<a&&(this.percentScrolled=a,this.pageNumber++,k.trigger("paginationNext",{pageNumber:this.pageNumber})),a>=85?this.fetchNextPage():!1},updatePagePortrait:function(a){return this.isScrollTopOutsideThreshold(a)?c(this.updatePageLayout()).then(b.bind(this.animateTiles,this,!1)).then(b.bind(this.fetchNextPagePortrait,this)):(!this.endOfView&&this.endOfStreamReached&&(this.endOfView=!0,this.app.vent.trigger("reachedLastPage")),c(!1))},getPagesToEnd:function(){var a=this.dGetMaxPages(),b=a-this.getCurrentPageIndex();return b},fetchNextPageLandscape:function(){var a=this.getPagesToEnd();
return 2>=a?this.fetchNextPage():!1},fetchNextPage:function(){return"#about"===this.deepLinkHash?!1:this.endOfStreamReached||this.isLoadingNextPage?!1:(this.isLoadingNextPage=!0,this.streamPagination.fetch(),!0)},getPageWidth:function(){return this.pageWidthCache=this.pageWidthCache||0,(!this.pageWidthCache||this.updatePageWidth)&&(this.updatePageWidth=!1,this.pageWidthCache=Math.round(this.ui.scroller.outerWidth(!0))),this.pageWidthCache},getPageHeight:function(){return this.pageHeightCache=this.pageHeightCache||0,(!this.pageHeightCache||this.updatePageHeight)&&(this.updatePageHeight=!1,this.pageHeightCache=this.$window.height()),this.pageHeightCache},getPageSize:function(){var a=f.get("orientation"),b=0;return b=a===w.ORIENTATION_LANDSCAPE?this.getPageWidth():this.getPageHeight()},getMaxPages:function(){var a=this.getPageWidth(),b=this.ui.content.outerWidth(!0);return Math.ceil(b/a)},_getEditorialIds:function(){return a('.slider-block-item[data-is-editorial="true"]').map(function(){return a(this).data("id")}).get()},onPaginationStart:function(){this.isLoadingNextPage=!0,this.updateArrows()},onPaginationEnd:function(){this.isLoadingNextPage=!1,this.updateArrows()},onPaginationEndOfStream:function(a,b){this.endOfStreamReached=!b},onPaginationChangePage:function(a,b){b&&this.injectNewPage(b)},injectPage:function(b){var c=a(b);return c.filter(".slider-block-item.promo").addClass("is-not-loaded"),this.$(".slider-block-item").last().after(c),c},injectNewPage:function(a){return r.append(a),this.isLandscapeScrolling=!0,a=this.injectDoNotTouch(a),a=this.fixIndex(a),a=this._injectAds(a),this.injectPage(a),this.placeBackAboutContent(),c(this.updatePageLayout()).then(b.bind(this.animateTiles,this,!1)).then(b.bind(this.resetLandscapeScrollSettings,this)).then(b.bind(this.setupDoNotTouchBindings,this))},fixIndex:function(b){var c=a(b),d=this.ui.blockItem.filter('[data-type!="ad"]').last().find(".route").data("cr");return c.each(function(b){var c=a(this);c.data("type")&&(d++,""===c.find(".route").attr("data-cr")&&c.find(".route").attr("data-cr",d))}),c},animateTiles:function(a,b){var c=f.get("orientation"),d=f.get("isMobile");return o.animateTiles(a,b,c,d)},initializeStreamCache:function(){this.isStreamCacheSaved=!1;var a,b=window.location.href;try{a=r.get(b)||""}catch(c){}r.cleanAll();var d=r.create(a);return d&&(d.meta.url=b),a},saveStreamCache:function(a){var c=r.getCurrentCache();if(!c)return!1;var d=this.getIdToBookmark(a);if(!c)return!1;var e=this.streamPagination.get("currentPageIndex"),f={leftMostId:d,currentPageIndex:e,reachedEnd:this.endOfStreamReached};c&&b.merge(c.meta,f),r.save(f),this.isStreamCacheSaved=!0},isCacheDataValid:function(a){var b=!1;try{b=a&&a.meta}catch(c){b=!1}return b},addPageBookmark:function(a){if(!a)return!1;var b='.slider-block-item.promo[data-id="'+a+'"]';return this.$(b).addClass("page-bookmark")},injectCachedPages:function(){var a=r.getCurrentCache();if(!this.isCacheDataValid(a))return!1;var b=a.data;b&&this.injectPage(a.data),a.meta.reachedEnd&&(this.endOfStreamReached=a.meta.reachedEnd,this.placeBackAboutContent());var c=a.meta.leftMostId;this.addPageBookmark(c);var d=a.meta.currentPageIndex||0;return this.streamPagination.set("currentPageIndex",d),!0},_setTemplateOverride:function(){var a=this.ui.content.data("template-type")||"";this.templateOverride=a}});return x}),define("app/views/modules/body/property/content",["jquery","_","app/views/yeti-modules","app/views/modules/body/main-content-stream"],function(a,b,c,d){var e=d.extend({events:function(){return b.extend({},b.result(d.prototype,"events"),{"click a.route":"onClickPromo"})},onClickPromo:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("href");this.app.execute("change-path",d)}});return e}),define("app/views/modules/body/property/character",["jquery","underscore.string","marionette","app/views/yeti-modules","app/common/state","app/common/utils"],function(a,b,c,d,e,f){var g=d.ModuleItemView.extend({ui:{characterContentContainer:".character-container",characterImage:".character-image",characterTextBlock:".character-description-block",characterText:".character-description",backButton:".character-back-button"},events:{"click .character-popup-close":"toggleDescPopup","click .character-description-more":"toggleDescPopup","click .character-back-button":"onBackClick","touchend .character-back-button":"onBackClick"},initialize:function(){this.app=requirejs("app/app")},onShow:function(){this.listenTo(this.app.vent,"device:orientation",this._setPropertyImage),this.listenTo(this.app.vent,"device:resize",this._setPropertyImage),this._setPropertyImage(),this.setupBackButton()},onClose:function(){this.stopListening()},isHistoryOrIe:function(){return e.get("urlChanged")||f.isIEAny()},setupBackButton:function(){e.get("urlChanged");this.isHistoryOrIe()&&this.ui.backButton.removeClass("hidden")},onBackClick:function(a){f.isIEAny()?window.history.back(-1):this.app.execute("change-path","back")},toggleDescPopup:function(){this.ui.descriptionPopup.toggle()},_setPropertyImage:function(){var a,b=e.get("orientation"),c=!1;c="landscape"===b?window.matchMedia("(min-height: 600px)").matches:window.matchMedia("(min-width: 1024px)").matches,a=c?this.ui.characterImage.attr("data-image-desktop"):this.ui.characterImage.attr("data-image-mobile"),this.ui.characterImage.css({"background-image":"url("+a+")"})},_insertMoreButton:function(){b.endsWith(this.ui.characterText.text(),"...")&&this.ui.characterTextMore.show()}});return g}),define("app/views/modules/body/property/ad-container",["app/common/state","jquery","_","app/common/templating","app/controllers/reporting","app/views/yeti-modules","app/views/modules/body/main-content-stream","app/common/page"],function(a,b,c,d,e,f,g,h){var i=f.ModuleItemView.extend({options:{totalAds:2},initialize:function(){this.options=c.extend({},this.options),this.app=requirejs("app/app"),this.expectedPaths=[/^\/kids-choice-sports\/?$/,/^\/halo-awards\/?$/]},onShow:function(){var c=h.get("series"),e=this.expectedPaths.some(function(a){return window.location.pathname.match(a)});if(!a.get("isAdfree")&&e&&""===window.location.hash){b(".slider-content").toggleClass("hasSponsors",!0);var f=window.location.pathname,g=f.substring(f.indexOf("/")+1,f.lastIndexOf("/")),i=(b(".slider-block-item").first(),d.render("modules/body/property/ad-container",{extraClass:"sponsor-ad-set "+g,title:"AD"}));b(".slider-content."+c).append(i),this.insertAds(),this.handleBreakpoint(a.get("deviceBreakpoint"),a.get("orientation")),this.listenTo(this.app.vent,"device:breakpoint",this.handleBreakpoint)}},insertAds:function(){var a,c,f=b(".sponsor-ad-set"),g="120x60",h=this.options.totalAds;if("nick-mobile.com"===b.cookie("nick_device")&&(g="88x31",h=1),f.children(".event-sponsor").length<1)for(a=1;h>=a;a++)c=d.render("modules/body/property/ad",{adSize:g,adIndex:a}),f.append(c),b(window.document).trigger("kfarEvent",["reloadAd","ad-"+g+"-"+a+"Div",g,e.pageReport,{index:a}])},handleBreakpoint:function(a,c,d){var e=b(".sponsor-ad-set"),f=h.get("series");e.removeClass("landscape portrait mobile").addClass(c),"nick-mobile.com"===b.cookie("nick_device")&&(e.addClass("mobile"),b(".slider-content").toggleClass("mobile",!0)),b(".slider-content."+f).removeClass("sponsor-margin"),this.insertAds()}});return i}),define("app/views/modules/body/side-panel-tabs",["jquery","app/views/yeti-modules","app/common/state"],function(a,b,c){var d=b.ModuleLayout.extend({ui:{tabsWrapper:".side-panel-tabs",relatedTab:".side-panel-tab.related",commentsTab:".side-panel-tab.comments",videoDimmer:".video-dimmer"},events:{"click .side-panel-tab":"onShowSection","click .video-dimmer":"hideSidePanel"},initialize:function(){this.NickApp=requirejs("app/app"),this.isTouchDevice=Modernizr.touch,this.panelWidth=0,this.externalUI={},this.endSlate=!1,this.disableClass="controls-are-hidden"},onShow:function(){var a=this.ui.tabsWrapper.data("event-poll");return a?void this.close():(this.initListeners(),this.loadDomElements(),void("portrait"===c.get("orientation")&&this.orientationChange("portrait")))},initListeners:function(){this.listenTo(this.NickApp.vent,"sidePanel.show",this.showSidePanel),this.listenTo(this.NickApp.vent,"sidePanel.hide",this.hideSidePanel),this.listenTo(this.NickApp.vent,"sidePanel.peek",this.peekSidePanel),this.listenTo(this.NickApp.vent,"sidePanelTabs.hide",this.hideSidePanelTabs),this.listenTo(this.NickApp.vent,"sidePanelTabs.show",this.showSidePanelTabs),this.listenTo(this.NickApp.vent,"VideoPlayer.fadeInControls",this.fadeInControls),this.listenTo(this.NickApp.vent,"VideoPlayer.mediaStart",this.fadeInControls),this.listenTo(this.NickApp.vent,"device:lazyresize",this.checkSidePanel),this.listenTo(this.NickApp.vent,"device:orientation",this.orientationChange),this.listenTo(this.NickApp.vent,"sidePanelTabs.hideRelated",this.hideRelatedTab)},loadDomElements:function(){this.ui.sidePanelContainer=a('[data-zone-id="sidePanel"]'),this.externalUI.body=a("body")},showRelated:function(){this.ui.relatedTab.is(":visible")&&!c.get("isFullScreen")&&(this.endSlate=!0,this.ui.relatedTab.trigger("click"))},hideRelatedTab:function(){this.ui.relatedTab.hide()},onShowSection:function(b){if(!this.ui.tabsWrapper.hasClass(this.disableClass)){var d=a(b.currentTarget),e=this.ui.tabsWrapper.children(".is-selected");if(!d)return!1;var f=d.data("tab-id"),g=d.data("tab-id"),h=e.data("tab-id");0===e.length||g!==h?(d.siblings().removeClass("is-selected"),d.addClass("is-selected"),this.showSidePanel(),this.NickApp.vent.trigger("sidePanel.showContent",f)):"portrait"!==c.get("orientation")&&this.hideSidePanel()}},fadeInControls:function(a){this.ui.sidePanelContainer.removeClass("controls-are-hidden")},orientationChange:function(a){"portrait"===a&&(this.ui.commentsTab.hasClass("is-selected")?(this.ui.commentsTab.trigger("click"),this.ui.commentsTab.addClass("is-selected")):(this.ui.relatedTab.trigger("click"),this.ui.relatedTab.addClass("is-selected"))),this.ui.sidePanelContainer.hasClass("is-expanded")&&this.hideSidePanel(!1)},checkSidePanel:function(b){if("landscape"===c.get("orientation")&&this.ui.sidePanelContainer.hasClass("is-expanded")){var d=0,e=0;this.ui.sidePanelContainer.css({left:d}),this.ui.sidePanelContainer.children().each(function(){a(this).outerWidth()>e&&(e=a(this).outerWidth())}),d="mobile-landscape"===c.get("deviceBreakpoint")?a(window).width()-.8*a(window).width():a(window).width()-e,this.ui.sidePanelContainer.css({left:d})}},showSidePanel:function(){this.ui.relatedTab.hasClass("is-selected")&&!c.get("isFullScreen")&&(a(document).trigger("nickapp.sidePanelShowRelated",[{open:!0,endSlate:this.endSlate}]),this.endSlate=!1),"landscape"===c.get("orientation")&&(this.NickApp.vent.trigger("sidePanel.open"),this.ui.videoDimmer.fadeIn("fast"),this.ui.sidePanelContainer.addClass("is-expanded"),this.checkSidePanel())},peekSidePanel:function(){"landscape"===c.get("orientation")&&(this.NickApp.vent.trigger("sidePanel.peeking"),this.ui.videoDimmer.fadeIn("fast"),this.ui.sidePanelContainer.addClass("is-peeking"),this.ui.sidePanelContainer.css("left",""))},hideSidePanel:function(b){a(document).trigger("nickapp.sidePanelShowRelated",[{open:!1}]),this.NickApp.vent.trigger("sidePanel.close"),this.$(".paused").removeClass("paused"),this.ui.videoDimmer.fadeOut("fast"),this.$(".side-panel-tab.is-selected").removeClass("is-selected"),this.$(".side-panel-tab.not-selected").removeClass("not-selected"),this.ui.sidePanelContainer.removeClass("is-expanded is-peeking");var c=b?"120%":"100%";this.ui.sidePanelContainer.css("left",c)},hideSidePanelTabs:function(){this.hideSidePanel(!0)},showSidePanelTabs:function(){this.hideSidePanel()}});return d}),define("app/views/modules/body/style-guide/style-guide",["jquery","marionette","app/views/yeti-modules"],function(a,b,c){c.ModuleItemView;return c.ModuleItemView}),define("app/views/modules/body/sitemap/sitemap-1.0.0",["jquery","_","app/views/yeti-modules","app/common/state"],function(a,b,c,d){var e=c.ModuleItemView.extend({ui:{sitemapContent:".sitemap-content",sitemapTree:".sitemap-tree"},initialize:function(){this.app=requirejs("app/app")},onShow:function(){var c=b.debounce(a.proxy(this.updateLayout,this),300);this.listenTo(this.app.vent,"device:orientation",c),this.listenTo(this.app.vent,"device:resize",c),c()},onClose:function(){this.stopListening()},updateLayout:function(){var b=(d.get("orientation"),d.get("deviceBreakpoint"));if("mobile-portrait"===b||"tablet-portrait"===b)this.ui.sitemapContent.css("height","auto");else{var c,e=this.ui.sitemapContent,f=e.offset().top,g=a(window).height(),h=this.getHeaderHeight(),i=this.getFooterHeight(f);c=g-(f+h+i),this.ui.sitemapContent.css("height",c)}},getColumnsTotalWidth:function(a){var b,c,d=a.length,e=0;for(b=0;d>b;b++)c=a[b],e+=c.outerWidth(!0);return e},setContainerSize:function(){},getHeaderHeight:function(){var b=a(".l-section.section-header");return b.outerHeight(!0)},getFooterHeight:function(b){var c=a(".l-sections.section-footer");return c.length?c.outerHeight(!0):b},breakIntoColumns:function(b,c,d){for(var e,f=[],g=null;c.length;)g=c.splice(0,d-1),e=a("<ul/>"),e.append(g),f.push(e);return f}});return e}),define("app/views/modules/footer/legal-base",["_","jquery","jquery.touchSwipe"],function(a,b){var c={template:"modules/footer/legal",ui:{footerItems:".footer-item",bubbles:".bubble"},events:{"click .footer-item":"onFooterItemClick","mouseenter .bubble":"resetBubbleHideTimer","mouseleave .bubble":"onMouseLeaveBubbles"},initialize:function(){this.bubbleHideTimer=null,this.bubbleHideTimeout=3e3,this.removeFooterBubbleTransition=null,"undefined"==typeof this.app&&console&&console.log;var a=requirejs("app/app");this.listenTo(a.vent,"VideoPlayer.fadeInControls",this.fadeIn),this.listenTo(a.vent,"VideoPlayer.fadeOutControls",this.fadeOut),this._formatFooterMoreLinks()},setApp:function(a){this.app=a},onShow:function(){b(window.document).bind("click",b.proxy(this.hideBubblesOnOutsideClick,this)),this.listenTo(this.app.vent,"sidePanel.open",this._showDesktopFooter),this.listenTo(this.app.vent,"sidePanel.close",this._hideDesktopFooter)},fadeIn:function(a){this.$el.removeClass("fadeOut animated").addClass("fadeIn animated").show()},fadeOut:function(a){this.$el.removeClass("fadeIn animated").addClass("fadeOut animated")},_formatFooterMoreLinks:function(){var a=b(".more-items-left .bubble-more-item"),c=a.length;if(c>5){var d=Math.ceil(c/2),e=a.splice(d);b(".more-items-right").append(e)}},_showDesktopFooter:function(){b(".section-footer").addClass("comments-open")},_hideDesktopFooter:function(){b(".section-footer").removeClass("comments-open")},onClose:function(){this.stopListening(),clearTimeout(this.bubbleHideTimer)},hideBubblesOnOutsideClick:function(a){var c=b(a.target),d=b(".footer-item-active");this.ui.bubbles.is(":visible")&&-1===c.parents().index(this.ui.bubbles)&&(this.animatePopUp("fadeOutScale",d),this.hideBubbles())},onMouseLeaveBubbles:function(){this.startHideBubbleTimer(this.bubbleHideTimeout)},hideBubbles:function(){this.ui.footerItems.length>0&&this.ui.footerItems.removeClass("footer-item-active")},startHideBubbleTimer:function(a){var b="undefined"!=typeof a?a:this.bubbleHideTimeout,c=this;this.bubbleHideTimer=setTimeout(function(){c.hideBubbles()},b)},resetBubbleHideTimer:function(a){clearTimeout(this.bubbleHideTimer)},onFooterItemClick:function(a){if(null===this.removeFooterBubbleTransition){var c=b(a.currentTarget),d=c.hasClass("footer-item-active");a.stopPropagation(),this.resetBubbleHideTimer(),this.hideBubbles(),c.toggleClass("footer-item-active",!d);var e=c.hasClass("footer-item-active")?"fadeInScale":"fadeOutScale";this.animatePopUp(e,c),Modernizr.touch||d||this.startHideBubbleTimer(this.bubbleHideTimeout)}},animatePopUp:function(b,c){var d=c.find(".bubble-container");this.removeFooterBubbleTransition=this.removeFooterBubbleTransition||a.bind(d.removeClass,d,b),this.rebounceRemoveTransition=this.rebounceRemoveTransition||a.debounce(a.bind(this.removeAnimatePopUp,this),450),d.addClass(b),this.rebounceRemoveTransition()},removeAnimatePopUp:function(a){this.removeFooterBubbleTransition(),this.rebounceRemoveTransition=null,this.removeFooterBubbleTransition=null}};return c}),define("app/views/modules/footer/legal",["jquery","marionette","app/views/yeti-modules","app/views/modules/footer/legal-base","jquery.touchSwipe"],function(a,b,c,d){d.setApp(requirejs("app/app"));var e=c.ModuleView.extend(d);return e}),define("app/views/modules/footer/tve-footer",["_","jquery","marionette","app/common/tve-utils/tve-bumper","app/views/yeti-modules","jquery.touchSwipe"],function(a,b,c,d,e){var f=e.ModuleView.extend({template:"modules/footer/tve-footer",ui:{footerItems:".footer-item",bubbles:".bubble",tveFooter:".footer-tve",providerLogo:".provider-logo",providerLogoutText:".footer-tve-provider",tveLogOut:".tve-logout"},events:{"click .footer-item":"onFooterItemClick","mouseenter .bubble":"resetBubbleHideTimer","mouseleave .bubble":"onMouseLeaveBubbles"},initialize:function(){this.bubbleHideTimer=null,this.bubbleHideTimeout=3e3,this.NickApp=requirejs("app/app"),this.tveBumper=d.getInstance()},onShow:function(){var a=this;Modernizr.touch&&this.ui.footerItems.swipe({tap:function(b,c){a.onFooterItemClick(b),a.startHideBubbleTimer(5e3)}}),this.listenTo(this.NickApp.vent,"TVE:displayLogout",this.displayLogout),this.listenTo(this.NickApp.vent,"TVE:hideLogout",this.hideLogout),this.tveBumper.tve.authorized?this.displayLogout():this.hideLogout()},onClose:function(){clearTimeout(this.bubbleHideTimer)},onMouseLeaveBubbles:function(){this.startHideBubbleTimer(this.bubbleHideTimeout)},hideBubbles:function(){this.ui.footerItems.removeClass("footer-item-active")},startHideBubbleTimer:function(a){var b="undefined"!=typeof a?a:this.bubbleHideTimeout,c=this;this.bubbleHideTimer=setTimeout(function(){c.hideBubbles()},b)},resetBubbleHideTimer:function(a){clearTimeout(this.bubbleHideTimer)},onFooterItemClick:function(a){this.resetBubbleHideTimer();var c=b(a.currentTarget),d=c.hasClass("footer-item-active");this.hideBubbles(),c.toggleClass("footer-item-active",!d),Modernizr.touch||d||this.startHideBubbleTimer(this.bubbleHideTimeout)},doTveLogout:function(a){this.tveBumper.tve.doTveLogout()},displayLogout:function(){this.tveBumper.tve.isElvisProvider||this.ui.providerLogo.attr("src",this.tveBumper.tve.cobrandingLogoUrl),this.ui.tveLogOut.on("click",a.bind(this.doTveLogout,this)),this.ui.providerLogoutText.attr("data-is-elvis",this.tveBumper.tve.isElvisProvider),this.ui.tveFooter.show()},hideLogout:function(){this.ui.providerLogo.attr("src",""),this.ui.tveFooter.hide(),this.ui.tveLogOut.off("click","**")}});return f}),define("app/views/modules/body/comments-1.0.0",["jquery","marionette","app/common/state"],function(a,b,c){var d=b.ItemView.extend({template:"modules/body/comments",ui:{widget:".sm4.comments-widget"},events:{"click .secondaryButton.toWidgetTop":"onClickTop"},initialize:function(){this.NickApp=requirejs("app/app"),this.initialized=!1,a('meta[property="sm4:alias"]').attr("content",this.getContentType())},onShow:function(){this.listenTo(this.NickApp.vent,"sidePanel.showContent",this.onShowComments),this.onHideComments(),this.checkLayout(),this.$el.hasClass("module-comments")||this.$el.addClass("module-comments l-module"),a('meta[property="sm4:alias"]').attr("content",this.getContentType)},initializeComments:function(){if(this.initialized!==!0){var a=this.ui.widget.data("contenturi")+"https://web.archive.org/web/20150728212158/http://www.nick.com"+window.location.pathname;this.ui.widget.data("contenturi",a)}this.ui.widget.sm4(),this.initialized=!0},onShowComments:function(a){return"comments"!==a?void this.onHideComments():(this.initializeComments(),void this.$el.removeClass("is-closed"))},onHideComments:function(a){this.$el.addClass("is-closed")},checkLayout:function(a){"portrait"===c.get("orientation")&&this.initializeComments()},onClickTop:function(b){b.preventDefault(),a(".comments-wrapper .comments-widget .activityListContainer")[0].scrollTop=0},getContentType:function(){var a=window.location.pathname,b=a.indexOf("episode")>-1?"Episode":"Video";return a.indexOf("games")>-1?b="Game":a.indexOf("pictures")>-1&&(b="Photo Album"),b}});return d}),define("app/views/modules/body/kcs/category-list",["jquery","Q","app/views/yeti-modules","_"],function(a,b,c,d){var e=c.ModuleLayout.extend({ui:{categoryUp:".category-up",categoryDown:".category-down",categoryList:".category-list",categoryListItem:".category-list-item",categoryMask:".container-mask"},events:{"click .category-up":"goCategoryUp","click .category-down":"goCategoryDown","click .category-list-item":"onCategoryClick"},defaults:{animationDuration:1e3,cssEasing:"cubic-bezier(.35,1.54,.61,1)",jsEasing:"swing",moveNumber:5,visibleItems:6},initialize:function(a){this.options=d.extend(this.defaults,a),this.currentIndex=0},onShow:function(){this.updateCategoryStates(this.options.categories),this.ui.categoryUp.removeClass("disabled"),this.updateLayout()},updateLayout:function(){this.itemHeight=this.ui.categoryList.find("li").outerHeight(!0),this.totalHeight=this.ui.categoryList.find("li").length*this.itemHeight,this.options.visibleItems=Math.round(this.ui.categoryMask.outerHeight()/this.itemHeight),this.setCurrentCatUi()},onCategoryClick:function(b){b.preventDefault(),this.trigger("kcs:goToCategory",a(b.currentTarget).attr("data-category"))},updateCategory:function(a,b){this.updateCategoryStates(b),this.currentCategory=a,this.setCurrentCatUi()},updateCategoryStates:function(a){if(void 0===a)return!1;for(var b=this.ui.categoryListItem.length,c=0;b>c;c++){var d=this.ui.categoryListItem.eq(c),e=a[d.data("category")];(e>=0||-2===e)&&d.addClass("cat-complete").removeClass("not-voted"),-1===e&&d.addClass("not-voted").removeClass("cat-complete")}},setCurrentCatUi:function(){this.ui.categoryListItem.removeClass("cat-current");var a=this.ui.categoryListItem.filter('*[data-category="'+this.currentCategory+'"]');a.addClass("cat-current"),this.currentIndex=a.index()-2,this.scrollList()},goCategoryUp:function(a){this.currentIndex-=this.options.moveNumber,this.scrollList()},goCategoryDown:function(a){this.currentIndex+=this.options.moveNumber,this.scrollList()},getItemPosition:function(a){var b=a*this.itemHeight;return b=-1*b},scrollList:function(){var c,d=this.ui.categoryList.children().length-this.options.visibleItems;this.currentIndex>=0&&this.currentIndex<d?(c=this.getItemPosition(this.currentIndex),this.ui.categoryUp.removeClass("disabled")):this.currentIndex>=d?(c=this.getItemPosition(d),this.currentIndex=d,this.ui.categoryDown.addClass("disabled"),this.ui.categoryUp.removeClass("disabled")):this.currentIndex<0&&(c=0,this.currentIndex=0,this.ui.categoryUp.addClass("disabled"),this.ui.categoryDown.removeClass("disabled"));var e=b.defer(),f=function(){e.resolve(!0)};a.support.transition?this.ui.categoryList.transition({y:c,duration:this.options.animationDuration,easing:this.options.cssEasing,complete:f}):this.ui.categoryList.animate({top:c},{duration:this.options.animationDuration,easing:this.options.jsEasing,complete:f})},animateList:function(b){a.support.transition?this.ui.categoryList.transition({y:b,duration:this.options.animationDuration,easing:this.options.cssEasing}):this.ui.categoryList.animate({top:b},{duration:this.options.animationDuration,easing:this.options.jsEasing})},setVisible:function(a){this.$el.toggleClass("hidden",!a)},resetList:function(b){this.currentCategory=b,this.ui.categoryListItem.removeClass("cat-current cat-complete").addClass("not-voted"),a.support.transition?this.ui.categoryList.css("y",0):this.ui.categoryList.css("top",0)},disable:function(){this.$el.toggleClass("disable-click",!0)},enable:function(){this.$el.toggleClass("disable-click",!1)}});return e}),define("app/views/modules/body/kcs/nominees-block",["jquery","marionette","_"],function(a,b,c){var d=b.ItemView.extend({ui:{listItem:".category-nominee-list-item",videoBlock:".category-video-block",videoPlayer:".video-embed",container:".category-nominee-container",endSlate:".video-player-endslate"},events:{"click .category-nominee-list-item":"onNomineeClick","click .category-skip":"categorySkip","click .video-player-endslate":"videoReplay"},defaults:{animationDuration:1e3,cssEasing:"cubic-bezier(.38,1.3,.59,1.01)",jsEasing:"swing",currentVote:-1,silentEmbed:!1},initialize:function(a){this.options=c.extend(this.defaults,a),this.animating=!0,this.supportedBrowser=!0;var b=window.navigator.userAgent.toLowerCase();b.match(/safari/)&&!b.match(/chrome/)&&(this.supportedBrowser=!1)},URIValue:"",onShow:function(){this.bindUIElements(),this.$el.addClass("active-block"),this.URIValue=this.ui.videoBlock.find(".video-embed").attr("data-contenturi"),this.setVoteState(),a.support.transition&&this.supportedBrowser?this.$el.transition({scale:1,x:"0px",duration:this.options.animationDuration,easing:this.options.cssEasing,complete:a.proxy(this.introAnimationComplete,this)}):(this.$el.css("left","1000px"),this.$el.animate({scale:1,left:"0px"},{duration:this.options.animationDuration,easing:this.options.jsEasing,complete:a.proxy(this.introAnimationComplete,this)}))},hide:function(){this.$el.removeClass("active-block"),a.support.transition&&this.supportedBrowser?this.$el.transition({scale:0,x:"400px",duration:this.options.animationDuration,easing:this.options.cssEasing}):this.$el.animate({scale:0,left:"400px"},{duration:this.options.animationDuration,easing:this.options.jsEasing})},introAnimationComplete:function(){this.trigger("kcs:nomineesintrocomplete"),this.animating=!1,this.options.silentEmbed||this.embedVideo()},embedVideo:function(){this.options.silentEmbed=!1;var b={width:"100%",height:"100%",autoPlay:!0,showEndSlate:!0,params:{wmode:"opaque",bgcolor:"#000000"}},c={onPlaylistComplete:a.proxy(this.videoEnd,this)};this.player=new MTVNPlayer.Player(this.ui.videoPlayer.get(0),b,c),this.ui.videoPlayer.height("100%"),this.ui.videoPlayer.width("100%")},videoEnd:function(){this.ui.endSlate.show()},videoReplay:function(){this.ui.endSlate.hide(),this.player.playURI(this.URIValue)},onClose:function(){this.player&&this.player.destroy()},remove:function(){return this.undelegateEvents(),this.stopListening(),this},onNomineeClick:function(b){if(!this.animating){var c=a(b.currentTarget),d=this.$el.data("category"),e={ballot:d,catId:d,nomId:c.data("nominee"),lineId:this.ui.listItem.index(c)};this.currentVote=e.lineId,this.setVoteState(),this.voting=!0,this.trigger("kcs:castcategoryvote",e)}},setVote:function(a){var b=this.ui.listItem.removeClass("selected").eq(a);b.addClass("selected")},categorySkip:function(a){if(!this.animating){this.ui.listItem.removeClass("selected");var b=this.$el.data("category"),c={ballot:b,catId:b,nomId:-2,lineId:-2};this.trigger("kcs:castcategoryvote",c)}},setVoteState:function(){this.ui.listItem.removeClass("selected"),this.currentVote>=0&&this.ui.listItem.eq(this.currentVote).addClass("selected")}});return d}),define("app/views/modules/body/kcs/intro-video",["jquery","marionette"],function(a,b){var c=b.ItemView.extend({template:"modules/body/kcs/intro-video",ui:{videoPlayer:".video-embed",intro:".intro"},events:{"click .skip-button":"onPlaylistComplete"},initialize:function(a){var b=a.contenturi||"";this.model={contenturi:b}},onShow:function(){var b={playlistComplete:a.proxy(this.onPlaylistComplete,this)},c={width:"100%",height:"100%",autoPlay:!0,params:{wmode:"opaque",bgcolor:"#000000"}};this.player=new MTVNPlayer.Player(this.ui.videoPlayer.get(0),c,b)},onPlaylistComplete:function(){this.player.destroy(),this.ui.videoPlayer.remove(),this.trigger("kcs:introcomplete")}});return c}),define("app/views/modules/body/kcs/voting-game",["jquery","marionette","flambe"],function(a,b){var c=b.ItemView.extend({template:"modules/body/kcs/voting-game",initialize:function(a){var b=a.baseHref||"";this.model={baseHref:b}},onShow:function(){var a=this.model.baseHref;flambe.embed([a+"targets/main-flash.swf",a+"targets/main-html.js"],"embedtarget")}});return c}),define("app/views/modules/body/kcs/thanks-page",["jquery","marionette","app/common/templating","flambe"],function(a,b,c){var d=b.ItemView.extend({template:"modules/body/kcs/thanks-page",ui:{adContainer:".kcs-thanks-ad-container"},events:{"click .kcs-play-game-button":"displayGame"},onShow:function(){var b=c.render("modules/body/kcs/ad",{adSize:"236x127",adIndex:"1"});this.ui.adContainer.html(b),a(window.document).trigger("kfarEvent",["reloadAd","ad-236x127-1Div","236x127",null,null])},displayGame:function(a){a.preventDefault(),this.trigger("kcs:load-game")}});return d}),define("app/views/modules/body/kcs/interstitial-ad",["jquery","marionette","app/common/templating"],function(a,b,c){var d=b.ItemView.extend({template:"modules/body/kcs/interstitial-ad",options:{adSize:"650x357",adIndex:1,keyValue:"kcsunit=1",timeoutInterval:7e3},initialize:function(a){},render:function(){var a=c.render(this.template,this.options);return this.$el.html(a),this.$el.addClass("hidden"),this},display:function(b){null!=b&&(this.options.keyValue=b.keyValue,this.options.timeoutInterval=b.timeoutInterval),this.$el.removeClass("hidden"),a(window.document).trigger("kfarEvent",["reloadAd","ad-650x357-"+this.options.adIndex+"Div","650x357",null,{keyValue:this.options.keyValue}]),setTimeout(a.proxy(this.countdownComplete,this),this.options.timeoutInterval)},hide:function(){this.render()},onShow:function(){this.render()},countdownComplete:function(){this.hide(),this.trigger("kcs:interstitialadcomplete")},onClose:function(){}});return d}),define("app/views/modules/body/kcs/voting",["jquery","Q","_","backbone","app/views/yeti-modules","app/views/modules/body/kcs/category-list","app/views/modules/body/kcs/nominees-block","app/views/modules/body/kcs/intro-video","app/views/modules/body/kcs/voting-game","app/views/modules/body/kcs/thanks-page","app/controllers/voting-controller","app/models/user-progress","app/views/modules/body/kcs/interstitial-ad"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=e.ModuleLayout.extend({regions:{categoryContainer:"#category",introContainer:"#intro-container",thanksContainer:"#thanks-container"},options:{animationDuration:1e3,cssEasing:"cubic-bezier(.35,1.54,.61,1)",jsEasing:"ease-in-out",pathPrefix:"/kids-choice-sports/vote/",userProgressKey:"kcs-voting-progress"},ui:{categoryContainer:".category-container",nominees:".category-nominee-container",introContainer:".intro-container",nomineesList:".nominees-list",nomineesMask:".nominees-mask",funnelData:".funnel-data",adContainer:".interstitial-ad",thanksContainer:".thanks-container",categoryData:"#categoryData"},initialize:function(){this.app=requirejs("app/app"),this.currentIndex=0,this.itemWidth=0,this.itemHeight=0},onShow:function(){this.votingController=new k(this.getVotingConfig()),this.setupInterstitialAds(),this.setupUserProgress(),this.currentCategory=this.ui.categoryContainer.data("current"),this.setupCategoryList(),this.setupNomineeList(),this.currentCategory?this.displayNominees():this.displayIntro(),this.exposeAPI(),this.listenTo(this.app.vent,"device:lazyresize",this.updateLayout)},onClose:function(){a("body").removeClass("kcs-thanks-page kcs-voting-game")},sendVotingReport:function(b){a(document).trigger("nickapp.voteReport",[{reportType:b}])},getVotingConfig:function(){return{type:this.ui.funnelData.data("type"),domain:this.ui.funnelData.data("domain"),collection:this.ui.funnelData.data("collection"),site:"kca.nick.com"}},updateLayout:function(){this.sizeNomineeList(),this.categoryList.updateLayout()},setupInterstitialAds:function(){this.interstitialAd=new m,this.interstitialAd.setElement(this.ui.adContainer),this.interstitialAd.triggerMethod("show")},setupCategoryList:function(){this.categoryList=new f(this.userProgress.get("categories")),this.listenTo(this.categoryList,"kcs:goToCategory",this.goToCategory),this.categoryContainer.setView(this.categoryList,!0),this.categoryList.updateCategory(this.currentCategory)},setupUserProgress:function(){for(var a,b={},c=this.ui.nominees.length,d=0;c>d;d++)a=this.ui.nominees.eq(d).data("category"),b[a]=-1;
this.userProgress=new l({storageKey:this.options.userProgressKey}),this.userProgress.setCategories(b)},updateUserProgress:function(a,b){this.userProgress.setVote(a,b)},getNextCategory:function(){for(var a,b,c=-1,d=this.userProgress.get("categories"),e=this.ui.nominees.length,f=0;e>f;f++)if(a=this.ui.nominees.eq(f),b=a.data("category"),d[b]&&-1===d[b]){c=f;break}return c},displayIntro:function(){this.introVideo=new h({contenturi:this.ui.introContainer.data("contenturi")}),this.introContainer.show(this.introVideo),this.categoryList.disable(),this.listenTo(this.introVideo,"kcs:introcomplete",this.introComplete)},introComplete:function(){this.stopListening(this.introVideo),this.introContainer.close(),this.interstitialAd.display(),this.categoryList.disable(),this.listenTo(this.interstitialAd,"kcs:interstitialadcomplete",this.introAdComplete)},introAdComplete:function(){this.stopListening(this.interstitialAd),this.interstitialAd.hide(),this.categoryList.enable(),this.displayNominees()},displayNominees:function(){this.setupNomineesView(),this.ui.introContainer.empty(),this.categoryList.enable(),this.ui.nomineesMask.removeClass("invisible")},setupNomineeList:function(){this.sizeNomineeList(),this.currentCategory?this.deepLink():this.userProgress.get("hasProgress")&&(this.currentIndex=this.getNextCategory(),this.currentCategoryNominees=this.ui.nominees.eq(this.currentIndex),this.currentCategory=this.currentCategoryNominees.data("category"),this.updateCategoryPath(this.currentCategory))},sizeNomineeList:function(){this.itemWidth=this.ui.nominees.outerWidth(!0),this.itemHeight=this.ui.nominees.outerHeight(!0),this.ui.nomineesList.css({height:this.itemHeight}),this.ui.nomineesMask.css({height:this.itemHeight})},deepLink:function(){this.currentCategoryNominees=this.ui.nominees.filter('[data-category="'+this.currentCategory+'"]'),this.currentIndex=this.ui.nominees.index(this.currentCategoryNominees)},setupNomineesView:function(a){this.currentCategoryNominees||(this.currentCategoryNominees=this.ui.nominees.eq(0)),this.currentCategory=this.currentCategoryNominees.data("category"),this.updateCategoryPath(this.currentCategory),this.categoryList.updateCategory(this.currentCategory,this.userProgress.get("categories")),this.currentNomineesBlock=new g({silentEmbed:a,currentVote:this.userProgress.getVote(this.currentCategory)}),this.currentNomineesBlock.setElement(this.currentCategoryNominees),this.currentNomineesBlock.triggerMethod("show");var b=this.userProgress.getVote(this.currentCategory);b>=0&&this.currentNomineesBlock.setVote(b),this.categoryList.disable(),this.listenTo(this.currentNomineesBlock,"kcs:castcategoryvote",this.switchActiveNomineeBlock),this.listenTo(this.currentNomineesBlock,"kcs:nomineesintrocomplete",this.nomineesIntroComplete),this.lastNomineesBlock&&this.cleanupOldNomineesView()},nomineesIntroComplete:function(){this.sendVotingReport("pageRedraw"),this.stopListening(this.currentNomineesBlock,"kcs:nomineesintrocomplete"),this.categoryList.enable()},cleanupOldNomineesView:function(){this.lastNomineesBlock&&(this.stopListening(this.lastNomineesBlock,"kcs:castcategoryvote",this.switchActiveNomineeBlock),this.lastNomineesBlock.hide(),this.lastNomineesBlock.close())},getItemPosition:function(a){var b=a*this.itemWidth;return b=-1*b},switchActiveNomineeBlock:function(a){var b=!1;this.lastNomineesBlock=this.currentNomineesBlock,a&&(this.votingController.castVote(a),-2!==a.nomId&&this.sendVotingReport("voteClick"),this.updateUserProgress(a.catId,a.lineId));var c=this.getNextCategory();this.userProgress.checkComplete()?(this.cleanupOldNomineesView(),this.displayThanks()):(this.currentIndex=c,this.currentCategoryNominees=this.ui.nominees.eq(this.currentIndex),7===c&&this.interstitialAd&&(this.votingController.updateConfig(),b=!0,this.ui.nomineesMask.addClass("invisible"),this.interstitialAd.display({keyValue:"kcsunit=2",timeoutInterval:4e3}),this.categoryList.disable(),this.listenTo(this.interstitialAd,"kcs:interstitialadcomplete",this.interstitialAdComplete)),this.setupNomineesView(b))},interstitialAdComplete:function(){this.stopListening(this.interstitialAd,"kcs:interstitialadcomplete",this.interstitialAdComplete),this.currentNomineesBlock.embedVideo(),this.interstitialAd.hide(),this.ui.nomineesMask.removeClass("invisible"),this.categoryList.enable()},displayThanks:function(){this.cleanupOldNomineesView(),this.categoryList.setVisible(!1),this.ui.nomineesMask.addClass("invisible"),a("body").addClass("kcs-thanks-page"),this.thanksPage=new j,this.thanksContainer.show(this.thanksPage),this.listenTo(this.thanksPage,"kcs:load-game",this.displayGame),this.gameUserProgress=this.userProgress.get("categories"),this.userProgress.clear()},displayGame:function(){a("body").removeClass("kcs-thanks-page").addClass("kcs-voting-game"),this.stopListening(this.thanksPage),this.votingGame=new i({baseHref:this.ui.thanksContainer.data("base-href")}),this.thanksContainer.show(this.votingGame)},resetVoting:function(){delete this.gameUserProgress,a("body").removeClass("kcs-thanks-page").removeClass("kcs-voting-game"),this.thanksContainer.close(),delete this.currentCategoryNominees,this.categoryList.resetList(this.ui.nominees.eq(0).data("category")),this.categoryList.setVisible(!0),this.ui.nomineesMask.addClass("invisible"),this.displayIntro(),this.updateCategoryPath()},updateCategoryPath:function(a){a=a?this.options.pathPrefix+a:this.options.pathPrefix,Modernizr.history&&d.history.navigate(a)},goToCategory:function(a){this.lastNomineesBlock=this.currentNomineesBlock,this.currentCategory=a,this.deepLink(),this.setupNomineesView()},reportGameEvent:function(b){"KCS:gameStart"===b?a(document).trigger("nickapp.reportLink",[{linkType:"o",events:"event82",linkName:"KCS Multiplier Game Start"}]):a(document).trigger("nickapp.reportLink",[{linkType:"o",events:"event83",linkName:"KCS Multiplier Game End"}])},getKCSCategories:function(){var a=this.ui.categoryData,b="";return a.length>0&&(b=a.html().trim(),b=JSON.parse(b)),b},getGameUserProgress:function(a){return this.gameUserProgress?this.gameUserProgress[a]:void 0},exposeAPI:function(){var b={};window.KCS&&(b=window.KCS),b.doSubmitKCSVote=a.proxy(this.votingController.submitGameMultiplier,this.votingController),b.getSelectedNominee=a.proxy(this.getGameUserProgress,this),b.doKCSReport=a.proxy(this.reportGameEvent,this),b.getKCSCategories=a.proxy(this.getKCSCategories,this),b.voteAgain=a.proxy(this.resetVoting,this),window.KCS=b}});return n}),define("app/views/modules/body/kcs/nominees-content",["jquery","_","backbone","app/views/yeti-modules","app/common/state","app/common/templating","app/controllers/reporting","app/views/modules/body/main-content-stream"],function(a,b,c,d,e,f,g,h){var i=h.extend({ui:function(){return b.extend({},b.result(h.prototype,"ui"),{nomineesContainer:".nominees-container",categoryNomineeContainer:".category-nominee-container",nomineeLists:".category-nominee-list"})},initialize:function(c){this.options=b.extend(this.defaults,c),this.app=requirejs("app/app"),this.isIE9=a("html").hasClass("ie9"),this.deepLinkHash=null,this.initializePagination(),this.initializeLayout()},onShow:function(){this.bindUIElements(),this.injectAds(),this._setupMouseScroll(),this._setupTouchScroll(),this._updateContentWidth(),this.revealLayout(),this.addListeners()},addListeners:function(){this.listenTo(this.app.vent,"device:orientation",this.onDeviceOrientationChange)},onDeviceOrientationChange:function(){this._updateContentWidth(),this.scrollPageLandscape(0,0),this.currentPage=0},injectAds:function(){var b=3,c="300x250";e.get("isAdfree")||this.ui.categoryNomineeContainer.eq(b-1).each(function(b){var d=b+1,e=f.render("modules/body/kcs/nominees-ad",{adIndex:d,adSize:c});a(this).before(e),a(window.document).trigger("kfarEvent",["reloadAd","ad-"+c+"-"+d+"Div",c,g.pageReport])})},updatePageinViewport:a.noop,animateTiles:a.noop,fetchNextPageLandscape:a.noop});return i}),define("app/views/modules/body/error/page-not-found",["app/views/yeti-modules"],function(a){var b=a.ModuleLayout.extend({onShow:function(){window.picturefill()}});return b}),function(a,b,c){function d(a,c){this.wrapper="string"==typeof a?b.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={mouseWheelSpeed:20,snapThreshold:.334,infiniteUseTransform:!0,deceleration:.004,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in c)this.options[d]=c[d];this.translateZ=this.options.HWCompositing&&f.hasPerspective?" translateZ(0)":"",this.options.useTransition=f.hasTransition&&this.options.useTransition,this.options.useTransform=f.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?f.ease[this.options.bounceEasing]||f.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.infiniteElements&&(this.options.probeType=3),this.options.infiniteUseTransform=this.options.infiniteUseTransform&&this.options.useTransform,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},f=function(){function d(a){return g===!1?!1:""===g?a:g+a.charAt(0).toUpperCase()+a.substr(1)}var e={},f=b.createElement("div").style,g=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in f)return b[c].substr(0,b[c].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(a,b){for(var c in b)a[c]=b[c]},e.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},e.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},e.prefixPointerEvent=function(b){return a.MSPointerEvent?"MSPointer"+b.charAt(9).toUpperCase()+b.substr(10):b},e.momentum=function(a,b,d,e,f,g){var h,i,j=a-b,k=c.abs(j)/d;return g=void 0===g?6e-4:g,h=a+k*k/(2*g)*(0>j?-1:1),i=k/g,e>h?(h=f?e-f/2.5*(k/8):e,j=c.abs(h-a),i=j/k):h>0&&(h=f?f/2.5*(k/8):0,j=c.abs(a)+h,i=j/k),{destination:c.round(h),duration:i}};var h=d("transform");return e.extend(e,{hasTransform:h!==!1,hasPerspective:d("perspective")in f,hasTouch:"ontouchstart"in a,hasPointer:a.PointerEvent||a.MSPointerEvent,hasTransition:d("transition")in f}),e.isBadAndroid=/Android /.test(a.navigator.appVersion)&&!/Chrome\/\d/.test(a.navigator.appVersion),e.extend(e.style={},{transform:h,transitionTimingFunction:d("transitionTimingFunction"),transitionDuration:d("transitionDuration"),transitionDelay:d("transitionDelay"),transformOrigin:d("transformOrigin")}),e.hasClass=function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return c.test(a.className)},e.addClass=function(a,b){if(!e.hasClass(a,b)){var c=a.className.split(" ");c.push(b),a.className=c.join(" ")}},e.removeClass=function(a,b){if(e.hasClass(a,b)){var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")}},e.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},e.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,d=.4;return 0===a?0:1==a?1:d*c.pow(2,-10*a)*c.sin(2*(a-b/4)*c.PI/b)+1}}}),e.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},e.click=function(a){var c,d=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(d.tagName)||(c=b.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),c._constructed=!0,d.dispatchEvent(c))},e}();d.prototype={version:"5.1.3",_init:function(){this._initEvents(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys(),this.options.infiniteElements&&this._initInfinite()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(a){if(!(1!=f.eventType[a.type]&&0!==a.button||!this.enabled||this.initiated&&f.eventType[a.type]!==this.initiated)){!this.options.preventDefault||f.isBadAndroid||f.preventDefaultException(a.target,this.options.preventDefaultException)||a.preventDefault();var b,d=a.touches?a.touches[0]:a;this.initiated=f.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=f.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=d.pageX,this.pointY=d.pageY,this._execEvent("beforeScrollStart")}},_move:function(a){if(this.enabled&&f.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,d,e,g,h=a.touches?a.touches[0]:a,i=h.pageX-this.pointX,j=h.pageY-this.pointY,k=f.getTime();if(this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=i,this.distY+=j,e=c.abs(this.distX),g=c.abs(this.distY),!(k-this.endTime>300&&10>e&&10>g)){if(this.directionLocked||this.options.freeScroll||(e>g+this.options.directionLockThreshold?this.directionLocked="h":g>=e+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)a.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);j=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)a.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,j=this.hasVerticalScroll?j:0,b=this.x+i,d=this.y+j,(b>0||b<this.maxScrollX)&&(b=this.options.bounce?this.x+i/3:b>0?0:this.maxScrollX),(d>0||d<this.maxScrollY)&&(d=this.options.bounce?this.y+j/3:d>0?0:this.maxScrollY),this.directionX=i>0?-1:0>i?1:0,this.directionY=j>0?-1:0>j?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(b,d),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(a){if(this.enabled&&f.eventType[a.type]===this.initiated){this.options.preventDefault&&!f.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b,d,e=(a.changedTouches?a.changedTouches[0]:a,f.getTime()-this.startTime),g=c.round(this.x),h=c.round(this.y),i=c.abs(g-this.startX),j=c.abs(h-this.startY),k=0,l="";if(this.isInTransition=0,this.initiated=0,this.endTime=f.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(g,h),!this.moved)return this.options.tap&&f.tap(a,this.options.tap),this.options.click&&f.click(a),void this._execEvent("scrollCancel");if(this._events.flick&&200>e&&100>i&&100>j)return void this._execEvent("flick");if(this.options.momentum&&300>e&&(b=this.hasHorizontalScroll?f.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:g,duration:0},d=this.hasVerticalScroll?f.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:h,duration:0},g=b.destination,h=d.destination,k=c.max(b.duration,d.duration),this.isInTransition=1),this.options.snap){var m=this._nearestSnap(g,h);this.currentPage=m,k=this.options.snapSpeed||c.max(c.max(c.min(c.abs(g-m.x),1e3),c.min(c.abs(h-m.y),1e3)),300),g=m.x,h=m.y,this.directionX=0,this.directionY=0,l=this.options.bounceEasing}return g!=this.x||h!=this.y?((g>0||g<this.maxScrollX||h>0||h<this.maxScrollY)&&(l=f.ease.quadratic),void this.scrollTo(g,h,k,l)):void this._execEvent("scrollEnd")}}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth;var a;this.options.infiniteElements&&(this.options.infiniteLimit=this.options.infiniteLimit||c.floor(2147483645/this.infiniteElementHeight),a=-this.options.infiniteLimit*this.infiniteElementHeight+this.wrapperHeight),this.maxScrollY=void 0!==a?a:this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=f.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||f.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,e,g){if(a=a.nodeType?a:this.scroller.querySelector(a)){var h=f.offset(a);h.left-=this.wrapperOffset.left,h.top-=this.wrapperOffset.top,d===!0&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),e===!0&&(e=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),h.left-=d||0,h.top-=e||0,h.left=h.left>0?0:h.left<this.maxScrollX?this.maxScrollX:h.left,h.top=h.top>0?0:h.top<this.maxScrollY?this.maxScrollY:h.top,b=void 0===b||null===b||"auto"===b?c.max(c.abs(this.x-h.left),c.abs(this.y-h.top)):b,this.scrollTo(h.left,h.top,b,g)}},_transitionTime:function(a){a=a||0,this.scrollerStyle[f.style.transitionDuration]=a+"ms",!a&&f.isBadAndroid&&(this.scrollerStyle[f.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(a){this.scrollerStyle[f.style.transitionTimingFunction]=a},_translate:function(a,b){this.options.useTransform?this.scrollerStyle[f.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b},_initEvents:function(b){var c=b?f.removeEvent:f.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),f.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,f.prefixPointerEvent("pointerdown"),this),c(d,f.prefixPointerEvent("pointermove"),this),c(d,f.prefixPointerEvent("pointercancel"),this),c(d,f.prefixPointerEvent("pointerup"),this)),f.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b,c,d=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(d=d[f.style.transform].split(")")[0].split(", "),b=+(d[12]||d[4]),c=+(d[13]||d[5])):(b=+d.left.replace(/[^-\d.]/g,""),c=+d.top.replace(/[^-\d.]/g,"")),{x:b,y:c}},_initWheel:function(){f.addEvent(this.wrapper,"wheel",this),f.addEvent(this.wrapper,"mousewheel",this),f.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){f.removeEvent(this.wrapper,"wheel",this),f.removeEvent(this.wrapper,"mousewheel",this),f.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(a){if(this.enabled){a.preventDefault(),a.stopPropagation();var b,d,e,f,g=this;if(void 0===this.wheelTimeout&&g._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){g._execEvent("scrollEnd"),g.wheelTimeout=void 0},400),"deltaX"in a)1===a.deltaMode?(b=-a.deltaX*this.options.mouseWheelSpeed,d=-a.deltaY*this.options.mouseWheelSpeed):(b=-a.deltaX,d=-a.deltaY);else if("wheelDeltaX"in a)b=a.wheelDeltaX/120*this.options.mouseWheelSpeed,d=a.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in a)b=d=a.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in a))return;b=d=-a.detail/3*this.options.mouseWheelSpeed}if(b*=this.options.invertWheelDirection,d*=this.options.invertWheelDirection,this.hasVerticalScroll||(b=d,d=0),this.options.snap)return e=this.currentPage.pageX,f=this.currentPage.pageY,b>0?e--:0>b&&e++,d>0?f--:0>d&&f++,void this.goToPage(e,f);e=this.x+c.round(this.hasHorizontalScroll?b:0),f=this.y+c.round(this.hasVerticalScroll?d:0),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),f>0?f=0:f<this.maxScrollY&&(f=this.maxScrollY),this.scrollTo(e,f,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var a,b,d,e,f,g,h=0,i=0,j=0,k=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(d=c.round(k/2),e=c.round(l/2);j>-this.scrollerWidth;){for(this.pages[h]=[],a=0,f=0;f>-this.scrollerHeight;)this.pages[h][a]={x:c.max(j,this.maxScrollX),y:c.max(f,this.maxScrollY),width:k,height:l,cx:j-d,cy:f-e},f-=l,a++;j-=k,h++}else for(g=this.options.snap,a=g.length,b=-1;a>h;h++)(0===h||g[h].offsetLeft<=g[h-1].offsetLeft)&&(i=0,b++),this.pages[i]||(this.pages[i]=[]),j=c.max(-g[h].offsetLeft,this.maxScrollX),f=c.max(-g[h].offsetTop,this.maxScrollY),d=j-c.round(g[h].offsetWidth/2),e=f-c.round(g[h].offsetHeight/2),this.pages[i][b]={x:j,y:f,width:g[h].offsetWidth,height:g[h].offsetHeight,cx:d,cy:e},j>this.maxScrollX&&i++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var a=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.x-this.startX),1e3),c.min(c.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,a)})},_nearestSnap:function(a,b){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var d=0,e=this.pages.length,f=0;if(c.abs(a-this.absStartX)<this.snapThresholdX&&c.abs(b-this.absStartY)<this.snapThresholdY)return this.currentPage;for(a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),b>0?b=0:b<this.maxScrollY&&(b=this.maxScrollY);e>d;d++)if(a>=this.pages[d][0].cx){a=this.pages[d][0].x;break}for(e=this.pages[d].length;e>f;f++)if(b>=this.pages[0][f].cy){b=this.pages[0][f].y;break}return d==this.currentPage.pageX&&(d+=this.directionX,0>d?d=0:d>=this.pages.length&&(d=this.pages.length-1),a=this.pages[d][0].x),f==this.currentPage.pageY&&(f+=this.directionY,0>f?f=0:f>=this.pages[0].length&&(f=this.pages[0].length-1),b=this.pages[0][f].y),{x:a,y:b,pageX:d,pageY:f}},goToPage:function(a,b,d,e){e=e||this.options.bounceEasing,a>=this.pages.length?a=this.pages.length-1:0>a&&(a=0),b>=this.pages[a].length?b=this.pages[a].length-1:0>b&&(b=0);var f=this.pages[a][b].x,g=this.pages[a][b].y;d=void 0===d?this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-this.x),1e3),c.min(c.abs(g-this.y),1e3)),300):d,this.currentPage={x:f,y:g,pageX:a,pageY:b},this.scrollTo(f,g,d,e)},next:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVerticalScroll&&(c=0,d++),this.goToPage(c,d,a,b)},prev:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c--,0>c&&this.hasVerticalScroll&&(c=0,d--),this.goToPage(c,d,a,b)},_initKeys:function(b){var c,d={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(c in this.options.keyBindings)"string"==typeof this.options.keyBindings[c]&&(this.options.keyBindings[c]=this.options.keyBindings[c].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(c in d)this.options.keyBindings[c]=this.options.keyBindings[c]||d[c];f.addEvent(a,"keydown",this),this.on("destroy",function(){f.removeEvent(a,"keydown",this)})},_key:function(a){if(this.enabled){var b,d=this.options.snap,e=d?this.currentPage.pageX:this.x,g=d?this.currentPage.pageY:this.y,h=f.getTime(),i=this.keyTime||0,j="number"==typeof this.options.acceleration?this.options.acceleration:.25;switch(this.options.useTransition&&this.isInTransition&&(b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this.isInTransition=!1),this.keyAcceleration=200>h-i?c.min(this.keyAcceleration+j,50):0,a.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?e+=d?1:this.wrapperWidth:g+=d?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?e-=d?1:this.wrapperWidth:g-=d?1:this.wrapperHeight;break;case this.options.keyBindings.end:e=d?this.pages.length-1:this.maxScrollX,g=d?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:e=0,g=0;break;case this.options.keyBindings.left:e+=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:g+=d?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:e-=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:g-=d?1:5+this.keyAcceleration>>0;break;default:return}if(d)return void this.goToPage(e,g);e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollX&&(e=this.maxScrollX,this.keyAcceleration=0),g>0?(g=0,this.keyAcceleration=0):g<this.maxScrollY&&(g=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(e,g,0),this.keyTime=h}},_animate:function(a,b,c,d){function g(){var m,n,o,p=f.getTime();return p>=l?(h.isAnimating=!1,h._translate(a,b),void(h.resetPosition(h.options.bounceTime)||h._execEvent("scrollEnd"))):(p=(p-k)/c,o=d(p),m=(a-i)*o+i,n=(b-j)*o+j,h._translate(m,n),h.isAnimating&&e(g),void(3==h.options.probeType&&h._execEvent("scroll")))}var h=this,i=this.x,j=this.y,k=f.getTime(),l=k+c;this.isAnimating=!0,g()},_initInfinite:function(){var a=this.options.infiniteElements;this.infiniteElements="string"==typeof a?b.querySelectorAll(a):a,this.infiniteLength=this.infiniteElements.length,this.infiniteMaster=this.infiniteElements[0],this.infiniteElementWidth=this.infiniteMaster.offsetWidth,this.infiniteWidth=this.infiniteLength*this.infiniteElementWidth,this.options.cacheSize=this.options.cacheSize||1e3,this.infiniteCacheBuffer=c.round(this.options.cacheSize/4),this.options.dataset.call(this,0,this.options.cacheSize),this.on("refresh",function(){var a=c.ceil(this.wrapperWidth/this.infiniteElementWidth);this.infiniteUpperBufferSize=c.floor((this.infiniteLength-a)/2),this.reorderInfinite()}),this.on("scroll",this.reorderInfinite)},reorderInfinite:function(){for(var a=(-this.y+this.wrapperWidth/2,c.max(c.floor(-this.x/this.infiniteElementWidth)-this.infiniteUpperBufferSize,0)),b=c.floor(a/this.infiniteLength),d=a-b*this.infiniteLength,e=0,g=0,h=[],i=c.floor(a/this.infiniteCacheBuffer);g<this.infiniteLength;)e=g*this.infiniteElementWidth+b*this.infiniteWidth,d>g&&(e+=this.infiniteElementWidth*this.infiniteLength),this.infiniteElements[g]._left!==e&&(this.infiniteElements[g]._phase=e/this.infiniteElementWidth,this.infiniteElements[g]._phase<this.options.infiniteLimit&&(this.infiniteElements[g]._left=e,this.options.infiniteUseTransform?this.infiniteElements[g].style[f.style.transform]="translate("+e+"px, 0)"+this.translateZ:this.infiniteElements[g].style.top=e+"px",h.push(this.infiniteElements[g]))),g++;this.cachePhase!=i&&(0===i||a-this.infiniteCacheBuffer>0)&&this.options.dataset.call(this,c.max(i*this.infiniteCacheBuffer-this.infiniteCacheBuffer,0),this.options.cacheSize),this.cachePhase=i,this.updateContent(h)},updateContent:function(a){if(void 0!==this.infiniteCache)for(var b=0,c=a.length;c>b;b++)this.options.dataFiller.call(this,a[b],this.infiniteCache[a[b]._phase])},updateCache:function(a,b){var c=void 0===this.infiniteCache;this.infiniteCache={};for(var d=0,e=b.length;e>d;d++)this.infiniteCache[a++]=b[d];c&&this.updateContent(this.infiniteElements)},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();
break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}}},d.utils=f,"undefined"!=typeof module&&module.exports?module.exports=d:a.IScroll=d}(window,document,Math),define("iscroll-infinite",function(a){return function(){var b;return b||a.IScroll}}(this)),define("app/common/iscroll-helper",["_","jquery","app/views/yeti-modules","iscroll-infinite"],function(a,b,c,d){function e(b,c,e){var f={eventPassthrough:!0,mouseWheel:!0};this.options=a.merge(f,e),this.scroller=new d(b,this.options),this.helperOptions=c,this.increment=50,this.maxScroll=b.clientWidth-b.scrollWidth,this.helperOptions.slowScroll&&(this.slowScrollDirection=0,this.scroller.on("scrollEnd",a.bind(this.slowScroll,this)),this.helperOptions.arrowLeft&&(this.helperOptions.arrowLeft.on("mouseenter",a.bind(this.slowScrollLeft,this)),this.helperOptions.arrowLeft.on("mouseleave",a.bind(this.stopSlowScroll,this))),this.helperOptions.arrowRight&&(this.helperOptions.arrowRight.on("mouseenter",a.bind(this.slowScrollRight,this)),this.helperOptions.arrowRight.on("mouseleave",a.bind(this.stopSlowScroll,this))),this.boundCheck(!0))}function f(b,c,d){var f={scrollX:!0,scrollY:!1};return new e(b,c,a.merge(f,d))}function g(b,c,d){var f={scrollX:!1,scrollY:!0};return new e(b,c,a.merge(f,d))}function h(b,c,d,e){var g=d.infiniteLimit||1e3,h=c.first().outerWidth(!0);c.parent().width(h*g);var i=f(b,d,a.merge({infiniteElements:c.toArray(),dataset:function(){},dataFiller:function(){},infiniteLimit:g},e)),j=c.size()*h*Math.floor(g/2/c.size());return i.scroller.scrollTo(-j,0,0),i.scroller.refresh(),i}return e.prototype={slowScroll:function(){if(this.boundCheck(),0!==this.slowScrollDirection){var a=this.options.scrollX?"x":"y",b=this.scroller[a]+(1===this.slowScrollDirection?-this.increment:this.increment),c=["x"===a?b:0,"y"===a?b:0,this.helperOptions.timing||150,{style:"",fn:function(a){return a}}];this.scroller.scrollTo.apply(this.scroller,c)}},slowScrollRight:function(){this.slowScrollDirection=1,this.slowScroll()},slowScrollLeft:function(){this.slowScrollDirection=-1,this.slowScroll()},stopSlowScroll:function(){this.slowScrollDirection=0},boundCheck:function(a){var b=this.options.scrollX?"x":"y",c=Math.abs(this.scroller[b]),d=Math.abs(this.scroller["maxScroll"+b.toUpperCase()]);return 0===c&&-1===this.slowScrollDirection||a?(this.scroller._execEvent("IScrollHelper:scrollBound",{dir:-1}),this.slowScrollDirection=0,!0):Math.abs(c)>=Math.abs(d)&&1===this.slowScrollDirection||a?(this.scroller._execEvent("IScrollHelper:scrollBound",{dir:1}),this.slowScrollDirection=0,!0):(this.scroller._execEvent("IScrollHelper:scrollBound",{dir:0}),!1)},destroy:function(){this.scroller.destroy();var c=this.scroller.scroller;a.delay(function(){b(c).removeAttr("style")},100)}},{IScrollHelper:e,createScrollX:f,createScrollY:g,createInfiniteScroll:h}}),!function(){function a(d){if(!d)throw new Error("No options passed to Waypoint constructor");if(!d.element)throw new Error("No element option passed to Waypoint constructor");if(!d.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+b,this.options=a.Adapter.extend({},a.defaults,d),this.element=this.options.element,this.adapter=new a.Adapter(this.element),this.callback=d.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=a.Context.findOrCreateByElement(this.options.context),a.offsetAliases[this.options.offset]&&(this.options.offset=a.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),c[this.key]=this,b+=1}var b=0,c={};a.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)},a.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)},a.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete c[this.key]},a.prototype.disable=function(){return this.enabled=!1,this},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},a.prototype.next=function(){return this.group.next(this)},a.prototype.previous=function(){return this.group.previous(this)},a.invokeAll=function(a){var b=[];for(var d in c)b.push(c[d]);for(var e=0,f=b.length;f>e;e++)b[e][a]()},a.destroyAll=function(){a.invokeAll("destroy")},a.disableAll=function(){a.invokeAll("disable")},a.enableAll=function(){a.invokeAll("enable")},a.refreshAll=function(){a.Context.refreshAll()},a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},a.viewportWidth=function(){return document.documentElement.clientWidth},a.adapters=[],a.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=a}(),function(){function a(a){window.setTimeout(a,1e3/60)}function b(a){this.element=a,this.Adapter=e.Adapter,this.adapter=new this.Adapter(a),this.key="waypoint-context-"+c,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},a.waypointContextKey=this.key,d[a.waypointContextKey]=this,c+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var c=0,d={},e=window.Waypoint,f=window.onload;b.prototype.add=function(a){var b=a.options.horizontal?"horizontal":"vertical";this.waypoints[b][a.key]=a,this.refresh()},b.prototype.checkEmpty=function(){var a=this.Adapter.isEmptyObject(this.waypoints.horizontal),b=this.Adapter.isEmptyObject(this.waypoints.vertical);a&&b&&(this.adapter.off(".waypoints"),delete d[this.key])},b.prototype.createThrottledResizeHandler=function(){function a(){b.handleResize(),b.didResize=!1}var b=this;this.adapter.on("resize.waypoints",function(){b.didResize||(b.didResize=!0,e.requestAnimationFrame(a))})},b.prototype.createThrottledScrollHandler=function(){function a(){b.handleScroll(),b.didScroll=!1}var b=this;this.adapter.on("scroll.waypoints",function(){(!b.didScroll||e.isTouch)&&(b.didScroll=!0,e.requestAnimationFrame(a))})},b.prototype.handleResize=function(){e.Context.refreshAll()},b.prototype.handleScroll=function(){var a={},b={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var c in b){var d=b[c],e=d.newScroll>d.oldScroll,f=e?d.forward:d.backward;for(var g in this.waypoints[c]){var h=this.waypoints[c][g],i=d.oldScroll<h.triggerPoint,j=d.newScroll>=h.triggerPoint,k=i&&j,l=!i&&!j;(k||l)&&(h.queueTrigger(f),a[h.group.id]=h.group)}}for(var m in a)a[m].flushTriggers();this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}},b.prototype.innerHeight=function(){return this.element==this.element.window?e.viewportHeight():this.adapter.innerHeight()},b.prototype.remove=function(a){delete this.waypoints[a.axis][a.key],this.checkEmpty()},b.prototype.innerWidth=function(){return this.element==this.element.window?e.viewportWidth():this.adapter.innerWidth()},b.prototype.destroy=function(){var a=[];for(var b in this.waypoints)for(var c in this.waypoints[b])a.push(this.waypoints[b][c]);for(var d=0,e=a.length;e>d;d++)a[d].destroy()},b.prototype.refresh=function(){var a,b=this.element==this.element.window,c=this.adapter.offset(),d={};this.handleScroll(),a={horizontal:{contextOffset:b?0:c.left,contextScroll:b?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:b?0:c.top,contextScroll:b?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var e in a){var f=a[e];for(var g in this.waypoints[e]){var h,i,j,k,l,m=this.waypoints[e][g],n=m.options.offset,o=m.triggerPoint,p=0,q=null==o;m.element!==m.element.window&&(p=m.adapter.offset()[f.offsetProp]),"function"==typeof n?n=n.apply(m):"string"==typeof n&&(n=parseFloat(n),m.options.offset.indexOf("%")>-1&&(n=Math.ceil(f.contextDimension*n/100))),h=f.contextScroll-f.contextOffset,m.triggerPoint=p+h-n,i=o<f.oldScroll,j=m.triggerPoint>=f.oldScroll,k=i&&j,l=!i&&!j,!q&&k?(m.queueTrigger(f.backward),d[m.group.id]=m.group):!q&&l?(m.queueTrigger(f.forward),d[m.group.id]=m.group):q&&f.oldScroll>=m.triggerPoint&&(m.queueTrigger(f.forward),d[m.group.id]=m.group)}}for(var r in d)d[r].flushTriggers();return this},b.findOrCreateByElement=function(a){return b.findByElement(a)||new b(a)},b.refreshAll=function(){for(var a in d)d[a].refresh()},b.findByElement=function(a){return d[a.waypointContextKey]},window.onload=function(){f&&f(),b.refreshAll()},e.requestAnimationFrame=function(b){var c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||a;c.call(window,b)},e.Context=b}(),function(){function a(a,b){return a.triggerPoint-b.triggerPoint}function b(a,b){return b.triggerPoint-a.triggerPoint}function c(a){this.name=a.name,this.axis=a.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),d[this.axis][this.name]=this}var d={vertical:{},horizontal:{}},e=window.Waypoint;c.prototype.add=function(a){this.waypoints.push(a)},c.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},c.prototype.flushTriggers=function(){for(var c in this.triggerQueues){var d=this.triggerQueues[c],e="up"===c||"left"===c;d.sort(e?b:a);for(var f=0,g=d.length;g>f;f+=1){var h=d[f];(h.options.continuous||f===d.length-1)&&h.trigger([c])}}this.clearTriggerQueues()},c.prototype.next=function(b){this.waypoints.sort(a);var c=e.Adapter.inArray(b,this.waypoints),d=c===this.waypoints.length-1;return d?null:this.waypoints[c+1]},c.prototype.previous=function(b){this.waypoints.sort(a);var c=e.Adapter.inArray(b,this.waypoints);return c?this.waypoints[c-1]:null},c.prototype.queueTrigger=function(a,b){this.triggerQueues[b].push(a)},c.prototype.remove=function(a){var b=e.Adapter.inArray(a,this.waypoints);b>-1&&this.waypoints.splice(b,1)},c.prototype.first=function(){return this.waypoints[0]},c.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},c.findOrCreate=function(a){return d[a.axis][a.name]||new c(a)},e.Group=c}(),function(){function a(a){this.$element=b(a)}var b=window.jQuery,c=window.Waypoint;b.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(b,c){a.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return this.$element[c].apply(this.$element,a)}}),b.each(["extend","inArray","isEmptyObject"],function(c,d){a[d]=b[d]}),c.adapters.push({name:"jquery",Adapter:a}),c.Adapter=a}(),function(){function a(a){return function(){var c=[],d=arguments[0];return a.isFunction(arguments[0])&&(d=a.extend({},arguments[1]),d.handler=arguments[0]),this.each(function(){var e=a.extend({},d,{element:this});"string"==typeof e.context&&(e.context=a(this).closest(e.context)[0]),c.push(new b(e))}),c}}var b=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=a(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))}(),define("waypoints",["jquery"],function(a){return function(){var b;return b||a.$}}(this)),!function(){function a(d){this.options=b.extend({},c.defaults,a.defaults,d),this.element=this.options.element,this.$element=b(this.element),this.createWrapper(),this.createWaypoint()}var b=window.jQuery,c=window.Waypoint;a.prototype.createWaypoint=function(){var a=this.options.handler;this.waypoint=new c(b.extend({},this.options,{element:this.wrapper,handler:b.proxy(function(b){var c=this.options.direction.indexOf(b)>-1,d=c?this.$element.outerHeight(!0):"";this.$wrapper.height(d),this.$element.toggleClass(this.options.stuckClass,c),a&&a.call(this,b)},this)}))},a.prototype.createWrapper=function(){this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},a.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass).unwrap())},a.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},c.Sticky=a}(),define("waypoints.sticky",["waypoints"],function(){}),define("app/views/modules/property-carousel/property-carousel",["app/views/yeti-modules","_","jquery","marionette","app/common/iscroll-helper","waypoints","waypoints.sticky"],function(a,b,c,d,e){function f(a){var b=parseInt(a.data("xcoord"),10)-1;return-(a.width()*b)}function g(a,b){var c=f(a),d=b?-a.height():0;a.css("background-position",c+"px "+d+"px")}function h(a,b){g(c(b),!1)}function i(a){return new window.Waypoint.Sticky({element:a})}var j=d.ItemView.extend({settings:{sticky:!1},ui:{container:".module-pc",list:".module-pc-list",items:".module-pc-list-item",links:".module-pc-list-item-icon",arrowLeft:".module-pc-arrow-left",arrowRight:".module-pc-arrow-right"},events:{mouseenter:"onListEnter",mouseleave:"onListLeave","mousedown .module-pc-list-item-icon":"onItemClick","touchstart .module-pc-list-item-icon":"onItemClick","mouseenter .module-pc-list-item-icon":"onItemEnter","mouseup .module-pc-list-item-icon":"onItemLeave","mouseout .module-pc-list-item-icon":"onItemLeave","touchend .module-pc-list-item-icon":"onItemLeave"},initialize:function(a){this.app=requirejs("app/app"),this.settings=b.merge(this.settings,a),this.lastItemWidth=0},onShow:function(){c(window).on("resize.PropertyCarousel",c.proxy(this.onResize,this)),this.listenTo(this.app.vent,"renderComplete",this.onPageRender),this.onResize(),this.toggleSticky(this.settings.sticky)},onClose:function(){c(window).off(".PropertyCarousel")},onPageRender:function(){this.onListLeave()},toggleSticky:function(a){a&&!this.sticky?this.sticky=i(this.$el[0]):this.sticky&&!a&&(this.sticky.destroy(),this.sticky=null),this.settings.sticky=a,this.app.vent.trigger("carousel.ready",this.ui)},onResize:function(){var a=this.ui.items.first().outerWidth(!0);this.lastItemWidth!==a&&(this.lastItemWidth=a,this.setBackgroundPositions(),this.createScroller())},createScroller:function(){this.scrollHelper&&(this.scrollHelper.scroller.destroy(),this.initScroll=!0),this.scrollHelper=e.createInfiniteScroll(this.$el[0],this.ui.items,{slowScroll:!0,arrowLeft:this.ui.arrowLeft,arrowRight:this.ui.arrowRight})},setBackgroundPositions:function(){this.ui.links.each(h)},onListEnter:function(){window.devicejs.desktop()&&this.$el.addClass("show-arrows")},onListLeave:function(){window.devicejs.desktop()&&this.$el.removeClass("show-arrows")},onItemClick:function(a){var b=c(a.target);g(b,!0)},onItemEnter:function(a){!Modernizr.cssfilters&&window.devicejs.desktop()&&this.onItemClick(a)},onItemLeave:function(a){var b=c(a.target);g(b,!1)}});return j}),define("app/views/modules/property-carousel/index",["./property-carousel"],function(a){return a}),function(a){var b=!1,c=!1,d={isUrl:function(a){var b=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return b.test(a)?!0:!1},loadContent:function(a,b){a.html(b)},addPrefix:function(a){var b=a.attr("id"),c=a.attr("class");"string"==typeof b&&""!==b&&a.attr("id",b.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof c&&""!==c&&"sidr-inner"!==c&&a.attr("class",c.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),a.removeAttr("style")},execute:function(d,f,g){"function"==typeof f?(g=f,f="sidr"):f||(f="sidr");var h,i,j,k=a("#"+f),l=a(k.data("body")),m=a("html"),n=k.outerWidth(!0),o=k.data("speed"),p=k.data("side"),q=k.data("displace"),r=k.data("onOpen"),s=k.data("onClose"),t="sidr"===f?"sidr-open":"sidr-open "+f+"-open";if("open"===d||"toggle"===d&&!k.is(":visible")){if(k.is(":visible")||b)return;if(c!==!1)return void e.close(c,function(){e.open(f)});b=!0,"left"===p?(h={left:n+"px"},i={left:"0px"}):(h={right:n+"px"},i={right:"0px"}),l.is("body")&&(j=m.scrollTop(),m.css("overflow-x","hidden").scrollTop(j)),q?l.addClass("sidr-animating").css({width:l.width(),position:"absolute"}).animate(h,o,function(){a(this).addClass(t)}):setTimeout(function(){a(this).addClass(t)},o),k.css("display","block").animate(i,o,function(){b=!1,c=f,"function"==typeof g&&g(f),l.removeClass("sidr-animating")}),r()}else{if(!k.is(":visible")||b)return;b=!0,"left"===p?(h={left:0},i={left:"-"+n+"px"}):(h={right:0},i={right:"-"+n+"px"}),l.is("body")&&(j=m.scrollTop(),m.removeAttr("style").scrollTop(j)),l.addClass("sidr-animating").animate(h,o).removeClass(t),k.animate(i,o,function(){k.removeAttr("style").hide(),l.removeAttr("style"),a("html").removeAttr("style"),b=!1,c=!1,"function"==typeof g&&g(f),l.removeClass("sidr-animating")}),s()}}},e={open:function(a,b){d.execute("open",a,b)},close:function(a,b){d.execute("close",a,b)},toggle:function(a,b){d.execute("toggle",a,b)},toogle:function(a,b){d.execute("toggle",a,b)}};a.sidr=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof b&&"string"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.sidr"):e.toggle.apply(this,arguments)},a.fn.sidr=function(b){var c=a.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body",displace:!0,onOpen:function(){},onClose:function(){}},b),f=c.name,g=a("#"+f);if(0===g.length&&(g=a("<div />").attr("id",f).appendTo(a("body"))),g.addClass("sidr").addClass(c.side).data({speed:c.speed,side:c.side,body:c.body,displace:c.displace,onOpen:c.onOpen,onClose:c.onClose}),"function"==typeof c.source){var h=c.source(f);d.loadContent(g,h)}else if("string"==typeof c.source&&d.isUrl(c.source))a.get(c.source,function(a){d.loadContent(g,a)});else if("string"==typeof c.source){var i="",j=c.source.split(",");if(a.each(j,function(b,c){i+='<div class="sidr-inner">'+a(c).html()+"</div>"}),c.renaming){var k=a("<div />").html(i);k.find("*").each(function(b,c){var e=a(c);d.addPrefix(e)}),i=k.html()}d.loadContent(g,i)}else null!==c.source&&a.error("Invalid Sidr Source");return this.each(function(){var b=a(this),c=b.data("sidr");c||(b.data("sidr",f),"ontouchstart"in document.documentElement?(b.bind("touchstart",function(a){a.originalEvent.touches[0],this.touched=a.timeStamp}),b.bind("touchend",function(a){var b=Math.abs(a.timeStamp-this.touched);200>b&&(a.preventDefault(),e.toggle(f))})):b.click(function(a){a.preventDefault(),e.toggle(f)}))})}}(jQuery),define("jquery.sidr",function(){}),define("app/views/modules/simple-footer/simple-footer",["jquery","_","app/common/state","app/views/yeti-modules","jquery.sidr","jquery.kinetic","jquery.cookie","jquery.touchSwipe"],function(a,b,c,d,e){var f=d.ModuleItemView.extend({ui:{grownupsMenu:"#grownups-menu",privacyMenu:"#privacy-menu"},events:{"click #grownups-toggle":"onGrownupsClick","click #privacy-toggle":"onPrivacyClick"},onGrownupsClick:function(a){this.app.vent.trigger("sidebar:module","grownups")},onPrivacyClick:function(a){this.app.vent.trigger("sidebar:module","privacy")},initialize:function(){this.app=requirejs("app/app")}});return f}),define("app/views/modules/simple-footer/index",["./simple-footer"],function(a){return a}),define("app/common/route-utils/get-route",["_","routes","backbone"],function(a,b,c){function d(b,c){var d=i(c);return!a.isNull(b.match(d))}function e(a,b){return d(a,b.path)}function f(b){var c=a.partial(e,b),d=a.find(j,c);return d}function g(a){return a=a||window.location.pathname.toString(),"/"===a.charAt(0)&&(a=a.slice(1)),a}function h(){var a=g();return f(a)}var i=c.Router.prototype._routeToRegExp,j=b.routes.slice(0);return{getByPath:f,getCurrent:h,normalizeFragment:g}}),define("app/common/route-utils/route-group-check",["_","./get-route"],function(a,b){function c(b,c){var d=a.intersection(b,c);return d.length>0}function d(a,b){var d=a.meta.groups||[];return c(d,b)}function e(b,c){var d=a.intersection(b,c);return d.length===c.length}function f(a,b){var c=a.meta.groups||[];return e(c,b)}function g(a,b){var d=j(a);return c(d,b)}function h(a,b){var c=j(a);return e(c,b)}function i(a){var b=a.meta||{},c=b.groups||[];return c}function j(c){c=b.normalizeFragment(c);var d=b.getByPath(c);return a.isUndefined(d)?[]:i(d)}return{hasGroupType:c,hasGroupTypes:e,isInGroupType:d,isInGroupTypes:f,urlHasGroupType:g,urlHasGroupTypes:h,getGroups:j}}),define("app/common/route-group",["_","./route-utils/get-route","./route-utils/route-group-check"],function(a,b,c){function d(a){return c.urlHasGroupType(a,["property"])}function e(a){return c.urlHasGroupType(a,["end-level"])}return{isProperty:d,isEndLevel:e}}),define("app/common/route-history",["_","jquery","app/common/state","app/common/route-group"],function(a,b,c,d){function e(){var b=c.get("prevUrls"),d=a.last(b);return d}function f(){var a=window.location.pathname.toString();return d.isEndLevel(a)}function g(){var a=e(e);return!d.isEndLevel(a)}return{isLastNotEndLevel:g,isCurrentEndLevel:f,getLastUrl:e}}),define("app/views/modules/nickjr-header/back-button",["_","jquery","app/common/state","app/common/route-history"],function(a,b,c,d){function e(){var b=d.getLastUrl();return!a.isUndefined(b)}function f(a){return a.data("clickBound")?void 0:(a.on("click",g),a.data("clickBound",!0),a)}function g(a){window.history.back()}function h(a,b){var c=e();return c?(a.addClass("show-back-button"),b.removeClass("animated bounceIn").addClass("animated bounceIn")):a.removeClass("show-back-button"),c}function i(a){var b=a.container,c=a.backButton;f(c);var d=h(b,c);return d}return{update:i,updateView:h,backButtonClick:g,bindListeners:f,shouldShowBackButton:e}}),define("app/views/modules/nickjr-header/nickjr-header",["app/views/yeti-modules","_","jquery","app/common/state","app/views/modules/property-carousel/index","app/views/modules/simple-footer/index","app/common/route-group","./back-button","app/common/media-query-utils","app/common/audio/index","app/common/reporting/index"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){return n||(n=c(window)),n.scrollTop()}function m(){return g.isProperty()||g.isEndLevel()}var n,o="transitionend webkitTransitionEnd msTransitionEnd oTransitionEnd",p=0,q=!0,r=a.ModuleLayout.extend({regions:{carousel:"#module-property-carousel",footer:"#module-simple-footer"},ui:{container:".module-nickjr-header-container",logo:".module-logo",carouselList:".module-pc-list",footer:".module-simple-footer",logoImg:".module-logo-link-img",logoIcon:".module-logo-link-icon",backButton:".module-back-button",links:".module-pc-list-item-icon",carouselWrapper:".module-pc",expandableCircle:".module-pc-expandable-circle"},events:{"click .module-pc-expandable":"toggleCarouselList","mousedown .module-pc-list-item-icon":"setPressedState","touchstart .module-pc-list-item-icon":"setPressedState","mouseleave .module-pc-list-item-icon":"removePressedState","mouseup .module-pc-list-item-icon":"removePressedState","touchend .module-pc-list-item-icon":"removePressedState"},initialize:function(){this.app=requirejs("app/app"),this.listenTo(this.app.vent,"VideoPlayer.fadeInControls",this.showHeader),this.listenTo(this.app.vent,"VideoPlayer.fadeOutControls",this.hideHeaderVideo),this.logoAnimated=!1},onShow:function(){this.listenToOnce(this.app.vent,"carousel.ready",this.carouselReady),c(window).on("scroll.Header",c.proxy(this.onScroll,this)).on("resze.Header",c.proxy(this.onResize,this)),this.listenTo(this.app.vent,"renderComplete",this.onPageRender),this.createFooter(),this.addAudio()},addAudio:function(){j.playOnView(this,"nav-click","#module-logo, .module-pc-expandable");var a=this.ui.container;j.playOnView(this,"friends",".module-pc-expandable",function(b){return!a.hasClass("expanded")})},onHide:function(){c(window).off(".Header")},setPressedState:function(a){c(a.currentTarget).addClass("is-pressed")},removePressedState:function(a){c(a.currentTarget).removeClass("is-pressed")},carouselReady:function(){this.ui.carouselWrapper.addClass("is-carousel-ready")},onPageRender:function(a){this.createCarousel(),this.showHeader(),this.createScrollHide(),this.collapseHeader(),this.ui.links.removeClass("is-pressed"),h.update({container:this.ui.container,backButton:this.ui.backButton}),q?q=!1:this.ui.carouselWrapper.removeClass("is-first-load")},collapseHeader:function(a){m()&&(this.ui.container.removeClass("expanded"),this.ui.carouselList.removeClass("visible"),this.ui.expandableCircle.removeClass("is-animation-complete"))},expandHeader:function(){m()&&(this.ui.expandableCircle.one(o,function(a){c(a.currentTarget).addClass("is-animation-complete")}),this.ui.container.addClass("expanded"))},toggleCarouselList:function(){m()&&(this.ui.container.hasClass("expanded")?this.collapseHeader():(this.expandHeader(),k.send("reportOpenPropertyCarousel")))},createCarousel:function(){var a={sticky:!i.isLargePortrait()&&!g.isProperty()&&!g.isEndLevel()};return this.carousel.currentView?void this.carousel.currentView.toggleSticky(a.sticky):void this.carousel.setView(new e(a),!0)},createFooter:function(){var a=new f;this.footer.setView(a,!0)},createScrollHide:function(){return g.isProperty()?void this.ui.container.removeClass("locked"):(this.ui.container.addClass("locked"),void(p=l()))},onScroll:function(){if(!(!g.isProperty()||d.get("isMobile")&&i.isLandscape())){var a=100,b=l();0>=b?this.showHeader():Math.abs(p-b)>a&&(p>b?this.showHeader():(this.hideHeader(),this.collapseHeader()),p=b)}},hideHeader:function(){this.$el.hide()},hideHeaderVideo:function(){i.isMobile()||i.isPortrait()||this.hideHeader()},showHeader:function(){this.$el.show()},onResize:function(){this.showHeader()}});return r}),define("app/views/modules/nickjr-header/index",["./nickjr-header"],function(a){return a}),define("app/views/modules/navigation/index",["app/views/yeti-modules","_","jquery","app/common/audio/index"],function(a,b,c,d){var e=a.ModuleLayout.extend({onShow:function(){d.playOnView(this,"nav-click",".module-navigation-list-item-link")}});return e}),define("app/views/modules/body-header/filter-selection",["underscore.string"],function(a){function b(b){var c=window.location.pathname,d=a.sprintf('.property-filters .filter-link[href="%s"]',c),e=b.$(d),f=e.closest(".filter-item");return f}function c(a,b){var c="is-active";return b.hasClass(c)?a:(a.$(".filter-item").removeClass(c),b.addClass(c),a)}function d(a){var d=b(a);return c(a,d),a}var e={};return e.getNewFilterItem=b,e.updateActiveItem=c,e.selectFilterItem=d,e}),define("app/views/modules/body-header/body-header-view",["app/views/modules/body/sticky-header","./filter-selection"],function(a,b){var c=a.extend({onShow:function(){a.prototype.onShow.apply(this,arguments),b.selectFilterItem(this)}});return c}),define("app/views/modules/body-header/index",["./body-header-view"],function(a){return a}),define("app/views/modules/property-filters/property-filters",["app/views/yeti-modules","_","jquery","marionette","app/common/state","app/common/media-query-utils"],function(a,b,c,d,e,f){function g(a){return a.length?a.offset().top+a.height():0}var h=0,i=d.ItemView.extend({ui:{filterList:".property-filters-list"},initialize:function(){this.app=requirejs("app/app")},onShow:function(){f.isLargeDevice()?(h=g(this.ui.filterList),this.onLargeShow()):this.onMobileShow()},onLargeShow:function(){this.listenTo(this.app.vent,"page:scroll",this.onLargeScroll,this)},onLargeScroll:function(a){var b=g(this.ui.filterList);a>b?this.$el.addClass("bottom").delay(1).queue("fx",function(){c(this).addClass("animatedBottom").dequeue()}):h>a&&this.$el.removeClass("bottom animatedBottom")},onMobileShow:function(){var a=e.get("prevUrls"),b=this.ui.filterList.data("key");return 0!==a.length&&-1!==a[a.length-1].indexOf(b)?this.onMobileExpand(!1):void this.listenToOnce(this.app.vent,"page:scroll",this.onMobileScroll,this)},onMobileScroll:function(){this.onMobileExpand(!0)},onMobileExpand:function(a){this.$el.addClass("expanded"),a&&this.$el.addClass("animated")}});return i}),define("app/views/modules/property-filters/index",["./property-filters"],function(a){return a}),define("app/common/json-utils",[],function(){function a(a){return JSON.parse(a.replace(/\\/gi,""))}return{parseEscaped:a}});var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));
var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))})(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();define("swfobject",function(a){return function(){var b;return b||a.swfobject}}(this)),define("app/common/device",["_","swfobject"],function(a,b){function c(a){return f[a]&&f[a]()}function d(b,d){var f=d||e,g=null;return a.every(f,function(d){return a.contains(b,d)&&c(d)?(g=d,!1):!0}),g}var e=["flash","canvas","unity"],f={flash:function(){return 0!==b.getFlashPlayerVersion().major},canvas:function(){return Modernizr.canvas},unity:function(){return!0}},g=null,h=(window.navigator.userAgent,{getBestOption:function(a,b){return g||d(a,b)},hasFlash:function(){return f.flash()},hasCanvas:function(){return f.canvas()},hasUnity:function(){return f.unity()},iOS:function(){var a=window.navigator.userAgent.match(/(iP(hone|od|ad))/);if(a){var b=window.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[a[0],parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}return!1},IE:function(){}});return h}),define("app/views/modules/game-player/types/game-player-base",["marionette"],function(a){var b=a.ItemView.extend({template:""});return b}),define("app/views/modules/game-player/types/game-player-flash",["_","jquery","app/views/modules/game-player/types/game-player-base","swfobject"],function(a,b,c,d){var e=c.extend({template:"modules/game-player/types/game-player-flash",className:"game-player-wrapper",ui:{player:"#game-play-container"},initialize:function(a){this.model={},this.app=requirejs("app/app"),this.elementCache={},a.assets&&(this.model=a.assets[0],this.model.params=a.params||{},this.model.path="https://web.archive.org/web/20150728212158/http://static.nickjr.com"+this.model.path.replace("mgid:file:gsp:nickcomstor:",""))},onShow:function(){this.elementCache.$gamePlayer=b(".game-player"),this.elementCache.$globalFooter=b(".section-footer"),this.elementCache.$related=b(".module-related-content-games"),b(window).on("resize.GamePlayerFlash",b.proxy(this.setAreaSize,this)),this.setAreaSize();var c=a.assign({movie:this.model.path,wmode:"transparent",allowFullScreen:"true",allowScriptAccess:"always",base:this.model.base||".",scale:"exactFit"},this.model.params);d.embedSWF(this.model.path,"game-play-container","100%","100%","9.0.0",null,{},c,{})},onClose:function(){b(window).off(".GamePlayerFlash")},setAreaSize:function(){var a=b(window).height(),c=b(window).width(),d=this.model.width,e=this.model.height,f=this.elementCache.$gamePlayer.offset(),g=f.top,h=f.left,i=this.elementCache.$related.width(),j=this.elementCache.$globalFooter.height(),k=a-g-j,l=c-i-2*h,m=0;e>k?(m=k/e,e*=m,d*=m):(m=l/d,d*=m,e*=m),this.elementCache.$gamePlayer.css({width:Math.min(Math.round(d),this.model.width),height:Math.min(Math.round(e),this.model.height)})}});return e}),define("app/views/modules/game-player/types/game-player-canvas",["_","jquery","app/views/modules/game-player/types/game-player-base","app/common/media-query-utils","app/common/state"],function(a,b,c,d,e){function f(a){p&&p.contentWindow.jsembed&&p.contentWindow.jsembed.setScale(a)}function g(a,b){var c;return c=b/m>a/l?a/l:b/m,b=Math.round(m*c*1e3/1e3),{scale:c,width:a,height:b}}function h(){return n.height()<n.width()}function i(a){var c=n.height(),d=a.height(),e=c-d,f=Math.round(a.offset().top-e/2);b("body").stop().delay(500).animate({scrollTop:f},750)}function j(){b("body").stop()}var k=500,l=960,m=560,n=null,o=0,p=null,q=null,r=c.extend({template:"modules/game-player/types/game-player-canvas",ui:{frame:".game-player-iframe"},initialize:function(a){this.model=a.params,p=null},onShow:function(){n=b(window).on("resize.GamePlayerCanvas",b.proxy(this.onResize,this)).on("touchstart.GamePlayerCanvas",j),p=this.ui.frame[0],o=b(".section-footer").height(),this.onResize(!0)},onClose:function(){n.off(".GamePlayerCanvas"),clearTimeout(q),n=null},onResize:function(a){this.triggerFrameResize(),h()&&!d.isLargeLandscape()&&i(this.ui.frame)},triggerFrameResize:function(){var c=n.width(),i=500;d.isLargeLandscape()?(c*=.8,i=b(window).height()-this.ui.frame.offset().top-o):e.get("isMobile")&&h()&&(c-=100,i=b(window).height());var j=g(c,i);this.ui.frame.attr("width",j.width).attr("height",j.height),this.$el.parent().css({width:j.width,height:j.height}),q=setTimeout(a.partial(f,j.scale),k)}});return r}),define("app/views/modules/game-player/types/game-player-unavailable",["app/views/modules/game-player/types/game-player-base"],function(a){var b=a.extend({template:"modules/game-player/types/game-player-unavailable",className:"game-player-unavailable"});return b}),define("app/views/modules/game-player/game-variant-selector",["_","app/common/device","app/views/modules/game-player/types/game-player-flash","app/views/modules/game-player/types/game-player-canvas","app/views/modules/game-player/types/game-player-unavailable"],function(a,b,c,d,e){function f(a){t=a.data||[],u=a.priorities||[],v=null,w=null}function g(a,b){return b.cmskey===a?b.key:void 0}function h(b){return a.find(u,a.partial(g,b.platformType)).key}function i(){return a.map(t,h)}function j(a){return a.key}function k(){return a.map(u,j)}function l(b){return a.find(u,{key:b})}function m(b){return a.find(t,{platformType:b})}function n(){var a=i(),c=k(),d=b.getBestOption(a,c);return d?l(d):s}function o(){return a.isNull(v)?v=n():v}function p(){if(!a.isNull(w))return w;var b=o(),c=m(b.cmskey);return w=c}var q={key:"canvas",cmskey:"web-html5",view:d},r={key:"flash",cmskey:"web-flash",view:c},s={key:"unavailable",cmskey:"",view:e},t=[],u=[q,r],v=null,w=null;return{setup:f,getPriority:o,getVariant:p,GAME_TYPE_HTML5:q,GAME_TYPE_FLASH:r}}),define("app/views/modules/game-player/game-player",["app/views/yeti-modules","app/common/json-utils","./game-variant-selector"],function(a,b,c){var d=a.ModuleLayout.extend({ui:{player:".game-player"},regions:{player:".game-player"},onShow:function(){var a=b.parseEscaped(this.ui.player.data("variants"));c.setup({data:a,priorities:[c.GAME_TYPE_HTML5,c.GAME_TYPE_FLASH]});var d=c.getPriority(),e=c.getVariant(),f=d.view,g=new f(e);this.ui.player.addClass("gametype-"+d.key),this.player.setView(g)}});return d}),define("app/views/modules/game-player/index",["./game-player"],function(a){return a}),define("app/common/iso-view/iso-view",["_","jquery","app/yeti","backbone"],function(a,b,c,d){var e=d.Model.extend({defaults:{id:"",view:"",controllerConstructor:"",childSelector:""}}),f=c.YetiLayout.extend({initialize:function(){this.itemView=f,this.collection=new d.Collection,this.listenTo(this,"show",this.onShowIsoView)},onShowIsoView:function(){this.childSelector=this.$el.data("child-selector")||"",""!==this.childSelector&&this.attachChildViews(this.childSelector),this.$el.on("appendchildren",b.proxy(this.onAppendChildren,this))},onAppendChildren:function(a,b){this.attachChildViews(b)},getChildData:function(b){var c=b.data("id")||a.uniqueId("isoview_"),d=b.data("controller"),f=b.data("child-selector"),g=new e({id:c,view:d,controllerConstructor:d,childSelector:f});return g}});return f}),define("app/common/iso-view/index",["./iso-view"],function(a){return a}),define("app/common/iso-view/attach-region",["./index"],function(a){function b(b){return b.sectionView=new a,b.setView(b.sectionView,!0),b}function c(a){return b(a)}return{setup:c,attachViews:b}}),define("app/common/tve-utils/tve-footer",["_","jquery","app/common/audio/index","./tve-bumper","TVEAuth"],function(a,b,c,d){function e(e,l){var m=a.merge({},k,l),n=b(m.loginFooterClass),o=b(m.logoutFooterClass);b(m.mvpdModalClose);e.app=requirejs("app/app"),e.tveBumper=d.getInstance(),e.listenTo(e.app.vent,"TVE:displayLogout",a.partial(i,e,m)),e.listenTo(e.app.vent,"TVE:hideLogout",a.partial(j,e,m)),e.listenTo(e.app.vent,"sidebar:module",a.partial(h,e,m)),n.on("click",a.partial(f,e,m)),o.on("click",a.partial(g,e,m)),e.once("show",a.partial(h,e,m)),c.playOnView(e,"grownups-message",m.loginFooterClass)}function f(a,b){a.tveBumper.tve.clearRedirect(),a.app.vent.trigger("sidebar:hide"),a.app.execute("display-tve-modal")}function g(a,b){a.app.vent.trigger("sidebar:hide"),a.tveBumper.tve.doTveLogout()}function h(a,b){a.tveBumper.tve.hasBeenInitialized&&a.tveBumper.tve.checkAuthentication()}function i(a,c){var d=b(c.loginFooterClass),e=b(c.logoutFooterClass);e.find(".provider-logo").attr("src",a.tveBumper.tve.currentProviderLogo),e.find(".footer-tve-provider").attr("data-is-elvis",a.tveBumper.tve.isElvisProvider),e.removeClass("hidden"),d.addClass("hidden")}function j(a,c){var d=b(c.loginFooterClass),e=b(c.logoutFooterClass);e.addClass("hidden"),d.removeClass("hidden")}var k={loginFooterClass:".tve-login-button",logoutFooterClass:".tve-logout-button"};return{setup:e}}),define("app/views/modules/sidebar/sidebar",["jquery","_","app/views/yeti-modules","app/common/iso-view/attach-region","app/common/tve-utils/tve-footer","jquery.touchSwipe"],function(a,b,c,d,e){var f,g=c.ModuleLayout.extend({regions:{sidebar:".sidebar"},events:{"click .sidebar-dimmer":"hide","click .sidebar-close":"hide","touchend .sidebar-dimmer":"hide","touchend .sidebar-close":"hide","touchmove .sidebar-dimmer":"preventScroll","touchmove .sidebar-close":"preventScroll"},ui:{sidebar:".sidebar"},initialize:function(){f=requirejs("app/app")},onShow:function(){d.setup(this.sidebar),e.setup(this),this.listenTo(f.vent,"sidebar:module",this.onModuleSelection),this.listenTo(f.vent,"sidebar:hide",this.hide),this.ui.sidebar.swipe({swipeRight:b.bind(this.hide,this)})},onModuleSelection:function(a){this.show(a)},show:function(b){var c=this.$el.find('[data-id="'+b+'"]');return c.siblings().removeClass("is-visible"),c.is(".is-visible")?(this.hide(),c):(a("body, html").addClass("is-scroll-disable"),this.$el.addClass("is-visible"),c.addClass("is-visible"))},hide:function(b,c){a("body, html").removeClass("is-scroll-disable"),this.$el.removeClass("is-visible"),this.$el.find(".sidebar-panel").removeClass("is-visible")},onClose:function(){a("body, html").removeClass("is-scroll-disable"),this.ui.sidebar.swipe("destroy")},preventScroll:function(a){a.stopPropagation(),a.preventDefault()}});return g}),define("app/views/modules/sidebar/index",["./sidebar"],function(a){return a}),define("app/views/modules/grownups/grownups",["jquery","backbone","_","app/views/yeti-modules","app/common/iso-view/attach-region","jquery.touchSwipe"],function(a,b,c,d,e){var f,g=b.Marionette.ItemView.extend({events:{"click .footer-item-text-more":"onMoreClick","touchend .footer-item-text-more":"onMoreClick"},ui:{mamabar:".footer-mamabar",itemArrow:"#item-arrow"},initialize:function(){f=requirejs("app/app")},onMoreClick:function(a){a.preventDefault(),this.onToggleMore()},onToggleMore:function(){this.ui.mamabar.slideToggle({complete:c.bind(this.mamabarOnComplete,this)})},mamabarOnComplete:function(){var a=this.ui.mamabar.is(":visible");this.ui.itemArrow.toggleClass("footer-sprite-item-arrow-left",!a),this.ui.itemArrow.toggleClass("footer-sprite-item-arrow-up",a)},preventScroll:function(a){a.stopPropagation(),a.preventDefault()}});return g}),define("app/views/modules/grownups/index",["./grownups"],function(a){return a}),define("app/views/modules/end-level-info/end-level-info",["jquery","app/views/yeti-modules","app/common/state","app/common/media-query-utils"],function(a,b,c,d){var e=b.ModuleItemView.extend({ui:{about:".module-about",aboutTile:".about-tile",aboutMore:".module-about-more",button:".module-about-icon",infoModalIcon:".modal-icon",content:".module-content",subTitle:".module-about-sub-title"},events:{"click .module-about-icon":"onButtonClick"},initialize:function(){this.app=requirejs("app/app"),this.listenTo(this.app.vent,"modal:close",this.onModalClose),this.listenTo(this.app.vent,"VideoPlayer.fadeInControls",this.fadeIn),this.listenTo(this.app.vent,"VideoPlayer.fadeOutControls",this.fadeOut),this.listenTo(this.app.vent,"RelatedContent.videoClipChanged",this.onVideoClipChanged)},onButtonClick:function(){c.get("isMobile")?this.ui.button.hasClass("opened")?this.closeInfoPanel():this.ui.button.hasClass("closed")&&this.openInfoPanel():(this.ui.button.addClass("hidden"),this.app.execute("display-end-level-info-modal"))},onModalButtonClick:function(a){this.ui.infoModalIcon.addClass("hidden"),this.app.execute("display-end-level-info-modal")},onModalClose:function(a){this.ui.button.removeClass("hidden")},onOrientationChange:function(a){},fadeIn:function(a){this.$el.removeClass("fadeOut animated").addClass("fadeIn animated").show()},fadeOut:function(a){d.isLargeLandscape()&&this.$el.removeClass("fadeIn animated").addClass("fadeOut animated")},onVideoClipChanged:function(a){this.ui.subTitle.html(a.shortTitle)},closeInfoPanel:function(){this.ui.button.removeClass("opened").addClass("closed"),this.ui.aboutMore.fadeOut(200)},openInfoPanel:function(){this.ui.button.removeClass("closed").addClass("opened"),this.ui.aboutMore.fadeIn(200)}});return e}),define("app/views/modules/end-level-info/index",["./end-level-info"],function(a){return a}),define("app/views/modules/related-content/related-content-base",["_","jquery","app/views/yeti-modules","iscroll-infinite","app/common/iscroll-helper","app/common/media-query-utils","app/common/tve-utils/tve-bumper"],function(a,b,c,d,e,f,g){var h=c.ModuleItemView.extend({defaults:{scrollX:!1,animationIn:"animated slideInUp",animationOut:"animated slideOutDown"},events:{"mouseenter .related-content-container, .related-arrow-container-next, .related-arrow-container-prev":"onEnter","mouseleave .related-content-container, .related-arrow-container-next, .related-arrow-container-prev":"onLeave","mouseenter .related-arrow-container-next, .related-arrow-container-prev":"onArrowEnter","mouseleave .related-arrow-container-next, .related-arrow-container-prev":"onArrowLeave"},ui:{items:".related-content-list-tile",lockedItems:'[data-auth-required="true"]',list:".related-content-list",container:".related-content-container",controls:".related-controls",nextButton:".related-arrow-container-next",prevButton:".related-arrow-container-prev"},initialize:function(b){this.app=requirejs("app/app"),this.tveBumper=g.getInstance(),this.isMouseOver=!1,this.options=a.extend({},h.prototype.defaults,b)},onShow:function(){this.slideIn(),this.listenTo(this.app.vent,"TVE:unlock-content",this.unlockTiles),this.listenTo(this.app.vent,"TVE:lock-content",this.lockTiles),this.getInitialLockedState()},onEnter:function(a){this.isMouseOver=!0},onLeave:function(a){this.isMouseOver=!1},onArrowEnter:function(a){var c=b(a.currentTarget),d=-1*c.data("direction"),e=20*d+"px";this.defaults.scrollX?c.transition({x:e}):c.transition({y:e}),this.onScrollStart()},onArrowLeave:function(a){var c=b(a.currentTarget);this.defaults.scrollX?c.transition({x:0}):c.transition({y:0})},slideIn:function(){this.isMouseOver||this.$el.removeClass(this.defaults.animationOut).addClass(this.defaults.animationIn).show()},slideOut:function(){f.isLargeLandscape()&&!this.isMouseOver&&this.$el.removeClass(this.defaults.animationIn).addClass(this.defaults.animationOut)},onScrollStart:function(a){this.ui.prevButton.show(),this.ui.nextButton.show()},onScrollBound:function(a){-1===a.dir?(this.ui.prevButton.addClass("is-boundsreached"),this.ui.nextButton.removeClass("is-boundsreached")):1===a.dir?(this.ui.nextButton.addClass("is-boundsreached"),this.ui.prevButton.removeClass("is-boundsreached")):(this.ui.nextButton.removeClass("is-boundsreached"),this.ui.prevButton.removeClass("is-boundsreached"))},unlockTiles:function(){this.ui.lockedItems.find(".related-content-list-tile-icon").removeClass("related-content-list-tile-icon-locked").addClass("related-content-list-tile-icon-video")},lockTiles:function(){this.ui.lockedItems.find(".related-content-list-tile-icon").removeClass("related-content-list-tile-icon-video").addClass("related-content-list-tile-icon-locked")},getInitialLockedState:function(){this.tveBumper.tve.authorized?this.unlockTiles():this.lockTiles()}});return h}),define("app/common/picturefill-utils",["_","jquery"],function(a,b){function c(a){var b=a.toArray();return window.picturefill({elements:b})}function d(b){return a.isUndefined(b)?g.picturefillSelector:b}function e(a){a=d(a);var e=b(a);return c(e)}function f(a,e){e=d(e);var f=b(a).find(e);return c(f)}var g={picturefillSelector:"img[srcset]"};return{updateElements:c,getSelector:d,update:e,updateScope:f}}),define("app/views/modules/related-content/related-content-videos",["jquery","_","app/views/modules/related-content/related-content-base","app/common/media-query-utils","app/common/iscroll-helper","app/common/picturefill-utils"],function(a,b,c,d,e,f){var g=c.extend({initialize:function(){this.app=requirejs("app/app"),c.prototype.initialize.apply(this,arguments),this.defaults=b.extend({},c.prototype.defaults,{scrollX:!0,autoPlay:!0})},onShow:function(){c.prototype.onShow.apply(this,arguments),this.listenTo(this.app.vent,"VideoPlayer.fadeInControls",this.slideIn),this.listenTo(this.app.vent,"VideoPlayer.fadeOutControls",this.slideOut),this.defaults.autoPlay&&this.listenTo(this.app.vent,"videoplayer.playlistComplete",this.playNextVideo),this.setCurrentVideo(),this.setupScrollBehaviour();var a=requirejs("app/app");this.listenTo(a.vent,"device:orientation",this.onDeviceOrientationChange),f.updateScope(this.$el)},setupScrollBehaviour:function(){d.isLargeDevice()?this.scrollHorizontal():this.removeHorizontalScroll()},removeHorizontalScroll:function(){this.scrollHelper&&(this.scrollHelper.destroy(),this.scrollHelper=null)},scrollHorizontal:function(){return this.elementSize=this.$(".content-tile").first().outerWidth(!0),this.listWidth=this.elementSize*this.ui.items.length,this.listLength=this.ui.items.length,this.ui.list.width(this.listWidth),this.updateControls(),this.scrollHelper?void this.scrollHelper.scroller.refresh():(this.scrollHelper=e.createScrollX(this.ui.container[0],{arrowLeft:this.ui.prevButton,arrowRight:this.ui.nextButton,slowScroll:!0}),this.scrollHelper.scroller.on("IScrollHelper:scrollBound",b.bind(c.prototype.onScrollBound,this)),void this.scrollToCurrentVideo())},updateControls:function(){window.devicejs.desktop()&&(d.isPortrait()||this.listWidth<=this.ui.container.outerWidth(!0)?this.ui.controls.hide():this.ui.controls.show())},onDeviceOrientationChange:function(){this.setupScrollBehaviour()},playNextVideo:function(){var a=this.currentVideo.next(),b=a.data("islocked"),c="";return b?(this.currentVideo=this.currentVideo.next(),this.playNextVideo()):(c=this.currentVideo.next().find("a").attr("href"),c||(c=this.ui.items.first().find("a").attr("href")),void this.app.execute("change-path",c))},slideIn:function(){c.prototype.slideIn.apply(this,arguments)},slideOut:function(){c.prototype.slideOut.apply(this,arguments)},setCurrentVideo:function(){var b=null,c=a(".video-player").data("id");b=this.ui.list.find('[data-id="'+c+'"]'),this.currentVideo=a(b).last(),this.currentVideoIndex=a(this.currentVideo).index(),this.currentVideoIndex>0&&(this.ui.items.first().remove(),this.currentVideoIndex--,d.isLargeDevice()&&(this.listWidth=this.listWidth-this.elementSize)),a(this.currentVideo).addClass("selected")},scrollToCurrentVideo:function(){var a=this;b.delay(function(){a.scrollHelper.scroller.scrollToElement(".related-content-list div:nth-child("+a.currentVideoIndex+")",2e3)},1e3)}});return g}),define("app/views/modules/related-content/related-content-playlist",["jquery","_","app/views/modules/related-content/related-content-videos","app/common/media-query-utils","app/common/iscroll-helper"],function(a,b,c,d,e){var f=c.extend({events:function(){return b.extend({},b.result(c.prototype,"events"),{"click .related-content-list-tile a":"onItemClicked"})},initialize:function(){c.prototype.initialize.apply(this,arguments),this.relatedCachedData={},this.defaults=b.extend({},c.prototype.defaults,{autoPlay:!1,scrollX:!0})},onShow:function(){c.prototype.onShow.apply(this,arguments),this.listenTo(this.app.vent,"videoplayer.playlistComplete",this.playNextVideo),this.currentVideo=a(this.ui.items[0]);var b=this.ui.items.first();this.playVideo(b)},setCurrentClip:function(a){var b=this.getVideoData(a);this.currentVideoIndex=b.index,this.currentVideo.removeClass("selected"),this.currentVideo=a,this.currentVideo.addClass("selected"),c.prototype.scrollToCurrentVideo.apply(this,arguments)},onItemClicked:function(b){b.preventDefault();var c=a(b.currentTarget).parent();this.playVideo(c)},playNextVideo:function(){var b;b=this.currentVideoIndex===this.listLength?a(this.ui.items[0]):this.currentVideo.next(),this.playVideo(b)},playVideo:function(a){this.setCurrentClip(a);var b=this.getVideoData(a);this.app.vent.trigger("RelatedContent.videoClipChanged",b)},getVideoData:function(a){var b={},c=a.find("a");return b.contentUri=c.data("contenturi"),this.relatedCachedData[b.contentUri]?this.relatedCachedData[b.contentUri]:(b.url=c.attr("href"),b.shortTitle=c.data("shorttitle"),b.duration=c.data("duration"),b.index=c.data("related"),this.relatedCachedData[b.contentUri]=b,b)}});return f}),define("app/views/modules/related-content/related-content-games",["jquery","_","app/views/modules/related-content/related-content-base","app/common/media-query-utils","app/common/iscroll-helper","app/common/picturefill-utils"],function(a,b,c,d,e,f){var g,h=c.extend({events:{},onShow:function(){g=a(window),g.on("resize.RelatedContentGames",a.proxy(this.onVerticalResize,this)),this.scrollHelper=null,this.onVerticalResize(),f.updateScope(this.$el)},onClose:function(){g.off(".RelatedContentGames"),this.scrollHelper&&this.scrollHelper.scroller.destroy()},onVerticalResize:function(){return d.isLargeLandscape()?(this.updateColumns(),void(this.ui.container.height()>=this.ui.list.height()?this.removeScroller():this.installScroller())):void this.removeScroller()},updateColumns:function(){var b=a(".game-player"),c=g.width()-b.width(),d=350;c>d?(this.ui.container.addClass("double-column"),this.$el.width(d)):(this.ui.container.removeClass("double-column"),this.$el.width(""))},removeScroller:function(){this.$el.addClass("noscroll"),this.destroyScroller()},destroyScroller:function(){this.scrollHelper&&(this.scrollHelper.destroy(),this.scrollHelper=null)},installScroller:function(){return this.$el.removeClass("noscroll"),this.scrollHelper?void this.scrollHelper.scroller.refresh():(this.scrollHelper=e.createScrollY(this.ui.container[0],{slowScroll:!0,arrowLeft:this.ui.prevButton,arrowRight:this.ui.nextButton,autoHideArrows:!0},{eventPassthrough:!1,click:!0}),this.scrollHelper.scroller.on("IScrollHelper:scrollBound",b.bind(c.prototype.onScrollBound,this)),void this.ui.prevButton.addClass("is-boundsreached"))}});return h}),define("app/views/modules/content-stream/stream-scroll-orientation",["app/common/media-query-utils"],function(a){function b(){return window.Modernizr.cssvwunit&&a.isLargeLandscape()}function c(){return!b()}return{isHorizontal:b,isVertical:c}}),define("app/views/modules/content-stream/settings",{blockItemDataId:"id",blockItemIdSelector:'.stream-block-item[data-id="%s"]',blockItemPictureDoneSelector:".content-item:not([data-picture-applied])",blockItemSelector:".stream-block-item",streamThemeSelector:".stream-theme",blockItemSelectorNotLazyLoaded:".stream-block-item:not([data-lazyloading-applied])",iScrollStylesCleanupDelay:100,isPictureInjected:"isPictureInjected",lazyLoadingAppliedAttribute:"data-lazyloading-applied",pictureAppliedAttribute:"data-picture-applied",picturefillSelector:"img[srcset]",pictureSourceSelector:".stream-item-picture-src",pictureTargetSelector:".stream-item-picture-target",routeClickEvent:"click.bookmarkstream",routeEventNamespace:".bookmarkstream",routeSelector:"a.route",streamContent:".stream-content",streamBlock:".stream-block",streamBlocks:".stream-blocks",streamContentWidthPading:50,streamSelector:".stream",topScrollOffsetPercentage:.3,verticallElementReachedOffset:"100%",elementsOutsideViewportLimit:10,horizontalDetectDelay:600,streamScrollOrientationData:"scroll-orientation",verticalOrientation:"vertical",horizontalOrientation:"horizontal"}),define("app/views/modules/content-stream/bookmark",["_","jquery","./settings"],function(a,b,c){function d(a){t.setItem("stream.bookmark.id",a.id),t.setItem("stream.bookmark.url",a.url)}function e(){t.removeItem("stream.bookmark.id"),t.removeItem("stream.bookmark.url")}function f(){return{id:t.getItem("stream.bookmark.id"),url:t.getItem("stream.bookmark.url")}}function g(a){var b=a.closest(c.blockItemSelector),d=b.data(c.blockItemDataId);return d}function h(a){var b=g(a),c=window.location.toString();return{id:b,url:c}}function i(a){var b=h(a);d(b)}function j(a){var b=window.location.toString();return a.id&&a.url===b}function k(a){var b=f();return j(b)?(n(b.id,a),void e()):void e()}function l(b,d){var e=a.s.sprintf(c.blockItemIdSelector,b),f=d.find(e);return 0!==f.length?f:void 0}function m(a){var d=a.offset(),e=b(window).height(),f=e*c.topScrollOffsetPercentage;if(d.top<f)return-1;var g=d.top-f;return g}function n(b,c){var d=l(b,c);if(!a.isUndefined(d)){var e=m(d);0>e||o(e)}}function o(a){b(window).scrollTop(a)}function p(a){var c=b(a.currentTarget);i(c)}function q(){this.$el.off(c.routeEventNamespace)}function r(a){s&&(k(a.$el),a.$el.on(c.routeClickEvent,c.routeSelector,p),a.listenTo(a,"close",q))}var s="localStorage"in window,t=window.localStorage;return{bookmarkBlockItem:i,clearBookmarkInfo:e,closeBookmarkStream:q,createBookmakrInfo:h,doesBookmarkApply:j,getBlockId:g,getBlockWithId:l,getBookmarkInfo:f,getOffsetPosition:m,goToBookmark:k,moveToBookMark:n,onClickRoute:p,respoistionScroll:o,saveBookmarkInfo:d,setup:r}}),define("app/views/modules/content-stream/lazy-loading",["_","jquery","waypoints","./settings"],function(a,b,c,d){function e(a){var b,c=a.find(d.pictureSourceSelector);return c.length>0&&(b=c.html()),b}function f(b){var c=e(b);if(a.isEmpty(c))return!1;var f=b.find(d.pictureTargetSelector);return f.html(c),b}function g(a){var b=a.find(d.picturefillSelector).toArray();return window.picturefill({elements:b}),a}function h(a){f(a),g(a);var b=a.find("img");return a.trigger("injectpicture.stream",[b]),a}function i(){var a=b(d.streamSelector).find(d.picturefillSelector).toArray();window.picturefill({elements:a})}function j(a){var b=a.data(d.isPictureInjected);return b?!1:(h(a),a.data(d.isPictureInjected,!0),a)}return{injectPicture:h,injectPictureTag:f,pictureSetup:j,updatePictureElements:i,applyPictureFill:g,getPictureContent:e}}),define("app/views/modules/content-stream/lazy-loading-refresh",["_","jquery","./settings","./lazy-loading"],function(a,b,c,d){function e(a,b){var c=b.data.view;a(c)}function f(b,d){var f=b.$(c.streamContent),g={view:b
},h=a.partial(e,d);return f.on("appendchildren.pagination",g,h),b}function g(a){var b=a.$(c.streamBlocks);return b.off("appendchildren.pagination"),a}function h(a,b){return f(a,b)}function i(a){return g(a)}return{onBlocksAppended:e,listenForAppendedBlocks:f,destroyAppendedBlocksListener:g,setup:h,destroy:i}}),define("app/views/modules/content-stream/lazy-loading-vertically",["_","jquery","./settings","./lazy-loading","./lazy-loading-refresh"],function(a,b,c,d,e){function f(a){var e=b(a.element);d.pictureSetup(e);a.destroy(),e.attr(c.pictureAppliedAttribute,"true")}function g(a,b){var d=b.waypoint({offset:c.verticallElementReachedOffset,handler:function(){f(this)}});return a.data("waypoints",d),b.attr(c.lazyLoadingAppliedAttribute,"true"),b}function h(a){var b=a.$(c.streamSelector),f=a.$(c.blockItemPictureDoneSelector);return g(b,f),d.updatePictureElements(),e.setup(a,k),a}function i(a){a.destroy()}function j(b){e.destroy(b);var d=b.$(c.streamSelector),f=d.data("waypoints");a.forEach(f,i);var g=b.$(c.blockItemPictureDoneSelector);return g.removeAttr(c.lazyLoadingAppliedAttribute),b}function k(a){j(a),h(a)}return{setup:h,destroy:j,refresh:k,setWaypoints:g,waypointReached:f}}),define("app/views/modules/content-stream/vertical-scroll",["_","jquery","./lazy-loading-vertically"],function(a,b,c){function d(){f(this)}function e(a){c.setup(a),a.listenTo(a,"close",d)}function f(a){a.stopListening(a,"close",d),c.destroy(a)}return{setup:e,destroy:f}}),define("app/views/modules/content-stream/horizontal-stream-width",["_","jquery","./settings"],function(a,b,c){function d(a){var d=a.find(c.streamContent),f=d.children(c.streamBlocks),g=f.children(c.streamBlock),h=0;g.each(function(a,c){h+=b(c).outerWidth(!0)});var i=e(f);return d.width(h+i+c.streamContentWidthPading),a}function e(a){var b=parseInt(a.css("padding-left"),10),c=parseInt(a.css("margin-left"),10),d=b+c;return d}function f(a){return a.css("width",""),a}function g(a){var b=a.data.stream;d(b)}function h(a){var b=a.find(c.streamContent),d={stream:a};return b.on("appendchildren.streamwidth",d,g),a}function i(a){var b=a.find(c.streamContent);return b.off("appendchildren.streamwidth"),a}function j(a){return h(a),d(a)}function k(a){return i(a),f(a)}return{setStreamInnerWidth:d,streamBlocksLeftOffset:e,removeStreamInnerWidth:f,setup:j,destroy:k}}),define("app/views/modules/content-stream/horizontal-scroll-events",["_","jquery","iscroll","./settings"],function(a,b,c,d){function e(b){return a.pick(b,"x","y","directionX","directionY","currentPage","maxScrollX")}function f(a,c,d){var f=b.Event(c+".horizontal",{isHorizontal:!0,scroll:e(d)});return a.trigger(f,[d]),a}function g(a,b,c){return function(){f(a,b,c)}}function h(a,b,c){return a.on(b,g(c,b,a))}return{getScrollInfo:e,triggerEvent:f,scrollHandler:g,listenTo:h}}),define("app/views/modules/content-stream/horizontal-scroll-touch",["_","jquery","iscroll","./horizontal-scroll-events","./settings"],function(a,b,c,d,e){function f(a){var b=a.data("iscroll");return b&&b.destroy(),a}function g(b){var c=b.children();return a.delay(function(){c.removeAttr("style")},e.iScrollStylesCleanupDelay),b}function h(a){return f(a),g(a),a}function i(a){var b=a.data.iscroll;b.refresh()}function j(a,b){var c=a.find(e.streamContent),d={iscroll:b};return c.on("appendchildren.scrolltouch",d,i),a}function k(a){var b=a.find(e.streamBlocks);return b.off("appendchildren.scrolltouch"),a}function l(b,e){e=a.extend(n,e);var f=new c(b[0],e);return b.data("iscroll",f),d.listenTo(f,"scroll",b),d.listenTo(f,"scrollStart",b),d.listenTo(f,"scrollEnd",b),j(b,f),f}function m(a){return k(a),h(a),a}var n={mouseWheel:!0,scrollX:!0,scrollY:!1,probeType:2,keyBindings:!0,eventPassthrough:!0,deceleration:.0015,bounce:!1,bounceTime:0,acceleration:.005};return{iSrollSettings:n,setup:l,destroy:m}}),define("app/common/event-listener",["_","jquery"],function(a,b){function c(a,b,c,d){return d.preventDefault(),d.data=b,c.call(a,d),!1}function d(d,e,f,g){var h=a.partial(c,d,g,f);b(d).data("__event__"+e,h),d.addEventListener(e,h,!1)}function e(a,c){var d=b(a).data("__event__"+c);a.removeEventListener(c,d,!1)}function f(a,b,c,e){return a.each(function(a,f){d(f,b,c,e)}),a}function g(a,b){return a.each(function(a,c){e(c,b)}),a}return{eventHandler:c,addHandler:d,removeHandler:e,on:f,off:g}}),define("app/views/modules/content-stream/horizontal-scroll-controls",["_","jquery","iscroll","app/common/event-listener","app/common/media-query-utils","./horizontal-scroll-events","./settings"],function(a,b,c,d,e,f,g){function h(a,b){return b===C.direction.previous?a.options.keyBindings.left:a.options.keyBindings.right}function i(a,b){var c=h(a,b);return a._key({keyCode:c}),a._execEvent("scroll"),a}function j(a,b){var c=b.data(C.directionData);return b.data(C.shouldScrollData,!0),k(b,a,c),b}function k(a,b,c){return a.data(C.shouldScrollData)!==!0?void b._execEvent("scrollEnd"):(i(b,c),void window.setTimeout(function(){k(a,b,c)},C.scrollSpeed))}function l(a,b,c){return b+c>=a&&a>=b-c}function m(a,b){return b.data(C.shouldScrollData,!1),a}function n(a){return l(a,0,C.positionProximity)}function o(a,b){return l(a,b,C.positionProximity)}function p(a){var c=b(a.wrapper),d=c.find(C.previousSelector),e=c.find(C.nextSelector);n(a.x)?d.removeClass("stream-control-visible"):d.addClass("stream-control-visible");var f=0!==a.maxScrollX,g=o(a.x,a.maxScrollX);!f||g?e.removeClass("stream-control-visible"):e.addClass("stream-control-visible")}function q(b,c,d){var e=c.wrapperWidth*C.pagePercent;d===C.direction.next?(e=-1*e,e=c.x+e,e=Math.max(e,c.maxScrollX)):(e=c.x+e,e=Math.min(e,0)),c.scrollTo(e,0,C.pageTransitionTime),"number"==typeof B&&(window.clearTimeout(B),B=null),B=window.setTimeout(a.partial(r,c),C.pageTransitionUpdateDelay)}function r(a){a._execEvent("scroll"),a._execEvent("scrollEnd"),p(a)}function s(a){a.preventDefault();var c=b(a.currentTarget),d=c.data(C.directionData),e=a.data.iscroll;q(c,e,d)}function t(a){var c=b(a.currentTarget);return j(a.data.iscroll,c)}function u(a){var c=b(a.currentTarget);return m(a.data.iscroll,c)}function v(a){var c=b(a.currentTarget);return p(a.data.iscroll,c)}function w(a){var b=a.data.stream,c=a.data.iscroll;return p(c,b)}function x(a,b){var c=a.find(g.streamContent),d={stream:a,iscroll:b};return c.on("appendchildren.streamControls",d,w),a}function y(a){var b=a.find(g.streamBlocks);return b.off("appendchildren.streamControls"),a}function z(a){if(!e.isLargeLandscape())return!1;var b=a.data("iscroll"),c=a.find(C.controlSelector),d={iscroll:b};return c.on("click.pagination",d,s),a.off(C.scrollEndEvent),a.on(C.scrollEndEvent,d,v),x(a,b),p(b,a),a}function A(a){a.off(C.scrollEndEvent);var b=a.find(C.controlSelector);return b.off(".pagination"),y(a),b.off(),a}var B,C={scrollSpeed:25,pagePercent:.8,pageTransitionTime:900,pageTransitionUpdateDelay:950,positionProximity:3,direction:{previous:"previous",next:"next"},controlSelector:".stream-control",previousSelector:".stream-control-previous",nextSelector:".stream-control-next",shouldScrollData:"shouldScroll",directionData:"direction",scrollEndEvent:"scrollEnd.horizontal.controls"};return{controlSettings:C,remoteControl:i,getKeyCode:h,startScrolling:j,scroll:k,stopScrolling:m,isNearStart:n,isNearEnd:o,updateControls:p,scrollPage:q,handleScrollPage:s,handleStartScrolling:t,handleStopScrolling:u,handleScrollEnd:v,setup:z,destroy:A}}),define("app/views/modules/content-stream/horizontal-scroll-detect",["_","jquery","iscroll","./settings"],function(a,b,c,d){function e(a){return a.data("horizontalReached",!0),setTimeout(function(){a.trigger("reached.horizontalscrolldetect")},0)}function f(a,c,f){var g=a.outerWidth();f=Math.abs(f);var h=0,i=[];return c.each(function(a,c){var j=b(this);if(j.data("horizontalReached")===!0)return!0;var k=j.position().left,l=f+g>f+k;if(l){var m=e(j);i.push(m)}return l||h++,h>d.elementsOutsideViewportLimit?!1:void 0}),i}return{checkElements:f,elementReached:e}}),define("app/views/modules/content-stream/lazy-loading-horizontally",["_","jquery","./settings","./horizontal-scroll-detect","./lazy-loading","./lazy-loading-refresh"],function(a,b,c,d,e,f){function g(a){e.pictureSetup(b(a.currentTarget))}function h(a,b,c){return d.checkElements(a,b,c.scroll.x)}function i(b,d){var e=a.partial(h,b,d),f=a.throttle(e,c.horizontalDetectDelay,{leading:!1});return f}function j(a,c){var f=b(window).width();e.updatePictureElements(),d.checkElements(a,c,f)}function k(a){var b=a.$(c.streamSelector),d=a.$(c.blockItemPictureDoneSelector);if(0!==d.length){var e=i(b,d);return b.off("scroll.horizontal.lazyloading"),b.on("scroll.horizontal.lazyloading",e),d.off("reached.horizontalscrolldetect"),d.on("reached.horizontalscrolldetect",g),j(b,d),window.picturefill(),f.setup(a,m),a}}function l(a){f.destroy(a);var b=a.$(c.streamSelector),d=a.$(c.blockItemSelector);return d.off("reached.horizontalscrolldetect"),b.off("scroll.horizontal.lazyloading"),a}function m(a){l(a),k(a)}return{setup:k,destroy:l,refresh:m}}),define("app/views/modules/content-stream/horizontal-scroll",["_","jquery","./settings","./horizontal-stream-width","./horizontal-scroll-touch","./horizontal-scroll-controls","./lazy-loading-horizontally"],function(a,b,c,d,e,f,g){function h(){window.scrollTo(0,0)}function i(){k(this)}function j(a){h();var b=a.$(c.streamSelector);return d.setup(b),e.setup(b),f.setup(b),g.setup(a),a.listenTo(a,"close",i),a}function k(a){var b=a.$(c.streamSelector);return d.destroy(b),e.destroy(b),f.destroy(b),g.destroy(a),a.stopListening(a,"close",i),a}return{setup:j,destroy:k}}),define("app/common/element-data-keys",["jquery"],function(a){function b(b,c){var d=[];return b.each(function(b,e){var f=a(e),g={};c.forEach(function(a){g[a]=f.data(a)}),d.push(g)}),d}return b}),define("app/common/request",["_","Q","jquery"],function(a,b,c){function d(){return b(c.ajax.apply(null,arguments))}function e(b,c){a.isArray(b)||(b=[b]);var e=a.map(b,function(a){return d(a,c)});return e}function f(a,c){var d=e(a,c);return b.all(d)}function g(b,c){return a.reduce(c,function(a,c){return"fulfilled"===c.state?a.push(c.value):b===!1&&a.push(c.reason),a},[])}function h(c,d,f){var h=a.partial(g,f),i=e(c,d);return b.allSettled(i).then(h)}return{ajax:f,ajaxSettled:h}}),define("app/views/modules/content-stream/pagination/stream-page-load",["_","jquery","app/common/request"],function(a,b,c){function d(a,c){var d=b.param(c),e=a+"&"+d+"&page=";return e}function e(b,c){var e=d(b,c.data),f=a.times(c.pageSize,function(a){return e+(c.startAt+a+1)});return f}function f(a){return a.pagination.moreItems===!1}function g(b){var c=a.last(b);return c.pagination.moreItems===!0?c:a.findLast(b,f)}function h(a){var b=g(a);if(b){var c=b.pagination;return c}}function i(b,c){return!a.isEmpty(c.stream)&&a.isArray(c.stream)&&(b=b.concat(c.stream)),b}function j(b){var c=a.reduce(b,i,[]);return c}function k(a){var b=h(a),c=j(a);return{pagination:b,stream:c}}function l(a,b){var d=e(a,b);return c.ajaxSettled(d)}function m(a,b){return l(a,b).then(k)}return{getPageUrl:d,getPageUrls:e,isEndOfStream:f,getLastValidPage:g,getPaginationInfo:h,mergePageResult:i,buildStream:j,mergePages:k,loadPages:l,load:m}}),define("app/views/modules/content-stream/pagination/page-state",["jquery"],function(a){function b(){}function c(c,d,e,f){var g=new b;return g.pageUrlPath=c,g.moreItems=d,g.urlKey=f||"",g.lastPageIndex=e,g.apiKey=a("html").data("apikey"),g}function d(a){var b=a.data(f.feedUrlKeyData),d=a.data(f.feedIdData),e=a.data(f.feedMoreItemsData),g=a.data(f.feedCurrentPageData),h=c(d,e,g,b);return h}function e(a){var b="";return b+="/data/"+a.pageUrlPath+".json?",b+="&urlKey="+a.urlKey,b+="&apiKey="+a.apiKey}var f={feedUrlKeyData:"feed-url-key",feedIdData:"feed-id",feedMoreItemsData:"feed-more-items",feedCurrentPageData:"feed-current-page",paginationStateData:"paginationState",scrollLimitReach:.85};return{PaginationState:b,paginationStateFactory:c,extractPaginationStateInfo:d,buildPageUrl:e}}),define("app/views/modules/content-stream/pagination/page-render",["_","jquery","app/common/templating"],function(a,b,c){function d(){var a=c.get("modules/stream/stream-blocks-collection");return a}function e(a){var c=d(),e=c.render({data:a}),f=b(e);return f}return{getPageTemplate:d,renderBlocks:e}}),define("app/views/modules/content-stream/pagination/page-should-fetch",["_","jquery"],function(a,b){function c(a,b){var c=Math.abs(b)*g.scrollLimitReach,d=Math.abs(a)>=c;return d}function d(a){return c(a.x,a.maxScrollX)}function e(){var a=b(window).scrollTop(),d=b(window.document).height();return c(a,d)}function f(a,b){var c=a.streamContent;if(!c)return!1;var e=c.data(g.paginationStateData);if(!e.moreItems)return!1;var f=a.stream,h=f.data(g.isFetchingPagesData);if(h)return!1;if(!b)return!0;var i=d(b);return i?!0:!1}var g={isFetchingPagesData:"isFetchingPages",paginationStateData:"paginationState",scrollLimitReach:.85};return{isScrollPositionEndReached:c,isHorizontalScrollEndReached:d,isVerticalScrollEndReached:e,shouldFetch:f}}),define("app/views/modules/content-stream/pagination/stream-pagination",["_","jquery","app/common/element-data-keys","app/common/templating","../settings","./stream-page-load","./page-state","./page-render","./page-should-fetch","../stream-scroll-orientation"],function(a,b,c,d,e,f,g,h,i,j){function k(a){var b=g.buildPageUrl(a),c={startAt:a.lastPageIndex,pageSize:J.initialPageLoadCount,data:{excludeIds:a.editorialIds.join(",")}};return f.load(b,c)}function l(a){return k(a,a.lastPageIndex,J.initialPageLoadCount)}function m(a){return k(a,a.lastPageIndex,J.pagesLoadCount)}function n(a,b,c){b.moreItems=c.pagination.moreItems,b.lastPageIndex=c.pagination.current;var d=h.renderBlocks(c);if(!a.streamBlocks)throw new Error("UI not available, probably a race condition");a.streamBlocks.append(d),a.streamContent.trigger(J.appendchildrenEvent,[d]);var e=a.stream.data("bottomOfStreamWaypoint");o(e)}function o(b){a.isEmpty(b)||a.forEach(b,function(a){a.context.refresh()})}function p(a){var b=a.data;return a.handleObj&&a.handleObj.data&&(b=a.handleObj.data),b}function q(b){var c=p(b);return a.isUndefined(c)||a.isUndefined(c.ui)?!1:void r(c,b.scroll)}function r(a,b){var c=i.shouldFetch(a.ui,b);return c?t(a.ui,a.paginationState,m):!1}function s(a,b){a.data(J.isFetchingPagesData,b)}function t(b,c,d){s(b.stream,!0);var e=a.partial(n,b,c),f=a.partial(s,b.stream,!1);return d(c).then(e).done(f)}function u(a){var b=a.ui.bottomOfStrem.waypoint({offset:"130%",handler:function(){r(a)}});a.ui.stream.data("bottomOfStreamWaypoint",b)}function v(b){a.isEmpty(b)||a.forEach(b,function(a){a.destroy()})}function w(b){var c=b.data("bottomOfStreamWaypoint");a.isUndefined(c)||(v(c),b.removeData("bottomOfStreamWaypoint"))}function x(a){w(a)}function y(a,b){a.off(J.scrollEndEvent),a.on(J.scrollEndEvent,b,q)}function z(a){a.off(J.scrollEndEvent)}function A(a,b){return{ui:a,paginationState:b}}function B(a,b){var c=A(a,b);j.isHorizontal()?(x(a.stream),y(a.stream,c)):(z(a.stream),u(c))}function C(a){var b=a.data(J.paginationStateData);return b?b:(b=g.extractPaginationStateInfo(a),a.data(J.paginationStateData,b),b)}function D(a){a.removeData(J.paginationStateData)}function E(b){var d=b.find(".stream-block-item[data-is-editorial]"),e=c(d,["id"]),f=a.pluck(e,"id");return f}function F(){H(this)}function G(a,b){a.listenTo(a,"close",F);var c=C(a.ui.streamContent);return c.editorialIds=E(a.ui.streamContent),c.moreItems!==!0?a:(B(a.ui,c),s(a.ui.stream,!0),t(a.ui,c,l),a)}function H(a){return x(a.ui.stream),z(a.ui.stream),D(a.ui.streamContent),a}function I(a){var b=C(a.ui.streamContent);B(a.ui,b)}var J={initialPageLoadCount:3,pagesLoadCount:3,isFetchingPagesData:"isFetchingPages",paginationStateData:"paginationState",appendchildrenEvent:"appendchildren",windowScrollEvent:"scroll.streampagination",scrollEndEvent:"scrollEnd.horizontal.pagination",windowScrollDebounceWaiting:100};return{loadPages:k,loadInitialPages:l,updateStreamUI:n,setup:G,refresh:I}}),define("app/views/modules/content-stream/pagination/index",["./stream-pagination"],function(a){return a}),define("app/common/document-info",[],function(){function a(){var a=window.document.documentElement,b=Math.max(a.clientWidth,window.innerWidth||0),c=Math.max(a.clientHeight,window.innerHeight||0),d=(window.pageYOffset||a.scrollTop)-(a.clientTop||0);return{width:b,height:c,scrollTop:d}}return a}),define("app/common/image-load-animation",["_","jquery","app/common/document-info"],function(a,b,c){function d(a,c){c.complete&&b(c).trigger(l.loadEvent)}function e(b){return function(c){b.target.removeClass(b.animationClasses),a.isFunction(b.afterCallback)&&b.afterCallback.call(this,c)}}function f(){var b=c(),d=.5*b.height,e=.5*b.width,f=d-b.scrollTop,g={offsetTop:d,scrollOffsetTop:f,offsetLeft:e};return a.merge({},b,g)}function g(a){var b=a.offset(),c=m(),d=b.top-c.scrollTop,e=d>-c.offsetTop&&d<c.height,f=b.left>-c.offsetLeft&&b.left<c.width;return e&&f}function h(b,c,d){return a.isFunction(b)?b.apply(c,d):void 0}function i(a,b){h(b.beforeCallback,this,[a]);var c=g(b.target);c?b.target.addClass(b.animationClasses):h(b.afterCallback,this,[a])}function j(b){var c=e(b);return function(d){b.target.on(l.animationEndEvent,c);var e=a.random(0,l.maxDelay);a.delay(i,e,d,b)}}function k(a,b){var c=j(b);return a.one(l.loadEvent,c).each(d)}var l={loadEvent:"load",maxDelay:300,animationEndEvent:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"},m=a.debounce(f,400,{leading:!0});return{settings:l,setup:k}}),define("app/views/modules/content-stream/theme",["_","app/common/image-load-animation"],function(a,b){function c(a,b){a.addClass(g.isLoadedClass)}function d(d,e){return b.setup(d,{target:e,animationClasses:g.loadAnimationClass,beforeCallback:a.partial(c,e)})}function e(a){var b=a.find(g.themeImageArtSelector);b.length&&d(b,a.find(g.themeSelector))}function f(b){b.once("show",a.partial(e,b.$el))}var g={isLoadedClass:"is-loaded",loadAnimationClass:"wobbly-bouncy",themeImageArtSelector:"img.stream-theme-art",themeSelector:".stream-theme"};return{setup:f,imageLoadSetup:e,beforeStartAnimation:c}}),define("app/views/modules/content-stream/unload-stream",["_","jquery","./settings"],function(a,b,c){function d(a){a.addClass(r.blockItemAnimationClass)}function e(b){var c=a.random(0,r.maxAnimationDelay);a.delay(d,c,b)}function f(a,c){e(b(c))}function g(a){return a.find(".stream-block-item")}function h(a){return a.find(c.streamSelector).data(c.streamScrollOrientationData)}function i(a){var c=b(window).width(),d=.5*c,e=a.filter(function(a,e){var f=b(e).offset();return f.left>-d&&f.left<c});return e}function j(a){var c=b(window),d=c.height(),e=c.scrollTop(),f=.5*d,g=a.filter(function(a,c){var g=b(c).offset(),h=g.top-e;return h>-f&&d>h});return g}function k(a){var b=g(a),d=h(a),e=d===c.verticalOrientation,f=e?j(b):i(b);return f}function l(a){var b=k(a);b.each(f)}function m(a){var b=a.find(c.streamThemeSelector);b.addClass(r.themeArtAnimationClass)}function n(a,b){m(a),window.devicejs.tablet()||l(a)}function o(){q(this)}function p(c){c.listenTo(c,"close",o),b(window).one(r.contentChangeEvent,a.partial(n,c.$el))}function q(a){b(window).off(r.contentChangeEvent)}var r={unloadEvent:"unloadstream",maxAnimationDelay:300,blockItemAnimationClass:"wobbly-bouncy-out",themeArtAnimationClass:"wobbly-bouncy-out",contentChangeEvent:"contentchange.stream"};return{setup:p,destroy:q,closeView:o,unloadStreamHandler:n,animateBlockItems:l}}),define("app/views/modules/content-stream/content-stream",["jquery","app/views/yeti-modules","app/common/iso-view/attach-region","./stream-scroll-orientation","./bookmark","./vertical-scroll","./horizontal-scroll","./pagination/index","./theme","./unload-stream"],function(a,b,c,d,e,f,g,h,i,j){var k=b.ModuleLayout.extend({regions:{stream:".stream"},ui:{stream:".stream",streamContent:".stream-content",streamBlocks:".stream-blocks",bottomOfStrem:"#bottom-of-stream"},initialize:function(){b.ModuleLayout.prototype.initialize.call(this),i.setup(this)},onShow:function(){c.setup(this.stream),e.setup(this),h.setup(this),j.setup(this),this.setupScrollBehaviour();var a=requirejs("app/app");this.listenTo(a.vent,"device:orientation",this.onDeviceOrientationChange)},setupScrollBehaviour:function(){var a;d.isHorizontal()?(a="horizontal",f.destroy(this),g.setup(this)):(a="vertical",g.destroy(this),f.setup(this)),this.ui.stream.data("scroll-orientation",a)},onDeviceOrientationChange:function(a){this.setupScrollBehaviour(),h.refresh(this)}});return k}),define("app/views/modules/content-stream/index",["./content-stream"],function(a){return a}),define("app/views/modules/page-summary/page-summary",["_","jquery","app/views/yeti-modules","app/common/route-group"],function(a,b,c,d){var e=c.ModuleItemView.extend({ui:{pageSummary:".page-summary"},onShow:function(){(0===this.ui.pageSummary.length||d.isEndLevel())&&this.close()}});return e}),define("app/views/modules/page-summary/index",["./page-summary"],function(a){return a}),define("app/views/modules/inline-sound/play-audio",["_","app/common/audio/index"],function(a,b){function c(a){var b=a.data("sound-id");return{id:b}}function d(d){var e=c(d);return a.isEmpty(e.id)?!1:void b.play(this,e.id)}return{getSoundInfo:c,play:d}}),define("app/views/modules/inline-sound/inline-sound",["app/views/yeti-modules","./play-audio"],function(a,b){var c=a.ModuleLayout.extend({ui:{inlineSound:"#inline-sound"},onShow:function(){b.play(this.ui.inlineSound)}});return c}),define("app/views/modules/inline-sound/index",["./inline-sound"],function(a){return a}),define("app/views/stream/blocks/block-view",["app/common/iso-view/index"],function(a){return a}),define("app/views/stream/blocks/index",["./block-view"],function(){}),define("app/views/stream/items/alpha/letters",["_"],function(a){function b(){a.isEmpty(f)&&(f=e.data.split(e.separator));var b=f.slice(0);return a.shuffle(b)}function c(a){return a.shift()}function d(c){var d=b();return a.pull(d,c),d}var e={separator:"",data:"abcdefghijklmnopqrstuvwxyz"},f=[];return{settings:e,buildSet:b,getSet:d,getItem:c}}),define("app/views/stream/items/alpha/alpha-button-model",["_","backbone","./letters"],function(a,b,c){var d=b.Model.extend({defaults:{letter:""},initialize:function(){this.letters=c.getSet()},nextLetter:function(){var a=this.getLetter();return this.set("letter",a),a},getLetter:function(){var b;return a.isEmpty(this.letters)&&(b=this.get("letter"),this.letters=c.getSet(b)),b=c.getItem(this.letters)}});return d}),define("app/views/stream/items/alpha/image-behaviour",["_","jquery","app/common/audio/index"],function(a,b,c){function d(a){b(a.currentTarget).removeClass(i.hoverAnimation)}function e(a){b(a.currentTarget).removeClass(i.loadAnimation)}function f(a){b(a.currentTarget).addClass(i.loadAnimation).removeClass(i.unloadedClass)}function g(a,c){c.complete&&b(c).trigger(i.loadEvent)}function h(a){return a.on("click",d).on(i.animationEndEvent,e).one(i.loadEvent,f).each(g)}var i={unloadedClass:"is-unloaded",loadAnimation:"bounceIn",hoverAnimation:"alpha-jiggle",loadEvent:"load",animationEndEvent:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"};return{settings:i,set:h}}),define("app/common/alpha-buttons/alpha-buttons",["_","app/common/get-json-script"],function(a,b){function c(){return a.isEmpty(g)&&(g=b(f.sourceSelector,!0)),g}function d(b,c){c=c.toUpperCase();var d=b[c];if(!a.isEmpty(d))return d[0]}function e(a){var b=c(),e=d(b,a);return e}var f={sourceSelector:"script#alpha-button-animations"},g=[];return{fetch:c,getAnimation:e}}),define("app/common/animations/available-formats",{flash:"flash",flumpLarge:"flump-large",flumpSmall:"flump-small",pngSequence:"png-sequence"}),define("app/common/animations/animation-format",["_"],function(a){function b(b,c){return a.isEmpty(b)?!1:-1!==b.indexOf(c)}function c(a){return i&&b(a,"flash")}function d(a){return j&&b(a,"flump-large")}function e(a){return j&&b(a,"flump-small")}function f(a){return b(a,"png-sequence")}function g(a){var b;return b=c(a)?"flash":d(a)?"flump-large":e(a)?"flump-small":f(a)?"png-sequence":null}var h=window.swfobject,i=h.hasFlashPlayerVersion("9"),j=Modernizr.canvas;return{getFormat:g,hasPngSequence:f,hasFlumpSmallSupport:e,hasFlumpLargeSupport:d,hasFlashSupport:c,animationHasFormat:b}}),define("app/common/animations/animation-audio-file",["_","Q","jquery","./available-formats"],function(a,b,c,d){function e(a){var b=a.gspLocation+"/"+a.preferredFormat+"/animate.json";return b}function f(a){return b(c.get(a))}function g(b){var c;return!a.isUndefined(b)&&b.soundFile&&(c=b.soundFile),c}function h(a){var b=e(a);return f(b).then(g)}function i(a){return a.preferredFormat===d.pngSequence?h(a):b("sound.mp3")}function j(a){return i(a).then(function(b){return a.audioFile=b,a})}return{getUrl:e,fetch:f,getSoundFile:g,getAudioFile:h,getAnimationAudio:i,setAudio:j}}),define("app/common/animations/animation-audio-play",["_","Q","jquery","./available-formats","soundjs"],function(a,b,c,d,e){function f(a){var b=a.gspLocation+"/"+a.preferredFormat+"/"+a.audioFile;return b}function g(a){return h()}function h(){return e.Sound.stop()}function i(a){try{return e.Sound.loadComplete(a)}catch(b){return!1}}function j(c){var d=b.defer();if(a.isEmpty(c.audioFile))return b(c);var g=f(c);return i(g)?d.resolve(c):(e.Sound.registerSound(g,c.urlKey),e.Sound.addEventListener("fileload",function(a){d.resolve(c)})),d.promise}function k(a){var b=e.Sound.play(a.urlKey);return b.addEventListener("complete",g),b}return{getUrl:f,loadAudio:j,playSound:k,stopAllSounds:h}}),define("app/common/animations/animation-audio",["soundjs","./animation-audio-file","./animation-audio-play"],function(a,b,c){function d(){return a.Sound.initializeDefaultPlugins()}return{setAudio:b.setAudio,loadAudio:c.loadAudio,playSound:c.playSound,initialize:d}}),define("app/common/animations/animation-atlas",["_","Q","jquery"],function(a,b,c){function d(a){var b=a.gspLocation+"/"+a.preferredFormat+"/library.json";return b}function e(a){return b(c.ajax({url:a})).then(JSON.parse)}function f(a){var b=a.textureGroups[0].atlases.length;return b}function g(a){var b=d(a);return e(b).then(f)}function h(a){return g(a).then(function(b){return a.atlasInfo=b,a})}return{getUrl:d,fetch:e,getAtlases:f,getAtlas:g,setAtlas:h}}),define("app/common/animations/animation-halt",["jquery"],function(a){function b(){window.clearInterval(e),e=void 0}function c(){return b(),e=window.setTimeout(d,1e4)}function d(){b();var c=requirejs("app/common/animations/animation-stop");c.stop(),a(window.document).trigger("halt.screenanimation")}var e;return{initiate:c,clear:b,halt:d}}),define("app/common/animations/animation-play",["_","Q","./available-formats","./animation-format","./animation-audio","./animation-atlas","./animation-halt","jsembed","flambe"],function(a,b,c,d,e,f,g){function h(c){var g=d.getFormat(c.predicateList);return c.preferredFormat=g,a.isNull(g)?b(null):b(c).then(e.setAudio).then(f.setAtlas).then(e.loadAudio).then(j).fail(i)}function i(a){throw g.halt(),a}function j(a){return window.dntPlay(a.gspLocation,a.preferredFormat,a.atlasInfo)}function k(){g.halt()}return window.dntError=k,{play:h,playAnimation:j}}),define("app/common/animations/animation-viewport",["jquery"],function(a){function b(){return window.innerHeight<window.innerWidth}function c(){var c=a(window),d=b(),e=d&&c.height()>768,f=!d&&c.width()>768;return e||f}return{isOrientationLandscape:b,isDesktop:c}}),define("app/common/animations/animation-ui",["_","Q","jquery","app-resource-base","./animation-play","./animation-viewport"],function(a,b,c,d,e,f){function g(){var a={};return a.background=c("#do-not-touch-background"),a.container=c("#do-not-touch-container"),a.screen=c("#do-not-touch-screen"),a.canvas=c("#do-not-touch-container-canvas"),a}function h(){return m||(m=g()),m}function i(){if(!a.isUndefined(m)){var b=m.canvas[0];if(b){var c=b.getContext("2d");c.clearRect(0,0,b.width,b.height)}return b}}function j(){return a.isUndefined(m)?void 0:(m.container.addClass("hidden"),m.container.css("z-index","0"),m.screen.addClass("hidden"),m.background.addClass("hidden"),m.container)}function k(){i(),j()}function l(){var a=h(),b=f.isDesktop();a.container.removeClass("hidden"),a.screen.removeClass("hidden"),a.background.removeClass("hidden");var d=a.canvas[0];d&&(d.width=a.container.width(),d.height=a.container.height()),a.container.css("top","30%"),f.isOrientationLandscape()&&a.container.css("top",c(".section-header").height()-100+"px"),b&&a.container.css("-webkit-transform","scale(.85)")}var m;return{show:l,reset:k,clearCanvas:i,hideContainer:j}}),define("app/common/animations/animation-embed",["_","Q","jquery","app-resource-base","jsembed","./animation-ui"],function(a,b,c,d,e){function f(){if(!h){var a={base:d+"/js/vendor/",api:"flambe",autoscale:"true",allowtouchmove:"true",flambeEmbed:d+"/js/vendor/main-html.min.js"};try{e.embed("flambe.js","do-not-touch-container",1024,768,a,{}),h=!0}catch(b){}return h}}function g(){return f()}var h=!1;return{embed:g,embedScripts:f}}),define("app/common/animations/animation-stop",["jquery","./animation-audio-play","./animation-ui","./animation-halt"],function(a,b,c,d){function e(){d.clear(),c.reset(),b.stopAllSounds()}function f(){e(),a(window.document).trigger("stop.screenanimation")}function g(){window.dntFinished=f}return{expose:g,stop:e,animationFinished:f}}),define("app/common/animations/animation",["./animation-play","./animation-embed","./animation-ui","./animation-stop","./animation-halt"],function(a,b,c,d,e){function f(){return d.expose(),b.embed()}function g(b){return c.show(),e.initiate(),a.play(b)}return f(),{start:g,install:f}}),define("app/common/animations/index",["./animation","./animation-audio"],function(a,b){return{startAnimation:a.start,initializeAudio:b.initialize,playSound:b.playSound}}),define("app/views/stream/items/alpha/alpha-button-view",["_","jquery","backbone","marionette","./alpha-button-model","./image-behaviour","app/common/alpha-buttons/alpha-buttons","app/common/animations/index","app/common/audio/index","app/common/reporting/index"],function(a,b,c,d,e,f,g,h,i,j){var k=d.ItemView.extend({template:"modules/stream/items/alpha/alpha-button-picture",initialize:function(){this.hasBeenClicked=!1,this.model=new e,this.listenTo(this.model,"change:letter",this.render)},listenToAnimationEvents:function(){this.removeAnimationListeners(),b(window.document).one("stop.screenanimation halt.screenanimation",a.bind(this.nextLetter,this))},removeAnimationListeners:function(){b(window.document).off(".screenanimation")},onShow:function(){this.nextLetter(),this.$el.on("click.alphaview",{view:this},this.buttonClick)},onClose:function(){this.$el.off("click.alphaview"),this.removeAnimationListeners()},onRender:function(){f.set(this.$("img"))},nextLetter:function(){return this.hasBeenClicked&&i.play(this,"alpha-change"),this.model.nextLetter()},getCurrentLetter:function(){return this.model.get("letter")},buttonClick:function(b){var c=b.data.view;j.send("reportAlpha"),i.play(this,"alpha-tap",a.bind(c.playAlphaButton,this,b))},playAlphaButton:function(a){var b=a.data.view;b.hasBeenClicked=!0,h.initializeAudio(),b.triggerAnimation.call(b,this),b.listenToAnimationEvents()},triggerAnimation:function(a){var b=this.getCurrentLetter();return this.showAnimation(b,a)},showAnimation:function(b,c){var d=g.getAnimation(b);return window.dntStart=a.bind(function(){h.playSound(d)},c),d?h.startAnimation(d):this.nextLetter(),d}});return k}),define("app/views/stream/items/alpha/alpha-view",["_","jquery","marionette","./alpha-button-view"],function(a,b,c,d){return c.Layout.extend({regions:{alphaButton:".alpha-button"},onShow:function(){var a=new d;this.alphaButton.show(a)}})}),define("app/views/stream/items/alpha/index",["./alpha-view"],function(a){return a}),define("app/common/tve-utils/tve-view-state",["_","jquery","./tve-bumper"],function(a,b,c){function d(b,d){var i=a.merge({},h,d);b.app=requirejs("app/app"),b.tveBumper=c.getInstance(),b.listenTo(b.app.vent,"TVE:unlock-content",a.partial(f,b,i)),b.listenTo(b.app.vent,"TVE:lock-content",a.partial(g,b,i)),
b.once("show",a.partial(e,b,i))}function e(a,b){a.isLockedContent=a.ui.route.data("auth-required"),a.isLockedContent===!0&&a.tveBumper.tve.authorized?f(a,b):g(a,b)}function f(a,b){a.isLockedContent=a.ui.route.data("auth-required"),a.ui.tileIcon&&a.tveBumper.tve.authorized&&a.ui.tileIcon.hasClass(h.lockedIconClass)&&a.ui.tileIcon.addClass(b.unlockedIconClass).removeClass(b.lockedIconClass)}function g(a,b){if(a.ui.tileIcon){var c=a.ui.route.data("auth-required");c&&c===!0&&a.ui.tileIcon.addClass(b.lockedIconClass).removeClass(b.unlockedIconClass)}}var h={unlockedIconClass:"video-icon",lockedIconClass:"tile-true-icon",loginFooterClass:".tve-login-button",logoutFooterClass:".tve-logout-button"};return{setup:d}}),define("app/views/stream/items/content-item/image-load",["_","app/common/image-load-animation"],function(a,b){function c(a,b){a.addClass("is-loaded")}function d(a,b){a.addClass("is-done")}function e(a,b,c){return f(c,a.$el)}function f(e,f){return window.devicejs.tablet()?void f.addClass("is-loaded is-done"):b.setup(e,{target:f,animationClasses:"wobbly-bouncy",beforeCallback:a.partial(c,f),afterCallback:a.partial(d,f)})}function g(b){var c=b.$("img.main-content-image");c.length?f(c,b.$el):b.$el.one("injectpicture.stream",a.partial(e,b))}function h(b){b.once("show",a.partial(g,b))}return{setup:h,imageLoadSetup:g,injectPictureHandler:e,beforeAnimationHandler:c}}),define("app/views/stream/items/content-item/content-item-view",["_","jquery","marionette","app/common/tve-utils/tve-bumper","app/common/tve-utils/tve-view-state","./image-load","app/common/audio/index"],function(a,b,c,d,e,f,g){var h=c.ItemView.extend({ui:{route:"a.route",tileIcon:".stream-tile-icon"},initialize:function(){f.setup(this),e.setup(this)},onShow:function(){g.playOnView(this,"stream-tile-click","a.route")}});return h}),define("app/views/stream/items/content-item/index",["./content-item-view"],function(a){return a}),define("app/views/stream/items/index",["./alpha/index","./content-item/index"],function(){}),define("app/views/stream/index",["./blocks/index","./items/index"],function(){}),define("app/views/register-views",["app/views/modules/body/title","app/views/modules/body/back-button","app/views/modules/body/events/event-end-level","app/views/modules/body/event/event-poll-stream","app/views/modules/body/sticky-header","app/views/modules/body/video/video-content-1.0.0","app/views/modules/body/video/video-player","app/views/modules/body/video/video-related","app/views/modules/body/flipbook/flipbook-content-1.0.0","app/views/modules/body/property/branding","app/views/modules/body/property/title","app/views/modules/body/property/filters","app/views/modules/body/property/content","app/views/modules/body/property/character","app/views/modules/body/property/ad-container","app/views/modules/body/side-panel-tabs","app/views/modules/body/style-guide/style-guide","app/views/modules/body/sitemap/sitemap-1.0.0","app/views/modules/footer/legal","app/views/modules/footer/tve-footer","app/views/modules/body/comments-1.0.0","app/views/modules/body/kcs/voting","app/views/modules/body/kcs/nominees-content","app/views/modules/body/error/page-not-found","app/views/modules/nickjr-header/index","app/views/modules/navigation/index","app/views/modules/property-carousel/index","app/views/modules/body-header/index","app/views/modules/property-filters/index","app/views/modules/game-player/index","app/views/modules/sidebar/index","app/views/modules/grownups/index","app/views/modules/simple-footer/index","app/views/modules/end-level-info/index","app/views/modules/related-content/related-content-base","app/views/modules/related-content/related-content-videos","app/views/modules/related-content/related-content-playlist","app/views/modules/related-content/related-content-games","app/views/modules/content-stream/index","app/views/modules/page-summary/index","app/views/modules/inline-sound/index","./stream/index"],function(){return!0}),define("app/sm4-config.js",["jquery","marionette"],function(a,b){window.MTVN=window.MTVN||{},MTVN.conf=MTVN.conf||{},MTVN.conf.sm4=MTVN.conf.sm4||{};var c=MTVN.conf.sm4;c.staging!==!0&&(c.staging=!1),c.ucid=c.staging?"D9BAFFFF022B7F530002FFFFBAD9":"D3BAFFFF030AF55F0002FFFFBAD3",c.widgets={comments:{name:"Comments",opts:{maxResults:100,enableComments:!0,showPager:!1,enableCommentsCollapsed:!1,showPostToFacebook:!1,showPostToTwitter:!1,sortingVisible:!1,includeGuestActivities:!1,showPopularActivities:!1,commentMessage:"Enter your comment here...",title:null,hideUserQuickView:!0,showAuthorThumbnail:!1,localizedStrings:{PreModMessage:"Thanks! Your comment was posted. Once it's approved, it will show up on the site!",PreModMessageReply:"Thanks! Your reply was posted. Once it's approved, it will show up on the site!",EmptySecondContentOrAuthor:"Start a conversation!"}}},userbar:{name:"UserBar",opts:{displayMode:"PersistentBottom",showThumbnail:!1,showDisplayName:!1}}}}),requirejs(["app/app","app/common/templating","app/views/register-views","app/sm4-config.js","jquery.sm4"],function(a){a.start()}),define("app/main",function(){});

}
/*
     FILE ARCHIVED ON 21:21:58 Jul 28, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 16:31:22 Jun 21, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.563
  exclusion.robots: 0.024
  exclusion.robots.policy: 0.013
  esindex: 0.011
  cdx.remote: 10.965
  LoadShardBlock: 503.08 (3)
  PetaboxLoader3.resolve: 466.984 (5)
  PetaboxLoader3.datanode: 220.493 (5)
  load_resource: 261.795 (2)
*/